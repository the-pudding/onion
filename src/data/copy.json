{"intro":[{"type":"text","value":"This is a story about onions and math."},{"type":"small","value":"Not your taste? Try something else from <a href=https://pudding.cool>The Pudding</a>."},{"type":"text","value":"Tens of millions of people are curious about how to properly dice an onion, <a href=https://www.youtube.com/results?search_query=how+to+dice+an+onion target=_blank rel=noreferrer>according to YouTube</a>."},{"type":"text","value":"In 2021, renowned chef / food journalist J. Kenji L√≥pez-Alt <a href=https://www.instagram.com/p/CV6L30MBFy8/ target=_blank rel=noreferrer>broke out some math</a> to optimize a technique for getting uniform piece sizes. How does it work?"}],"hed":"Dicing an Onion, The Mathematically Optimal Way","author1":"<a target=_blank rel=noreferrer href=https://pudding.cool/author/andrew-aquino>Andrew Aquino</a>","author2":"<a target=_blank rel=noreferrer href=https://pudding.cool/author/russell-samora>Russell Samora</a>","story":[{"type":"text","value":"This is an onion."},{"type":"Component","value":{"showControls":"false","showCuts":"false"}},{"type":"text","value":"What‚Äôs the best way to cut it? That is, how do we get the most uniform piece size?"},{"type":"text","value":"The average onion has 7-13 layers <mark>[citation needed]</mark>. For the sake of example, let‚Äôs assume our onion has 10 layers. We can represent the layers as concentric circles."},{"type":"text","value":"Let‚Äôs try a common approach: <mark>vertical cuts</mark>."},{"type":"Component","value":{"showControls":"false","highlightExtremes":"true"}},{"type":"text","value":"The pieces <strong class=primary>near the center line</strong> are fairly consistent in shape and size."},{"type":"text","value":"But <strong class=secondary>along the bottom</strong> there are some noticeably larger pieces. When you dice an onion, you‚Äôre probably not imagining pieces like these."},{"type":"text","value":"This inconsistency can be measured by calculating the <strong>standard deviation</strong> of our pieces‚Äô areas. A higher standard deviation means a greater variation in piece size. So to obtain the most consistently sized pieces, we want to make the standard deviation <em>as small as possible</em>."},{"type":"Component","value":{"toggleExplode":"true","showStandardDeviation":"true","caption":"Adjust the slider to see how the standard deviation changes with the number of cuts."}},{"type":"text","value":"Okay, let‚Äôs try a different technique: <mark>radial cuts</mark>."},{"type":"Component","value":{"showControls":"false","cutType":"radial","highlightExtremes":"true"}},{"type":"text","value":"The piece size still isn‚Äôt very consistent&mdash;those <strong class=primary>near the outside</strong> are much larger than those <strong class=secondary>near the center</strong>."},{"type":"text","value":"How does the standard deviation of pieces cut radially compare to those cut vertically?"},{"type":"Component","value":{"cutType":"radial","controlCutType":"true","toggleExplode":"true","showStandardDeviation":"true"}},{"type":"text","value":"When making 10 cuts into a 10-layer onion radially, the standard deviation (57.7%) is <em>greater</em> than when cutting vertically (37.3%), which means that our piece size is now <em>less</em> consistent."},{"type":"text","value":"But we can improve the radial cut strategy."},{"type":"text","value":"Kenji claims that the most uniform pieces can be produced by <strong>aiming at a point ~60% of the onion‚Äôs radius below the cutting surface.</strong>"},{"type":"Component","value":{"showControls":"false","cutType":"radial","cutTargetDepthPercentage":"0.6","highlightExtremes":"true","showStandardDeviation":"true","showRadialTarget":"true"}},{"type":"text","value":"The pieces now look more consistent, except for a few smaller ones <strong class=primary>along the bottom</strong>."},{"type":"text","value":"Does the math confirm ~60% depth as the superior technique?"},{"type":"text","value":"Indeed, 34.5% is the smallest standard deviation we‚Äôve seen so far. This finding is further supported by Dr. Dylan Poulsen, an associate professor of mathematics at Washington College, who calculated that the ideal ‚Äúonion constant‚Äù is ~55.731% depth (<a href=https://medium.com/@drspoulsen/a-solution-to-the-onion-problem-of-j-kenji-l%C3%B3pez-alt-c3c4ab22e67c target=_blank rel=noreferrer>source</a>, <a href=https://drspoulsen.github.io/MARP/ target=_blank rel=noreferrer>another source</a>). Kenji backs Dr. Poulsen‚Äôs method in <a href=https://www.nytimes.com/article/how-to-cut-onion.html target=_blank rel=noreferrer>this New York Times article</a>."},{"type":"text","value":"But we can improve the radial cut strategy even more!"},{"type":"text","value":"Dr. Poulsen‚Äôs analysis is based on making <em>infinitely many cuts</em> into an onion with <em>infinitely many layers</em>:"},{"type":"text","value":"<img width=\"1440\" alt=\"Screenshot from Dr. Poulsen‚Äôs slides. A diagram shows an onion cross-section with an unrealistically large number of layers. A caption reads: ‚ÄòSo, we might as well consider the limiting case as the number of layers approaches infinity.‚Äô\" src=\"https://github.com/user-attachments/assets/c9154a67-6b5a-48f9-be6e-4ca689153d8b\">"},{"type":"text","value":"However, in the physical world we‚Äôre only capable of making a finite number of cuts, and real onions have a finite number of layers. The diagrams from Kenji‚Äôs original claim show 10 cuts being made into an onion with 10 layers. How can we optimize that?"},{"type":"text","value":"<mark>would another visualization help here? to show ideal depth converging to 55.731% as number of layers and number of cuts approach infinity</mark>"},{"type":"text","value":"When making 10 cuts into a 10-layer onion, the smallest standard deviation (29.5%) occurs when making radial cuts <strong>aimed 96% of the onion‚Äôs radius below the cutting surface.</strong>"},{"type":"Component","value":{"controlCutType":"true","cutType":"radial","controlRadialDepth":"true","cutTargetDepthPercentage":"0.96","toggleExplode":"true","showStandardDeviation":"true"}},{"type":"text","value":"Before we explain how we got that result, let‚Äôs briefly consider another popular technique: making 1-2 horizontal cuts before vertical, <a href=https://www.youtube.com/watch?v=BuebC0CfD8E&t=79s target=_blank rel=noreferrer>which Kenji recommended in 2016</a>. What does the math say about this strategy?"},{"type":"text","value":"<mark>another visualization might help here too. to show how the values in these tables were obtained (finding minimum std devs for each combo of layer/cut numbers)</mark>"},{"type":"text","value":"Here are the minimum standard deviations for every combination of layer numbers, vertical/radial cut numbers, radial cut depth, and horizontal cut numbers:"},{"type":"Report","value":{}},{"type":"text","value":"<h2>Insights</h2>"},{"type":"list","value":["It turns out that making horizontal cuts almost never helps with consistency.","Radial cuts are usually more consistent than vertical cuts, but you have to aim below the center of the onion.","The ideal radial depth varies depending on the number of layers/cuts&mdash;but it‚Äôs always ‚â•48%. (Recall that this converges to the onion constant of ~55.731%, mentioned above.)"]},{"type":"text","value":"<h2>Explore all the possibilities below.</h2>"},{"type":"Component","value":{"controlLayers":"true","controlCutType":"true","controlRadialDepth":"true","controlHorizontalCuts":"true","toggleExplode":"true","showStandardDeviation":"true"}}],"conclusion":[{"type":"text","value":"Armed with this knowledge, we can apply the optimal dicing strategy to any onion. ü•∑But how big a difference does being mathematically optimal make? We got in touch with Kenji to find out."},{"type":"us","value":"How much does uniformity matter?"},{"type":"kenji","value":"<em>It matters*</em> far more for winning internet debates and solving interesting math problems than it does for cooking. For home cooks, having onion dice that are a little off from perfect is not really an issue anyone should seriously worry about."},{"type":"note","value":"*Emphasis our own"},{"type":"text","value":"Good enough for us!"}],"appendix":[{"type":"text","value":"<mark>Appendix (a.k.a bonus nerd content): How do you calculate the area of an onion piece?</mark>"}]}