var ru=(u,s,o)=>{if(!s.has(u))throw TypeError("Cannot "+o)};var Cr=(u,s,o)=>(ru(u,s,"read from private field"),o?o.call(u):s.get(u)),is=(u,s,o)=>{if(s.has(u))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(u):s.set(u,o)};import{s as Gt,f as Re,e as Ct,B as su,g as ze,d as ce,j as ee,u as Pe,v as ut,C as hi,i as qe,D as au,h as Ke,E as ti,H as dn,a as pt,r as pn,c as gt,F as oi,G as li,I as Yt,A as Wt,J as Pi,K as Qi,l as At,m as Et,n as mi,L as uu,M as gn,N as On,O as ou,P as Dr,p as _n,Q as mn,R as ha,S as lu,T as hu,U as fu}from"../chunks/scheduler.6290527e.js";import{S as Zt,i as Kt,g as gi,t as tt,c as _i,a as je,b as Rt,d as zt,m as Vt,e as Bt,f as vn}from"../chunks/index.4db4e5ea.js";import{e as yt}from"../chunks/each.e59479a4.js";import{g as cu,c as fa,a as du,b as pu,d as gu}from"../chunks/_commonjsHelpers.08cd8a15.js";import{w as Yi}from"../chunks/index.ee17077d.js";import{d as _u}from"../chunks/transform.6fe4cd5d.js";function ns(u,s,o){const c=u.slice();return c[5]=s[o],c}function rs(u){let s,o;return{c(){s=Re("link"),this.h()},l(c){s=ze(c,"LINK",{rel:!0,href:!0,as:!0,type:!0,crossorigin:!0}),this.h()},h(){ee(s,"rel","preload"),ee(s,"href",o=u[5]),ee(s,"as","font"),ee(s,"type","font/woff2"),ee(s,"crossorigin","")},m(c,p){qe(c,s,p)},p(c,p){p&16&&o!==(o=c[5])&&ee(s,"href",o)},d(c){c&&ce(s)}}}function mu(u){let s,o,c,p,f,b,O,V,B,Z,q,ue,F,be,te,re,ie,ae,oe,Me,de,T,Ce,Ve,Xe,nt;document.title=s=u[0];let Be=yt(u[4]),Oe=[];for(let Se=0;Se<Be.length;Se+=1)Oe[Se]=rs(ns(u,Be,Se));return{c(){o=Re("meta"),c=Re("meta"),p=Re("meta"),f=Re("meta"),b=Re("meta"),O=Re("meta"),V=Re("meta"),B=Re("meta"),Z=Re("meta"),q=Re("meta"),F=Re("meta"),be=Re("meta"),te=Re("meta"),re=Re("meta"),ie=Re("meta"),ae=Re("meta"),oe=Re("meta"),Me=Re("meta"),de=Re("meta"),Ce=Re("meta"),Ve=Re("link");for(let Se=0;Se<Oe.length;Se+=1)Oe[Se].c();nt=Ct(),this.h()},l(Se){const ge=su("svelte-1htu80s",document.head);o=ze(ge,"META",{name:!0,content:!0}),c=ze(ge,"META",{name:!0,content:!0}),p=ze(ge,"META",{name:!0,content:!0}),f=ze(ge,"META",{property:!0,content:!0}),b=ze(ge,"META",{property:!0,content:!0}),O=ze(ge,"META",{property:!0,content:!0}),V=ze(ge,"META",{property:!0,content:!0}),B=ze(ge,"META",{property:!0,content:!0}),Z=ze(ge,"META",{property:!0,content:!0}),q=ze(ge,"META",{property:!0,content:!0}),F=ze(ge,"META",{property:!0,content:!0}),be=ze(ge,"META",{property:!0,content:!0}),te=ze(ge,"META",{property:!0,content:!0}),re=ze(ge,"META",{name:!0,content:!0}),ie=ze(ge,"META",{name:!0,content:!0}),ae=ze(ge,"META",{name:!0,content:!0}),oe=ze(ge,"META",{name:!0,content:!0}),Me=ze(ge,"META",{name:!0,content:!0}),de=ze(ge,"META",{name:!0,content:!0}),Ce=ze(ge,"META",{name:!0,content:!0}),Ve=ze(ge,"LINK",{rel:!0,href:!0});for(let We=0;We<Oe.length;We+=1)Oe[We].l(ge);nt=Ct(),ge.forEach(ce),this.h()},h(){ee(o,"name","description"),ee(o,"content",u[1]),ee(c,"name","author"),ee(c,"content","The Pudding"),ee(p,"name","news_keywords"),ee(p,"content",u[3]),ee(f,"property","og:title"),ee(f,"content",u[0]),ee(b,"property","og:site_name"),ee(b,"content","The Pudding"),ee(O,"property","og:url"),ee(O,"content",u[2]),ee(V,"property","og:description"),ee(V,"content",u[1]),ee(B,"property","og:type"),ee(B,"content","article"),ee(Z,"property","og:locale"),ee(Z,"content","en_US"),ee(q,"property","og:image"),ee(q,"content",ue=u[2]+"/assets/social-facebook.jpg"),ee(F,"property","og:image:type"),ee(F,"content","image/jpeg"),ee(be,"property","og:image:width"),ee(be,"content","1200"),ee(te,"property","og:image:height"),ee(te,"content","600"),ee(re,"name","twitter:card"),ee(re,"content","summary_large_image"),ee(ie,"name","twitter:site"),ee(ie,"content","https://pudding.cool"),ee(ae,"name","twitter:creator"),ee(ae,"content","@puddingviz"),ee(oe,"name","twitter:title"),ee(oe,"content",u[0]),ee(Me,"name","twitter:description"),ee(Me,"content",u[1]),ee(de,"name","twitter:image:src"),ee(de,"content",T=u[2]+"/assets/social-twitter.jpg"),ee(Ce,"name","robots"),ee(Ce,"content","max-image-preview:large"),ee(Ve,"rel","canonical"),ee(Ve,"href",Xe=u[2]+"/")},m(Se,ge){Pe(document.head,o),Pe(document.head,c),Pe(document.head,p),Pe(document.head,f),Pe(document.head,b),Pe(document.head,O),Pe(document.head,V),Pe(document.head,B),Pe(document.head,Z),Pe(document.head,q),Pe(document.head,F),Pe(document.head,be),Pe(document.head,te),Pe(document.head,re),Pe(document.head,ie),Pe(document.head,ae),Pe(document.head,oe),Pe(document.head,Me),Pe(document.head,de),Pe(document.head,Ce),Pe(document.head,Ve);for(let We=0;We<Oe.length;We+=1)Oe[We]&&Oe[We].m(document.head,null);Pe(document.head,nt)},p(Se,[ge]){if(ge&1&&s!==(s=Se[0])&&(document.title=s),ge&2&&ee(o,"content",Se[1]),ge&8&&ee(p,"content",Se[3]),ge&1&&ee(f,"content",Se[0]),ge&4&&ee(O,"content",Se[2]),ge&2&&ee(V,"content",Se[1]),ge&4&&ue!==(ue=Se[2]+"/assets/social-facebook.jpg")&&ee(q,"content",ue),ge&1&&ee(oe,"content",Se[0]),ge&2&&ee(Me,"content",Se[1]),ge&4&&T!==(T=Se[2]+"/assets/social-twitter.jpg")&&ee(de,"content",T),ge&4&&Xe!==(Xe=Se[2]+"/")&&ee(Ve,"href",Xe),ge&16){Be=yt(Se[4]);let We;for(We=0;We<Be.length;We+=1){const ve=ns(Se,Be,We);Oe[We]?Oe[We].p(ve,ge):(Oe[We]=rs(ve),Oe[We].c(),Oe[We].m(nt.parentNode,nt))}for(;We<Oe.length;We+=1)Oe[We].d(1);Oe.length=Be.length}},i:ut,o:ut,d(Se){ce(o),ce(c),ce(p),ce(f),ce(b),ce(O),ce(V),ce(B),ce(Z),ce(q),ce(F),ce(be),ce(te),ce(re),ce(ie),ce(ae),ce(oe),ce(Me),ce(de),ce(Ce),ce(Ve),hi(Oe,Se),ce(nt)}}}function vu(u,s,o){let{title:c="Title TK"}=s,{description:p="Description TK"}=s,{url:f="https://pudding.cool"}=s,{keywords:b=""}=s,{preloadFont:O=[]}=s;return u.$$set=V=>{"title"in V&&o(0,c=V.title),"description"in V&&o(1,p=V.description),"url"in V&&o(2,f=V.url),"keywords"in V&&o(3,b=V.keywords),"preloadFont"in V&&o(4,O=V.preloadFont)},[c,p,f,b,O]}class bu extends Zt{constructor(s){super(),Kt(this,s,vu,mu,Gt,{title:0,description:1,url:2,keywords:3,preloadFont:4})}}function yu(u){let s,o="🚧 This project is a work in progress. Please do not share the URL. 🚧";return{c(){s=Re("div"),s.textContent=o,this.h()},l(c){s=ze(c,"DIV",{class:!0,"data-svelte-h":!0}),au(s)!=="svelte-1huwx5x"&&(s.textContent=o),this.h()},h(){ee(s,"class","svelte-svusjd")},m(c,p){qe(c,s,p)},p:ut,i:ut,o:ut,d(c){c&&ce(s)}}}class xu extends Zt{constructor(s){super(),Kt(this,s,null,yu,Gt,{})}}function ss(u,s,o){const c=u.slice();return c[1]=s[o].type,c[2]=s[o].value,c}function as(u){let s,o,c=u[2]+"",p;return{c(){s=Re("p"),o=new dn(!1),p=pt(),this.h()},l(f){s=ze(f,"P",{class:!0});var b=Ke(s);o=pn(b,!1),p=gt(b),b.forEach(ce),this.h()},h(){o.a=p,ee(s,"class",u[1])},m(f,b){qe(f,s,b),o.m(c,s),Pe(s,p)},p:ut,d(f){f&&ce(s)}}}function wu(u){let s,o=yt(u[0].intro),c=[];for(let p=0;p<o.length;p+=1)c[p]=as(ss(u,o,p));return{c(){s=Re("section");for(let p=0;p<c.length;p+=1)c[p].c();this.h()},l(p){s=ze(p,"SECTION",{class:!0});var f=Ke(s);for(let b=0;b<c.length;b+=1)c[b].l(f);f.forEach(ce),this.h()},h(){ee(s,"class","intro")},m(p,f){qe(p,s,f);for(let b=0;b<c.length;b+=1)c[b]&&c[b].m(s,null)},p(p,[f]){if(f&1){o=yt(p[0].intro);let b;for(b=0;b<o.length;b+=1){const O=ss(p,o,b);c[b]?c[b].p(O,f):(c[b]=as(O),c[b].c(),c[b].m(s,null))}for(;b<c.length;b+=1)c[b].d(1);c.length=o.length}},i:ut,o:ut,d(p){p&&ce(s),hi(c,p)}}}function Su(u){return[ti("copy")]}class Cu extends Zt{constructor(s){super(),Kt(this,s,Su,wu,Gt,{})}}function us(u){return Object.fromEntries(Object.entries(u).map(([s,o])=>[s,o==="true"?!0:o==="false"?!1:o]))}function $n(u,s){return u==null||s==null?NaN:u<s?-1:u>s?1:u>=s?0:NaN}function ca(u){let s,o,c;u.length!==2?(s=$n,o=(O,V)=>$n(u(O),V),c=(O,V)=>u(O)-V):(s=u===$n||u===_u?u:ku,o=u,c=u);function p(O,V,B=0,Z=O.length){if(B<Z){if(s(V,V)!==0)return Z;do{const q=B+Z>>>1;o(O[q],V)<0?B=q+1:Z=q}while(B<Z)}return B}function f(O,V,B=0,Z=O.length){if(B<Z){if(s(V,V)!==0)return Z;do{const q=B+Z>>>1;o(O[q],V)<=0?B=q+1:Z=q}while(B<Z)}return B}function b(O,V,B=0,Z=O.length){const q=p(O,V,B,Z-1);return q>B&&c(O[q-1],V)>-c(O[q],V)?q-1:q}return{left:p,center:b,right:f}}function ku(){return 0}function Iu(u){return u===null?NaN:+u}const Pu=ca($n),Au=Pu.right;ca(Iu).center;const Eu=Au;function Tu(u,s){let o=0,c,p=0,f=0;if(s===void 0)for(let b of u)b!=null&&(b=+b)>=b&&(c=b-p,p+=c/++o,f+=c*(b-p));else{let b=-1;for(let O of u)(O=s(O,++b,u))!=null&&(O=+O)>=O&&(c=O-p,p+=c/++o,f+=c*(O-p))}if(o>1)return f/(o-1)}function Nu(u,s){const o=Tu(u,s);return o&&Math.sqrt(o)}const Mu=Math.sqrt(50),Lu=Math.sqrt(10),Ou=Math.sqrt(2);function tr(u,s,o){const c=(s-u)/Math.max(0,o),p=Math.floor(Math.log10(c)),f=c/Math.pow(10,p),b=f>=Mu?10:f>=Lu?5:f>=Ou?2:1;let O,V,B;return p<0?(B=Math.pow(10,-p)/b,O=Math.round(u*B),V=Math.round(s*B),O/B<u&&++O,V/B>s&&--V,B=-B):(B=Math.pow(10,p)*b,O=Math.round(u/B),V=Math.round(s/B),O*B<u&&++O,V*B>s&&--V),V<O&&.5<=o&&o<2?tr(u,s,o*2):[O,V,B]}function Ru(u,s,o){if(s=+s,u=+u,o=+o,!(o>0))return[];if(u===s)return[u];const c=s<u,[p,f,b]=c?tr(s,u,o):tr(u,s,o);if(!(f>=p))return[];const O=f-p+1,V=new Array(O);if(c)if(b<0)for(let B=0;B<O;++B)V[B]=(f-B)/-b;else for(let B=0;B<O;++B)V[B]=(f-B)*b;else if(b<0)for(let B=0;B<O;++B)V[B]=(p+B)/-b;else for(let B=0;B<O;++B)V[B]=(p+B)*b;return V}function Nr(u,s,o){return s=+s,u=+u,o=+o,tr(u,s,o)[2]}function zu(u,s,o){s=+s,u=+u,o=+o;const c=s<u,p=c?Nr(s,u,o):Nr(u,s,o);return(c?-1:1)*(p<0?1/-p:p)}function Vu(u,s){let o=0,c=0;if(s===void 0)for(let p of u)p!=null&&(p=+p)>=p&&(++o,c+=p);else{let p=-1;for(let f of u)(f=s(f,++p,u))!=null&&(f=+f)>=f&&(++o,c+=f)}if(o)return c/o}function Bu(u,s,o){u=+u,s=+s,o=(p=arguments.length)<2?(s=u,u=0,1):p<3?1:+o;for(var c=-1,p=Math.max(0,Math.ceil((s-u)/o))|0,f=new Array(p);++c<p;)f[c]=u+c*o;return f}function Dn(u,s,o){u.prototype=s.prototype=o,o.constructor=u}function or(u,s){var o=Object.create(u.prototype);for(var c in s)o[c]=s[c];return o}function tn(){}var Rn=.7,ir=1/Rn,fn="\\s*([+-]?\\d+)\\s*",zn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",yi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Du=/^#([0-9a-f]{3,8})$/,Fu=new RegExp(`^rgb\\(${fn},${fn},${fn}\\)$`),qu=new RegExp(`^rgb\\(${yi},${yi},${yi}\\)$`),Hu=new RegExp(`^rgba\\(${fn},${fn},${fn},${zn}\\)$`),Uu=new RegExp(`^rgba\\(${yi},${yi},${yi},${zn}\\)$`),ju=new RegExp(`^hsl\\(${zn},${yi},${yi}\\)$`),Wu=new RegExp(`^hsla\\(${zn},${yi},${yi},${zn}\\)$`),os={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Dn(tn,Vn,{copy(u){return Object.assign(new this.constructor,this,u)},displayable(){return this.rgb().displayable()},hex:ls,formatHex:ls,formatHex8:Gu,formatHsl:Zu,formatRgb:hs,toString:hs});function ls(){return this.rgb().formatHex()}function Gu(){return this.rgb().formatHex8()}function Zu(){return pa(this).formatHsl()}function hs(){return this.rgb().formatRgb()}function Vn(u){var s,o;return u=(u+"").trim().toLowerCase(),(s=Du.exec(u))?(o=s[1].length,s=parseInt(s[1],16),o===6?fs(s):o===3?new Jt(s>>8&15|s>>4&240,s>>4&15|s&240,(s&15)<<4|s&15,1):o===8?Zn(s>>24&255,s>>16&255,s>>8&255,(s&255)/255):o===4?Zn(s>>12&15|s>>8&240,s>>8&15|s>>4&240,s>>4&15|s&240,((s&15)<<4|s&15)/255):null):(s=Fu.exec(u))?new Jt(s[1],s[2],s[3],1):(s=qu.exec(u))?new Jt(s[1]*255/100,s[2]*255/100,s[3]*255/100,1):(s=Hu.exec(u))?Zn(s[1],s[2],s[3],s[4]):(s=Uu.exec(u))?Zn(s[1]*255/100,s[2]*255/100,s[3]*255/100,s[4]):(s=ju.exec(u))?ps(s[1],s[2]/100,s[3]/100,1):(s=Wu.exec(u))?ps(s[1],s[2]/100,s[3]/100,s[4]):os.hasOwnProperty(u)?fs(os[u]):u==="transparent"?new Jt(NaN,NaN,NaN,0):null}function fs(u){return new Jt(u>>16&255,u>>8&255,u&255,1)}function Zn(u,s,o,c){return c<=0&&(u=s=o=NaN),new Jt(u,s,o,c)}function da(u){return u instanceof tn||(u=Vn(u)),u?(u=u.rgb(),new Jt(u.r,u.g,u.b,u.opacity)):new Jt}function Mr(u,s,o,c){return arguments.length===1?da(u):new Jt(u,s,o,c??1)}function Jt(u,s,o,c){this.r=+u,this.g=+s,this.b=+o,this.opacity=+c}Dn(Jt,Mr,or(tn,{brighter(u){return u=u==null?ir:Math.pow(ir,u),new Jt(this.r*u,this.g*u,this.b*u,this.opacity)},darker(u){return u=u==null?Rn:Math.pow(Rn,u),new Jt(this.r*u,this.g*u,this.b*u,this.opacity)},rgb(){return this},clamp(){return new Jt(en(this.r),en(this.g),en(this.b),nr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cs,formatHex:cs,formatHex8:Ku,formatRgb:ds,toString:ds}));function cs(){return`#${Ji(this.r)}${Ji(this.g)}${Ji(this.b)}`}function Ku(){return`#${Ji(this.r)}${Ji(this.g)}${Ji(this.b)}${Ji((isNaN(this.opacity)?1:this.opacity)*255)}`}function ds(){const u=nr(this.opacity);return`${u===1?"rgb(":"rgba("}${en(this.r)}, ${en(this.g)}, ${en(this.b)}${u===1?")":`, ${u})`}`}function nr(u){return isNaN(u)?1:Math.max(0,Math.min(1,u))}function en(u){return Math.max(0,Math.min(255,Math.round(u)||0))}function Ji(u){return u=en(u),(u<16?"0":"")+u.toString(16)}function ps(u,s,o,c){return c<=0?u=s=o=NaN:o<=0||o>=1?u=s=NaN:s<=0&&(u=NaN),new pi(u,s,o,c)}function pa(u){if(u instanceof pi)return new pi(u.h,u.s,u.l,u.opacity);if(u instanceof tn||(u=Vn(u)),!u)return new pi;if(u instanceof pi)return u;u=u.rgb();var s=u.r/255,o=u.g/255,c=u.b/255,p=Math.min(s,o,c),f=Math.max(s,o,c),b=NaN,O=f-p,V=(f+p)/2;return O?(s===f?b=(o-c)/O+(o<c)*6:o===f?b=(c-s)/O+2:b=(s-o)/O+4,O/=V<.5?f+p:2-f-p,b*=60):O=V>0&&V<1?0:b,new pi(b,O,V,u.opacity)}function Xu(u,s,o,c){return arguments.length===1?pa(u):new pi(u,s,o,c??1)}function pi(u,s,o,c){this.h=+u,this.s=+s,this.l=+o,this.opacity=+c}Dn(pi,Xu,or(tn,{brighter(u){return u=u==null?ir:Math.pow(ir,u),new pi(this.h,this.s,this.l*u,this.opacity)},darker(u){return u=u==null?Rn:Math.pow(Rn,u),new pi(this.h,this.s,this.l*u,this.opacity)},rgb(){var u=this.h%360+(this.h<0)*360,s=isNaN(u)||isNaN(this.s)?0:this.s,o=this.l,c=o+(o<.5?o:1-o)*s,p=2*o-c;return new Jt(kr(u>=240?u-240:u+120,p,c),kr(u,p,c),kr(u<120?u+240:u-120,p,c),this.opacity)},clamp(){return new pi(gs(this.h),Kn(this.s),Kn(this.l),nr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const u=nr(this.opacity);return`${u===1?"hsl(":"hsla("}${gs(this.h)}, ${Kn(this.s)*100}%, ${Kn(this.l)*100}%${u===1?")":`, ${u})`}`}}));function gs(u){return u=(u||0)%360,u<0?u+360:u}function Kn(u){return Math.max(0,Math.min(1,u||0))}function kr(u,s,o){return(u<60?s+(o-s)*u/60:u<180?o:u<240?s+(o-s)*(240-u)/60:s)*255}const Qu=Math.PI/180,Yu=180/Math.PI,rr=18,ga=.96422,_a=1,ma=.82521,va=4/29,cn=6/29,ba=3*cn*cn,Ju=cn*cn*cn;function ya(u){if(u instanceof xi)return new xi(u.l,u.a,u.b,u.opacity);if(u instanceof Ei)return xa(u);u instanceof Jt||(u=da(u));var s=Er(u.r),o=Er(u.g),c=Er(u.b),p=Ir((.2225045*s+.7168786*o+.0606169*c)/_a),f,b;return s===o&&o===c?f=b=p:(f=Ir((.4360747*s+.3850649*o+.1430804*c)/ga),b=Ir((.0139322*s+.0971045*o+.7141733*c)/ma)),new xi(116*p-16,500*(f-p),200*(p-b),u.opacity)}function $u(u,s,o,c){return arguments.length===1?ya(u):new xi(u,s,o,c??1)}function xi(u,s,o,c){this.l=+u,this.a=+s,this.b=+o,this.opacity=+c}Dn(xi,$u,or(tn,{brighter(u){return new xi(this.l+rr*(u??1),this.a,this.b,this.opacity)},darker(u){return new xi(this.l-rr*(u??1),this.a,this.b,this.opacity)},rgb(){var u=(this.l+16)/116,s=isNaN(this.a)?u:u+this.a/500,o=isNaN(this.b)?u:u-this.b/200;return s=ga*Pr(s),u=_a*Pr(u),o=ma*Pr(o),new Jt(Ar(3.1338561*s-1.6168667*u-.4906146*o),Ar(-.9787684*s+1.9161415*u+.033454*o),Ar(.0719453*s-.2289914*u+1.4052427*o),this.opacity)}}));function Ir(u){return u>Ju?Math.pow(u,1/3):u/ba+va}function Pr(u){return u>cn?u*u*u:ba*(u-va)}function Ar(u){return 255*(u<=.0031308?12.92*u:1.055*Math.pow(u,1/2.4)-.055)}function Er(u){return(u/=255)<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function eo(u){if(u instanceof Ei)return new Ei(u.h,u.c,u.l,u.opacity);if(u instanceof xi||(u=ya(u)),u.a===0&&u.b===0)return new Ei(NaN,0<u.l&&u.l<100?0:NaN,u.l,u.opacity);var s=Math.atan2(u.b,u.a)*Yu;return new Ei(s<0?s+360:s,Math.sqrt(u.a*u.a+u.b*u.b),u.l,u.opacity)}function Lr(u,s,o,c){return arguments.length===1?eo(u):new Ei(u,s,o,c??1)}function Ei(u,s,o,c){this.h=+u,this.c=+s,this.l=+o,this.opacity=+c}function xa(u){if(isNaN(u.h))return new xi(u.l,0,0,u.opacity);var s=u.h*Qu;return new xi(u.l,Math.cos(s)*u.c,Math.sin(s)*u.c,u.opacity)}Dn(Ei,Lr,or(tn,{brighter(u){return new Ei(this.h,this.c,this.l+rr*(u??1),this.opacity)},darker(u){return new Ei(this.h,this.c,this.l-rr*(u??1),this.opacity)},rgb(){return xa(this).rgb()}}));const lr=u=>()=>u;function wa(u,s){return function(o){return u+o*s}}function to(u,s,o){return u=Math.pow(u,o),s=Math.pow(s,o)-u,o=1/o,function(c){return Math.pow(u+c*s,o)}}function io(u,s){var o=s-u;return o?wa(u,o>180||o<-180?o-360*Math.round(o/360):o):lr(isNaN(u)?s:u)}function no(u){return(u=+u)==1?Ln:function(s,o){return o-s?to(s,o,u):lr(isNaN(s)?o:s)}}function Ln(u,s){var o=s-u;return o?wa(u,o):lr(isNaN(u)?s:u)}const _s=function u(s){var o=no(s);function c(p,f){var b=o((p=Mr(p)).r,(f=Mr(f)).r),O=o(p.g,f.g),V=o(p.b,f.b),B=Ln(p.opacity,f.opacity);return function(Z){return p.r=b(Z),p.g=O(Z),p.b=V(Z),p.opacity=B(Z),p+""}}return c.gamma=u,c}(1);function ro(u,s){s||(s=[]);var o=u?Math.min(s.length,u.length):0,c=s.slice(),p;return function(f){for(p=0;p<o;++p)c[p]=u[p]*(1-f)+s[p]*f;return c}}function so(u){return ArrayBuffer.isView(u)&&!(u instanceof DataView)}function ao(u,s){var o=s?s.length:0,c=u?Math.min(o,u.length):0,p=new Array(c),f=new Array(o),b;for(b=0;b<c;++b)p[b]=hr(u[b],s[b]);for(;b<o;++b)f[b]=s[b];return function(O){for(b=0;b<c;++b)f[b]=p[b](O);return f}}function uo(u,s){var o=new Date;return u=+u,s=+s,function(c){return o.setTime(u*(1-c)+s*c),o}}function sr(u,s){return u=+u,s=+s,function(o){return u*(1-o)+s*o}}function oo(u,s){var o={},c={},p;(u===null||typeof u!="object")&&(u={}),(s===null||typeof s!="object")&&(s={});for(p in s)p in u?o[p]=hr(u[p],s[p]):c[p]=s[p];return function(f){for(p in o)c[p]=o[p](f);return c}}var Or=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Tr=new RegExp(Or.source,"g");function lo(u){return function(){return u}}function ho(u){return function(s){return u(s)+""}}function fo(u,s){var o=Or.lastIndex=Tr.lastIndex=0,c,p,f,b=-1,O=[],V=[];for(u=u+"",s=s+"";(c=Or.exec(u))&&(p=Tr.exec(s));)(f=p.index)>o&&(f=s.slice(o,f),O[b]?O[b]+=f:O[++b]=f),(c=c[0])===(p=p[0])?O[b]?O[b]+=p:O[++b]=p:(O[++b]=null,V.push({i:b,x:sr(c,p)})),o=Tr.lastIndex;return o<s.length&&(f=s.slice(o),O[b]?O[b]+=f:O[++b]=f),O.length<2?V[0]?ho(V[0].x):lo(s):(s=V.length,function(B){for(var Z=0,q;Z<s;++Z)O[(q=V[Z]).i]=q.x(B);return O.join("")})}function hr(u,s){var o=typeof s,c;return s==null||o==="boolean"?lr(s):(o==="number"?sr:o==="string"?(c=Vn(s))?(s=c,_s):fo:s instanceof Vn?_s:s instanceof Date?uo:so(s)?ro:Array.isArray(s)?ao:typeof s.valueOf!="function"&&typeof s.toString!="function"||isNaN(s)?oo:sr)(u,s)}function Sa(u,s){return u=+u,s=+s,function(o){return Math.round(u*(1-o)+s*o)}}function co(u){return function(s,o){var c=u((s=Lr(s)).h,(o=Lr(o)).h),p=Ln(s.c,o.c),f=Ln(s.l,o.l),b=Ln(s.opacity,o.opacity);return function(O){return s.h=c(O),s.c=p(O),s.l=f(O),s.opacity=b(O),s+""}}}const po=co(io);function go(u){return Math.abs(u=Math.round(u))>=1e21?u.toLocaleString("en").replace(/,/g,""):u.toString(10)}function ar(u,s){if((o=(u=s?u.toExponential(s-1):u.toExponential()).indexOf("e"))<0)return null;var o,c=u.slice(0,o);return[c.length>1?c[0]+c.slice(2):c,+u.slice(o+1)]}function bn(u){return u=ar(Math.abs(u)),u?u[1]:NaN}function _o(u,s){return function(o,c){for(var p=o.length,f=[],b=0,O=u[0],V=0;p>0&&O>0&&(V+O+1>c&&(O=Math.max(1,c-V)),f.push(o.substring(p-=O,p+O)),!((V+=O+1)>c));)O=u[b=(b+1)%u.length];return f.reverse().join(s)}}function mo(u){return function(s){return s.replace(/[0-9]/g,function(o){return u[+o]})}}var vo=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ur(u){if(!(s=vo.exec(u)))throw new Error("invalid format: "+u);var s;return new Fr({fill:s[1],align:s[2],sign:s[3],symbol:s[4],zero:s[5],width:s[6],comma:s[7],precision:s[8]&&s[8].slice(1),trim:s[9],type:s[10]})}ur.prototype=Fr.prototype;function Fr(u){this.fill=u.fill===void 0?" ":u.fill+"",this.align=u.align===void 0?">":u.align+"",this.sign=u.sign===void 0?"-":u.sign+"",this.symbol=u.symbol===void 0?"":u.symbol+"",this.zero=!!u.zero,this.width=u.width===void 0?void 0:+u.width,this.comma=!!u.comma,this.precision=u.precision===void 0?void 0:+u.precision,this.trim=!!u.trim,this.type=u.type===void 0?"":u.type+""}Fr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function bo(u){e:for(var s=u.length,o=1,c=-1,p;o<s;++o)switch(u[o]){case".":c=p=o;break;case"0":c===0&&(c=o),p=o;break;default:if(!+u[o])break e;c>0&&(c=0);break}return c>0?u.slice(0,c)+u.slice(p+1):u}var Ca;function yo(u,s){var o=ar(u,s);if(!o)return u+"";var c=o[0],p=o[1],f=p-(Ca=Math.max(-8,Math.min(8,Math.floor(p/3)))*3)+1,b=c.length;return f===b?c:f>b?c+new Array(f-b+1).join("0"):f>0?c.slice(0,f)+"."+c.slice(f):"0."+new Array(1-f).join("0")+ar(u,Math.max(0,s+f-1))[0]}function ms(u,s){var o=ar(u,s);if(!o)return u+"";var c=o[0],p=o[1];return p<0?"0."+new Array(-p).join("0")+c:c.length>p+1?c.slice(0,p+1)+"."+c.slice(p+1):c+new Array(p-c.length+2).join("0")}const vs={"%":(u,s)=>(u*100).toFixed(s),b:u=>Math.round(u).toString(2),c:u=>u+"",d:go,e:(u,s)=>u.toExponential(s),f:(u,s)=>u.toFixed(s),g:(u,s)=>u.toPrecision(s),o:u=>Math.round(u).toString(8),p:(u,s)=>ms(u*100,s),r:ms,s:yo,X:u=>Math.round(u).toString(16).toUpperCase(),x:u=>Math.round(u).toString(16)};function bs(u){return u}var ys=Array.prototype.map,xs=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function xo(u){var s=u.grouping===void 0||u.thousands===void 0?bs:_o(ys.call(u.grouping,Number),u.thousands+""),o=u.currency===void 0?"":u.currency[0]+"",c=u.currency===void 0?"":u.currency[1]+"",p=u.decimal===void 0?".":u.decimal+"",f=u.numerals===void 0?bs:mo(ys.call(u.numerals,String)),b=u.percent===void 0?"%":u.percent+"",O=u.minus===void 0?"−":u.minus+"",V=u.nan===void 0?"NaN":u.nan+"";function B(q){q=ur(q);var ue=q.fill,F=q.align,be=q.sign,te=q.symbol,re=q.zero,ie=q.width,ae=q.comma,oe=q.precision,Me=q.trim,de=q.type;de==="n"?(ae=!0,de="g"):vs[de]||(oe===void 0&&(oe=12),Me=!0,de="g"),(re||ue==="0"&&F==="=")&&(re=!0,ue="0",F="=");var T=te==="$"?o:te==="#"&&/[boxX]/.test(de)?"0"+de.toLowerCase():"",Ce=te==="$"?c:/[%p]/.test(de)?b:"",Ve=vs[de],Xe=/[defgprs%]/.test(de);oe=oe===void 0?6:/[gprs]/.test(de)?Math.max(1,Math.min(21,oe)):Math.max(0,Math.min(20,oe));function nt(Be){var Oe=T,Se=Ce,ge,We,ve;if(de==="c")Se=Ve(Be)+Se,Be="";else{Be=+Be;var De=Be<0||1/Be<0;if(Be=isNaN(Be)?V:Ve(Math.abs(Be),oe),Me&&(Be=bo(Be)),De&&+Be==0&&be!=="+"&&(De=!1),Oe=(De?be==="("?be:O:be==="-"||be==="("?"":be)+Oe,Se=(de==="s"?xs[8+Ca/3]:"")+Se+(De&&be==="("?")":""),Xe){for(ge=-1,We=Be.length;++ge<We;)if(ve=Be.charCodeAt(ge),48>ve||ve>57){Se=(ve===46?p+Be.slice(ge+1):Be.slice(ge))+Se,Be=Be.slice(0,ge);break}}}ae&&!re&&(Be=s(Be,1/0));var Tt=Oe.length+Be.length+Se.length,Fe=Tt<ie?new Array(ie-Tt+1).join(ue):"";switch(ae&&re&&(Be=s(Fe+Be,Fe.length?ie-Se.length:1/0),Fe=""),F){case"<":Be=Oe+Be+Se+Fe;break;case"=":Be=Oe+Fe+Be+Se;break;case"^":Be=Fe.slice(0,Tt=Fe.length>>1)+Oe+Be+Se+Fe.slice(Tt);break;default:Be=Fe+Oe+Be+Se;break}return f(Be)}return nt.toString=function(){return q+""},nt}function Z(q,ue){var F=B((q=ur(q),q.type="f",q)),be=Math.max(-8,Math.min(8,Math.floor(bn(ue)/3)))*3,te=Math.pow(10,-be),re=xs[8+be/3];return function(ie){return F(te*ie)+re}}return{format:B,formatPrefix:Z}}var Xn,yn,ka;wo({thousands:",",grouping:[3],currency:["$",""]});function wo(u){return Xn=xo(u),yn=Xn.format,ka=Xn.formatPrefix,Xn}function So(u){return Math.max(0,-bn(Math.abs(u)))}function Co(u,s){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bn(s)/3)))*3-bn(Math.abs(u)))}function ko(u,s){return u=Math.abs(u),s=Math.abs(s)-u,Math.max(0,bn(s)-bn(u))+1}function Io(u,s){switch(arguments.length){case 0:break;case 1:this.range(u);break;default:this.range(s).domain(u);break}return this}function Po(u,s){switch(arguments.length){case 0:break;case 1:{typeof u=="function"?this.interpolator(u):this.range(u);break}default:{this.domain(u),typeof s=="function"?this.interpolator(s):this.range(s);break}}return this}function Ao(u){return function(){return u}}function Eo(u){return+u}var ws=[0,1];function Vi(u){return u}function Rr(u,s){return(s-=u=+u)?function(o){return(o-u)/s}:Ao(isNaN(s)?NaN:.5)}function To(u,s){var o;return u>s&&(o=u,u=s,s=o),function(c){return Math.max(u,Math.min(s,c))}}function No(u,s,o){var c=u[0],p=u[1],f=s[0],b=s[1];return p<c?(c=Rr(p,c),f=o(b,f)):(c=Rr(c,p),f=o(f,b)),function(O){return f(c(O))}}function Mo(u,s,o){var c=Math.min(u.length,s.length)-1,p=new Array(c),f=new Array(c),b=-1;for(u[c]<u[0]&&(u=u.slice().reverse(),s=s.slice().reverse());++b<c;)p[b]=Rr(u[b],u[b+1]),f[b]=o(s[b],s[b+1]);return function(O){var V=Eu(u,O,1,c)-1;return f[V](p[V](O))}}function Lo(u,s){return s.domain(u.domain()).range(u.range()).interpolate(u.interpolate()).clamp(u.clamp()).unknown(u.unknown())}function Oo(){var u=ws,s=ws,o=hr,c,p,f,b=Vi,O,V,B;function Z(){var ue=Math.min(u.length,s.length);return b!==Vi&&(b=To(u[0],u[ue-1])),O=ue>2?Mo:No,V=B=null,q}function q(ue){return ue==null||isNaN(ue=+ue)?f:(V||(V=O(u.map(c),s,o)))(c(b(ue)))}return q.invert=function(ue){return b(p((B||(B=O(s,u.map(c),sr)))(ue)))},q.domain=function(ue){return arguments.length?(u=Array.from(ue,Eo),Z()):u.slice()},q.range=function(ue){return arguments.length?(s=Array.from(ue),Z()):s.slice()},q.rangeRound=function(ue){return s=Array.from(ue),o=Sa,Z()},q.clamp=function(ue){return arguments.length?(b=ue?!0:Vi,Z()):b!==Vi},q.interpolate=function(ue){return arguments.length?(o=ue,Z()):o},q.unknown=function(ue){return arguments.length?(f=ue,q):f},function(ue,F){return c=ue,p=F,Z()}}function Ro(){return Oo()(Vi,Vi)}function zo(u,s,o,c){var p=zu(u,s,o),f;switch(c=ur(c??",f"),c.type){case"s":{var b=Math.max(Math.abs(u),Math.abs(s));return c.precision==null&&!isNaN(f=Co(p,b))&&(c.precision=f),ka(c,b)}case"":case"e":case"g":case"p":case"r":{c.precision==null&&!isNaN(f=ko(p,Math.max(Math.abs(u),Math.abs(s))))&&(c.precision=f-(c.type==="e"));break}case"f":case"%":{c.precision==null&&!isNaN(f=So(p))&&(c.precision=f-(c.type==="%")*2);break}}return yn(c)}function Ia(u){var s=u.domain;return u.ticks=function(o){var c=s();return Ru(c[0],c[c.length-1],o??10)},u.tickFormat=function(o,c){var p=s();return zo(p[0],p[p.length-1],o??10,c)},u.nice=function(o){o==null&&(o=10);var c=s(),p=0,f=c.length-1,b=c[p],O=c[f],V,B,Z=10;for(O<b&&(B=b,b=O,O=B,B=p,p=f,f=B);Z-- >0;){if(B=Nr(b,O,o),B===V)return c[p]=b,c[f]=O,s(c);if(B>0)b=Math.floor(b/B)*B,O=Math.ceil(O/B)*B;else if(B<0)b=Math.ceil(b*B)/B,O=Math.floor(O*B)/B;else break;V=B}return u},u}function $i(){var u=Ro();return u.copy=function(){return Lo(u,$i())},Io.apply(u,arguments),Ia(u)}function Vo(){var u=0,s=1,o,c,p,f,b=Vi,O=!1,V;function B(q){return q==null||isNaN(q=+q)?V:b(p===0?.5:(q=(f(q)-o)*p,O?Math.max(0,Math.min(1,q)):q))}B.domain=function(q){return arguments.length?([u,s]=q,o=f(u=+u),c=f(s=+s),p=o===c?0:1/(c-o),B):[u,s]},B.clamp=function(q){return arguments.length?(O=!!q,B):O},B.interpolator=function(q){return arguments.length?(b=q,B):b};function Z(q){return function(ue){var F,be;return arguments.length?([F,be]=ue,b=q(F,be),B):[b(0),b(1)]}}return B.range=Z(hr),B.rangeRound=Z(Sa),B.unknown=function(q){return arguments.length?(V=q,B):V},function(q){return f=q,o=q(u),c=q(s),p=o===c?0:1/(c-o),B}}function Bo(u,s){return s.domain(u.domain()).interpolator(u.interpolator()).clamp(u.clamp()).unknown(u.unknown())}function Pa(){var u=Ia(Vo()(Vi));return u.copy=function(){return Bo(u,Pa())},Po.apply(u,arguments)}function Do(u){throw new Error('Could not dynamically require "'+u+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Aa={exports:{}};const Fo={},qo=Object.freeze(Object.defineProperty({__proto__:null,default:Fo},Symbol.toStringTag,{value:"Module"})),Ss=cu(qo);var Qn={exports:{}},Cs;function Ho(){return Cs||(Cs=1,function(u,s){(function(o,c){c(s)})(fa,function(o){var c=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],p=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],f="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",b="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",O={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},V="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",B={5:V,"5module":V+" export import",6:V+" const class extends export import super"},Z=/^in(stanceof)?$/,q=new RegExp("["+b+"]"),ue=new RegExp("["+b+f+"]");function F(i,h){for(var k=65536,R=0;R<h.length;R+=2){if(k+=h[R],k>i)return!1;if(k+=h[R+1],k>=i)return!0}return!1}function be(i,h){return i<65?i===36:i<91?!0:i<97?i===95:i<123?!0:i<=65535?i>=170&&q.test(String.fromCharCode(i)):h===!1?!1:F(i,p)}function te(i,h){return i<48?i===36:i<58?!0:i<65?!1:i<91?!0:i<97?i===95:i<123?!0:i<=65535?i>=170&&ue.test(String.fromCharCode(i)):h===!1?!1:F(i,p)||F(i,c)}var re=function(h,k){k===void 0&&(k={}),this.label=h,this.keyword=k.keyword,this.beforeExpr=!!k.beforeExpr,this.startsExpr=!!k.startsExpr,this.isLoop=!!k.isLoop,this.isAssign=!!k.isAssign,this.prefix=!!k.prefix,this.postfix=!!k.postfix,this.binop=k.binop||null,this.updateContext=null};function ie(i,h){return new re(i,{beforeExpr:!0,binop:h})}var ae={beforeExpr:!0},oe={startsExpr:!0},Me={};function de(i,h){return h===void 0&&(h={}),h.keyword=i,Me[i]=new re(i,h)}var T={num:new re("num",oe),regexp:new re("regexp",oe),string:new re("string",oe),name:new re("name",oe),privateId:new re("privateId",oe),eof:new re("eof"),bracketL:new re("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new re("]"),braceL:new re("{",{beforeExpr:!0,startsExpr:!0}),braceR:new re("}"),parenL:new re("(",{beforeExpr:!0,startsExpr:!0}),parenR:new re(")"),comma:new re(",",ae),semi:new re(";",ae),colon:new re(":",ae),dot:new re("."),question:new re("?",ae),questionDot:new re("?."),arrow:new re("=>",ae),template:new re("template"),invalidTemplate:new re("invalidTemplate"),ellipsis:new re("...",ae),backQuote:new re("`",oe),dollarBraceL:new re("${",{beforeExpr:!0,startsExpr:!0}),eq:new re("=",{beforeExpr:!0,isAssign:!0}),assign:new re("_=",{beforeExpr:!0,isAssign:!0}),incDec:new re("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new re("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:ie("||",1),logicalAND:ie("&&",2),bitwiseOR:ie("|",3),bitwiseXOR:ie("^",4),bitwiseAND:ie("&",5),equality:ie("==/!=/===/!==",6),relational:ie("</>/<=/>=",7),bitShift:ie("<</>>/>>>",8),plusMin:new re("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:ie("%",10),star:ie("*",10),slash:ie("/",10),starstar:new re("**",{beforeExpr:!0}),coalesce:ie("??",1),_break:de("break"),_case:de("case",ae),_catch:de("catch"),_continue:de("continue"),_debugger:de("debugger"),_default:de("default",ae),_do:de("do",{isLoop:!0,beforeExpr:!0}),_else:de("else",ae),_finally:de("finally"),_for:de("for",{isLoop:!0}),_function:de("function",oe),_if:de("if"),_return:de("return",ae),_switch:de("switch"),_throw:de("throw",ae),_try:de("try"),_var:de("var"),_const:de("const"),_while:de("while",{isLoop:!0}),_with:de("with"),_new:de("new",{beforeExpr:!0,startsExpr:!0}),_this:de("this",oe),_super:de("super",oe),_class:de("class",oe),_extends:de("extends",ae),_export:de("export"),_import:de("import",oe),_null:de("null",oe),_true:de("true",oe),_false:de("false",oe),_in:de("in",{beforeExpr:!0,binop:7}),_instanceof:de("instanceof",{beforeExpr:!0,binop:7}),_typeof:de("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:de("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:de("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Ce=/\r\n?|\n|\u2028|\u2029/,Ve=new RegExp(Ce.source,"g");function Xe(i){return i===10||i===13||i===8232||i===8233}function nt(i,h,k){k===void 0&&(k=i.length);for(var R=h;R<k;R++){var j=i.charCodeAt(R);if(Xe(j))return R<k-1&&j===13&&i.charCodeAt(R+1)===10?R+2:R+1}return-1}var Be=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Oe=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Se=Object.prototype,ge=Se.hasOwnProperty,We=Se.toString,ve=Object.hasOwn||function(i,h){return ge.call(i,h)},De=Array.isArray||function(i){return We.call(i)==="[object Array]"},Tt=Object.create(null);function Fe(i){return Tt[i]||(Tt[i]=new RegExp("^(?:"+i.replace(/ /g,"|")+")$"))}function lt(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}var Xt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,ii=function(h,k){this.line=h,this.column=k};ii.prototype.offset=function(h){return new ii(this.line,this.column+h)};var vt=function(h,k,R){this.start=k,this.end=R,h.sourceFile!==null&&(this.source=h.sourceFile)};function Bi(i,h){for(var k=1,R=0;;){var j=nt(i,R,h);if(j<0)return new ii(k,h-R);++k,R=j}}var bt={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Le=!1;function vi(i){var h={};for(var k in bt)h[k]=i&&ve(i,k)?i[k]:bt[k];if(h.ecmaVersion==="latest"?h.ecmaVersion=1e8:h.ecmaVersion==null?(!Le&&typeof console=="object"&&console.warn&&(Le=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),h.ecmaVersion=11):h.ecmaVersion>=2015&&(h.ecmaVersion-=2009),h.allowReserved==null&&(h.allowReserved=h.ecmaVersion<5),(!i||i.allowHashBang==null)&&(h.allowHashBang=h.ecmaVersion>=14),De(h.onToken)){var R=h.onToken;h.onToken=function(j){return R.push(j)}}return De(h.onComment)&&(h.onComment=ni(h,h.onComment)),h}function ni(i,h){return function(k,R,j,ne,le,xe){var Ae={type:k?"Block":"Line",value:R,start:j,end:ne};i.locations&&(Ae.loc=new vt(this,le,xe)),i.ranges&&(Ae.range=[j,ne]),h.push(Ae)}}var ot=1,ht=2,_t=4,nn=8,wi=16,rn=32,Ti=64,sn=128,Di=256,xn=ot|ht|Di;function wn(i,h){return ht|(i?_t:0)|(h?nn:0)}var Fi=0,kt=1,ri=2,xt=3,Sn=4,it=5,e=function(h,k,R){this.options=h=vi(h),this.sourceFile=h.sourceFile,this.keywords=Fe(B[h.ecmaVersion>=6?6:h.sourceType==="module"?"5module":5]);var j="";h.allowReserved!==!0&&(j=O[h.ecmaVersion>=6?6:h.ecmaVersion===5?5:3],h.sourceType==="module"&&(j+=" await")),this.reservedWords=Fe(j);var ne=(j?j+" ":"")+O.strict;this.reservedWordsStrict=Fe(ne),this.reservedWordsStrictBind=Fe(ne+" "+O.strictBind),this.input=String(k),this.containsEsc=!1,R?(this.pos=R,this.lineStart=this.input.lastIndexOf(`
`,R-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Ce).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=T.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=h.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&h.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(ot),this.regexpState=null,this.privateNameStack=[]},t={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};e.prototype.parse=function(){var h=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(h)},t.inFunction.get=function(){return(this.currentVarScope().flags&ht)>0},t.inGenerator.get=function(){return(this.currentVarScope().flags&nn)>0&&!this.currentVarScope().inClassFieldInit},t.inAsync.get=function(){return(this.currentVarScope().flags&_t)>0&&!this.currentVarScope().inClassFieldInit},t.canAwait.get=function(){for(var i=this.scopeStack.length-1;i>=0;i--){var h=this.scopeStack[i];if(h.inClassFieldInit||h.flags&Di)return!1;if(h.flags&ht)return(h.flags&_t)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},t.allowSuper.get=function(){var i=this.currentThisScope(),h=i.flags,k=i.inClassFieldInit;return(h&Ti)>0||k||this.options.allowSuperOutsideMethod},t.allowDirectSuper.get=function(){return(this.currentThisScope().flags&sn)>0},t.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},t.allowNewDotTarget.get=function(){var i=this.currentThisScope(),h=i.flags,k=i.inClassFieldInit;return(h&(ht|Di))>0||k},t.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Di)>0},e.extend=function(){for(var h=[],k=arguments.length;k--;)h[k]=arguments[k];for(var R=this,j=0;j<h.length;j++)R=h[j](R);return R},e.parse=function(h,k){return new this(k,h).parse()},e.parseExpressionAt=function(h,k,R){var j=new this(R,h,k);return j.nextToken(),j.parseExpression()},e.tokenizer=function(h,k){return new this(k,h)},Object.defineProperties(e.prototype,t);var n=e.prototype,r=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;n.strictDirective=function(i){if(this.options.ecmaVersion<5)return!1;for(;;){Oe.lastIndex=i,i+=Oe.exec(this.input)[0].length;var h=r.exec(this.input.slice(i));if(!h)return!1;if((h[1]||h[2])==="use strict"){Oe.lastIndex=i+h[0].length;var k=Oe.exec(this.input),R=k.index+k[0].length,j=this.input.charAt(R);return j===";"||j==="}"||Ce.test(k[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(j)||j==="!"&&this.input.charAt(R+1)==="=")}i+=h[0].length,Oe.lastIndex=i,i+=Oe.exec(this.input)[0].length,this.input[i]===";"&&i++}},n.eat=function(i){return this.type===i?(this.next(),!0):!1},n.isContextual=function(i){return this.type===T.name&&this.value===i&&!this.containsEsc},n.eatContextual=function(i){return this.isContextual(i)?(this.next(),!0):!1},n.expectContextual=function(i){this.eatContextual(i)||this.unexpected()},n.canInsertSemicolon=function(){return this.type===T.eof||this.type===T.braceR||Ce.test(this.input.slice(this.lastTokEnd,this.start))},n.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},n.semicolon=function(){!this.eat(T.semi)&&!this.insertSemicolon()&&this.unexpected()},n.afterTrailingComma=function(i,h){if(this.type===i)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),h||this.next(),!0},n.expect=function(i){this.eat(i)||this.unexpected()},n.unexpected=function(i){this.raise(i??this.start,"Unexpected token")};var a=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};n.checkPatternErrors=function(i,h){if(i){i.trailingComma>-1&&this.raiseRecoverable(i.trailingComma,"Comma is not permitted after the rest element");var k=h?i.parenthesizedAssign:i.parenthesizedBind;k>-1&&this.raiseRecoverable(k,h?"Assigning to rvalue":"Parenthesized pattern")}},n.checkExpressionErrors=function(i,h){if(!i)return!1;var k=i.shorthandAssign,R=i.doubleProto;if(!h)return k>=0||R>=0;k>=0&&this.raise(k,"Shorthand property assignments are valid only in destructuring patterns"),R>=0&&this.raiseRecoverable(R,"Redefinition of __proto__ property")},n.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},n.isSimpleAssignTarget=function(i){return i.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(i.expression):i.type==="Identifier"||i.type==="MemberExpression"};var l=e.prototype;l.parseTopLevel=function(i){var h=Object.create(null);for(i.body||(i.body=[]);this.type!==T.eof;){var k=this.parseStatement(null,!0,h);i.body.push(k)}if(this.inModule)for(var R=0,j=Object.keys(this.undefinedExports);R<j.length;R+=1){var ne=j[R];this.raiseRecoverable(this.undefinedExports[ne].start,"Export '"+ne+"' is not defined")}return this.adaptDirectivePrologue(i.body),this.next(),i.sourceType=this.options.sourceType,this.finishNode(i,"Program")};var g={kind:"loop"},d={kind:"switch"};l.isLet=function(i){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Oe.lastIndex=this.pos;var h=Oe.exec(this.input),k=this.pos+h[0].length,R=this.input.charCodeAt(k);if(R===91||R===92)return!0;if(i)return!1;if(R===123||R>55295&&R<56320)return!0;if(be(R,!0)){for(var j=k+1;te(R=this.input.charCodeAt(j),!0);)++j;if(R===92||R>55295&&R<56320)return!0;var ne=this.input.slice(k,j);if(!Z.test(ne))return!0}return!1},l.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Oe.lastIndex=this.pos;var i=Oe.exec(this.input),h=this.pos+i[0].length,k;return!Ce.test(this.input.slice(this.pos,h))&&this.input.slice(h,h+8)==="function"&&(h+8===this.input.length||!(te(k=this.input.charCodeAt(h+8))||k>55295&&k<56320))},l.parseStatement=function(i,h,k){var R=this.type,j=this.startNode(),ne;switch(this.isLet(i)&&(R=T._var,ne="let"),R){case T._break:case T._continue:return this.parseBreakContinueStatement(j,R.keyword);case T._debugger:return this.parseDebuggerStatement(j);case T._do:return this.parseDoStatement(j);case T._for:return this.parseForStatement(j);case T._function:return i&&(this.strict||i!=="if"&&i!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(j,!1,!i);case T._class:return i&&this.unexpected(),this.parseClass(j,!0);case T._if:return this.parseIfStatement(j);case T._return:return this.parseReturnStatement(j);case T._switch:return this.parseSwitchStatement(j);case T._throw:return this.parseThrowStatement(j);case T._try:return this.parseTryStatement(j);case T._const:case T._var:return ne=ne||this.value,i&&ne!=="var"&&this.unexpected(),this.parseVarStatement(j,ne);case T._while:return this.parseWhileStatement(j);case T._with:return this.parseWithStatement(j);case T.braceL:return this.parseBlock(!0,j);case T.semi:return this.parseEmptyStatement(j);case T._export:case T._import:if(this.options.ecmaVersion>10&&R===T._import){Oe.lastIndex=this.pos;var le=Oe.exec(this.input),xe=this.pos+le[0].length,Ae=this.input.charCodeAt(xe);if(Ae===40||Ae===46)return this.parseExpressionStatement(j,this.parseExpression())}return this.options.allowImportExportEverywhere||(h||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),R===T._import?this.parseImport(j):this.parseExport(j,k);default:if(this.isAsyncFunction())return i&&this.unexpected(),this.next(),this.parseFunctionStatement(j,!0,!i);var et=this.value,st=this.parseExpression();return R===T.name&&st.type==="Identifier"&&this.eat(T.colon)?this.parseLabeledStatement(j,et,st,i):this.parseExpressionStatement(j,st)}},l.parseBreakContinueStatement=function(i,h){var k=h==="break";this.next(),this.eat(T.semi)||this.insertSemicolon()?i.label=null:this.type!==T.name?this.unexpected():(i.label=this.parseIdent(),this.semicolon());for(var R=0;R<this.labels.length;++R){var j=this.labels[R];if((i.label==null||j.name===i.label.name)&&(j.kind!=null&&(k||j.kind==="loop")||i.label&&k))break}return R===this.labels.length&&this.raise(i.start,"Unsyntactic "+h),this.finishNode(i,k?"BreakStatement":"ContinueStatement")},l.parseDebuggerStatement=function(i){return this.next(),this.semicolon(),this.finishNode(i,"DebuggerStatement")},l.parseDoStatement=function(i){return this.next(),this.labels.push(g),i.body=this.parseStatement("do"),this.labels.pop(),this.expect(T._while),i.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(T.semi):this.semicolon(),this.finishNode(i,"DoWhileStatement")},l.parseForStatement=function(i){this.next();var h=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(g),this.enterScope(0),this.expect(T.parenL),this.type===T.semi)return h>-1&&this.unexpected(h),this.parseFor(i,null);var k=this.isLet();if(this.type===T._var||this.type===T._const||k){var R=this.startNode(),j=k?"let":this.value;return this.next(),this.parseVar(R,!0,j),this.finishNode(R,"VariableDeclaration"),(this.type===T._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&R.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===T._in?h>-1&&this.unexpected(h):i.await=h>-1),this.parseForIn(i,R)):(h>-1&&this.unexpected(h),this.parseFor(i,R))}var ne=this.isContextual("let"),le=!1,xe=new a,Ae=this.parseExpression(h>-1?"await":!0,xe);return this.type===T._in||(le=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===T._in?h>-1&&this.unexpected(h):i.await=h>-1),ne&&le&&this.raise(Ae.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(Ae,!1,xe),this.checkLValPattern(Ae),this.parseForIn(i,Ae)):(this.checkExpressionErrors(xe,!0),h>-1&&this.unexpected(h),this.parseFor(i,Ae))},l.parseFunctionStatement=function(i,h,k){return this.next(),this.parseFunction(i,m|(k?0:w),!1,h)},l.parseIfStatement=function(i){return this.next(),i.test=this.parseParenExpression(),i.consequent=this.parseStatement("if"),i.alternate=this.eat(T._else)?this.parseStatement("if"):null,this.finishNode(i,"IfStatement")},l.parseReturnStatement=function(i){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(T.semi)||this.insertSemicolon()?i.argument=null:(i.argument=this.parseExpression(),this.semicolon()),this.finishNode(i,"ReturnStatement")},l.parseSwitchStatement=function(i){this.next(),i.discriminant=this.parseParenExpression(),i.cases=[],this.expect(T.braceL),this.labels.push(d),this.enterScope(0);for(var h,k=!1;this.type!==T.braceR;)if(this.type===T._case||this.type===T._default){var R=this.type===T._case;h&&this.finishNode(h,"SwitchCase"),i.cases.push(h=this.startNode()),h.consequent=[],this.next(),R?h.test=this.parseExpression():(k&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),k=!0,h.test=null),this.expect(T.colon)}else h||this.unexpected(),h.consequent.push(this.parseStatement(null));return this.exitScope(),h&&this.finishNode(h,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(i,"SwitchStatement")},l.parseThrowStatement=function(i){return this.next(),Ce.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),i.argument=this.parseExpression(),this.semicolon(),this.finishNode(i,"ThrowStatement")};var _=[];l.parseCatchClauseParam=function(){var i=this.parseBindingAtom(),h=i.type==="Identifier";return this.enterScope(h?rn:0),this.checkLValPattern(i,h?Sn:ri),this.expect(T.parenR),i},l.parseTryStatement=function(i){if(this.next(),i.block=this.parseBlock(),i.handler=null,this.type===T._catch){var h=this.startNode();this.next(),this.eat(T.parenL)?h.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),h.param=null,this.enterScope(0)),h.body=this.parseBlock(!1),this.exitScope(),i.handler=this.finishNode(h,"CatchClause")}return i.finalizer=this.eat(T._finally)?this.parseBlock():null,!i.handler&&!i.finalizer&&this.raise(i.start,"Missing catch or finally clause"),this.finishNode(i,"TryStatement")},l.parseVarStatement=function(i,h,k){return this.next(),this.parseVar(i,!1,h,k),this.semicolon(),this.finishNode(i,"VariableDeclaration")},l.parseWhileStatement=function(i){return this.next(),i.test=this.parseParenExpression(),this.labels.push(g),i.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(i,"WhileStatement")},l.parseWithStatement=function(i){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),i.object=this.parseParenExpression(),i.body=this.parseStatement("with"),this.finishNode(i,"WithStatement")},l.parseEmptyStatement=function(i){return this.next(),this.finishNode(i,"EmptyStatement")},l.parseLabeledStatement=function(i,h,k,R){for(var j=0,ne=this.labels;j<ne.length;j+=1){var le=ne[j];le.name===h&&this.raise(k.start,"Label '"+h+"' is already declared")}for(var xe=this.type.isLoop?"loop":this.type===T._switch?"switch":null,Ae=this.labels.length-1;Ae>=0;Ae--){var et=this.labels[Ae];if(et.statementStart===i.start)et.statementStart=this.start,et.kind=xe;else break}return this.labels.push({name:h,kind:xe,statementStart:this.start}),i.body=this.parseStatement(R?R.indexOf("label")===-1?R+"label":R:"label"),this.labels.pop(),i.label=k,this.finishNode(i,"LabeledStatement")},l.parseExpressionStatement=function(i,h){return i.expression=h,this.semicolon(),this.finishNode(i,"ExpressionStatement")},l.parseBlock=function(i,h,k){for(i===void 0&&(i=!0),h===void 0&&(h=this.startNode()),h.body=[],this.expect(T.braceL),i&&this.enterScope(0);this.type!==T.braceR;){var R=this.parseStatement(null);h.body.push(R)}return k&&(this.strict=!1),this.next(),i&&this.exitScope(),this.finishNode(h,"BlockStatement")},l.parseFor=function(i,h){return i.init=h,this.expect(T.semi),i.test=this.type===T.semi?null:this.parseExpression(),this.expect(T.semi),i.update=this.type===T.parenR?null:this.parseExpression(),this.expect(T.parenR),i.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(i,"ForStatement")},l.parseForIn=function(i,h){var k=this.type===T._in;return this.next(),h.type==="VariableDeclaration"&&h.declarations[0].init!=null&&(!k||this.options.ecmaVersion<8||this.strict||h.kind!=="var"||h.declarations[0].id.type!=="Identifier")&&this.raise(h.start,(k?"for-in":"for-of")+" loop variable declaration may not have an initializer"),i.left=h,i.right=k?this.parseExpression():this.parseMaybeAssign(),this.expect(T.parenR),i.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(i,k?"ForInStatement":"ForOfStatement")},l.parseVar=function(i,h,k,R){for(i.declarations=[],i.kind=k;;){var j=this.startNode();if(this.parseVarId(j,k),this.eat(T.eq)?j.init=this.parseMaybeAssign(h):!R&&k==="const"&&!(this.type===T._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!R&&j.id.type!=="Identifier"&&!(h&&(this.type===T._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):j.init=null,i.declarations.push(this.finishNode(j,"VariableDeclarator")),!this.eat(T.comma))break}return i},l.parseVarId=function(i,h){i.id=this.parseBindingAtom(),this.checkLValPattern(i.id,h==="var"?kt:ri,!1)};var m=1,w=2,C=4;l.parseFunction=function(i,h,k,R,j){this.initFunction(i),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!R)&&(this.type===T.star&&h&w&&this.unexpected(),i.generator=this.eat(T.star)),this.options.ecmaVersion>=8&&(i.async=!!R),h&m&&(i.id=h&C&&this.type!==T.name?null:this.parseIdent(),i.id&&!(h&w)&&this.checkLValSimple(i.id,this.strict||i.generator||i.async?this.treatFunctionsAsVar?kt:ri:xt));var ne=this.yieldPos,le=this.awaitPos,xe=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(wn(i.async,i.generator)),h&m||(i.id=this.type===T.name?this.parseIdent():null),this.parseFunctionParams(i),this.parseFunctionBody(i,k,!1,j),this.yieldPos=ne,this.awaitPos=le,this.awaitIdentPos=xe,this.finishNode(i,h&m?"FunctionDeclaration":"FunctionExpression")},l.parseFunctionParams=function(i){this.expect(T.parenL),i.params=this.parseBindingList(T.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},l.parseClass=function(i,h){this.next();var k=this.strict;this.strict=!0,this.parseClassId(i,h),this.parseClassSuper(i);var R=this.enterClassBody(),j=this.startNode(),ne=!1;for(j.body=[],this.expect(T.braceL);this.type!==T.braceR;){var le=this.parseClassElement(i.superClass!==null);le&&(j.body.push(le),le.type==="MethodDefinition"&&le.kind==="constructor"?(ne&&this.raiseRecoverable(le.start,"Duplicate constructor in the same class"),ne=!0):le.key&&le.key.type==="PrivateIdentifier"&&x(R,le)&&this.raiseRecoverable(le.key.start,"Identifier '#"+le.key.name+"' has already been declared"))}return this.strict=k,this.next(),i.body=this.finishNode(j,"ClassBody"),this.exitClassBody(),this.finishNode(i,h?"ClassDeclaration":"ClassExpression")},l.parseClassElement=function(i){if(this.eat(T.semi))return null;var h=this.options.ecmaVersion,k=this.startNode(),R="",j=!1,ne=!1,le="method",xe=!1;if(this.eatContextual("static")){if(h>=13&&this.eat(T.braceL))return this.parseClassStaticBlock(k),k;this.isClassElementNameStart()||this.type===T.star?xe=!0:R="static"}if(k.static=xe,!R&&h>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===T.star)&&!this.canInsertSemicolon()?ne=!0:R="async"),!R&&(h>=9||!ne)&&this.eat(T.star)&&(j=!0),!R&&!ne&&!j){var Ae=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?le=Ae:R=Ae)}if(R?(k.computed=!1,k.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),k.key.name=R,this.finishNode(k.key,"Identifier")):this.parseClassElementName(k),h<13||this.type===T.parenL||le!=="method"||j||ne){var et=!k.static&&y(k,"constructor"),st=et&&i;et&&le!=="method"&&this.raise(k.key.start,"Constructor can't have get/set modifier"),k.kind=et?"constructor":le,this.parseClassMethod(k,j,ne,st)}else this.parseClassField(k);return k},l.isClassElementNameStart=function(){return this.type===T.name||this.type===T.privateId||this.type===T.num||this.type===T.string||this.type===T.bracketL||this.type.keyword},l.parseClassElementName=function(i){this.type===T.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),i.computed=!1,i.key=this.parsePrivateIdent()):this.parsePropertyName(i)},l.parseClassMethod=function(i,h,k,R){var j=i.key;i.kind==="constructor"?(h&&this.raise(j.start,"Constructor can't be a generator"),k&&this.raise(j.start,"Constructor can't be an async method")):i.static&&y(i,"prototype")&&this.raise(j.start,"Classes may not have a static property named prototype");var ne=i.value=this.parseMethod(h,k,R);return i.kind==="get"&&ne.params.length!==0&&this.raiseRecoverable(ne.start,"getter should have no params"),i.kind==="set"&&ne.params.length!==1&&this.raiseRecoverable(ne.start,"setter should have exactly one param"),i.kind==="set"&&ne.params[0].type==="RestElement"&&this.raiseRecoverable(ne.params[0].start,"Setter cannot use rest params"),this.finishNode(i,"MethodDefinition")},l.parseClassField=function(i){if(y(i,"constructor")?this.raise(i.key.start,"Classes can't have a field named 'constructor'"):i.static&&y(i,"prototype")&&this.raise(i.key.start,"Classes can't have a static field named 'prototype'"),this.eat(T.eq)){var h=this.currentThisScope(),k=h.inClassFieldInit;h.inClassFieldInit=!0,i.value=this.parseMaybeAssign(),h.inClassFieldInit=k}else i.value=null;return this.semicolon(),this.finishNode(i,"PropertyDefinition")},l.parseClassStaticBlock=function(i){i.body=[];var h=this.labels;for(this.labels=[],this.enterScope(Di|Ti);this.type!==T.braceR;){var k=this.parseStatement(null);i.body.push(k)}return this.next(),this.exitScope(),this.labels=h,this.finishNode(i,"StaticBlock")},l.parseClassId=function(i,h){this.type===T.name?(i.id=this.parseIdent(),h&&this.checkLValSimple(i.id,ri,!1)):(h===!0&&this.unexpected(),i.id=null)},l.parseClassSuper=function(i){i.superClass=this.eat(T._extends)?this.parseExprSubscripts(null,!1):null},l.enterClassBody=function(){var i={declared:Object.create(null),used:[]};return this.privateNameStack.push(i),i.declared},l.exitClassBody=function(){var i=this.privateNameStack.pop(),h=i.declared,k=i.used;if(this.options.checkPrivateFields)for(var R=this.privateNameStack.length,j=R===0?null:this.privateNameStack[R-1],ne=0;ne<k.length;++ne){var le=k[ne];ve(h,le.name)||(j?j.used.push(le):this.raiseRecoverable(le.start,"Private field '#"+le.name+"' must be declared in an enclosing class"))}};function x(i,h){var k=h.key.name,R=i[k],j="true";return h.type==="MethodDefinition"&&(h.kind==="get"||h.kind==="set")&&(j=(h.static?"s":"i")+h.kind),R==="iget"&&j==="iset"||R==="iset"&&j==="iget"||R==="sget"&&j==="sset"||R==="sset"&&j==="sget"?(i[k]="true",!1):R?!0:(i[k]=j,!1)}function y(i,h){var k=i.computed,R=i.key;return!k&&(R.type==="Identifier"&&R.name===h||R.type==="Literal"&&R.value===h)}l.parseExportAllDeclaration=function(i,h){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(i.exported=this.parseModuleExportName(),this.checkExport(h,i.exported,this.lastTokStart)):i.exported=null),this.expectContextual("from"),this.type!==T.string&&this.unexpected(),i.source=this.parseExprAtom(),this.semicolon(),this.finishNode(i,"ExportAllDeclaration")},l.parseExport=function(i,h){if(this.next(),this.eat(T.star))return this.parseExportAllDeclaration(i,h);if(this.eat(T._default))return this.checkExport(h,"default",this.lastTokStart),i.declaration=this.parseExportDefaultDeclaration(),this.finishNode(i,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())i.declaration=this.parseExportDeclaration(i),i.declaration.type==="VariableDeclaration"?this.checkVariableExport(h,i.declaration.declarations):this.checkExport(h,i.declaration.id,i.declaration.id.start),i.specifiers=[],i.source=null;else{if(i.declaration=null,i.specifiers=this.parseExportSpecifiers(h),this.eatContextual("from"))this.type!==T.string&&this.unexpected(),i.source=this.parseExprAtom();else{for(var k=0,R=i.specifiers;k<R.length;k+=1){var j=R[k];this.checkUnreserved(j.local),this.checkLocalExport(j.local),j.local.type==="Literal"&&this.raise(j.local.start,"A string literal cannot be used as an exported binding without `from`.")}i.source=null}this.semicolon()}return this.finishNode(i,"ExportNamedDeclaration")},l.parseExportDeclaration=function(i){return this.parseStatement(null)},l.parseExportDefaultDeclaration=function(){var i;if(this.type===T._function||(i=this.isAsyncFunction())){var h=this.startNode();return this.next(),i&&this.next(),this.parseFunction(h,m|C,!1,i)}else if(this.type===T._class){var k=this.startNode();return this.parseClass(k,"nullableID")}else{var R=this.parseMaybeAssign();return this.semicolon(),R}},l.checkExport=function(i,h,k){i&&(typeof h!="string"&&(h=h.type==="Identifier"?h.name:h.value),ve(i,h)&&this.raiseRecoverable(k,"Duplicate export '"+h+"'"),i[h]=!0)},l.checkPatternExport=function(i,h){var k=h.type;if(k==="Identifier")this.checkExport(i,h,h.start);else if(k==="ObjectPattern")for(var R=0,j=h.properties;R<j.length;R+=1){var ne=j[R];this.checkPatternExport(i,ne)}else if(k==="ArrayPattern")for(var le=0,xe=h.elements;le<xe.length;le+=1){var Ae=xe[le];Ae&&this.checkPatternExport(i,Ae)}else k==="Property"?this.checkPatternExport(i,h.value):k==="AssignmentPattern"?this.checkPatternExport(i,h.left):k==="RestElement"&&this.checkPatternExport(i,h.argument)},l.checkVariableExport=function(i,h){if(i)for(var k=0,R=h;k<R.length;k+=1){var j=R[k];this.checkPatternExport(i,j.id)}},l.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},l.parseExportSpecifier=function(i){var h=this.startNode();return h.local=this.parseModuleExportName(),h.exported=this.eatContextual("as")?this.parseModuleExportName():h.local,this.checkExport(i,h.exported,h.exported.start),this.finishNode(h,"ExportSpecifier")},l.parseExportSpecifiers=function(i){var h=[],k=!0;for(this.expect(T.braceL);!this.eat(T.braceR);){if(k)k=!1;else if(this.expect(T.comma),this.afterTrailingComma(T.braceR))break;h.push(this.parseExportSpecifier(i))}return h},l.parseImport=function(i){return this.next(),this.type===T.string?(i.specifiers=_,i.source=this.parseExprAtom()):(i.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),i.source=this.type===T.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(i,"ImportDeclaration")},l.parseImportSpecifier=function(){var i=this.startNode();return i.imported=this.parseModuleExportName(),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLValSimple(i.local,ri),this.finishNode(i,"ImportSpecifier")},l.parseImportDefaultSpecifier=function(){var i=this.startNode();return i.local=this.parseIdent(),this.checkLValSimple(i.local,ri),this.finishNode(i,"ImportDefaultSpecifier")},l.parseImportNamespaceSpecifier=function(){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLValSimple(i.local,ri),this.finishNode(i,"ImportNamespaceSpecifier")},l.parseImportSpecifiers=function(){var i=[],h=!0;if(this.type===T.name&&(i.push(this.parseImportDefaultSpecifier()),!this.eat(T.comma)))return i;if(this.type===T.star)return i.push(this.parseImportNamespaceSpecifier()),i;for(this.expect(T.braceL);!this.eat(T.braceR);){if(h)h=!1;else if(this.expect(T.comma),this.afterTrailingComma(T.braceR))break;i.push(this.parseImportSpecifier())}return i},l.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===T.string){var i=this.parseLiteral(this.value);return Xt.test(i.value)&&this.raise(i.start,"An export name cannot include a lone surrogate."),i}return this.parseIdent(!0)},l.adaptDirectivePrologue=function(i){for(var h=0;h<i.length&&this.isDirectiveCandidate(i[h]);++h)i[h].directive=i[h].expression.raw.slice(1,-1)},l.isDirectiveCandidate=function(i){return this.options.ecmaVersion>=5&&i.type==="ExpressionStatement"&&i.expression.type==="Literal"&&typeof i.expression.value=="string"&&(this.input[i.start]==='"'||this.input[i.start]==="'")};var N=e.prototype;N.toAssignable=function(i,h,k){if(this.options.ecmaVersion>=6&&i)switch(i.type){case"Identifier":this.inAsync&&i.name==="await"&&this.raise(i.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":i.type="ObjectPattern",k&&this.checkPatternErrors(k,!0);for(var R=0,j=i.properties;R<j.length;R+=1){var ne=j[R];this.toAssignable(ne,h),ne.type==="RestElement"&&(ne.argument.type==="ArrayPattern"||ne.argument.type==="ObjectPattern")&&this.raise(ne.argument.start,"Unexpected token")}break;case"Property":i.kind!=="init"&&this.raise(i.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(i.value,h);break;case"ArrayExpression":i.type="ArrayPattern",k&&this.checkPatternErrors(k,!0),this.toAssignableList(i.elements,h);break;case"SpreadElement":i.type="RestElement",this.toAssignable(i.argument,h),i.argument.type==="AssignmentPattern"&&this.raise(i.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":i.operator!=="="&&this.raise(i.left.end,"Only '=' operator can be used for specifying default value."),i.type="AssignmentPattern",delete i.operator,this.toAssignable(i.left,h);break;case"ParenthesizedExpression":this.toAssignable(i.expression,h,k);break;case"ChainExpression":this.raiseRecoverable(i.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!h)break;default:this.raise(i.start,"Assigning to rvalue")}else k&&this.checkPatternErrors(k,!0);return i},N.toAssignableList=function(i,h){for(var k=i.length,R=0;R<k;R++){var j=i[R];j&&this.toAssignable(j,h)}if(k){var ne=i[k-1];this.options.ecmaVersion===6&&h&&ne&&ne.type==="RestElement"&&ne.argument.type!=="Identifier"&&this.unexpected(ne.argument.start)}return i},N.parseSpread=function(i){var h=this.startNode();return this.next(),h.argument=this.parseMaybeAssign(!1,i),this.finishNode(h,"SpreadElement")},N.parseRestBinding=function(){var i=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==T.name&&this.unexpected(),i.argument=this.parseBindingAtom(),this.finishNode(i,"RestElement")},N.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case T.bracketL:var i=this.startNode();return this.next(),i.elements=this.parseBindingList(T.bracketR,!0,!0),this.finishNode(i,"ArrayPattern");case T.braceL:return this.parseObj(!0)}return this.parseIdent()},N.parseBindingList=function(i,h,k,R){for(var j=[],ne=!0;!this.eat(i);)if(ne?ne=!1:this.expect(T.comma),h&&this.type===T.comma)j.push(null);else{if(k&&this.afterTrailingComma(i))break;if(this.type===T.ellipsis){var le=this.parseRestBinding();this.parseBindingListItem(le),j.push(le),this.type===T.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(i);break}else j.push(this.parseAssignableListItem(R))}return j},N.parseAssignableListItem=function(i){var h=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(h),h},N.parseBindingListItem=function(i){return i},N.parseMaybeDefault=function(i,h,k){if(k=k||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(T.eq))return k;var R=this.startNodeAt(i,h);return R.left=k,R.right=this.parseMaybeAssign(),this.finishNode(R,"AssignmentPattern")},N.checkLValSimple=function(i,h,k){h===void 0&&(h=Fi);var R=h!==Fi;switch(i.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(i.name)&&this.raiseRecoverable(i.start,(R?"Binding ":"Assigning to ")+i.name+" in strict mode"),R&&(h===ri&&i.name==="let"&&this.raiseRecoverable(i.start,"let is disallowed as a lexically bound name"),k&&(ve(k,i.name)&&this.raiseRecoverable(i.start,"Argument name clash"),k[i.name]=!0),h!==it&&this.declareName(i.name,h,i.start));break;case"ChainExpression":this.raiseRecoverable(i.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":R&&this.raiseRecoverable(i.start,"Binding member expression");break;case"ParenthesizedExpression":return R&&this.raiseRecoverable(i.start,"Binding parenthesized expression"),this.checkLValSimple(i.expression,h,k);default:this.raise(i.start,(R?"Binding":"Assigning to")+" rvalue")}},N.checkLValPattern=function(i,h,k){switch(h===void 0&&(h=Fi),i.type){case"ObjectPattern":for(var R=0,j=i.properties;R<j.length;R+=1){var ne=j[R];this.checkLValInnerPattern(ne,h,k)}break;case"ArrayPattern":for(var le=0,xe=i.elements;le<xe.length;le+=1){var Ae=xe[le];Ae&&this.checkLValInnerPattern(Ae,h,k)}break;default:this.checkLValSimple(i,h,k)}},N.checkLValInnerPattern=function(i,h,k){switch(h===void 0&&(h=Fi),i.type){case"Property":this.checkLValInnerPattern(i.value,h,k);break;case"AssignmentPattern":this.checkLValPattern(i.left,h,k);break;case"RestElement":this.checkLValPattern(i.argument,h,k);break;default:this.checkLValPattern(i,h,k)}};var P=function(h,k,R,j,ne){this.token=h,this.isExpr=!!k,this.preserveSpace=!!R,this.override=j,this.generator=!!ne},E={b_stat:new P("{",!1),b_expr:new P("{",!0),b_tmpl:new P("${",!1),p_stat:new P("(",!1),p_expr:new P("(",!0),q_tmpl:new P("`",!0,!0,function(i){return i.tryReadTemplateToken()}),f_stat:new P("function",!1),f_expr:new P("function",!0),f_expr_gen:new P("function",!0,!1,null,!0),f_gen:new P("function",!1,!1,null,!0)},S=e.prototype;S.initialContext=function(){return[E.b_stat]},S.curContext=function(){return this.context[this.context.length-1]},S.braceIsBlock=function(i){var h=this.curContext();return h===E.f_expr||h===E.f_stat?!0:i===T.colon&&(h===E.b_stat||h===E.b_expr)?!h.isExpr:i===T._return||i===T.name&&this.exprAllowed?Ce.test(this.input.slice(this.lastTokEnd,this.start)):i===T._else||i===T.semi||i===T.eof||i===T.parenR||i===T.arrow?!0:i===T.braceL?h===E.b_stat:i===T._var||i===T._const||i===T.name?!1:!this.exprAllowed},S.inGeneratorContext=function(){for(var i=this.context.length-1;i>=1;i--){var h=this.context[i];if(h.token==="function")return h.generator}return!1},S.updateContext=function(i){var h,k=this.type;k.keyword&&i===T.dot?this.exprAllowed=!1:(h=k.updateContext)?h.call(this,i):this.exprAllowed=k.beforeExpr},S.overrideContext=function(i){this.curContext()!==i&&(this.context[this.context.length-1]=i)},T.parenR.updateContext=T.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var i=this.context.pop();i===E.b_stat&&this.curContext().token==="function"&&(i=this.context.pop()),this.exprAllowed=!i.isExpr},T.braceL.updateContext=function(i){this.context.push(this.braceIsBlock(i)?E.b_stat:E.b_expr),this.exprAllowed=!0},T.dollarBraceL.updateContext=function(){this.context.push(E.b_tmpl),this.exprAllowed=!0},T.parenL.updateContext=function(i){var h=i===T._if||i===T._for||i===T._with||i===T._while;this.context.push(h?E.p_stat:E.p_expr),this.exprAllowed=!0},T.incDec.updateContext=function(){},T._function.updateContext=T._class.updateContext=function(i){i.beforeExpr&&i!==T._else&&!(i===T.semi&&this.curContext()!==E.p_stat)&&!(i===T._return&&Ce.test(this.input.slice(this.lastTokEnd,this.start)))&&!((i===T.colon||i===T.braceL)&&this.curContext()===E.b_stat)?this.context.push(E.f_expr):this.context.push(E.f_stat),this.exprAllowed=!1},T.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},T.backQuote.updateContext=function(){this.curContext()===E.q_tmpl?this.context.pop():this.context.push(E.q_tmpl),this.exprAllowed=!1},T.star.updateContext=function(i){if(i===T._function){var h=this.context.length-1;this.context[h]===E.f_expr?this.context[h]=E.f_expr_gen:this.context[h]=E.f_gen}this.exprAllowed=!0},T.name.updateContext=function(i){var h=!1;this.options.ecmaVersion>=6&&i!==T.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(h=!0),this.exprAllowed=h};var I=e.prototype;I.checkPropClash=function(i,h,k){if(!(this.options.ecmaVersion>=9&&i.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(i.computed||i.method||i.shorthand))){var R=i.key,j;switch(R.type){case"Identifier":j=R.name;break;case"Literal":j=String(R.value);break;default:return}var ne=i.kind;if(this.options.ecmaVersion>=6){j==="__proto__"&&ne==="init"&&(h.proto&&(k?k.doubleProto<0&&(k.doubleProto=R.start):this.raiseRecoverable(R.start,"Redefinition of __proto__ property")),h.proto=!0);return}j="$"+j;var le=h[j];if(le){var xe;ne==="init"?xe=this.strict&&le.init||le.get||le.set:xe=le.init||le[ne],xe&&this.raiseRecoverable(R.start,"Redefinition of property")}else le=h[j]={init:!1,get:!1,set:!1};le[ne]=!0}},I.parseExpression=function(i,h){var k=this.start,R=this.startLoc,j=this.parseMaybeAssign(i,h);if(this.type===T.comma){var ne=this.startNodeAt(k,R);for(ne.expressions=[j];this.eat(T.comma);)ne.expressions.push(this.parseMaybeAssign(i,h));return this.finishNode(ne,"SequenceExpression")}return j},I.parseMaybeAssign=function(i,h,k){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(i);this.exprAllowed=!1}var R=!1,j=-1,ne=-1,le=-1;h?(j=h.parenthesizedAssign,ne=h.trailingComma,le=h.doubleProto,h.parenthesizedAssign=h.trailingComma=-1):(h=new a,R=!0);var xe=this.start,Ae=this.startLoc;(this.type===T.parenL||this.type===T.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=i==="await");var et=this.parseMaybeConditional(i,h);if(k&&(et=k.call(this,et,xe,Ae)),this.type.isAssign){var st=this.startNodeAt(xe,Ae);return st.operator=this.value,this.type===T.eq&&(et=this.toAssignable(et,!1,h)),R||(h.parenthesizedAssign=h.trailingComma=h.doubleProto=-1),h.shorthandAssign>=et.start&&(h.shorthandAssign=-1),this.type===T.eq?this.checkLValPattern(et):this.checkLValSimple(et),st.left=et,this.next(),st.right=this.parseMaybeAssign(i),le>-1&&(h.doubleProto=le),this.finishNode(st,"AssignmentExpression")}else R&&this.checkExpressionErrors(h,!0);return j>-1&&(h.parenthesizedAssign=j),ne>-1&&(h.trailingComma=ne),et},I.parseMaybeConditional=function(i,h){var k=this.start,R=this.startLoc,j=this.parseExprOps(i,h);if(this.checkExpressionErrors(h))return j;if(this.eat(T.question)){var ne=this.startNodeAt(k,R);return ne.test=j,ne.consequent=this.parseMaybeAssign(),this.expect(T.colon),ne.alternate=this.parseMaybeAssign(i),this.finishNode(ne,"ConditionalExpression")}return j},I.parseExprOps=function(i,h){var k=this.start,R=this.startLoc,j=this.parseMaybeUnary(h,!1,!1,i);return this.checkExpressionErrors(h)||j.start===k&&j.type==="ArrowFunctionExpression"?j:this.parseExprOp(j,k,R,-1,i)},I.parseExprOp=function(i,h,k,R,j){var ne=this.type.binop;if(ne!=null&&(!j||this.type!==T._in)&&ne>R){var le=this.type===T.logicalOR||this.type===T.logicalAND,xe=this.type===T.coalesce;xe&&(ne=T.logicalAND.binop);var Ae=this.value;this.next();var et=this.start,st=this.startLoc,Nt=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,j),et,st,ne,j),ki=this.buildBinary(h,k,i,Nt,Ae,le||xe);return(le&&this.type===T.coalesce||xe&&(this.type===T.logicalOR||this.type===T.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(ki,h,k,R,j)}return i},I.buildBinary=function(i,h,k,R,j,ne){R.type==="PrivateIdentifier"&&this.raise(R.start,"Private identifier can only be left side of binary expression");var le=this.startNodeAt(i,h);return le.left=k,le.operator=j,le.right=R,this.finishNode(le,ne?"LogicalExpression":"BinaryExpression")},I.parseMaybeUnary=function(i,h,k,R){var j=this.start,ne=this.startLoc,le;if(this.isContextual("await")&&this.canAwait)le=this.parseAwait(R),h=!0;else if(this.type.prefix){var xe=this.startNode(),Ae=this.type===T.incDec;xe.operator=this.value,xe.prefix=!0,this.next(),xe.argument=this.parseMaybeUnary(null,!0,Ae,R),this.checkExpressionErrors(i,!0),Ae?this.checkLValSimple(xe.argument):this.strict&&xe.operator==="delete"&&xe.argument.type==="Identifier"?this.raiseRecoverable(xe.start,"Deleting local variable in strict mode"):xe.operator==="delete"&&v(xe.argument)?this.raiseRecoverable(xe.start,"Private fields can not be deleted"):h=!0,le=this.finishNode(xe,Ae?"UpdateExpression":"UnaryExpression")}else if(!h&&this.type===T.privateId)(R||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),le=this.parsePrivateIdent(),this.type!==T._in&&this.unexpected();else{if(le=this.parseExprSubscripts(i,R),this.checkExpressionErrors(i))return le;for(;this.type.postfix&&!this.canInsertSemicolon();){var et=this.startNodeAt(j,ne);et.operator=this.value,et.prefix=!1,et.argument=le,this.checkLValSimple(le),this.next(),le=this.finishNode(et,"UpdateExpression")}}if(!k&&this.eat(T.starstar))if(h)this.unexpected(this.lastTokStart);else return this.buildBinary(j,ne,le,this.parseMaybeUnary(null,!1,!1,R),"**",!1);else return le};function v(i){return i.type==="MemberExpression"&&i.property.type==="PrivateIdentifier"||i.type==="ChainExpression"&&v(i.expression)}I.parseExprSubscripts=function(i,h){var k=this.start,R=this.startLoc,j=this.parseExprAtom(i,h);if(j.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return j;var ne=this.parseSubscripts(j,k,R,!1,h);return i&&ne.type==="MemberExpression"&&(i.parenthesizedAssign>=ne.start&&(i.parenthesizedAssign=-1),i.parenthesizedBind>=ne.start&&(i.parenthesizedBind=-1),i.trailingComma>=ne.start&&(i.trailingComma=-1)),ne},I.parseSubscripts=function(i,h,k,R,j){for(var ne=this.options.ecmaVersion>=8&&i.type==="Identifier"&&i.name==="async"&&this.lastTokEnd===i.end&&!this.canInsertSemicolon()&&i.end-i.start===5&&this.potentialArrowAt===i.start,le=!1;;){var xe=this.parseSubscript(i,h,k,R,ne,le,j);if(xe.optional&&(le=!0),xe===i||xe.type==="ArrowFunctionExpression"){if(le){var Ae=this.startNodeAt(h,k);Ae.expression=xe,xe=this.finishNode(Ae,"ChainExpression")}return xe}i=xe}},I.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(T.arrow)},I.parseSubscriptAsyncArrow=function(i,h,k,R){return this.parseArrowExpression(this.startNodeAt(i,h),k,!0,R)},I.parseSubscript=function(i,h,k,R,j,ne,le){var xe=this.options.ecmaVersion>=11,Ae=xe&&this.eat(T.questionDot);R&&Ae&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var et=this.eat(T.bracketL);if(et||Ae&&this.type!==T.parenL&&this.type!==T.backQuote||this.eat(T.dot)){var st=this.startNodeAt(h,k);st.object=i,et?(st.property=this.parseExpression(),this.expect(T.bracketR)):this.type===T.privateId&&i.type!=="Super"?st.property=this.parsePrivateIdent():st.property=this.parseIdent(this.options.allowReserved!=="never"),st.computed=!!et,xe&&(st.optional=Ae),i=this.finishNode(st,"MemberExpression")}else if(!R&&this.eat(T.parenL)){var Nt=new a,ki=this.yieldPos,Wi=this.awaitPos,Ni=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var un=this.parseExprList(T.parenR,this.options.ecmaVersion>=8,!1,Nt);if(j&&!Ae&&this.shouldParseAsyncArrow())return this.checkPatternErrors(Nt,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=ki,this.awaitPos=Wi,this.awaitIdentPos=Ni,this.parseSubscriptAsyncArrow(h,k,un,le);this.checkExpressionErrors(Nt,!0),this.yieldPos=ki||this.yieldPos,this.awaitPos=Wi||this.awaitPos,this.awaitIdentPos=Ni||this.awaitIdentPos;var Mi=this.startNodeAt(h,k);Mi.callee=i,Mi.arguments=un,xe&&(Mi.optional=Ae),i=this.finishNode(Mi,"CallExpression")}else if(this.type===T.backQuote){(Ae||ne)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var Li=this.startNodeAt(h,k);Li.tag=i,Li.quasi=this.parseTemplate({isTagged:!0}),i=this.finishNode(Li,"TaggedTemplateExpression")}return i},I.parseExprAtom=function(i,h,k){this.type===T.slash&&this.readRegexp();var R,j=this.potentialArrowAt===this.start;switch(this.type){case T._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),R=this.startNode(),this.next(),this.type===T.parenL&&!this.allowDirectSuper&&this.raise(R.start,"super() call outside constructor of a subclass"),this.type!==T.dot&&this.type!==T.bracketL&&this.type!==T.parenL&&this.unexpected(),this.finishNode(R,"Super");case T._this:return R=this.startNode(),this.next(),this.finishNode(R,"ThisExpression");case T.name:var ne=this.start,le=this.startLoc,xe=this.containsEsc,Ae=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!xe&&Ae.name==="async"&&!this.canInsertSemicolon()&&this.eat(T._function))return this.overrideContext(E.f_expr),this.parseFunction(this.startNodeAt(ne,le),0,!1,!0,h);if(j&&!this.canInsertSemicolon()){if(this.eat(T.arrow))return this.parseArrowExpression(this.startNodeAt(ne,le),[Ae],!1,h);if(this.options.ecmaVersion>=8&&Ae.name==="async"&&this.type===T.name&&!xe&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return Ae=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(T.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(ne,le),[Ae],!0,h)}return Ae;case T.regexp:var et=this.value;return R=this.parseLiteral(et.value),R.regex={pattern:et.pattern,flags:et.flags},R;case T.num:case T.string:return this.parseLiteral(this.value);case T._null:case T._true:case T._false:return R=this.startNode(),R.value=this.type===T._null?null:this.type===T._true,R.raw=this.type.keyword,this.next(),this.finishNode(R,"Literal");case T.parenL:var st=this.start,Nt=this.parseParenAndDistinguishExpression(j,h);return i&&(i.parenthesizedAssign<0&&!this.isSimpleAssignTarget(Nt)&&(i.parenthesizedAssign=st),i.parenthesizedBind<0&&(i.parenthesizedBind=st)),Nt;case T.bracketL:return R=this.startNode(),this.next(),R.elements=this.parseExprList(T.bracketR,!0,!0,i),this.finishNode(R,"ArrayExpression");case T.braceL:return this.overrideContext(E.b_expr),this.parseObj(!1,i);case T._function:return R=this.startNode(),this.next(),this.parseFunction(R,0);case T._class:return this.parseClass(this.startNode(),!1);case T._new:return this.parseNew();case T.backQuote:return this.parseTemplate();case T._import:return this.options.ecmaVersion>=11?this.parseExprImport(k):this.unexpected();default:return this.parseExprAtomDefault()}},I.parseExprAtomDefault=function(){this.unexpected()},I.parseExprImport=function(i){var h=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var k=this.parseIdent(!0);if(this.type===T.parenL&&!i)return this.parseDynamicImport(h);if(this.type===T.dot)return h.meta=k,this.parseImportMeta(h);this.unexpected()},I.parseDynamicImport=function(i){if(this.next(),i.source=this.parseMaybeAssign(),!this.eat(T.parenR)){var h=this.start;this.eat(T.comma)&&this.eat(T.parenR)?this.raiseRecoverable(h,"Trailing comma is not allowed in import()"):this.unexpected(h)}return this.finishNode(i,"ImportExpression")},I.parseImportMeta=function(i){this.next();var h=this.containsEsc;return i.property=this.parseIdent(!0),i.property.name!=="meta"&&this.raiseRecoverable(i.property.start,"The only valid meta property for import is 'import.meta'"),h&&this.raiseRecoverable(i.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(i.start,"Cannot use 'import.meta' outside a module"),this.finishNode(i,"MetaProperty")},I.parseLiteral=function(i){var h=this.startNode();return h.value=i,h.raw=this.input.slice(this.start,this.end),h.raw.charCodeAt(h.raw.length-1)===110&&(h.bigint=h.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(h,"Literal")},I.parseParenExpression=function(){this.expect(T.parenL);var i=this.parseExpression();return this.expect(T.parenR),i},I.shouldParseArrow=function(i){return!this.canInsertSemicolon()},I.parseParenAndDistinguishExpression=function(i,h){var k=this.start,R=this.startLoc,j,ne=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var le=this.start,xe=this.startLoc,Ae=[],et=!0,st=!1,Nt=new a,ki=this.yieldPos,Wi=this.awaitPos,Ni;for(this.yieldPos=0,this.awaitPos=0;this.type!==T.parenR;)if(et?et=!1:this.expect(T.comma),ne&&this.afterTrailingComma(T.parenR,!0)){st=!0;break}else if(this.type===T.ellipsis){Ni=this.start,Ae.push(this.parseParenItem(this.parseRestBinding())),this.type===T.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else Ae.push(this.parseMaybeAssign(!1,Nt,this.parseParenItem));var un=this.lastTokEnd,Mi=this.lastTokEndLoc;if(this.expect(T.parenR),i&&this.shouldParseArrow(Ae)&&this.eat(T.arrow))return this.checkPatternErrors(Nt,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=ki,this.awaitPos=Wi,this.parseParenArrowList(k,R,Ae,h);(!Ae.length||st)&&this.unexpected(this.lastTokStart),Ni&&this.unexpected(Ni),this.checkExpressionErrors(Nt,!0),this.yieldPos=ki||this.yieldPos,this.awaitPos=Wi||this.awaitPos,Ae.length>1?(j=this.startNodeAt(le,xe),j.expressions=Ae,this.finishNodeAt(j,"SequenceExpression",un,Mi)):j=Ae[0]}else j=this.parseParenExpression();if(this.options.preserveParens){var Li=this.startNodeAt(k,R);return Li.expression=j,this.finishNode(Li,"ParenthesizedExpression")}else return j},I.parseParenItem=function(i){return i},I.parseParenArrowList=function(i,h,k,R){return this.parseArrowExpression(this.startNodeAt(i,h),k,!1,R)};var A=[];I.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var i=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===T.dot){var h=this.startNodeAt(i.start,i.startLoc);h.name="new",i.meta=this.finishNode(h,"Identifier"),this.next();var k=this.containsEsc;return i.property=this.parseIdent(!0),i.property.name!=="target"&&this.raiseRecoverable(i.property.start,"The only valid meta property for new is 'new.target'"),k&&this.raiseRecoverable(i.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(i.start,"'new.target' can only be used in functions and class static block"),this.finishNode(i,"MetaProperty")}var R=this.start,j=this.startLoc;return i.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),R,j,!0,!1),this.eat(T.parenL)?i.arguments=this.parseExprList(T.parenR,this.options.ecmaVersion>=8,!1):i.arguments=A,this.finishNode(i,"NewExpression")},I.parseTemplateElement=function(i){var h=i.isTagged,k=this.startNode();return this.type===T.invalidTemplate?(h||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),k.value={raw:this.value,cooked:null}):k.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),k.tail=this.type===T.backQuote,this.finishNode(k,"TemplateElement")},I.parseTemplate=function(i){i===void 0&&(i={});var h=i.isTagged;h===void 0&&(h=!1);var k=this.startNode();this.next(),k.expressions=[];var R=this.parseTemplateElement({isTagged:h});for(k.quasis=[R];!R.tail;)this.type===T.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(T.dollarBraceL),k.expressions.push(this.parseExpression()),this.expect(T.braceR),k.quasis.push(R=this.parseTemplateElement({isTagged:h}));return this.next(),this.finishNode(k,"TemplateLiteral")},I.isAsyncProp=function(i){return!i.computed&&i.key.type==="Identifier"&&i.key.name==="async"&&(this.type===T.name||this.type===T.num||this.type===T.string||this.type===T.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===T.star)&&!Ce.test(this.input.slice(this.lastTokEnd,this.start))},I.parseObj=function(i,h){var k=this.startNode(),R=!0,j={};for(k.properties=[],this.next();!this.eat(T.braceR);){if(R)R=!1;else if(this.expect(T.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(T.braceR))break;var ne=this.parseProperty(i,h);i||this.checkPropClash(ne,j,h),k.properties.push(ne)}return this.finishNode(k,i?"ObjectPattern":"ObjectExpression")},I.parseProperty=function(i,h){var k=this.startNode(),R,j,ne,le;if(this.options.ecmaVersion>=9&&this.eat(T.ellipsis))return i?(k.argument=this.parseIdent(!1),this.type===T.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(k,"RestElement")):(k.argument=this.parseMaybeAssign(!1,h),this.type===T.comma&&h&&h.trailingComma<0&&(h.trailingComma=this.start),this.finishNode(k,"SpreadElement"));this.options.ecmaVersion>=6&&(k.method=!1,k.shorthand=!1,(i||h)&&(ne=this.start,le=this.startLoc),i||(R=this.eat(T.star)));var xe=this.containsEsc;return this.parsePropertyName(k),!i&&!xe&&this.options.ecmaVersion>=8&&!R&&this.isAsyncProp(k)?(j=!0,R=this.options.ecmaVersion>=9&&this.eat(T.star),this.parsePropertyName(k)):j=!1,this.parsePropertyValue(k,i,R,j,ne,le,h,xe),this.finishNode(k,"Property")},I.parseGetterSetter=function(i){i.kind=i.key.name,this.parsePropertyName(i),i.value=this.parseMethod(!1);var h=i.kind==="get"?0:1;if(i.value.params.length!==h){var k=i.value.start;i.kind==="get"?this.raiseRecoverable(k,"getter should have no params"):this.raiseRecoverable(k,"setter should have exactly one param")}else i.kind==="set"&&i.value.params[0].type==="RestElement"&&this.raiseRecoverable(i.value.params[0].start,"Setter cannot use rest params")},I.parsePropertyValue=function(i,h,k,R,j,ne,le,xe){(k||R)&&this.type===T.colon&&this.unexpected(),this.eat(T.colon)?(i.value=h?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,le),i.kind="init"):this.options.ecmaVersion>=6&&this.type===T.parenL?(h&&this.unexpected(),i.kind="init",i.method=!0,i.value=this.parseMethod(k,R)):!h&&!xe&&this.options.ecmaVersion>=5&&!i.computed&&i.key.type==="Identifier"&&(i.key.name==="get"||i.key.name==="set")&&this.type!==T.comma&&this.type!==T.braceR&&this.type!==T.eq?((k||R)&&this.unexpected(),this.parseGetterSetter(i)):this.options.ecmaVersion>=6&&!i.computed&&i.key.type==="Identifier"?((k||R)&&this.unexpected(),this.checkUnreserved(i.key),i.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=j),i.kind="init",h?i.value=this.parseMaybeDefault(j,ne,this.copyNode(i.key)):this.type===T.eq&&le?(le.shorthandAssign<0&&(le.shorthandAssign=this.start),i.value=this.parseMaybeDefault(j,ne,this.copyNode(i.key))):i.value=this.copyNode(i.key),i.shorthand=!0):this.unexpected()},I.parsePropertyName=function(i){if(this.options.ecmaVersion>=6){if(this.eat(T.bracketL))return i.computed=!0,i.key=this.parseMaybeAssign(),this.expect(T.bracketR),i.key;i.computed=!1}return i.key=this.type===T.num||this.type===T.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},I.initFunction=function(i){i.id=null,this.options.ecmaVersion>=6&&(i.generator=i.expression=!1),this.options.ecmaVersion>=8&&(i.async=!1)},I.parseMethod=function(i,h,k){var R=this.startNode(),j=this.yieldPos,ne=this.awaitPos,le=this.awaitIdentPos;return this.initFunction(R),this.options.ecmaVersion>=6&&(R.generator=i),this.options.ecmaVersion>=8&&(R.async=!!h),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(wn(h,R.generator)|Ti|(k?sn:0)),this.expect(T.parenL),R.params=this.parseBindingList(T.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(R,!1,!0,!1),this.yieldPos=j,this.awaitPos=ne,this.awaitIdentPos=le,this.finishNode(R,"FunctionExpression")},I.parseArrowExpression=function(i,h,k,R){var j=this.yieldPos,ne=this.awaitPos,le=this.awaitIdentPos;return this.enterScope(wn(k,!1)|wi),this.initFunction(i),this.options.ecmaVersion>=8&&(i.async=!!k),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,i.params=this.toAssignableList(h,!0),this.parseFunctionBody(i,!0,!1,R),this.yieldPos=j,this.awaitPos=ne,this.awaitIdentPos=le,this.finishNode(i,"ArrowFunctionExpression")},I.parseFunctionBody=function(i,h,k,R){var j=h&&this.type!==T.braceL,ne=this.strict,le=!1;if(j)i.body=this.parseMaybeAssign(R),i.expression=!0,this.checkParams(i,!1);else{var xe=this.options.ecmaVersion>=7&&!this.isSimpleParamList(i.params);(!ne||xe)&&(le=this.strictDirective(this.end),le&&xe&&this.raiseRecoverable(i.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var Ae=this.labels;this.labels=[],le&&(this.strict=!0),this.checkParams(i,!ne&&!le&&!h&&!k&&this.isSimpleParamList(i.params)),this.strict&&i.id&&this.checkLValSimple(i.id,it),i.body=this.parseBlock(!1,void 0,le&&!ne),i.expression=!1,this.adaptDirectivePrologue(i.body.body),this.labels=Ae}this.exitScope()},I.isSimpleParamList=function(i){for(var h=0,k=i;h<k.length;h+=1){var R=k[h];if(R.type!=="Identifier")return!1}return!0},I.checkParams=function(i,h){for(var k=Object.create(null),R=0,j=i.params;R<j.length;R+=1){var ne=j[R];this.checkLValInnerPattern(ne,kt,h?null:k)}},I.parseExprList=function(i,h,k,R){for(var j=[],ne=!0;!this.eat(i);){if(ne)ne=!1;else if(this.expect(T.comma),h&&this.afterTrailingComma(i))break;var le=void 0;k&&this.type===T.comma?le=null:this.type===T.ellipsis?(le=this.parseSpread(R),R&&this.type===T.comma&&R.trailingComma<0&&(R.trailingComma=this.start)):le=this.parseMaybeAssign(!1,R),j.push(le)}return j},I.checkUnreserved=function(i){var h=i.start,k=i.end,R=i.name;if(this.inGenerator&&R==="yield"&&this.raiseRecoverable(h,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&R==="await"&&this.raiseRecoverable(h,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&R==="arguments"&&this.raiseRecoverable(h,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(R==="arguments"||R==="await")&&this.raise(h,"Cannot use "+R+" in class static initialization block"),this.keywords.test(R)&&this.raise(h,"Unexpected keyword '"+R+"'"),!(this.options.ecmaVersion<6&&this.input.slice(h,k).indexOf("\\")!==-1)){var j=this.strict?this.reservedWordsStrict:this.reservedWords;j.test(R)&&(!this.inAsync&&R==="await"&&this.raiseRecoverable(h,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(h,"The keyword '"+R+"' is reserved"))}},I.parseIdent=function(i){var h=this.parseIdentNode();return this.next(!!i),this.finishNode(h,"Identifier"),i||(this.checkUnreserved(h),h.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=h.start)),h},I.parseIdentNode=function(){var i=this.startNode();return this.type===T.name?i.name=this.value:this.type.keyword?(i.name=this.type.keyword,(i.name==="class"||i.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=T.name):this.unexpected(),i},I.parsePrivateIdent=function(){var i=this.startNode();return this.type===T.privateId?i.name=this.value:this.unexpected(),this.next(),this.finishNode(i,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(i.start,"Private field '#"+i.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(i)),i},I.parseYield=function(i){this.yieldPos||(this.yieldPos=this.start);var h=this.startNode();return this.next(),this.type===T.semi||this.canInsertSemicolon()||this.type!==T.star&&!this.type.startsExpr?(h.delegate=!1,h.argument=null):(h.delegate=this.eat(T.star),h.argument=this.parseMaybeAssign(i)),this.finishNode(h,"YieldExpression")},I.parseAwait=function(i){this.awaitPos||(this.awaitPos=this.start);var h=this.startNode();return this.next(),h.argument=this.parseMaybeUnary(null,!0,!1,i),this.finishNode(h,"AwaitExpression")};var L=e.prototype;L.raise=function(i,h){var k=Bi(this.input,i);h+=" ("+k.line+":"+k.column+")";var R=new SyntaxError(h);throw R.pos=i,R.loc=k,R.raisedAt=this.pos,R},L.raiseRecoverable=L.raise,L.curPosition=function(){if(this.options.locations)return new ii(this.curLine,this.pos-this.lineStart)};var z=e.prototype,M=function(h){this.flags=h,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};z.enterScope=function(i){this.scopeStack.push(new M(i))},z.exitScope=function(){this.scopeStack.pop()},z.treatFunctionsAsVarInScope=function(i){return i.flags&ht||!this.inModule&&i.flags&ot},z.declareName=function(i,h,k){var R=!1;if(h===ri){var j=this.currentScope();R=j.lexical.indexOf(i)>-1||j.functions.indexOf(i)>-1||j.var.indexOf(i)>-1,j.lexical.push(i),this.inModule&&j.flags&ot&&delete this.undefinedExports[i]}else if(h===Sn){var ne=this.currentScope();ne.lexical.push(i)}else if(h===xt){var le=this.currentScope();this.treatFunctionsAsVar?R=le.lexical.indexOf(i)>-1:R=le.lexical.indexOf(i)>-1||le.var.indexOf(i)>-1,le.functions.push(i)}else for(var xe=this.scopeStack.length-1;xe>=0;--xe){var Ae=this.scopeStack[xe];if(Ae.lexical.indexOf(i)>-1&&!(Ae.flags&rn&&Ae.lexical[0]===i)||!this.treatFunctionsAsVarInScope(Ae)&&Ae.functions.indexOf(i)>-1){R=!0;break}if(Ae.var.push(i),this.inModule&&Ae.flags&ot&&delete this.undefinedExports[i],Ae.flags&xn)break}R&&this.raiseRecoverable(k,"Identifier '"+i+"' has already been declared")},z.checkLocalExport=function(i){this.scopeStack[0].lexical.indexOf(i.name)===-1&&this.scopeStack[0].var.indexOf(i.name)===-1&&(this.undefinedExports[i.name]=i)},z.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},z.currentVarScope=function(){for(var i=this.scopeStack.length-1;;i--){var h=this.scopeStack[i];if(h.flags&xn)return h}},z.currentThisScope=function(){for(var i=this.scopeStack.length-1;;i--){var h=this.scopeStack[i];if(h.flags&xn&&!(h.flags&wi))return h}};var D=function(h,k,R){this.type="",this.start=k,this.end=0,h.options.locations&&(this.loc=new vt(h,R)),h.options.directSourceFile&&(this.sourceFile=h.options.directSourceFile),h.options.ranges&&(this.range=[k,0])},H=e.prototype;H.startNode=function(){return new D(this,this.start,this.startLoc)},H.startNodeAt=function(i,h){return new D(this,i,h)};function W(i,h,k,R){return i.type=h,i.end=k,this.options.locations&&(i.loc.end=R),this.options.ranges&&(i.range[1]=k),i}H.finishNode=function(i,h){return W.call(this,i,h,this.lastTokEnd,this.lastTokEndLoc)},H.finishNodeAt=function(i,h,k,R){return W.call(this,i,h,k,R)},H.copyNode=function(i){var h=new D(this,i.start,this.startLoc);for(var k in i)h[k]=i[k];return h};var X="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",U=X+" Extended_Pictographic",K=U,Q=K+" EBase EComp EMod EPres ExtPict",J=Q,$=J,se={9:X,10:U,11:K,12:Q,13:J,14:$},me="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",ye={9:"",10:"",11:"",12:"",13:"",14:me},we="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Ee="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",fe=Ee+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",pe=fe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",ke=pe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Te=ke+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",Ne=Te+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",Ue={9:Ee,10:fe,11:pe,12:ke,13:Te,14:Ne},He={};function Qe(i){var h=He[i]={binary:Fe(se[i]+" "+we),binaryOfStrings:Fe(ye[i]),nonBinary:{General_Category:Fe(we),Script:Fe(Ue[i])}};h.nonBinary.Script_Extensions=h.nonBinary.Script,h.nonBinary.gc=h.nonBinary.General_Category,h.nonBinary.sc=h.nonBinary.Script,h.nonBinary.scx=h.nonBinary.Script_Extensions}for(var Je=0,Ge=[9,10,11,12,13,14];Je<Ge.length;Je+=1){var Mt=Ge[Je];Qe(Mt)}var Ie=e.prototype,mt=function(h){this.parser=h,this.validFlags="gim"+(h.options.ecmaVersion>=6?"uy":"")+(h.options.ecmaVersion>=9?"s":"")+(h.options.ecmaVersion>=13?"d":"")+(h.options.ecmaVersion>=15?"v":""),this.unicodeProperties=He[h.options.ecmaVersion>=14?14:h.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};mt.prototype.reset=function(h,k,R){var j=R.indexOf("v")!==-1,ne=R.indexOf("u")!==-1;this.start=h|0,this.source=k+"",this.flags=R,j&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=ne&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=ne&&this.parser.options.ecmaVersion>=9)},mt.prototype.raise=function(h){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+h)},mt.prototype.at=function(h,k){k===void 0&&(k=!1);var R=this.source,j=R.length;if(h>=j)return-1;var ne=R.charCodeAt(h);if(!(k||this.switchU)||ne<=55295||ne>=57344||h+1>=j)return ne;var le=R.charCodeAt(h+1);return le>=56320&&le<=57343?(ne<<10)+le-56613888:ne},mt.prototype.nextIndex=function(h,k){k===void 0&&(k=!1);var R=this.source,j=R.length;if(h>=j)return j;var ne=R.charCodeAt(h),le;return!(k||this.switchU)||ne<=55295||ne>=57344||h+1>=j||(le=R.charCodeAt(h+1))<56320||le>57343?h+1:h+2},mt.prototype.current=function(h){return h===void 0&&(h=!1),this.at(this.pos,h)},mt.prototype.lookahead=function(h){return h===void 0&&(h=!1),this.at(this.nextIndex(this.pos,h),h)},mt.prototype.advance=function(h){h===void 0&&(h=!1),this.pos=this.nextIndex(this.pos,h)},mt.prototype.eat=function(h,k){return k===void 0&&(k=!1),this.current(k)===h?(this.advance(k),!0):!1},mt.prototype.eatChars=function(h,k){k===void 0&&(k=!1);for(var R=this.pos,j=0,ne=h;j<ne.length;j+=1){var le=ne[j],xe=this.at(R,k);if(xe===-1||xe!==le)return!1;R=this.nextIndex(R,k)}return this.pos=R,!0},Ie.validateRegExpFlags=function(i){for(var h=i.validFlags,k=i.flags,R=!1,j=!1,ne=0;ne<k.length;ne++){var le=k.charAt(ne);h.indexOf(le)===-1&&this.raise(i.start,"Invalid regular expression flag"),k.indexOf(le,ne+1)>-1&&this.raise(i.start,"Duplicate regular expression flag"),le==="u"&&(R=!0),le==="v"&&(j=!0)}this.options.ecmaVersion>=15&&R&&j&&this.raise(i.start,"Invalid regular expression flag")},Ie.validateRegExpPattern=function(i){this.regexp_pattern(i),!i.switchN&&this.options.ecmaVersion>=9&&i.groupNames.length>0&&(i.switchN=!0,this.regexp_pattern(i))},Ie.regexp_pattern=function(i){i.pos=0,i.lastIntValue=0,i.lastStringValue="",i.lastAssertionIsQuantifiable=!1,i.numCapturingParens=0,i.maxBackReference=0,i.groupNames.length=0,i.backReferenceNames.length=0,this.regexp_disjunction(i),i.pos!==i.source.length&&(i.eat(41)&&i.raise("Unmatched ')'"),(i.eat(93)||i.eat(125))&&i.raise("Lone quantifier brackets")),i.maxBackReference>i.numCapturingParens&&i.raise("Invalid escape");for(var h=0,k=i.backReferenceNames;h<k.length;h+=1){var R=k[h];i.groupNames.indexOf(R)===-1&&i.raise("Invalid named capture referenced")}},Ie.regexp_disjunction=function(i){for(this.regexp_alternative(i);i.eat(124);)this.regexp_alternative(i);this.regexp_eatQuantifier(i,!0)&&i.raise("Nothing to repeat"),i.eat(123)&&i.raise("Lone quantifier brackets")},Ie.regexp_alternative=function(i){for(;i.pos<i.source.length&&this.regexp_eatTerm(i););},Ie.regexp_eatTerm=function(i){return this.regexp_eatAssertion(i)?(i.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(i)&&i.switchU&&i.raise("Invalid quantifier"),!0):(i.switchU?this.regexp_eatAtom(i):this.regexp_eatExtendedAtom(i))?(this.regexp_eatQuantifier(i),!0):!1},Ie.regexp_eatAssertion=function(i){var h=i.pos;if(i.lastAssertionIsQuantifiable=!1,i.eat(94)||i.eat(36))return!0;if(i.eat(92)){if(i.eat(66)||i.eat(98))return!0;i.pos=h}if(i.eat(40)&&i.eat(63)){var k=!1;if(this.options.ecmaVersion>=9&&(k=i.eat(60)),i.eat(61)||i.eat(33))return this.regexp_disjunction(i),i.eat(41)||i.raise("Unterminated group"),i.lastAssertionIsQuantifiable=!k,!0}return i.pos=h,!1},Ie.regexp_eatQuantifier=function(i,h){return h===void 0&&(h=!1),this.regexp_eatQuantifierPrefix(i,h)?(i.eat(63),!0):!1},Ie.regexp_eatQuantifierPrefix=function(i,h){return i.eat(42)||i.eat(43)||i.eat(63)||this.regexp_eatBracedQuantifier(i,h)},Ie.regexp_eatBracedQuantifier=function(i,h){var k=i.pos;if(i.eat(123)){var R=0,j=-1;if(this.regexp_eatDecimalDigits(i)&&(R=i.lastIntValue,i.eat(44)&&this.regexp_eatDecimalDigits(i)&&(j=i.lastIntValue),i.eat(125)))return j!==-1&&j<R&&!h&&i.raise("numbers out of order in {} quantifier"),!0;i.switchU&&!h&&i.raise("Incomplete quantifier"),i.pos=k}return!1},Ie.regexp_eatAtom=function(i){return this.regexp_eatPatternCharacters(i)||i.eat(46)||this.regexp_eatReverseSolidusAtomEscape(i)||this.regexp_eatCharacterClass(i)||this.regexp_eatUncapturingGroup(i)||this.regexp_eatCapturingGroup(i)},Ie.regexp_eatReverseSolidusAtomEscape=function(i){var h=i.pos;if(i.eat(92)){if(this.regexp_eatAtomEscape(i))return!0;i.pos=h}return!1},Ie.regexp_eatUncapturingGroup=function(i){var h=i.pos;if(i.eat(40)){if(i.eat(63)&&i.eat(58)){if(this.regexp_disjunction(i),i.eat(41))return!0;i.raise("Unterminated group")}i.pos=h}return!1},Ie.regexp_eatCapturingGroup=function(i){if(i.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(i):i.current()===63&&i.raise("Invalid group"),this.regexp_disjunction(i),i.eat(41))return i.numCapturingParens+=1,!0;i.raise("Unterminated group")}return!1},Ie.regexp_eatExtendedAtom=function(i){return i.eat(46)||this.regexp_eatReverseSolidusAtomEscape(i)||this.regexp_eatCharacterClass(i)||this.regexp_eatUncapturingGroup(i)||this.regexp_eatCapturingGroup(i)||this.regexp_eatInvalidBracedQuantifier(i)||this.regexp_eatExtendedPatternCharacter(i)},Ie.regexp_eatInvalidBracedQuantifier=function(i){return this.regexp_eatBracedQuantifier(i,!0)&&i.raise("Nothing to repeat"),!1},Ie.regexp_eatSyntaxCharacter=function(i){var h=i.current();return wt(h)?(i.lastIntValue=h,i.advance(),!0):!1};function wt(i){return i===36||i>=40&&i<=43||i===46||i===63||i>=91&&i<=94||i>=123&&i<=125}Ie.regexp_eatPatternCharacters=function(i){for(var h=i.pos,k=0;(k=i.current())!==-1&&!wt(k);)i.advance();return i.pos!==h},Ie.regexp_eatExtendedPatternCharacter=function(i){var h=i.current();return h!==-1&&h!==36&&!(h>=40&&h<=43)&&h!==46&&h!==63&&h!==91&&h!==94&&h!==124?(i.advance(),!0):!1},Ie.regexp_groupSpecifier=function(i){if(i.eat(63)){if(this.regexp_eatGroupName(i)){i.groupNames.indexOf(i.lastStringValue)!==-1&&i.raise("Duplicate capture group name"),i.groupNames.push(i.lastStringValue);return}i.raise("Invalid group")}},Ie.regexp_eatGroupName=function(i){if(i.lastStringValue="",i.eat(60)){if(this.regexp_eatRegExpIdentifierName(i)&&i.eat(62))return!0;i.raise("Invalid capture group name")}return!1},Ie.regexp_eatRegExpIdentifierName=function(i){if(i.lastStringValue="",this.regexp_eatRegExpIdentifierStart(i)){for(i.lastStringValue+=lt(i.lastIntValue);this.regexp_eatRegExpIdentifierPart(i);)i.lastStringValue+=lt(i.lastIntValue);return!0}return!1},Ie.regexp_eatRegExpIdentifierStart=function(i){var h=i.pos,k=this.options.ecmaVersion>=11,R=i.current(k);return i.advance(k),R===92&&this.regexp_eatRegExpUnicodeEscapeSequence(i,k)&&(R=i.lastIntValue),ct(R)?(i.lastIntValue=R,!0):(i.pos=h,!1)};function ct(i){return be(i,!0)||i===36||i===95}Ie.regexp_eatRegExpIdentifierPart=function(i){var h=i.pos,k=this.options.ecmaVersion>=11,R=i.current(k);return i.advance(k),R===92&&this.regexp_eatRegExpUnicodeEscapeSequence(i,k)&&(R=i.lastIntValue),It(R)?(i.lastIntValue=R,!0):(i.pos=h,!1)};function It(i){return te(i,!0)||i===36||i===95||i===8204||i===8205}Ie.regexp_eatAtomEscape=function(i){return this.regexp_eatBackReference(i)||this.regexp_eatCharacterClassEscape(i)||this.regexp_eatCharacterEscape(i)||i.switchN&&this.regexp_eatKGroupName(i)?!0:(i.switchU&&(i.current()===99&&i.raise("Invalid unicode escape"),i.raise("Invalid escape")),!1)},Ie.regexp_eatBackReference=function(i){var h=i.pos;if(this.regexp_eatDecimalEscape(i)){var k=i.lastIntValue;if(i.switchU)return k>i.maxBackReference&&(i.maxBackReference=k),!0;if(k<=i.numCapturingParens)return!0;i.pos=h}return!1},Ie.regexp_eatKGroupName=function(i){if(i.eat(107)){if(this.regexp_eatGroupName(i))return i.backReferenceNames.push(i.lastStringValue),!0;i.raise("Invalid named reference")}return!1},Ie.regexp_eatCharacterEscape=function(i){return this.regexp_eatControlEscape(i)||this.regexp_eatCControlLetter(i)||this.regexp_eatZero(i)||this.regexp_eatHexEscapeSequence(i)||this.regexp_eatRegExpUnicodeEscapeSequence(i,!1)||!i.switchU&&this.regexp_eatLegacyOctalEscapeSequence(i)||this.regexp_eatIdentityEscape(i)},Ie.regexp_eatCControlLetter=function(i){var h=i.pos;if(i.eat(99)){if(this.regexp_eatControlLetter(i))return!0;i.pos=h}return!1},Ie.regexp_eatZero=function(i){return i.current()===48&&!qi(i.lookahead())?(i.lastIntValue=0,i.advance(),!0):!1},Ie.regexp_eatControlEscape=function(i){var h=i.current();return h===116?(i.lastIntValue=9,i.advance(),!0):h===110?(i.lastIntValue=10,i.advance(),!0):h===118?(i.lastIntValue=11,i.advance(),!0):h===102?(i.lastIntValue=12,i.advance(),!0):h===114?(i.lastIntValue=13,i.advance(),!0):!1},Ie.regexp_eatControlLetter=function(i){var h=i.current();return Ht(h)?(i.lastIntValue=h%32,i.advance(),!0):!1};function Ht(i){return i>=65&&i<=90||i>=97&&i<=122}Ie.regexp_eatRegExpUnicodeEscapeSequence=function(i,h){h===void 0&&(h=!1);var k=i.pos,R=h||i.switchU;if(i.eat(117)){if(this.regexp_eatFixedHexDigits(i,4)){var j=i.lastIntValue;if(R&&j>=55296&&j<=56319){var ne=i.pos;if(i.eat(92)&&i.eat(117)&&this.regexp_eatFixedHexDigits(i,4)){var le=i.lastIntValue;if(le>=56320&&le<=57343)return i.lastIntValue=(j-55296)*1024+(le-56320)+65536,!0}i.pos=ne,i.lastIntValue=j}return!0}if(R&&i.eat(123)&&this.regexp_eatHexDigits(i)&&i.eat(125)&&Lt(i.lastIntValue))return!0;R&&i.raise("Invalid unicode escape"),i.pos=k}return!1};function Lt(i){return i>=0&&i<=1114111}Ie.regexp_eatIdentityEscape=function(i){if(i.switchU)return this.regexp_eatSyntaxCharacter(i)?!0:i.eat(47)?(i.lastIntValue=47,!0):!1;var h=i.current();return h!==99&&(!i.switchN||h!==107)?(i.lastIntValue=h,i.advance(),!0):!1},Ie.regexp_eatDecimalEscape=function(i){i.lastIntValue=0;var h=i.current();if(h>=49&&h<=57){do i.lastIntValue=10*i.lastIntValue+(h-48),i.advance();while((h=i.current())>=48&&h<=57);return!0}return!1};var $t=0,Dt=1,St=2;Ie.regexp_eatCharacterClassEscape=function(i){var h=i.current();if(si(h))return i.lastIntValue=-1,i.advance(),Dt;var k=!1;if(i.switchU&&this.options.ecmaVersion>=9&&((k=h===80)||h===112)){i.lastIntValue=-1,i.advance();var R;if(i.eat(123)&&(R=this.regexp_eatUnicodePropertyValueExpression(i))&&i.eat(125))return k&&R===St&&i.raise("Invalid property name"),R;i.raise("Invalid property name")}return $t};function si(i){return i===100||i===68||i===115||i===83||i===119||i===87}Ie.regexp_eatUnicodePropertyValueExpression=function(i){var h=i.pos;if(this.regexp_eatUnicodePropertyName(i)&&i.eat(61)){var k=i.lastStringValue;if(this.regexp_eatUnicodePropertyValue(i)){var R=i.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(i,k,R),Dt}}if(i.pos=h,this.regexp_eatLoneUnicodePropertyNameOrValue(i)){var j=i.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(i,j)}return $t},Ie.regexp_validateUnicodePropertyNameAndValue=function(i,h,k){ve(i.unicodeProperties.nonBinary,h)||i.raise("Invalid property name"),i.unicodeProperties.nonBinary[h].test(k)||i.raise("Invalid property value")},Ie.regexp_validateUnicodePropertyNameOrValue=function(i,h){if(i.unicodeProperties.binary.test(h))return Dt;if(i.switchV&&i.unicodeProperties.binaryOfStrings.test(h))return St;i.raise("Invalid property name")},Ie.regexp_eatUnicodePropertyName=function(i){var h=0;for(i.lastStringValue="";Ut(h=i.current());)i.lastStringValue+=lt(h),i.advance();return i.lastStringValue!==""};function Ut(i){return Ht(i)||i===95}Ie.regexp_eatUnicodePropertyValue=function(i){var h=0;for(i.lastStringValue="";ei(h=i.current());)i.lastStringValue+=lt(h),i.advance();return i.lastStringValue!==""};function ei(i){return Ut(i)||qi(i)}Ie.regexp_eatLoneUnicodePropertyNameOrValue=function(i){return this.regexp_eatUnicodePropertyValue(i)},Ie.regexp_eatCharacterClass=function(i){if(i.eat(91)){var h=i.eat(94),k=this.regexp_classContents(i);return i.eat(93)||i.raise("Unterminated character class"),h&&k===St&&i.raise("Negated character class may contain strings"),!0}return!1},Ie.regexp_classContents=function(i){return i.current()===93?Dt:i.switchV?this.regexp_classSetExpression(i):(this.regexp_nonEmptyClassRanges(i),Dt)},Ie.regexp_nonEmptyClassRanges=function(i){for(;this.regexp_eatClassAtom(i);){var h=i.lastIntValue;if(i.eat(45)&&this.regexp_eatClassAtom(i)){var k=i.lastIntValue;i.switchU&&(h===-1||k===-1)&&i.raise("Invalid character class"),h!==-1&&k!==-1&&h>k&&i.raise("Range out of order in character class")}}},Ie.regexp_eatClassAtom=function(i){var h=i.pos;if(i.eat(92)){if(this.regexp_eatClassEscape(i))return!0;if(i.switchU){var k=i.current();(k===99||In(k))&&i.raise("Invalid class escape"),i.raise("Invalid escape")}i.pos=h}var R=i.current();return R!==93?(i.lastIntValue=R,i.advance(),!0):!1},Ie.regexp_eatClassEscape=function(i){var h=i.pos;if(i.eat(98))return i.lastIntValue=8,!0;if(i.switchU&&i.eat(45))return i.lastIntValue=45,!0;if(!i.switchU&&i.eat(99)){if(this.regexp_eatClassControlLetter(i))return!0;i.pos=h}return this.regexp_eatCharacterClassEscape(i)||this.regexp_eatCharacterEscape(i)},Ie.regexp_classSetExpression=function(i){var h=Dt,k;if(!this.regexp_eatClassSetRange(i))if(k=this.regexp_eatClassSetOperand(i)){k===St&&(h=St);for(var R=i.pos;i.eatChars([38,38]);){if(i.current()!==38&&(k=this.regexp_eatClassSetOperand(i))){k!==St&&(h=Dt);continue}i.raise("Invalid character in character class")}if(R!==i.pos)return h;for(;i.eatChars([45,45]);)this.regexp_eatClassSetOperand(i)||i.raise("Invalid character in character class");if(R!==i.pos)return h}else i.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(i)){if(k=this.regexp_eatClassSetOperand(i),!k)return h;k===St&&(h=St)}},Ie.regexp_eatClassSetRange=function(i){var h=i.pos;if(this.regexp_eatClassSetCharacter(i)){var k=i.lastIntValue;if(i.eat(45)&&this.regexp_eatClassSetCharacter(i)){var R=i.lastIntValue;return k!==-1&&R!==-1&&k>R&&i.raise("Range out of order in character class"),!0}i.pos=h}return!1},Ie.regexp_eatClassSetOperand=function(i){return this.regexp_eatClassSetCharacter(i)?Dt:this.regexp_eatClassStringDisjunction(i)||this.regexp_eatNestedClass(i)},Ie.regexp_eatNestedClass=function(i){var h=i.pos;if(i.eat(91)){var k=i.eat(94),R=this.regexp_classContents(i);if(i.eat(93))return k&&R===St&&i.raise("Negated character class may contain strings"),R;i.pos=h}if(i.eat(92)){var j=this.regexp_eatCharacterClassEscape(i);if(j)return j;i.pos=h}return null},Ie.regexp_eatClassStringDisjunction=function(i){var h=i.pos;if(i.eatChars([92,113])){if(i.eat(123)){var k=this.regexp_classStringDisjunctionContents(i);if(i.eat(125))return k}else i.raise("Invalid escape");i.pos=h}return null},Ie.regexp_classStringDisjunctionContents=function(i){for(var h=this.regexp_classString(i);i.eat(124);)this.regexp_classString(i)===St&&(h=St);return h},Ie.regexp_classString=function(i){for(var h=0;this.regexp_eatClassSetCharacter(i);)h++;return h===1?Dt:St},Ie.regexp_eatClassSetCharacter=function(i){var h=i.pos;if(i.eat(92))return this.regexp_eatCharacterEscape(i)||this.regexp_eatClassSetReservedPunctuator(i)?!0:i.eat(98)?(i.lastIntValue=8,!0):(i.pos=h,!1);var k=i.current();return k<0||k===i.lookahead()&&bi(k)||ai(k)?!1:(i.advance(),i.lastIntValue=k,!0)};function bi(i){return i===33||i>=35&&i<=38||i>=42&&i<=44||i===46||i>=58&&i<=64||i===94||i===96||i===126}function ai(i){return i===40||i===41||i===45||i===47||i>=91&&i<=93||i>=123&&i<=125}Ie.regexp_eatClassSetReservedPunctuator=function(i){var h=i.current();return an(h)?(i.lastIntValue=h,i.advance(),!0):!1};function an(i){return i===33||i===35||i===37||i===38||i===44||i===45||i>=58&&i<=62||i===64||i===96||i===126}Ie.regexp_eatClassControlLetter=function(i){var h=i.current();return qi(h)||h===95?(i.lastIntValue=h%32,i.advance(),!0):!1},Ie.regexp_eatHexEscapeSequence=function(i){var h=i.pos;if(i.eat(120)){if(this.regexp_eatFixedHexDigits(i,2))return!0;i.switchU&&i.raise("Invalid escape"),i.pos=h}return!1},Ie.regexp_eatDecimalDigits=function(i){var h=i.pos,k=0;for(i.lastIntValue=0;qi(k=i.current());)i.lastIntValue=10*i.lastIntValue+(k-48),i.advance();return i.pos!==h};function qi(i){return i>=48&&i<=57}Ie.regexp_eatHexDigits=function(i){var h=i.pos,k=0;for(i.lastIntValue=0;Cn(k=i.current());)i.lastIntValue=16*i.lastIntValue+kn(k),i.advance();return i.pos!==h};function Cn(i){return i>=48&&i<=57||i>=65&&i<=70||i>=97&&i<=102}function kn(i){return i>=65&&i<=70?10+(i-65):i>=97&&i<=102?10+(i-97):i-48}Ie.regexp_eatLegacyOctalEscapeSequence=function(i){if(this.regexp_eatOctalDigit(i)){var h=i.lastIntValue;if(this.regexp_eatOctalDigit(i)){var k=i.lastIntValue;h<=3&&this.regexp_eatOctalDigit(i)?i.lastIntValue=h*64+k*8+i.lastIntValue:i.lastIntValue=h*8+k}else i.lastIntValue=h;return!0}return!1},Ie.regexp_eatOctalDigit=function(i){var h=i.current();return In(h)?(i.lastIntValue=h-48,i.advance(),!0):(i.lastIntValue=0,!1)};function In(i){return i>=48&&i<=55}Ie.regexp_eatFixedHexDigits=function(i,h){var k=i.pos;i.lastIntValue=0;for(var R=0;R<h;++R){var j=i.current();if(!Cn(j))return i.pos=k,!1;i.lastIntValue=16*i.lastIntValue+kn(j),i.advance()}return!0};var Hi=function(h){this.type=h.type,this.value=h.value,this.start=h.start,this.end=h.end,h.options.locations&&(this.loc=new vt(h,h.startLoc,h.endLoc)),h.options.ranges&&(this.range=[h.start,h.end])},rt=e.prototype;rt.next=function(i){!i&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Hi(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},rt.getToken=function(){return this.next(),new Hi(this)},typeof Symbol<"u"&&(rt[Symbol.iterator]=function(){var i=this;return{next:function(){var h=i.getToken();return{done:h.type===T.eof,value:h}}}}),rt.nextToken=function(){var i=this.curContext();if((!i||!i.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(T.eof);if(i.override)return i.override(this);this.readToken(this.fullCharCodeAtPos())},rt.readToken=function(i){return be(i,this.options.ecmaVersion>=6)||i===92?this.readWord():this.getTokenFromCode(i)},rt.fullCharCodeAtPos=function(){var i=this.input.charCodeAt(this.pos);if(i<=55295||i>=56320)return i;var h=this.input.charCodeAt(this.pos+1);return h<=56319||h>=57344?i:(i<<10)+h-56613888},rt.skipBlockComment=function(){var i=this.options.onComment&&this.curPosition(),h=this.pos,k=this.input.indexOf("*/",this.pos+=2);if(k===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=k+2,this.options.locations)for(var R=void 0,j=h;(R=nt(this.input,j,this.pos))>-1;)++this.curLine,j=this.lineStart=R;this.options.onComment&&this.options.onComment(!0,this.input.slice(h+2,k),h,this.pos,i,this.curPosition())},rt.skipLineComment=function(i){for(var h=this.pos,k=this.options.onComment&&this.curPosition(),R=this.input.charCodeAt(this.pos+=i);this.pos<this.input.length&&!Xe(R);)R=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(h+i,this.pos),h,this.pos,k,this.curPosition())},rt.skipSpace=function(){e:for(;this.pos<this.input.length;){var i=this.input.charCodeAt(this.pos);switch(i){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(i>8&&i<14||i>=5760&&Be.test(String.fromCharCode(i)))++this.pos;else break e}}},rt.finishToken=function(i,h){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var k=this.type;this.type=i,this.value=h,this.updateContext(k)},rt.readToken_dot=function(){var i=this.input.charCodeAt(this.pos+1);if(i>=48&&i<=57)return this.readNumber(!0);var h=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&i===46&&h===46?(this.pos+=3,this.finishToken(T.ellipsis)):(++this.pos,this.finishToken(T.dot))},rt.readToken_slash=function(){var i=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):i===61?this.finishOp(T.assign,2):this.finishOp(T.slash,1)},rt.readToken_mult_modulo_exp=function(i){var h=this.input.charCodeAt(this.pos+1),k=1,R=i===42?T.star:T.modulo;return this.options.ecmaVersion>=7&&i===42&&h===42&&(++k,R=T.starstar,h=this.input.charCodeAt(this.pos+2)),h===61?this.finishOp(T.assign,k+1):this.finishOp(R,k)},rt.readToken_pipe_amp=function(i){var h=this.input.charCodeAt(this.pos+1);if(h===i){if(this.options.ecmaVersion>=12){var k=this.input.charCodeAt(this.pos+2);if(k===61)return this.finishOp(T.assign,3)}return this.finishOp(i===124?T.logicalOR:T.logicalAND,2)}return h===61?this.finishOp(T.assign,2):this.finishOp(i===124?T.bitwiseOR:T.bitwiseAND,1)},rt.readToken_caret=function(){var i=this.input.charCodeAt(this.pos+1);return i===61?this.finishOp(T.assign,2):this.finishOp(T.bitwiseXOR,1)},rt.readToken_plus_min=function(i){var h=this.input.charCodeAt(this.pos+1);return h===i?h===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Ce.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(T.incDec,2):h===61?this.finishOp(T.assign,2):this.finishOp(T.plusMin,1)},rt.readToken_lt_gt=function(i){var h=this.input.charCodeAt(this.pos+1),k=1;return h===i?(k=i===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+k)===61?this.finishOp(T.assign,k+1):this.finishOp(T.bitShift,k)):h===33&&i===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(h===61&&(k=2),this.finishOp(T.relational,k))},rt.readToken_eq_excl=function(i){var h=this.input.charCodeAt(this.pos+1);return h===61?this.finishOp(T.equality,this.input.charCodeAt(this.pos+2)===61?3:2):i===61&&h===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(T.arrow)):this.finishOp(i===61?T.eq:T.prefix,1)},rt.readToken_question=function(){var i=this.options.ecmaVersion;if(i>=11){var h=this.input.charCodeAt(this.pos+1);if(h===46){var k=this.input.charCodeAt(this.pos+2);if(k<48||k>57)return this.finishOp(T.questionDot,2)}if(h===63){if(i>=12){var R=this.input.charCodeAt(this.pos+2);if(R===61)return this.finishOp(T.assign,3)}return this.finishOp(T.coalesce,2)}}return this.finishOp(T.question,1)},rt.readToken_numberSign=function(){var i=this.options.ecmaVersion,h=35;if(i>=13&&(++this.pos,h=this.fullCharCodeAtPos(),be(h,!0)||h===92))return this.finishToken(T.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+lt(h)+"'")},rt.getTokenFromCode=function(i){switch(i){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(T.parenL);case 41:return++this.pos,this.finishToken(T.parenR);case 59:return++this.pos,this.finishToken(T.semi);case 44:return++this.pos,this.finishToken(T.comma);case 91:return++this.pos,this.finishToken(T.bracketL);case 93:return++this.pos,this.finishToken(T.bracketR);case 123:return++this.pos,this.finishToken(T.braceL);case 125:return++this.pos,this.finishToken(T.braceR);case 58:return++this.pos,this.finishToken(T.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(T.backQuote);case 48:var h=this.input.charCodeAt(this.pos+1);if(h===120||h===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(h===111||h===79)return this.readRadixNumber(8);if(h===98||h===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(i);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(i);case 124:case 38:return this.readToken_pipe_amp(i);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(i);case 60:case 62:return this.readToken_lt_gt(i);case 61:case 33:return this.readToken_eq_excl(i);case 63:return this.readToken_question();case 126:return this.finishOp(T.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+lt(i)+"'")},rt.finishOp=function(i,h){var k=this.input.slice(this.pos,this.pos+h);return this.pos+=h,this.finishToken(i,k)},rt.readRegexp=function(){for(var i,h,k=this.pos;;){this.pos>=this.input.length&&this.raise(k,"Unterminated regular expression");var R=this.input.charAt(this.pos);if(Ce.test(R)&&this.raise(k,"Unterminated regular expression"),i)i=!1;else{if(R==="[")h=!0;else if(R==="]"&&h)h=!1;else if(R==="/"&&!h)break;i=R==="\\"}++this.pos}var j=this.input.slice(k,this.pos);++this.pos;var ne=this.pos,le=this.readWord1();this.containsEsc&&this.unexpected(ne);var xe=this.regexpState||(this.regexpState=new mt(this));xe.reset(k,j,le),this.validateRegExpFlags(xe),this.validateRegExpPattern(xe);var Ae=null;try{Ae=new RegExp(j,le)}catch{}return this.finishToken(T.regexp,{pattern:j,flags:le,value:Ae})},rt.readInt=function(i,h,k){for(var R=this.options.ecmaVersion>=12&&h===void 0,j=k&&this.input.charCodeAt(this.pos)===48,ne=this.pos,le=0,xe=0,Ae=0,et=h??1/0;Ae<et;++Ae,++this.pos){var st=this.input.charCodeAt(this.pos),Nt=void 0;if(R&&st===95){j&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),xe===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),Ae===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),xe=st;continue}if(st>=97?Nt=st-97+10:st>=65?Nt=st-65+10:st>=48&&st<=57?Nt=st-48:Nt=1/0,Nt>=i)break;xe=st,le=le*i+Nt}return R&&xe===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===ne||h!=null&&this.pos-ne!==h?null:le};function Pn(i,h){return h?parseInt(i,8):parseFloat(i.replace(/_/g,""))}function Ui(i){return typeof BigInt!="function"?null:BigInt(i.replace(/_/g,""))}rt.readRadixNumber=function(i){var h=this.pos;this.pos+=2;var k=this.readInt(i);return k==null&&this.raise(this.start+2,"Expected number in radix "+i),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(k=Ui(this.input.slice(h,this.pos)),++this.pos):be(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(T.num,k)},rt.readNumber=function(i){var h=this.pos;!i&&this.readInt(10,void 0,!0)===null&&this.raise(h,"Invalid number");var k=this.pos-h>=2&&this.input.charCodeAt(h)===48;k&&this.strict&&this.raise(h,"Invalid number");var R=this.input.charCodeAt(this.pos);if(!k&&!i&&this.options.ecmaVersion>=11&&R===110){var j=Ui(this.input.slice(h,this.pos));return++this.pos,be(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(T.num,j)}k&&/[89]/.test(this.input.slice(h,this.pos))&&(k=!1),R===46&&!k&&(++this.pos,this.readInt(10),R=this.input.charCodeAt(this.pos)),(R===69||R===101)&&!k&&(R=this.input.charCodeAt(++this.pos),(R===43||R===45)&&++this.pos,this.readInt(10)===null&&this.raise(h,"Invalid number")),be(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var ne=Pn(this.input.slice(h,this.pos),k);return this.finishToken(T.num,ne)},rt.readCodePoint=function(){var i=this.input.charCodeAt(this.pos),h;if(i===123){this.options.ecmaVersion<6&&this.unexpected();var k=++this.pos;h=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,h>1114111&&this.invalidStringToken(k,"Code point out of bounds")}else h=this.readHexChar(4);return h},rt.readString=function(i){for(var h="",k=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var R=this.input.charCodeAt(this.pos);if(R===i)break;R===92?(h+=this.input.slice(k,this.pos),h+=this.readEscapedChar(!1),k=this.pos):R===8232||R===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Xe(R)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return h+=this.input.slice(k,this.pos++),this.finishToken(T.string,h)};var ji={};rt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(i){if(i===ji)this.readInvalidTemplateToken();else throw i}this.inTemplateElement=!1},rt.invalidStringToken=function(i,h){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw ji;this.raise(i,h)},rt.readTmplToken=function(){for(var i="",h=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var k=this.input.charCodeAt(this.pos);if(k===96||k===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===T.template||this.type===T.invalidTemplate)?k===36?(this.pos+=2,this.finishToken(T.dollarBraceL)):(++this.pos,this.finishToken(T.backQuote)):(i+=this.input.slice(h,this.pos),this.finishToken(T.template,i));if(k===92)i+=this.input.slice(h,this.pos),i+=this.readEscapedChar(!0),h=this.pos;else if(Xe(k)){switch(i+=this.input.slice(h,this.pos),++this.pos,k){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:i+=`
`;break;default:i+=String.fromCharCode(k);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),h=this.pos}else++this.pos}},rt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(T.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},rt.readEscapedChar=function(i){var h=this.input.charCodeAt(++this.pos);switch(++this.pos,h){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return lt(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),i){var k=this.pos-1;this.invalidStringToken(k,"Invalid escape sequence in template string")}default:if(h>=48&&h<=55){var R=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],j=parseInt(R,8);return j>255&&(R=R.slice(0,-1),j=parseInt(R,8)),this.pos+=R.length-1,h=this.input.charCodeAt(this.pos),(R!=="0"||h===56||h===57)&&(this.strict||i)&&this.invalidStringToken(this.pos-1-R.length,i?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(j)}return Xe(h)?"":String.fromCharCode(h)}},rt.readHexChar=function(i){var h=this.pos,k=this.readInt(16,i);return k===null&&this.invalidStringToken(h,"Bad character escape sequence"),k},rt.readWord1=function(){this.containsEsc=!1;for(var i="",h=!0,k=this.pos,R=this.options.ecmaVersion>=6;this.pos<this.input.length;){var j=this.fullCharCodeAtPos();if(te(j,R))this.pos+=j<=65535?1:2;else if(j===92){this.containsEsc=!0,i+=this.input.slice(k,this.pos);var ne=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var le=this.readCodePoint();(h?be:te)(le,R)||this.invalidStringToken(ne,"Invalid Unicode escape"),i+=lt(le),k=this.pos}else break;h=!1}return i+this.input.slice(k,this.pos)},rt.readWord=function(){var i=this.readWord1(),h=T.name;return this.keywords.test(i)&&(h=Me[i]),this.finishToken(h,i)};var Si="8.11.2";e.acorn={Parser:e,version:Si,defaultOptions:bt,Position:ii,SourceLocation:vt,getLineInfo:Bi,Node:D,TokenType:re,tokTypes:T,keywordTypes:Me,TokContext:P,tokContexts:E,isIdentifierChar:te,isIdentifierStart:be,Token:Hi,isNewLine:Xe,lineBreak:Ce,lineBreakG:Ve,nonASCIIwhitespace:Be};function Ci(i,h){return e.parse(i,h)}function fi(i,h,k){return e.parseExpressionAt(i,h,k)}function ui(i,h){return e.tokenizer(i,h)}o.Node=D,o.Parser=e,o.Position=ii,o.SourceLocation=vt,o.TokContext=P,o.Token=Hi,o.TokenType=re,o.defaultOptions=bt,o.getLineInfo=Bi,o.isIdentifierChar=te,o.isIdentifierStart=be,o.isNewLine=Xe,o.keywordTypes=Me,o.lineBreak=Ce,o.lineBreakG=Ve,o.nonASCIIwhitespace=Be,o.parse=Ci,o.parseExpressionAt=fi,o.tokContexts=E,o.tokTypes=T,o.tokenizer=ui,o.version=Si})}(Qn,Qn.exports)),Qn.exports}/*!
 * Paper.js v0.12.17 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Thu Nov 3 21:15:36 2022 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jürg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(u){(function(s,o){s=s||Ss;var c=s.window,p=s.document,f=new function(){var e=/^(statics|enumerable|beans|preserve)$/,t=[],n=t.slice,r=Object.create,a=Object.getOwnPropertyDescriptor,l=Object.defineProperty,g=t.forEach||function(x,y){for(var N=0,P=this.length;N<P;N++)x.call(y,this[N],N,this)},d=function(x,y){for(var N in this)this.hasOwnProperty(N)&&x.call(y,this[N],N,this)},_=Object.assign||function(x){for(var y=1,N=arguments.length;y<N;y++){var P=arguments[y];for(var E in P)P.hasOwnProperty(E)&&(x[E]=P[E])}return x},m=function(x,y,N){if(x){var P=a(x,"length");(P&&typeof P.value=="number"?g:d).call(x,y,N=N||x)}return N};function w(x,y,N,P,E){var S={};function I(M,D){D=D||(D=a(y,M))&&(D.get?D:D.value),typeof D=="string"&&D[0]==="#"&&(D=x[D.substring(1)]||D);var H=typeof D=="function",W=D,X=E||H&&!D.base?D&&D.get?M in x:x[M]:null,U;(!E||!X)&&(H&&X&&(D.base=X),H&&P!==!1&&(U=M.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(S[U[3].toLowerCase()+U[4]]=U[2]),(!W||H||!W.get||typeof W.get!="function"||!C.isPlainObject(W))&&(W={value:W,writable:!0}),(a(x,M)||{configurable:!0}).configurable&&(W.configurable=!0,W.enumerable=N??!U),l(x,M,W))}if(y){for(var v in y)y.hasOwnProperty(v)&&!e.test(v)&&I(v);for(var v in S){var A=S[v],L=x["set"+A],z=x["get"+A]||L&&x["is"+A];z&&(P===!0||z.length===0)&&I(v,{get:z,set:L})}}return x}function C(){for(var x=0,y=arguments.length;x<y;x++){var N=arguments[x];N&&_(this,N)}return this}return w(C,{inject:function(x){if(x){var y=x.statics===!0?x:x.statics,N=x.beans,P=x.preserve;y!==x&&w(this.prototype,x,x.enumerable,N,P),w(this,y,null,N,P)}for(var E=1,S=arguments.length;E<S;E++)this.inject(arguments[E]);return this},extend:function(){for(var x=this,y,N,P=0,E,S=arguments.length;P<S&&!(y&&N);P++)E=arguments[P],y=y||E.initialize,N=N||E.prototype;return y=y||function(){x.apply(this,arguments)},N=y.prototype=N||r(this.prototype),l(N,"constructor",{value:y,writable:!0,configurable:!0}),w(y,this),arguments.length&&this.inject.apply(y,arguments),y.base=x,y}}).inject({enumerable:!1,initialize:C,set:C,inject:function(){for(var x=0,y=arguments.length;x<y;x++){var N=arguments[x];N&&w(this,N,N.enumerable,N.beans,N.preserve)}return this},extend:function(){var x=r(this);return x.inject.apply(x,arguments)},each:function(x,y){return m(this,x,y)},clone:function(){return new this.constructor(this)},statics:{set:_,each:m,create:r,define:l,describe:a,clone:function(x){return _(new x.constructor,x)},isPlainObject:function(x){var y=x!=null&&x.constructor;return y&&(y===Object||y===C||y.name==="Object")},pick:function(x,y){return x!==o?x:y},slice:function(x,y,N){return n.call(x,y,N)}}})};u.exports=f,f.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+f.each(this,function(e,t){if(!/^_/.test(t)){var n=typeof e;this.push(t+": "+(n==="number"?Z.instance.number(e):n==="string"?"'"+e+"'":e))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(e){return f.importJSON(e,this)},exportJSON:function(e){return f.exportJSON(this,e)},toJSON:function(){return f.serialize(this)},set:function(e,t){return e&&f.filter(this,e,t,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function e(){var t=e.base.apply(this,arguments),n=t.prototype._class;return n&&!f.exports[n]&&(f.exports[n]=t),t},equals:function(e,t){if(e===t)return!0;if(e&&e.equals)return e.equals(t);if(t&&t.equals)return t.equals(e);if(e&&t&&typeof e=="object"&&typeof t=="object"){if(Array.isArray(e)&&Array.isArray(t)){var n=e.length;if(n!==t.length)return!1;for(;n--;)if(!f.equals(e[n],t[n]))return!1}else{var r=Object.keys(e),n=r.length;if(n!==Object.keys(t).length)return!1;for(;n--;){var a=r[n];if(!(t.hasOwnProperty(a)&&f.equals(e[a],t[a])))return!1}}return!0}return!1},read:function(e,t,n,r){if(this===f){var a=this.peek(e,t);return e.__index++,a}var l=this.prototype,g=l._readIndex,d=t||g&&e.__index||0,_=e.length,m=e[d];if(r=r||_-d,m instanceof this||n&&n.readNull&&m==null&&r<=1)return g&&(e.__index=d+1),m&&n&&n.clone?m.clone():m;if(m=f.create(l),g&&(m.__read=!0),m=m.initialize.apply(m,d>0||d+r<_?f.slice(e,d,d+r):e)||m,g){e.__index=d+m.__read;var w=m.__filtered;w&&(e.__filtered=w,m.__filtered=o),m.__read=o}return m},peek:function(e,t){return e[e.__index=t||e.__index||0]},remain:function(e){return e.length-(e.__index||0)},readList:function(e,t,n,r){for(var a=[],l,g=t||0,d=r?g+r:e.length,_=g;_<d;_++)a.push(Array.isArray(l=e[_])?this.read(l,0,n):this.read(e,_,n,1));return a},readNamed:function(e,t,n,r,a){var l=this.getNamed(e,t),g=l!==o;if(g){var d=e.__filtered;if(!d){var _=this.getSource(e);d=e.__filtered=f.create(_),d.__unfiltered=_}d[t]=o}return this.read(g?[l]:e,n,r,a)},readSupported:function(e,t){var n=this.getSource(e),r=this,a=!1;return n&&Object.keys(n).forEach(function(l){if(l in t){var g=r.readNamed(e,l);g!==o&&(t[l]=g),a=!0}}),a},getSource:function(e){var t=e.__source;if(t===o){var n=e.length===1&&e[0];t=e.__source=n&&f.isPlainObject(n)?n:null}return t},getNamed:function(e,t){var n=this.getSource(e);if(n)return t?n[t]:e.__filtered||n},hasNamed:function(e,t){return!!this.getNamed(e,t)},filter:function(e,t,n,r){var a;function l(w){if(!(n&&w in n)&&!(a&&w in a)){var C=t[w];C!==o&&(e[w]=C)}}if(r){for(var g={},d=0,_,m=r.length;d<m;d++)(_=r[d])in t&&(l(_),g[_]=!0);a=g}return Object.keys(t.__unfiltered||t).forEach(l),e},isPlainValue:function(e,t){return f.isPlainObject(e)||Array.isArray(e)||t&&typeof e=="string"},serialize:function(e,t,n,r){t=t||{};var a=!r,l;if(a&&(t.formatter=new Z(t.precision),r={length:0,definitions:{},references:{},add:function(C,x){var y="#"+C._id,N=this.references[y];if(!N){this.length++;var P=x.call(C),E=C._class;E&&P[0]!==E&&P.unshift(E),this.definitions[y]=P,N=this.references[y]=[y]}return N}}),e&&e._serialize){l=e._serialize(t,r);var g=e._class;g&&!e._compactSerialize&&(a||!n)&&l[0]!==g&&l.unshift(g)}else if(Array.isArray(e)){l=[];for(var d=0,_=e.length;d<_;d++)l[d]=f.serialize(e[d],t,n,r)}else if(f.isPlainObject(e)){l={};for(var m=Object.keys(e),d=0,_=m.length;d<_;d++){var w=m[d];l[w]=f.serialize(e[w],t,n,r)}}else typeof e=="number"?l=t.formatter.number(e,t.precision):l=e;return a&&r.length>0?[["dictionary",r.definitions],l]:l},deserialize:function(e,t,n,r,a){var l=e,g=!n,d=g&&e&&e.length&&e[0][0]==="dictionary";if(n=n||{},Array.isArray(e)){var _=e[0],m=_==="dictionary";if(e.length==1&&/^#/.test(_))return n.dictionary[_];_=f.exports[_],l=[];for(var w=_?1:0,C=e.length;w<C;w++)l.push(f.deserialize(e[w],t,n,m,d));if(_){var x=l;t?l=t(_,x,g||a):l=new _(x)}}else if(f.isPlainObject(e)){l={},r&&(n.dictionary=l);for(var y in e)l[y]=f.deserialize(e[y],t,n)}return d?l[1]:l},exportJSON:function(e,t){var n=f.serialize(e,t);return t&&t.asString==!1?n:JSON.stringify(n)},importJSON:function(e,t){return f.deserialize(typeof e=="string"?JSON.parse(e):e,function(n,r,a){var l=a&&t&&t.constructor===n,g=l?t:f.create(n.prototype);if(r.length===1&&g instanceof T&&(l||!(g instanceof Ve))){var d=r[0];f.isPlainObject(d)&&(d.insert=!1,l&&(r=r.concat([T.INSERT])))}return(l?g.set:n).apply(g,r),l&&(t=null),g})},push:function(e,t){var n=t.length;if(n<4096)e.push.apply(e,t);else{var r=e.length;e.length+=n;for(var a=0;a<n;a++)e[r+a]=t[a]}return e},splice:function(e,t,n,r){var a=t&&t.length,l=n===o;n=l?e.length:n,n>e.length&&(n=e.length);for(var g=0;g<a;g++)t[g]._index=n+g;if(l)return f.push(e,t),[];var d=[n,r];t&&f.push(d,t);for(var _=e.splice.apply(e,d),g=0,m=_.length;g<m;g++)_[g]._index=o;for(var g=n+a,m=e.length;g<m;g++)e[g]._index=g;return _},capitalize:function(e){return e.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(e){return e.replace(/-(.)/g,function(t,n){return n.toUpperCase()})},hyphenate:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var b={on:function(e,t){if(typeof e!="string")f.each(e,function(l,g){this.on(g,l)},this);else{var n=this._eventTypes,r=n&&n[e],a=this._callbacks=this._callbacks||{};a=a[e]=a[e]||[],a.indexOf(t)===-1&&(a.push(t),r&&r.install&&a.length===1&&r.install.call(this,e))}return this},off:function(e,t){if(typeof e!="string"){f.each(e,function(g,d){this.off(d,g)},this);return}var n=this._eventTypes,r=n&&n[e],a=this._callbacks&&this._callbacks[e],l;return a&&(!t||(l=a.indexOf(t))!==-1&&a.length===1?(r&&r.uninstall&&r.uninstall.call(this,e),delete this._callbacks[e]):l!==-1&&a.splice(l,1)),this},once:function(e,t){return this.on(e,function n(){t.apply(this,arguments),this.off(e,n)})},emit:function(e,t){var n=this._callbacks&&this._callbacks[e];if(!n)return!1;var r=f.slice(arguments,1),a=t&&t.target&&!t.currentTarget;n=n.slice(),a&&(t.currentTarget=this);for(var l=0,g=n.length;l<g;l++)if(n[l].apply(this,r)==!1){t&&t.stop&&t.stop();break}return a&&delete t.currentTarget,!0},responds:function(e){return!!(this._callbacks&&this._callbacks[e])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(e){var t=this._eventTypes,n=this._callbacks,r=e?"install":"uninstall";if(t){for(var a in n)if(n[a].length>0){var l=t[a],g=l&&l[r];g&&g.call(this,a)}}},statics:{inject:function e(t){var n=t._events;if(n){var r={};f.each(n,function(a,l){var g=typeof a=="string",d=g?a:l,_=f.capitalize(d),m=d.substring(2).toLowerCase();r[m]=g?{}:a,d="_"+d,t["get"+_]=function(){return this[d]},t["set"+_]=function(w){var C=this[d];C&&this.off(m,C),w&&this.on(m,w),this[d]=w}}),t._eventTypes=r}return e.base.apply(this,arguments)}}},O=f.extend({_class:"PaperScope",initialize:function e(){it=this,this.settings=new f({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=e._id++,e._scopes[this._id]=this;var t=e.prototype;if(!this.support){var n=kt.getContext(1,1)||{};t.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:ri.nativeModes},kt.release(n)}if(!this.agent){var r=s.navigator.userAgent.toLowerCase(),a=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(r)||[])[0],l=a==="darwin"?"mac":a,g=t.agent=t.browser={platform:l};l&&(g[l]=!0),r.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(d,_,m,w,C){if(!g.chrome){var x=_==="opera"?w:/^(node|trident)$/.test(_)?C:m;g.version=x,g.versionNumber=parseFloat(x),_={trident:"msie",jsdom:"node"}[_]||_,g.name=_,g[_]=!0}}),g.chrome&&delete g.webkit,g.atom&&delete g.chrome}},version:"0.12.17",getView:function(){var e=this.project;return e&&e._view},getPaper:function(){return this},execute:function(e,t){var n=it.PaperScript.execute(e,this,t);return _t.updateFocus(),n},install:function(e){var t=this;f.each(["project","view","tool"],function(r){f.define(e,r,{configurable:!0,get:function(){return t[r]}})});for(var n in this)!/^_/.test(n)&&this[n]&&(e[n]=this[n])},setup:function(e){return it=this,this.project=new de(e),this},createCanvas:function(e,t){return kt.getCanvas(e,t)},activate:function(){it=this},clear:function(){for(var e=this.projects,t=this.tools,n=e.length-1;n>=0;n--)e[n].remove();for(var n=t.length-1;n>=0;n--)t[n].remove()},remove:function(){this.clear(),delete O._scopes[this._id]},statics:new function(){function e(t){return t+="Attribute",function(n,r){return n[t](r)||n[t]("data-paper-"+r)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:e("get"),hasAttribute:e("has")}}}),V=f.extend(b,{initialize:function(e){this._scope=it,this._index=this._scope[this._list].push(this)-1,(e||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var e=this._scope[this._reference];return e&&e!==this&&e.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",e),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(f.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),B={findItemBoundsCollisions:function(e,t,n){function r(g){for(var d=new Array(g.length),_=0;_<g.length;_++){var m=g[_].getBounds();d[_]=[m.left,m.top,m.right,m.bottom]}return d}var a=r(e),l=!t||t===e?a:r(t);return this.findBoundsCollisions(a,l,n||0)},findCurveBoundsCollisions:function(e,t,n,r){function a(x){for(var y=Math.min,N=Math.max,P=new Array(x.length),E=0;E<x.length;E++){var S=x[E];P[E]=[y(S[0],S[2],S[4],S[6]),y(S[1],S[3],S[5],S[7]),N(S[0],S[2],S[4],S[6]),N(S[1],S[3],S[5],S[7])]}return P}var l=a(e),g=!t||t===e?l:a(t);if(r){for(var d=this.findBoundsCollisions(l,g,n||0,!1,!0),_=this.findBoundsCollisions(l,g,n||0,!0,!0),m=[],w=0,C=d.length;w<C;w++)m[w]={hor:d[w],ver:_[w]};return m}return this.findBoundsCollisions(l,g,n||0)},findBoundsCollisions:function(e,t,n,r,a){var l=!t||e===t,g=l?e:e.concat(t),d=e.length,_=g.length;function m(ye,we,Ee){for(var fe=0,pe=ye.length;fe<pe;){var ke=pe+fe>>>1;g[ye[ke]][we]<Ee?fe=ke+1:pe=ke}return fe-1}for(var w=r?1:0,C=w+2,x=r?0:1,y=x+2,N=new Array(_),P=0;P<_;P++)N[P]=P;N.sort(function(ye,we){return g[ye][w]-g[we][w]});for(var E=[],S=new Array(d),P=0;P<_;P++){var I=N[P],v=g[I],A=l?I:I-d,L=I<d,z=l||!L,M=L?[]:null;if(E.length){var D=m(E,C,v[w]-n)+1;if(E.splice(0,D),l&&a){M=M.concat(E);for(var H=0;H<E.length;H++){var W=E[H];S[W].push(A)}}else for(var X=v[y],U=v[x],H=0;H<E.length;H++){var W=E[H],K=g[W],Q=W<d,J=l||W>=d;(a||(L&&J||z&&Q)&&X>=K[x]-n&&U<=K[y]+n)&&(L&&J&&M.push(l?W:W-d),z&&Q&&S[W].push(A))}}if(L&&(e===t&&M.push(I),S[I]=M),E.length){var $=v[C],se=m(E,C,$);E.splice(se+1,0,I)}else E.push(I)}for(var P=0;P<S.length;P++){var me=S[P];me&&me.sort(function(we,Ee){return we-Ee})}return S}},Z=f.extend({initialize:function(e){this.precision=f.pick(e,5),this.multiplier=Math.pow(10,this.precision)},number:function(e){return this.precision<16?Math.round(e*this.multiplier)/this.multiplier:e},pair:function(e,t,n){return this.number(e)+(n||",")+this.number(t)},point:function(e,t){return this.number(e.x)+(t||",")+this.number(e.y)},size:function(e,t){return this.number(e.width)+(t||",")+this.number(e.height)},rectangle:function(e,t){return this.point(e,t)+(t||",")+this.size(e,t)}});Z.instance=new Z;var q=new function(){var e=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],t=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,r=Math.sqrt,a=Math.pow,l=Math.log2||function(C){return Math.log(C)*Math.LOG2E},g=1e-12,d=112e-18;function _(C,x,y){return C<x?x:C>y?y:C}function m(C,x,y){function N(D){var H=D*134217729,W=D-H,X=W+H,U=D-X;return[X,U]}var P=x*x-C*y,E=x*x+C*y;if(n(P)*3<E){var S=N(C),I=N(x),v=N(y),A=x*x,L=I[0]*I[0]-A+2*I[0]*I[1]+I[1]*I[1],z=C*y,M=S[0]*v[0]-z+S[0]*v[1]+S[1]*v[0]+S[1]*v[1];P=A-z+(L-M)}return P}function w(){var C=Math.max.apply(Math,arguments);return C&&(C<1e-8||C>1e8)?a(2,-Math.round(l(C))):0}return{EPSILON:g,MACHINE_EPSILON:d,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(r(2)-1)/3,isZero:function(C){return C>=-g&&C<=g},isMachineZero:function(C){return C>=-d&&C<=d},clamp:_,integrate:function(C,x,y,N){for(var P=e[N-2],E=t[N-2],S=(y-x)*.5,I=S+x,v=0,A=N+1>>1,L=N&1?E[v++]*C(I):0;v<A;){var z=S*P[v];L+=E[v++]*(C(I+z)+C(I-z))}return S*L},findRoot:function(C,x,y,N,P,E,S){for(var I=0;I<E;I++){var v=C(y),A=v/x(y),L=y-A;if(n(A)<S){y=L;break}v>0?(P=y,y=L<=N?(N+P)*.5:L):(N=y,y=L>=P?(N+P)*.5:L)}return _(y,N,P)},solveQuadratic:function(C,x,y,N,P,E){var S,I=1/0;if(n(C)<g){if(n(x)<g)return n(y)<g?-1:0;S=-y/x}else{x*=-.5;var v=m(C,x,y);if(v&&n(v)<d){var A=w(n(C),n(x),n(y));A&&(C*=A,x*=A,y*=A,v=m(C,x,y))}if(v>=-d){var L=v<0?0:r(v),z=x+(x<0?-L:L);z===0?(S=y/C,I=-S):(S=z/C,I=y/z)}}var M=0,D=P==null,H=P-g,W=E+g;return isFinite(S)&&(D||S>H&&S<W)&&(N[M++]=D?S:_(S,P,E)),I!==S&&isFinite(I)&&(D||I>H&&I<W)&&(N[M++]=D?I:_(I,P,E)),M},solveCubic:function(C,x,y,N,P,E,S){var I=w(n(C),n(x),n(y),n(N)),v,A,L,z,M;I&&(C*=I,x*=I,y*=I,N*=I);function D(se){v=se;var me=C*v;A=me+x,L=A*v+y,z=(me+A)*v+L,M=L*v+N}if(n(C)<g)C=x,A=y,L=N,v=1/0;else if(n(N)<g)A=x,L=y,v=0;else{D(-(x/C)/3);var H=M/C,W=a(n(H),1/3),X=H<0?-1:1,U=-z/C,K=U>0?1.324717957244746*Math.max(W,r(U)):W,Q=v-X*K;if(Q!==v){do D(Q),Q=z===0?v:v-M/z/(1+d);while(X*Q>X*v);n(C)*v*v>n(N/v)&&(L=-N/v,A=(L-y)/v)}}var J=q.solveQuadratic(C,A,L,P,E,S),$=E==null;return isFinite(v)&&(J===0||J>0&&v!==P[0]&&v!==P[1])&&($||v>E-g&&v<S+g)&&(P[J++]=$?v:_(v,E,S)),J}}},ue={_id:1,_pools:{},get:function(e){if(e){var t=this._pools[e];return t||(t=this._pools[e]={_id:1}),t._id++}else return this._id++}},F=f.extend({_class:"Point",_readIndex:!0,initialize:function(t,n){var r=typeof t,a=this.__read,l=0;if(r==="number"){var g=typeof n=="number";this._set(t,g?n:t),a&&(l=g?2:1)}else if(r==="undefined"||t===null)this._set(0,0),a&&(l=t===null?1:0);else{var d=r==="string"?t.split(/[\s,]+/)||[]:t;l=1,Array.isArray(d)?this._set(+d[0],+(d.length>1?d[1]:d[0])):"x"in d?this._set(d.x||0,d.y||0):"width"in d?this._set(d.width||0,d.height||0):"angle"in d?(this._set(d.length||0,0),this.setAngle(d.angle||0)):(this._set(0,0),l=0)}return a&&(this.__read=l),this},set:"#initialize",_set:function(e,t){return this.x=e,this.y=t,this},equals:function(e){return this===e||e&&(this.x===e.x&&this.y===e.y||Array.isArray(e)&&this.x===e[0]&&this.y===e[1])||!1},clone:function(){return new F(this.x,this.y)},toString:function(){var e=Z.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(e){if(this.isZero()){var t=this._angle||0;this._set(Math.cos(t)*e,Math.sin(t)*e)}else{var n=e/this.getLength();q.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(e){this.setAngleInRadians.call(this,e*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var e=F.read(arguments),t=this.getLength()*e.getLength();if(q.isZero(t))return NaN;var n=this.dot(e)/t;return Math.acos(n<-1?-1:n>1?1:n)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(e){if(this._angle=e,!this.isZero()){var t=this.getLength();this._set(Math.cos(e)*t,Math.sin(e)*t)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var e=F.read(arguments);return Math.atan2(this.cross(e),this.dot(e))*180/Math.PI},getDistance:function(){var e=arguments,t=F.read(e),n=t.x-this.x,r=t.y-this.y,a=n*n+r*r,l=f.read(e);return l?a:Math.sqrt(a)},normalize:function(e){e===o&&(e=1);var t=this.getLength(),n=t!==0?e/t:0,r=new F(this.x*n,this.y*n);return n>=0&&(r._angle=this._angle),r},rotate:function(e,t){if(e===0)return this.clone();e=e*Math.PI/180;var n=t?this.subtract(t):this,r=Math.sin(e),a=Math.cos(e);return n=new F(n.x*a-n.y*r,n.x*r+n.y*a),t?n.add(t):n},transform:function(e){return e?e._transformPoint(this):this},add:function(){var e=F.read(arguments);return new F(this.x+e.x,this.y+e.y)},subtract:function(){var e=F.read(arguments);return new F(this.x-e.x,this.y-e.y)},multiply:function(){var e=F.read(arguments);return new F(this.x*e.x,this.y*e.y)},divide:function(){var e=F.read(arguments);return new F(this.x/e.x,this.y/e.y)},modulo:function(){var e=F.read(arguments);return new F(this.x%e.x,this.y%e.y)},negate:function(){return new F(-this.x,-this.y)},isInside:function(){return ie.read(arguments).contains(this)},isClose:function(){var e=arguments,t=F.read(e),n=f.read(e);return this.getDistance(t)<=n},isCollinear:function(){var e=F.read(arguments);return F.isCollinear(this.x,this.y,e.x,e.y)},isColinear:"#isCollinear",isOrthogonal:function(){var e=F.read(arguments);return F.isOrthogonal(this.x,this.y,e.x,e.y)},isZero:function(){var e=q.isZero;return e(this.x)&&e(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(e){return this.x*(e>1&&e<4?-1:1)>=0&&this.y*(e>2?-1:1)>=0},dot:function(){var e=F.read(arguments);return this.x*e.x+this.y*e.y},cross:function(){var e=F.read(arguments);return this.x*e.y-this.y*e.x},project:function(){var e=F.read(arguments),t=e.isZero()?0:this.dot(e)/e.dot(e);return new F(e.x*t,e.y*t)},statics:{min:function(){var e=arguments,t=F.read(e),n=F.read(e);return new F(Math.min(t.x,n.x),Math.min(t.y,n.y))},max:function(){var e=arguments,t=F.read(e),n=F.read(e);return new F(Math.max(t.x,n.x),Math.max(t.y,n.y))},random:function(){return new F(Math.random(),Math.random())},isCollinear:function(e,t,n,r){return Math.abs(e*r-t*n)<=Math.sqrt((e*e+t*t)*(n*n+r*r))*1e-8},isOrthogonal:function(e,t,n,r){return Math.abs(e*n+t*r)<=Math.sqrt((e*e+t*t)*(n*n+r*r))*1e-8}}},f.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new F(t(this.x),t(this.y))}},{})),be=F.extend({initialize:function(t,n,r,a){this._x=t,this._y=n,this._owner=r,this._setter=a},_set:function(e,t,n){return this._x=e,this._y=t,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),te=f.extend({_class:"Size",_readIndex:!0,initialize:function(t,n){var r=typeof t,a=this.__read,l=0;if(r==="number"){var g=typeof n=="number";this._set(t,g?n:t),a&&(l=g?2:1)}else if(r==="undefined"||t===null)this._set(0,0),a&&(l=t===null?1:0);else{var d=r==="string"?t.split(/[\s,]+/)||[]:t;l=1,Array.isArray(d)?this._set(+d[0],+(d.length>1?d[1]:d[0])):"width"in d?this._set(d.width||0,d.height||0):"x"in d?this._set(d.x||0,d.y||0):(this._set(0,0),l=0)}return a&&(this.__read=l),this},set:"#initialize",_set:function(e,t){return this.width=e,this.height=t,this},equals:function(e){return e===this||e&&(this.width===e.width&&this.height===e.height||Array.isArray(e)&&this.width===e[0]&&this.height===e[1])||!1},clone:function(){return new te(this.width,this.height)},toString:function(){var e=Z.instance;return"{ width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.width),t.number(this.height)]},add:function(){var e=te.read(arguments);return new te(this.width+e.width,this.height+e.height)},subtract:function(){var e=te.read(arguments);return new te(this.width-e.width,this.height-e.height)},multiply:function(){var e=te.read(arguments);return new te(this.width*e.width,this.height*e.height)},divide:function(){var e=te.read(arguments);return new te(this.width/e.width,this.height/e.height)},modulo:function(){var e=te.read(arguments);return new te(this.width%e.width,this.height%e.height)},negate:function(){return new te(-this.width,-this.height)},isZero:function(){var e=q.isZero;return e(this.width)&&e(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(e,t){return new te(Math.min(e.width,t.width),Math.min(e.height,t.height))},max:function(e,t){return new te(Math.max(e.width,t.width),Math.max(e.height,t.height))},random:function(){return new te(Math.random(),Math.random())}}},f.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new te(t(this.width),t(this.height))}},{})),re=te.extend({initialize:function(t,n,r,a){this._width=t,this._height=n,this._owner=r,this._setter=a},_set:function(e,t,n){return this._width=e,this._height=t,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(e){this._width=e,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(e){this._height=e,this._owner[this._setter](this)}}),ie=f.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,n,r,a){var l=arguments,g=typeof t,d;if(g==="number"?(this._set(t,n,r,a),d=4):g==="undefined"||t===null?(this._set(0,0,0,0),d=t===null?1:0):l.length===1&&(Array.isArray(t)?(this._set.apply(this,t),d=1):t.x!==o||t.width!==o?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),d=1):t.from===o&&t.to===o&&(this._set(0,0,0,0),f.readSupported(l,this)&&(d=1))),d===o){var _=F.readNamed(l,"from"),m=f.peek(l),w=_.x,C=_.y,x,y;if(m&&m.x!==o||f.hasNamed(l,"to")){var N=F.readNamed(l,"to");x=N.x-w,y=N.y-C,x<0&&(w=N.x,x=-x),y<0&&(C=N.y,y=-y)}else{var P=te.read(l);x=P.width,y=P.height}this._set(w,C,x,y),d=l.__index}var E=l.__filtered;return E&&(this.__filtered=E),this.__read&&(this.__read=d),this},set:"#initialize",_set:function(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this},clone:function(){return new ie(this.x,this.y,this.width,this.height)},equals:function(e){var t=f.isPlainValue(e)?ie.read(arguments):e;return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height||!1},toString:function(){var e=Z.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+", width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)]},getPoint:function(e){var t=e?F:be;return new t(this.x,this.y,this,"setPoint")},setPoint:function(){var e=F.read(arguments);this.x=e.x,this.y=e.y},getSize:function(e){var t=e?te:re;return new t(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var e=te.read(arguments),t=this._sx,n=this._sy,r=e.width,a=e.height;t&&(this.x+=(this.width-r)*t),n&&(this.y+=(this.height-a)*n),this.width=r,this.height=a,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(e){if(!this._fw){var t=e-this.x;this.width-=this._sx===.5?t*2:t}this.x=e,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(e){if(!this._fh){var t=e-this.y;this.height-=this._sy===.5?t*2:t}this.y=e,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(e){if(!this._fw){var t=e-this.x;this.width=this._sx===.5?t*2:t}this.x=e-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(e){if(!this._fh){var t=e-this.y;this.height=this._sy===.5?t*2:t}this.y=e-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(e){this._fw||this._sx===.5?this.x=e-this.width/2:(this._sx&&(this.x+=(e-this.x)*2*this._sx),this.width=(e-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(e){this._fh||this._sy===.5?this.y=e-this.height/2:(this._sy&&(this.y+=(e-this.y)*2*this._sy),this.height=(e-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(e){var t=e?F:be;return new t(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var e=F.read(arguments);return this.setCenterX(e.x),this.setCenterY(e.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(e){return e&&e.width!==o||(Array.isArray(e)?e:arguments).length===4?this._containsRectangle(ie.read(arguments)):this._containsPoint(F.read(arguments))},_containsPoint:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t+e.width<=this.x+this.width&&n+e.height<=this.y+this.height},intersects:function(){var e=ie.read(arguments),t=f.read(arguments)||0;return e.x+e.width>this.x-t&&e.y+e.height>this.y-t&&e.x<this.x+this.width+t&&e.y<this.y+this.height+t},intersect:function(){var e=ie.read(arguments),t=Math.max(this.x,e.x),n=Math.max(this.y,e.y),r=Math.min(this.x+this.width,e.x+e.width),a=Math.min(this.y+this.height,e.y+e.height);return new ie(t,n,r-t,a-n)},unite:function(){var e=ie.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x+e.width),a=Math.max(this.y+this.height,e.y+e.height);return new ie(t,n,r-t,a-n)},include:function(){var e=F.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x),a=Math.max(this.y+this.height,e.y);return new ie(t,n,r-t,a-n)},expand:function(){var e=te.read(arguments),t=e.width,n=e.height;return new ie(this.x-t/2,this.y-n/2,this.width+t,this.height+n)},scale:function(e,t){return this.expand(this.width*e-this.width,this.height*(t===o?e:t)-this.height)}},f.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(e,t){var n=e.join(""),r=/^[RL]/.test(n);t>=4&&(e[1]+=r?"Y":"X");var a=e[r?0:1],l=e[r?1:0],g="get"+a,d="get"+l,_="set"+a,m="set"+l,w="get"+n,C="set"+n;this[w]=function(x){var y=x?F:be;return new y(this[g](),this[d](),this,C)},this[C]=function(){var x=F.read(arguments);this[_](x.x),this[m](x.y)}},{beans:!0})),ae=ie.extend({initialize:function(t,n,r,a,l,g){this._set(t,n,r,a,!0),this._owner=l,this._setter=g},_set:function(e,t,n,r,a){return this._x=e,this._y=t,this._width=n,this._height=r,a||this._owner[this._setter](this),this}},new function(){var e=ie.prototype;return f.each(["x","y","width","height"],function(t){var n=f.capitalize(t),r="_"+t;this["get"+n]=function(){return this[r]},this["set"+n]=function(a){this[r]=a,this._dontNotify||this._owner[this._setter](this)}},f.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(t){var n="set"+t;this[n]=function(){this._dontNotify=!0,e[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(t){var n=this._owner;n._changeSelection&&n._changeSelection(2,t)}}))}),oe=f.extend({_class:"Matrix",initialize:function e(t,n){var r=arguments,a=r.length,l=!0;if(a>=6?this._set.apply(this,r):a===1||a===2?t instanceof e?this._set(t._a,t._b,t._c,t._d,t._tx,t._ty,n):Array.isArray(t)?this._set.apply(this,n?t.concat([n]):t):l=!1:a?l=!1:this.reset(),!l)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(e,t,n,r,a,l,g){return this._a=e,this._b=t,this._c=n,this._d=r,this._tx=a,this._ty=l,g||this._changed(),this},_serialize:function(e,t){return f.serialize(this.getValues(),e,!0,t)},_changed:function(){var e=this._owner;e&&(e._applyMatrix?e.transform(null,!0):e._changed(25))},clone:function(){return new oe(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(e){return e===this||e&&this._a===e._a&&this._b===e._b&&this._c===e._c&&this._d===e._d&&this._tx===e._tx&&this._ty===e._ty},toString:function(){var e=Z.instance;return"[["+[e.number(this._a),e.number(this._c),e.number(this._tx)].join(", ")+"], ["+[e.number(this._b),e.number(this._d),e.number(this._ty)].join(", ")+"]]"},reset:function(e){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,e||this._changed(),this},apply:function(e,t){var n=this._owner;return n?(n.transform(null,f.pick(e,!0),t),this.isIdentity()):!1},translate:function(){var e=F.read(arguments),t=e.x,n=e.y;return this._tx+=t*this._a+n*this._c,this._ty+=t*this._b+n*this._d,this._changed(),this},scale:function(){var e=arguments,t=F.read(e),n=F.read(e,0,{readNull:!0});return n&&this.translate(n),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,n&&this.translate(n.negate()),this._changed(),this},rotate:function(e){e*=Math.PI/180;var t=F.read(arguments,1),n=t.x,r=t.y,a=Math.cos(e),l=Math.sin(e),g=n-n*a+r*l,d=r-n*l-r*a,_=this._a,m=this._b,w=this._c,C=this._d;return this._a=a*_+l*w,this._b=a*m+l*C,this._c=-l*_+a*w,this._d=-l*m+a*C,this._tx+=g*_+d*w,this._ty+=g*m+d*C,this._changed(),this},shear:function(){var e=arguments,t=F.read(e),n=F.read(e,0,{readNull:!0});n&&this.translate(n);var r=this._a,a=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*r,this._d+=t.x*a,n&&this.translate(n.negate()),this._changed(),this},skew:function(){var e=arguments,t=F.read(e),n=F.read(e,0,{readNull:!0}),r=Math.PI/180,a=new F(Math.tan(t.x*r),Math.tan(t.y*r));return this.shear(a,n)},append:function(e,t){if(e){var n=this._a,r=this._b,a=this._c,l=this._d,g=e._a,d=e._c,_=e._b,m=e._d,w=e._tx,C=e._ty;this._a=g*n+_*a,this._c=d*n+m*a,this._b=g*r+_*l,this._d=d*r+m*l,this._tx+=w*n+C*a,this._ty+=w*r+C*l,t||this._changed()}return this},prepend:function(e,t){if(e){var n=this._a,r=this._b,a=this._c,l=this._d,g=this._tx,d=this._ty,_=e._a,m=e._c,w=e._b,C=e._d,x=e._tx,y=e._ty;this._a=_*n+m*r,this._c=_*a+m*l,this._b=w*n+C*r,this._d=w*a+C*l,this._tx=_*g+m*d+x,this._ty=w*g+C*d+y,t||this._changed()}return this},appended:function(e){return this.clone().append(e)},prepended:function(e){return this.clone().prepend(e)},invert:function(){var e=this._a,t=this._b,n=this._c,r=this._d,a=this._tx,l=this._ty,g=e*r-t*n,d=null;return g&&!isNaN(g)&&isFinite(a)&&isFinite(l)&&(this._a=r/g,this._b=-t/g,this._c=-n/g,this._d=e/g,this._tx=(n*l-r*a)/g,this._ty=(t*a-e*l)/g,d=this),d},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new oe(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var e=this._a*this._d-this._c*this._b;return e&&!isNaN(e)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(e,t,n){return arguments.length<3?this._transformPoint(F.read(arguments)):this._transformCoordinates(e,t,n)},_transformPoint:function(e,t,n){var r=e.x,a=e.y;return t||(t=new F),t._set(r*this._a+a*this._c+this._tx,r*this._b+a*this._d+this._ty,n)},_transformCoordinates:function(e,t,n){for(var r=0,a=2*n;r<a;r+=2){var l=e[r],g=e[r+1];t[r]=l*this._a+g*this._c+this._tx,t[r+1]=l*this._b+g*this._d+this._ty}return t},_transformCorners:function(e){var t=e.x,n=e.y,r=t+e.width,a=n+e.height,l=[t,n,r,n,r,a,t,a];return this._transformCoordinates(l,l,4)},_transformBounds:function(e,t,n){for(var r=this._transformCorners(e),a=r.slice(0,2),l=a.slice(),g=2;g<8;g++){var d=r[g],_=g&1;d<a[_]?a[_]=d:d>l[_]&&(l[_]=d)}return t||(t=new ie),t._set(a[0],a[1],l[0]-a[0],l[1]-a[1],n)},inverseTransform:function(){return this._inverseTransform(F.read(arguments))},_inverseTransform:function(e,t,n){var r=this._a,a=this._b,l=this._c,g=this._d,d=this._tx,_=this._ty,m=r*g-a*l,w=null;if(m&&!isNaN(m)&&isFinite(d)&&isFinite(_)){var C=e.x-this._tx,x=e.y-this._ty;t||(t=new F),w=t._set((C*g-x*l)/m,(x*r-C*a)/m,n)}return w},decompose:function(){var e=this._a,t=this._b,n=this._c,r=this._d,a=e*r-t*n,l=Math.sqrt,g=Math.atan2,d=180/Math.PI,_,m,w;if(e!==0||t!==0){var C=l(e*e+t*t);_=Math.acos(e/C)*(t>0?1:-1),m=[C,a/C],w=[g(e*n+t*r,C*C),0]}else if(n!==0||r!==0){var x=l(n*n+r*r);_=Math.asin(n/x)*(r>0?1:-1),m=[a/x,x],w=[0,g(e*n+t*r,x*x)]}else _=0,w=m=[0,0];return{translation:this.getTranslation(),rotation:_*d,scaling:new F(m),skewing:new F(w[0]*d,w[1]*d)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new F(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(e){this.isIdentity()||e.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},f.each(["a","b","c","d","tx","ty"],function(e){var t=f.capitalize(e),n="_"+e;this["get"+t]=function(){return this[n]},this["set"+t]=function(r){this[n]=r,this._changed()}},{})),Me=f.extend({_class:"Line",initialize:function(t,n,r,a,l){var g=!1;arguments.length>=4?(this._px=t,this._py=n,this._vx=r,this._vy=a,g=l):(this._px=t.x,this._py=t.y,this._vx=n.x,this._vy=n.y,g=r),g||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new F(this._px,this._py)},getVector:function(){return new F(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(e,t){return Me.intersect(this._px,this._py,this._vx,this._vy,e._px,e._py,e._vx,e._vy,!0,t)},getSide:function(e,t){return Me.getSide(this._px,this._py,this._vx,this._vy,e.x,e.y,!0,t)},getDistance:function(e){return Math.abs(this.getSignedDistance(e))},getSignedDistance:function(e){return Me.getSignedDistance(this._px,this._py,this._vx,this._vy,e.x,e.y,!0)},isCollinear:function(e){return F.isCollinear(this._vx,this._vy,e._vx,e._vy)},isOrthogonal:function(e){return F.isOrthogonal(this._vx,this._vy,e._vx,e._vy)},statics:{intersect:function(e,t,n,r,a,l,g,d,_,m){_||(n-=e,r-=t,g-=a,d-=l);var w=n*d-r*g;if(!q.isMachineZero(w)){var C=e-a,x=t-l,y=(g*x-d*C)/w,N=(n*x-r*C)/w,P=1e-12,E=-P,S=1+P;if(m||E<y&&y<S&&E<N&&N<S)return m||(y=y<=0?0:y>=1?1:y),new F(e+y*n,t+y*r)}},getSide:function(e,t,n,r,a,l,g,d){g||(n-=e,r-=t);var _=a-e,m=l-t,w=_*r-m*n;return!d&&q.isMachineZero(w)&&(w=(_*n+_*n)/(n*n+r*r),w>=0&&w<=1&&(w=0)),w<0?-1:w>0?1:0},getSignedDistance:function(e,t,n,r,a,l,g){return g||(n-=e,r-=t),n===0?r>0?a-e:e-a:r===0?n<0?l-t:t-l:((a-e)*r-(l-t)*n)/(r>n?r*Math.sqrt(1+n*n/(r*r)):n*Math.sqrt(1+r*r/(n*n)))},getDistance:function(e,t,n,r,a,l,g){return Math.abs(Me.getSignedDistance(e,t,n,r,a,l,g))}}}),de=V.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){V.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new ni(null,null,this),this._view=_t.create(this,t||kt.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(e,t){return f.serialize(this._children,e,!0,t)},_changed:function(e,t){if(e&1){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var r=this._changes;if(r&&t){var a=this._changesById,l=t._id,g=a[l];g?g.flags|=e:r.push(a[l]={item:t,flags:e})}},clear:function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t].remove()},isEmpty:function(){return!this._children.length},remove:function e(){return e.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(e){this._currentStyle.set(e)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new Ve({project:this,insert:!0})},getSymbolDefinitions:function(){var e=[],t={};return this.getItems({class:Be,match:function(n){var r=n._definition,a=r._id;return t[a]||(t[a]=!0,e.push(r)),!1}}),e},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var e=this._selectionItems,t=[];for(var n in e){var r=e[n],a=r._selection;a&1&&r.isInserted()?t.push(r):a||this._updateSelection(r)}return t},_updateSelection:function(e){var t=e._id,n=this._selectionItems;e._selection?n[t]!==e&&(this._selectionCount++,n[t]=e):n[t]===e&&(this._selectionCount--,delete n[t])},selectAll:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)e[t].setFullySelected(!0)},deselectAll:function(){var e=this._selectionItems;for(var t in e)e[t].setFullySelected(!1)},addLayer:function(e){return this.insertLayer(o,e)},insertLayer:function(e,t){if(t instanceof Ve){t._remove(!1,!0),f.splice(this._children,[t],e,0),t._setProject(this,!0);var n=t._name;n&&t.setName(n),this._changes&&t._changed(5),this._activeLayer||(this._activeLayer=t)}else t=null;return t},_insertItem:function(e,t,n){return t=this.insertLayer(e,t)||(this._activeLayer||this._insertItem(o,new Ve(T.NO_INSERT),!0)).insertChild(e,t),n&&t.activate&&t.activate(),t},getItems:function(e){return T._getItems(this,e)},getItem:function(e){return T._getItems(this,e,null,null,!0)[0]||null},importJSON:function(e){this.activate();var t=this._activeLayer;return f.importJSON(e,t&&t.isEmpty()&&t)},removeOn:function(e){var t=this._removeSets;if(t){e==="mouseup"&&(t.mousedrag=null);var n=t[e];if(n){for(var r in n){var a=n[r];for(var l in t){var g=t[l];g&&g!=n&&delete g[a._id]}a.remove()}t[e]=null}}},draw:function(e,t,n){this._updateVersion++,e.save(),t.applyToContext(e);for(var r=this._children,a=new f({offset:new F(0,0),pixelRatio:n,viewMatrix:t.isIdentity()?null:t,matrices:[new oe],updateMatrix:!0}),l=0,g=r.length;l<g;l++)r[l].draw(e,a);if(e.restore(),this._selectionCount>0){e.save(),e.strokeWidth=1;var d=this._selectionItems,_=this._scope.settings.handleSize,m=this._updateVersion;for(var w in d)d[w]._drawSelection(e,t,_,d,m);e.restore()}}}),T=f.extend(b,{statics:{extend:function e(t){return t._serializeFields&&(t._serializeFields=f.set({},this.prototype._serializeFields,t._serializeFields)),e.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new oe,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var e=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return f.each(e,function(t){this._events[t]={install:function(n){this.getView()._countItemEvent(n,1)},uninstall:function(n){this.getView()._countItemEvent(n,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:e}})},{initialize:function(){},_initialize:function(e,t){var n=e&&f.isPlainObject(e),r=n&&e.internal===!0,a=this._matrix=new oe,l=n&&e.project||it.project,g=it.settings;return this._id=r?null:ue.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&g.applyMatrix,t&&a.translate(t),a._owner=this,this._style=new ni(l._currentStyle,this,l),r||n&&e.insert==!1||!g.insertItems&&!(n&&e.insert==!0)?this._setProject(l):(n&&e.parent||l)._insertItem(o,this,!0),n&&e!==T.NO_INSERT&&e!==T.INSERT&&this.set(e,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(e,t){var n={},r=this;function a(l){for(var g in l){var d=r[g];f.equals(d,g==="leading"?l.fontSize*1.2:l[g])||(n[g]=f.serialize(d,e,g!=="data",t))}}return a(this._serializeFields),this instanceof Ce||a(this._style._defaults),[this._class,n]},_changed:function(e){var t=this._symbol,n=this._parent||t,r=this._project;e&8&&(this._bounds=this._position=this._decomposed=o),e&16&&(this._globalMatrix=o),n&&e&72&&T._clearBoundsCache(n),e&2&&T._clearBoundsCache(this),r&&r._changed(e,this),t&&t._changed(e)},getId:function(){return this._id},getName:function(){return this._name},setName:function(e){if(this._name&&this._removeNamed(),e===+e+"")throw new Error("Names consisting only of numbers are not supported.");var t=this._getOwner();if(e&&t){var n=t._children,r=t._namedChildren;(r[e]=r[e]||[]).push(this),e in n||(n[e]=this)}this._name=e||o,this._changed(256)},getStyle:function(){return this._style},setStyle:function(e){this.getStyle().set(e)}},f.each(["locked","visible","blendMode","opacity","guide"],function(e){var t=f.capitalize(e),n="_"+e,r={locked:256,visible:265};this["get"+t]=function(){return this[n]},this["set"+t]=function(a){a!=this[n]&&(this[n]=a,this._changed(r[e]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(e){if(e!==this._selection){this._selection=e;var t=this._project;t&&(t._updateSelection(this),this._changed(257))}},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){if(this._selectChildren){for(var e=this._children,t=0,n=e.length;t<n;t++)if(e[t].isSelected())return!0}return!!(this._selection&1)},setSelected:function(e){if(this._selectChildren)for(var t=this._children,n=0,r=t.length;n<r;n++)t[n].setSelected(e);this._changeSelection(1,e)},isFullySelected:function(){var e=this._children,t=!!(this._selection&1);if(e&&t){for(var n=0,r=e.length;n<r;n++)if(!e[n].isFullySelected())return!1;return!0}return t},setFullySelected:function(e){var t=this._children;if(t)for(var n=0,r=t.length;n<r;n++)t[n].setFullySelected(e);this._changeSelection(1,e)},isClipMask:function(){return this._clipMask},setClipMask:function(e){this._clipMask!=(e=!!e)&&(this._clipMask=e,e&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(e){this._data=e},getPosition:function(e){var t=e?F:be,n=this._position||(this._position=this._getPositionFromBounds());return new t(n.x,n.y,this,"setPosition")},setPosition:function(){this.translate(F.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(e){return this._pivot?this._matrix._transformPoint(this._pivot):(e||this.getBounds()).getCenter(!0)},getPivot:function(){var e=this._pivot;return e?new be(e.x,e.y,this,"setPivot"):null},setPivot:function(){this._pivot=F.read(arguments,0,{clone:!0,readNull:!0}),this._position=o}},f.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(e,t){this[t]=function(n){return this.getBounds(n,e)}},{beans:!0,getBounds:function(e,t){var n=t||e instanceof oe,r=f.set({},n?t:e,this._boundsOptions);(!r.stroke||this.getStrokeScaling())&&(r.cacheItem=this);var a=this._getCachedBounds(n&&e,r).rect;return arguments.length?a:new ae(a.x,a.y,a.width,a.height,this,"setBounds")},setBounds:function(){var e=ie.read(arguments),t=this.getBounds(),n=this._matrix,r=new oe,a=e.getCenter();r.translate(a),(e.width!=t.width||e.height!=t.height)&&(n.isInvertible()||(n.set(n._backup||new oe().translate(n.getTranslation())),t=this.getBounds()),r.scale(t.width!==0?e.width/t.width:0,t.height!==0?e.height/t.height:0)),a=t.getCenter(),r.translate(-a.x,-a.y),this.transform(r)},_getBounds:function(e,t){var n=this._children;return!n||!n.length?new ie:(T._updateBoundsCache(this,t.cacheItem),T._getBounds(n,e,t))},_getBoundsCacheKey:function(e,t){return[e.stroke?1:0,e.handle?1:0,t?1:0].join("")},_getCachedBounds:function(e,t,n){e=e&&e._orNullIfIdentity();var r=t.internal&&!n,a=t.cacheItem,l=r?null:this._matrix._orNullIfIdentity(),g=a&&(!e||e.equals(l))&&this._getBoundsCacheKey(t,r),d=this._bounds;if(T._updateBoundsCache(this._parent||this._symbol,a),g&&d&&g in d){var _=d[g];return{rect:_.rect.clone(),nonscaling:_.nonscaling}}var m=this._getBounds(e||l,t),w=m.rect||m,C=this._style,x=m.nonscaling||C.hasStroke()&&!C.getStrokeScaling();if(g){d||(this._bounds=d={});var _=d[g]={rect:w.clone(),nonscaling:x,internal:r}}return{rect:w,nonscaling:x}},_getStrokeMatrix:function(e,t){var n=this.getStrokeScaling()?null:t&&t.internal?this:this._parent||this._symbol&&this._symbol._item,r=n?n.getViewMatrix().invert():e;return r&&r._shiftless()},statics:{_updateBoundsCache:function(e,t){if(e&&t){var n=t._id,r=e._boundsCache=e._boundsCache||{ids:{},list:[]};r.ids[n]||(r.list.push(t),r.ids[n]=t)}},_clearBoundsCache:function(e){var t=e._boundsCache;if(t){e._bounds=e._position=e._boundsCache=o;for(var n=0,r=t.list,a=r.length;n<a;n++){var l=r[n];l!==e&&(l._bounds=l._position=o,l._boundsCache&&T._clearBoundsCache(l))}}},_getBounds:function(e,t,n){var r=1/0,a=-r,l=r,g=a,d=!1;n=n||{};for(var _=0,m=e.length;_<m;_++){var w=e[_];if(w._visible&&!w.isEmpty(!0)){var C=w._getCachedBounds(t&&t.appended(w._matrix),n,!0),x=C.rect;r=Math.min(x.x,r),l=Math.min(x.y,l),a=Math.max(x.x+x.width,a),g=Math.max(x.y+x.height,g),C.nonscaling&&(d=!0)}}return{rect:isFinite(r)?new ie(r,l,a-r,g-l):new ie,nonscaling:d}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var e=this._decompose();return e?e.rotation:0},setRotation:function(e){var t=this.getRotation();if(t!=null&&e!=null){var n=this._decomposed;this.rotate(e-t),n&&(n.rotation=e,this._decomposed=n)}},getScaling:function(){var e=this._decompose(),t=e&&e.scaling;return new be(t?t.x:1,t?t.y:1,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=F.read(arguments,0,{clone:!0,readNull:!0});if(e&&t&&!e.equals(t)){var n=this.getRotation(),r=this._decomposed,a=new oe,l=q.isZero;if(l(e.x)||l(e.y))a.translate(r.translation),n&&a.rotate(n),a.scale(t.x,t.y),this._matrix.set(a);else{var g=this.getPosition(!0);a.translate(g),n&&a.rotate(n),a.scale(t.x/e.x,t.y/e.y),n&&a.rotate(-n),a.translate(g.negate()),this.transform(a)}r&&(r.scaling=t,this._decomposed=r)}},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},getGlobalMatrix:function(e){var t=this._globalMatrix;if(t)for(var n=this._parent,r=[];n;){if(!n._globalMatrix){t=null;for(var a=0,l=r.length;a<l;a++)r[a]._globalMatrix=null;break}r.push(n),n=n._parent}if(!t){t=this._globalMatrix=this._matrix.clone();var n=this._parent;n&&t.prepend(n.getGlobalMatrix(!0))}return e?t:t.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(e){(this._applyMatrix=this._canApplyMatrix&&!!e)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(e,t){if(this._project!==e){this._project&&this._installEvents(!1),this._project=e;for(var n=this._children,r=0,a=n&&n.length;r<a;r++)n[r]._setProject(e);t=!0}t&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function e(t){e.base.call(this,t);for(var n=this._children,r=0,a=n&&n.length;r<a;r++)n[r]._installEvents(t)},getLayer:function(){for(var e=this;e=e._parent;)if(e instanceof Ve)return e;return null},getParent:function(){return this._parent},setParent:function(e){return e.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(e){this.removeChildren(),this.addChildren(e)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var e=this._getOwner();return e&&e._children[this._index+1]||null},getPreviousSibling:function(){var e=this._getOwner();return e&&e._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(e){return e===this||e&&this._class===e._class&&this._style.equals(e._style)&&this._matrix.equals(e._matrix)&&this._locked===e._locked&&this._visible===e._visible&&this._blendMode===e._blendMode&&this._opacity===e._opacity&&this._clipMask===e._clipMask&&this._guide===e._guide&&this._equals(e)||!1},_equals:function(e){return f.equals(this._children,e._children)},clone:function(e){var t=new this.constructor(T.NO_INSERT),n=this._children,r=f.pick(e?e.insert:o,e===o||e===!0),a=f.pick(e?e.deep:o,!0);n&&t.copyAttributes(this),(!n||a)&&t.copyContent(this),n||t.copyAttributes(this),r&&t.insertAbove(this);var l=this._name,g=this._parent;if(l&&g){for(var n=g._children,d=l,_=1;n[l];)l=d+" "+_++;l!==d&&t.setName(l)}return t},copyContent:function(e){for(var t=e._children,n=0,r=t&&t.length;n<r;n++)this.addChild(t[n].clone(!1),!0)},copyAttributes:function(e,t){this.setStyle(e._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],r=0,a=n.length;r<a;r++){var l=n[r];e.hasOwnProperty(l)&&(this[l]=e[l])}t||this._matrix.set(e._matrix,!0),this.setApplyMatrix(e._applyMatrix),this.setPivot(e._pivot),this.setSelection(e._selection);var g=e._data,d=e._name;this._data=g?f.clone(g):null,d&&this.setName(d)},rasterize:function(e,t){var n,r,a;f.isPlainObject(e)?(n=e.resolution,r=e.insert,a=e.raster):(n=e,r=t),a||(a=new nt(T.NO_INSERT));var l=this.getStrokeBounds(),g=(n||this.getView().getResolution())/72,d=l.getTopLeft().floor(),_=l.getBottomRight().ceil(),m=new te(_.subtract(d)),w=m.multiply(g);if(a.setSize(w,!0),!w.isZero()){var C=a.getContext(!0),x=new oe().scale(g).translate(d.negate());C.save(),x.applyToContext(C),this.draw(C,new f({matrices:[x]})),C.restore()}return a._matrix.set(new oe().translate(d.add(m.divide(2))).scale(1/g)),(r===o||r)&&a.insertAbove(this),a},contains:function(){var e=this._matrix;return e.isInvertible()&&!!this._contains(e._inverseTransform(F.read(arguments)))},_contains:function(e){var t=this._children;if(t){for(var n=t.length-1;n>=0;n--)if(t[n].contains(e))return!0;return!1}return e.isInside(this.getInternalBounds())},isInside:function(){return ie.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new Fe.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(e,t){return e instanceof T?this._asPathItem().getIntersections(e._asPathItem(),null,t,!0).length>0:!1}},new function(){function e(){var r=arguments;return this._hitTest(F.read(r),Se.getOptions(r))}function t(){var r=arguments,a=F.read(r),l=Se.getOptions(r),g=[];return this._hitTest(a,new f({all:g},l)),g}function n(r,a,l,g){var d=this._children;if(d)for(var _=d.length-1;_>=0;_--){var m=d[_],w=m!==g&&m._hitTest(r,a,l);if(w&&!a.all)return w}return null}return de.inject({hitTest:e,hitTestAll:t,_hitTest:n}),{hitTest:e,hitTestAll:t,_hitTestChildren:n}},{_hitTest:function(e,t,n){if(this._locked||!this._visible||this._guide&&!t.guides||this.isEmpty())return null;var r=this._matrix,a=n?n.appended(r):this.getGlobalMatrix().prepend(this.getView()._matrix),l=Math.max(t.tolerance,1e-12),g=t._tolerancePadding=new te(Fe._getStrokePadding(l,r._shiftless().invert()));if(e=r._inverseTransform(e),!e||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(g.multiply(2))._containsPoint(e))return null;var d=!(t.guides&&!this._guide||t.selected&&!this.isSelected()||t.type&&t.type!==f.hyphenate(this._class)||t.class&&!(this instanceof t.class)),_=t.match,m=this,w,C;function x(v){return v&&_&&!_(v)&&(v=null),v&&t.all&&t.all.push(v),v}function y(v,A){var L=A?w["get"+A]():m.getPosition();if(e.subtract(L).divide(g).length<=1)return new Se(v,m,{name:A?f.hyphenate(A):v,point:L})}var N=t.position,P=t.center,E=t.bounds;if(d&&this._parent&&(N||P||E)){if((P||E)&&(w=this.getInternalBounds()),C=N&&y("position")||P&&y("center","Center"),!C&&E)for(var S=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],I=0;I<8&&!C;I++)C=y("bounds",S[I]);C=x(C)}return C||(C=this._hitTestChildren(e,t,a)||d&&x(this._hitTestSelf(e,t,a,this.getStrokeScaling()?null:a._shiftless().invert()))||null),C&&C.point&&(C.point=r.transform(C.point)),C},_hitTestSelf:function(e,t){if(t.fill&&this.hasFill()&&this._contains(e))return new Se("fill",this)},matches:function(e,t){function n(g,d){for(var _ in g)if(g.hasOwnProperty(_)){var m=g[_],w=d[_];if(f.isPlainObject(m)&&f.isPlainObject(w)){if(!n(m,w))return!1}else if(!f.equals(m,w))return!1}return!0}var r=typeof e;if(r==="object"){for(var a in e)if(e.hasOwnProperty(a)&&!this.matches(a,e[a]))return!1;return!0}else{if(r==="function")return e(this);if(e==="match")return t(this);var l=/^(empty|editable)$/.test(e)?this["is"+f.capitalize(e)]():e==="type"?f.hyphenate(this._class):this[e];if(e==="class"){if(typeof t=="function")return this instanceof t;l=this._class}if(typeof t=="function")return!!t(l);if(t){if(t.test)return t.test(l);if(f.isPlainObject(t))return n(t,l)}return f.equals(l,t)}},getItems:function(e){return T._getItems(this,e,this._matrix)},getItem:function(e){return T._getItems(this,e,this._matrix,null,!0)[0]||null},statics:{_getItems:function e(t,n,r,a,l){if(!a){var g=typeof n=="object"&&n,d=g&&g.overlapping,_=g&&g.inside,m=d||_,x=m&&ie.read([m]);a={items:[],recursive:g&&g.recursive!==!1,inside:!!_,overlapping:!!d,rect:x,path:d&&new Fe.Rectangle({rectangle:x,insert:!1})},g&&(n=f.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var w=t._children,C=a.items,x=a.rect;r=x&&(r||new oe);for(var y=0,N=w&&w.length;y<N;y++){var P=w[y],E=r&&r.appended(P._matrix),S=!0;if(x){var m=P.getBounds(E);if(!x.intersects(m))continue;x.contains(m)||a.overlapping&&(m.contains(x)||a.path.intersects(P,E))||(S=!1)}if(S&&P.matches(n)&&(C.push(P),l)||(a.recursive!==!1&&e(P,n,E,a,l),l&&C.length>0))break}return C}}},{importJSON:function(e){var t=f.importJSON(e,this);return t!==this?this.addChild(t):t},addChild:function(e){return this.insertChild(o,e)},insertChild:function(e,t){var n=t?this.insertChildren(e,[t]):null;return n&&n[0]},addChildren:function(e){return this.insertChildren(this._children.length,e)},insertChildren:function(e,t){var n=this._children;if(n&&t&&t.length>0){t=f.slice(t);for(var r={},a=t.length-1;a>=0;a--){var l=t[a],g=l&&l._id;!l||r[g]?t.splice(a,1):(l._remove(!1,!0),r[g]=!0)}f.splice(n,t,e,0);for(var d=this._project,_=d._changes,a=0,m=t.length;a<m;a++){var l=t[a],w=l._name;l._parent=this,l._setProject(d,!0),w&&l.setName(w),_&&l._changed(5)}this._changed(11)}else t=null;return t},_insertItem:"#insertChild",_insertAt:function(e,t){var n=e&&e._getOwner(),r=e!==this&&n?this:null;return r&&(r._remove(!1,!0),n._insertItem(e._index+t,r)),r},insertAbove:function(e){return this._insertAt(e,1)},insertBelow:function(e){return this._insertAt(e,0)},sendToBack:function(){var e=this._getOwner();return e?e._insertItem(0,this):null},bringToFront:function(){var e=this._getOwner();return e?e._insertItem(o,this):null},appendTop:"#addChild",appendBottom:function(e){return this.insertChild(0,e)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(e){return e._insertItem(o,this)},copyTo:function(e){return this.clone(!1).addTo(e)},reduce:function(e){var t=this._children;if(t&&t.length===1){var n=t[0].reduce(e);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var e=this._getOwner();if(e){var t=e._children,n=e._namedChildren,r=this._name,a=n[r],l=a?a.indexOf(this):-1;l!==-1&&(t[r]==this&&delete t[r],a.splice(l,1),a.length?t[r]=a[0]:delete n[r])}},_remove:function(e,t){var n=this._getOwner(),r=this._project,a=this._index;return this._style&&this._style._dispose(),n?(this._name&&this._removeNamed(),a!=null&&(r._activeLayer===this&&(r._activeLayer=this.getNextSibling()||this.getPreviousSibling()),f.splice(n._children,null,a,1)),this._installEvents(!1),e&&r._changes&&this._changed(5),t&&n._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(e){var t=e&&e.insertBelow(this);return t&&this.remove(),t},removeChildren:function(e,t){if(!this._children)return null;e=e||0,t=f.pick(t,this._children.length);for(var n=f.splice(this._children,null,e,t-e),r=n.length-1;r>=0;r--)n[r]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var e=0,t=this._children.length;e<t;e++)this._children[e]._index=e;this._changed(11)}},isEmpty:function(e){var t=this._children,n=t?t.length:0;if(e){for(var r=0;r<n;r++)if(!t[r].isEmpty(e))return!1;return!0}return!n},isEditable:function(){for(var e=this;e;){if(!e._visible||e._locked)return!1;e=e._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(e){function t(g){var d=[];do d.unshift(g);while(g=g._parent);return d}for(var n=t(this),r=t(e),a=0,l=Math.min(n.length,r.length);a<l;a++)if(n[a]!=r[a])return n[a]._index<r[a]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(e){return this._getOrder(e)===-1},isBelow:function(e){return this._getOrder(e)===1},isParent:function(e){return this._parent===e},isChild:function(e){return e&&e._parent===this},isDescendant:function(e){for(var t=this;t=t._parent;)if(t===e)return!0;return!1},isAncestor:function(e){return e?e.isDescendant(this):!1},isSibling:function(e){return this._parent===e._parent},isGroupedWith:function(e){for(var t=this._parent;t;){if(t._parent&&/^(Group|Layer|CompoundPath)$/.test(t._class)&&e.isDescendant(t))return!0;t=t._parent}return!1}},f.each(["rotate","scale","shear","skew"],function(e){var t=e==="rotate";this[e]=function(){var n=arguments,r=(t?f:F).read(n),a=F.read(n,0,{readNull:!0});return this.transform(new oe()[e](r,a||this.getPosition(!0)))}},{translate:function(){var e=new oe;return this.transform(e.translate.apply(e,arguments))},transform:function(e,t,n){var r=this._matrix,a=e&&!e.isIdentity(),l=n&&this._canApplyMatrix||this._applyMatrix&&(a||!r.isIdentity()||t&&this._children);if(!a&&!l)return this;if(a){!e.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(e,!0);var g=this._style,d=g.getFillColor(!0),_=g.getStrokeColor(!0);d&&d.transform(e),_&&_.transform(e)}if(l&&(l=this._transformContent(r,t,n))){var m=this._pivot;m&&r._transformPoint(m,m,!0),r.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var w=this._bounds,C=this._position;(a||l)&&this._changed(25);var x=a&&w&&e.decompose();if(x&&x.skewing.isZero()&&x.rotation%90===0){for(var y in w){var N=w[y];if(N.nonscaling)delete w[y];else if(l||!N.internal){var P=N.rect;e._transformBounds(P,P)}}this._bounds=w;var E=w[this._getBoundsCacheKey(this._boundsOptions||{})];E&&(this._position=this._getPositionFromBounds(E.rect))}else a&&C&&this._pivot&&(this._position=e._transformPoint(C,C));return this},_transformContent:function(e,t,n){var r=this._children;if(r){for(var a=0,l=r.length;a<l;a++)r[a].transform(e,t,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(F.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(F.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(F.read(arguments))},localToParent:function(){return this._matrix._transformPoint(F.read(arguments))},fitBounds:function(e,t){e=ie.read(arguments);var n=this.getBounds(),r=n.height/n.width,a=e.height/e.width,l=(t?r>a:r<a)?e.width/n.width:e.height/n.height,g=new ie(new F,new te(n.width*l,n.height*l));g.setCenter(e.getCenter()),this.setBounds(g)}}),{_setStyles:function(e,t,n){var r=this._style,a=this._matrix;if(r.hasFill()&&(e.fillStyle=r.getFillColor().toCanvasStyle(e,a)),r.hasStroke()){e.strokeStyle=r.getStrokeColor().toCanvasStyle(e,a),e.lineWidth=r.getStrokeWidth();var l=r.getStrokeJoin(),g=r.getStrokeCap(),d=r.getMiterLimit();if(l&&(e.lineJoin=l),g&&(e.lineCap=g),d&&(e.miterLimit=d),it.support.nativeDash){var _=r.getDashArray(),m=r.getDashOffset();_&&_.length&&("setLineDash"in e?(e.setLineDash(_),e.lineDashOffset=m):(e.mozDash=_,e.mozDashOffset=m))}}if(r.hasShadow()){var w=t.pixelRatio||1,C=n._shiftless().prepend(new oe().scale(w,w)),x=C.transform(new F(r.getShadowBlur(),0)),y=C.transform(this.getShadowOffset());e.shadowColor=r.getShadowColor().toCanvasStyle(e),e.shadowBlur=x.getLength(),e.shadowOffsetX=y.x,e.shadowOffsetY=y.y}},draw:function(e,t,n){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var r=t.matrices,a=t.viewMatrix,l=this._matrix,g=r[r.length-1].appended(l);if(g.isInvertible()){a=a?a.appended(g):g,r.push(g),t.updateMatrix&&(this._globalMatrix=g);var d=this._blendMode,_=q.clamp(this._opacity,0,1),m=d==="normal",w=ri.nativeModes[d],C=m&&_===1||t.dontStart||t.clip||(w||m&&_<1)&&this._canComposite(),x=t.pixelRatio||1,y,N,P;if(!C){var E=this.getStrokeBounds(a);if(!E.width||!E.height){r.pop();return}P=t.offset,N=t.offset=E.getTopLeft().floor(),y=e,e=kt.getContext(E.getSize().ceil().add(1).multiply(x)),x!==1&&e.scale(x,x)}e.save();var S=n?n.appended(l):this._canScaleStroke&&!this.getStrokeScaling(!0)&&a,I=!C&&t.clipItem,v=!S||I;if(C?(e.globalAlpha=_,w&&(e.globalCompositeOperation=d)):v&&e.translate(-N.x,-N.y),v&&(C?l:a).applyToContext(e),I&&t.clipItem.draw(e,t.extend({clip:!0})),S){e.setTransform(x,0,0,x,0,0);var A=t.offset;A&&e.translate(-A.x,-A.y)}this._draw(e,t,a,S),e.restore(),r.pop(),t.clip&&!t.dontFinish&&e.clip(this.getFillRule()),C||(ri.process(d,e,y,_,N.subtract(P).multiply(x)),kt.release(e),t.offset=P)}}},_isUpdated:function(e){var t=this._parent;if(t instanceof lt)return t._isUpdated(e);var n=this._updateVersion===e;return!n&&t&&t._visible&&t._isUpdated(e)&&(this._updateVersion=e,n=!0),n},_drawSelection:function(e,t,n,r,a){var l=this._selection,g=l&1,d=l&2||g&&this._selectBounds,_=l&4;if(this._drawSelected||(g=!1),(g||d||_)&&this._isUpdated(a)){var m,w=this.getSelectedColor(!0)||(m=this.getLayer())&&m.getSelectedColor(!0),C=t.appended(this.getGlobalMatrix(!0)),x=n/2;if(e.strokeStyle=e.fillStyle=w?w.toCanvasStyle(e):"#009dec",g&&this._drawSelected(e,C,r),_){var y=this.getPosition(!0),N=this._parent,P=N?N.localToGlobal(y):y,E=P.x,S=P.y;e.beginPath(),e.arc(E,S,x,0,Math.PI*2,!0),e.stroke();for(var I=[[0,-1],[1,0],[0,1],[-1,0]],v=x,A=n+1,L=0;L<4;L++){var z=I[L],M=z[0],D=z[1];e.moveTo(E+M*v,S+D*v),e.lineTo(E+M*A,S+D*A),e.stroke()}}if(d){var H=C._transformCorners(this.getInternalBounds());e.beginPath();for(var L=0;L<8;L++)e[L?"lineTo":"moveTo"](H[L],H[++L]);e.closePath(),e.stroke();for(var L=0;L<8;L++)e.fillRect(H[L]-x,H[++L]-x,n,n)}}},_canComposite:function(){return!1}},f.each(["down","drag","up","move"],function(e){this["removeOn"+f.capitalize(e)]=function(){var t={};return t[e]=!0,this.removeOn(t)}},{removeOn:function(e){for(var t in e)if(e[t]){var n="mouse"+t,r=this._project,a=r._removeSets=r._removeSets||{};a[n]=a[n]||{},a[n][this._id]=this}return this}}),{tween:function(e,t,n){n||(n=t,t=e,e=null,n||(n=t,t=null));var r=n&&n.easing,a=n&&n.start,l=n!=null&&(typeof n=="number"?n:n.duration),g=new wn(this,e,t,l,r,a);function d(_){g._handleFrame(_.time*1e3),g.running||this.off("frame",d)}return l&&this.on("frame",d),g},tweenTo:function(e,t){return this.tween(null,e,t)},tweenFrom:function(e,t){return this.tween(e,null,t)}}),Ce=T.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function e(t){e.base.call(this,t),t&2050&&(this._clipItem=o)},_getClipItem:function(){var e=this._clipItem;if(e===o){e=null;for(var t=this._children,n=0,r=t.length;n<r;n++)if(t[n]._clipMask){e=t[n];break}this._clipItem=e}return e},isClipped:function(){return!!this._getClipItem()},setClipped:function(e){var t=this.getFirstChild();t&&t.setClipMask(e)},_getBounds:function e(t,n){var r=this._getClipItem();return r?r._getCachedBounds(r._matrix.prepended(t),f.set({},n,{stroke:!1})):e.base.call(this,t,n)},_hitTestChildren:function e(t,n,r){var a=this._getClipItem();return(!a||a.contains(t))&&e.base.call(this,t,n,r,a)},_draw:function(e,t){var n=t.clip,r=!n&&this._getClipItem();t=t.extend({clipItem:r,clip:!1}),n?(e.beginPath(),t.dontStart=t.dontFinish=!0):r&&r.draw(e,t.extend({clip:!0}));for(var a=this._children,l=0,g=a.length;l<g;l++){var d=a[l];d!==r&&d.draw(e,t)}}}),Ve=Ce.extend({_class:"Layer",initialize:function(){Ce.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function e(){return this._parent?e.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),Xe=T.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,n){this._initialize(t,n)},_equals:function(e){return this._type===e._type&&this._size.equals(e._size)&&f.equals(this._radius,e._radius)},copyContent:function(e){this.setType(e._type),this.setSize(e._size),this.setRadius(e._radius)},getType:function(){return this._type},setType:function(e){this._type=e},getShape:"#getType",setShape:"#setType",getSize:function(){var e=this._size;return new re(e.width,e.height,this,"setSize")},setSize:function(){var e=te.read(arguments);if(!this._size)this._size=e.clone();else if(!this._size.equals(e)){var t=this._type,n=e.width,r=e.height;t==="rectangle"?this._radius.set(te.min(this._radius,e.divide(2).abs())):t==="circle"?(n=r=(n+r)/2,this._radius=n/2):t==="ellipse"&&this._radius._set(n/2,r/2),this._size._set(n,r),this._changed(9)}},getRadius:function(){var e=this._radius;return this._type==="circle"?e:new re(e.width,e.height,this,"setRadius")},setRadius:function(e){var t=this._type;if(t==="circle"){if(e===this._radius)return;var n=e*2;this._radius=e,this._size._set(n,n)}else if(e=te.read(arguments),!this._radius)this._radius=e.clone();else{if(this._radius.equals(e))return;if(this._radius.set(e),t==="rectangle"){var n=te.max(this._size,e.multiply(2));this._size.set(n)}else t==="ellipse"&&this._size._set(e.width*2,e.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(e){var t=new Fe[f.capitalize(this._type)]({center:new F,size:this._size,radius:this._radius,insert:!1});return t.copyAttributes(this),it.settings.applyMatrix&&t.setApplyMatrix(!0),(e===o||e)&&t.insertAbove(this),t},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(e,t,n,r){var a=this._style,l=a.hasFill(),g=a.hasStroke(),d=t.dontFinish||t.clip,_=!r;if(l||g||d){var m=this._type,w=this._radius,C=m==="circle";if(t.dontStart||e.beginPath(),_&&C)e.arc(0,0,w,0,Math.PI*2,!0);else{var x=C?w:w.width,y=C?w:w.height,N=this._size,P=N.width,E=N.height;if(_&&m==="rectangle"&&x===0&&y===0)e.rect(-P/2,-E/2,P,E);else{var S=P/2,I=E/2,v=1-.5522847498307936,A=x*v,L=y*v,z=[-S,-I+y,-S,-I+L,-S+A,-I,-S+x,-I,S-x,-I,S-A,-I,S,-I+L,S,-I+y,S,I-y,S,I-L,S-A,I,S-x,I,-S+x,I,-S+A,I,-S,I-L,-S,I-y];r&&r.transform(z,z,32),e.moveTo(z[0],z[1]),e.bezierCurveTo(z[2],z[3],z[4],z[5],z[6],z[7]),S!==x&&e.lineTo(z[8],z[9]),e.bezierCurveTo(z[10],z[11],z[12],z[13],z[14],z[15]),I!==y&&e.lineTo(z[16],z[17]),e.bezierCurveTo(z[18],z[19],z[20],z[21],z[22],z[23]),S!==x&&e.lineTo(z[24],z[25]),e.bezierCurveTo(z[26],z[27],z[28],z[29],z[30],z[31])}}e.closePath()}!d&&(l||g)&&(this._setStyles(e,t,n),l&&(e.fill(a.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),g&&e.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(e,t){var n=new ie(this._size).setCenter(0,0),r=this._style,a=t.stroke&&r.hasStroke()&&r.getStrokeWidth();return e&&(n=e._transformBounds(n)),a?n.expand(Fe._getStrokePadding(a,this._getStrokeMatrix(e,t))):n}},new function(){function e(n,r,a){var l=n._radius;if(!l.isZero())for(var g=n._size.divide(2),d=1;d<=4;d++){var _=new F(d>1&&d<4?-1:1,d>2?-1:1),m=_.multiply(g),w=m.subtract(_.multiply(l)),C=new ie(a?m.add(_.multiply(a)):m,w);if(C.contains(r))return{point:w,quadrant:d}}}function t(n,r,a,l){var g=n.divide(r);return(!l||g.isInQuadrant(l))&&g.subtract(g.normalize()).multiply(r).divide(a).length<=1}return{_contains:function n(r){if(this._type==="rectangle"){var a=e(this,r);return a?r.subtract(a.point).divide(this._radius).getLength()<=1:n.base.call(this,r)}else return r.divide(this.size).getLength()<=.5},_hitTestSelf:function n(r,a,l,g){var d=!1,_=this._style,m=a.stroke&&_.hasStroke(),w=a.fill&&_.hasFill();if(m||w){var C=this._type,x=this._radius,y=m?_.getStrokeWidth()/2:0,N=a._tolerancePadding.add(Fe._getStrokePadding(y,!_.getStrokeScaling()&&g));if(C==="rectangle"){var P=N.multiply(2),E=e(this,r,P);if(E)d=t(r.subtract(E.point),x,N,E.quadrant);else{var S=new ie(this._size).setCenter(0,0),I=S.expand(P),v=S.expand(P.negate());d=I._containsPoint(r)&&!v._containsPoint(r)}}else d=t(r,x,N)}return d?new Se(m?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function e(t,n,r,a,l){var g=f.create(Xe.prototype);return g._type=t,g._size=r,g._radius=a,g._initialize(f.getNamed(l),n),g}return{Circle:function(){var t=arguments,n=F.readNamed(t,"center"),r=f.readNamed(t,"radius");return e("circle",n,new te(r*2),r,t)},Rectangle:function(){var t=arguments,n=ie.readNamed(t,"rectangle"),r=te.min(te.readNamed(t,"radius"),n.getSize(!0).divide(2));return e("rectangle",n.getCenter(!0),n.getSize(!0),r,t)},Ellipse:function(){var t=arguments,n=Xe._readEllipse(t),r=n.radius;return e("ellipse",n.center,r.multiply(2),r,t)},_readEllipse:function(t){var n,r;if(f.hasNamed(t,"radius"))n=F.readNamed(t,"center"),r=te.readNamed(t,"radius");else{var a=ie.readNamed(t,"rectangle");n=a.getCenter(!0),r=a.getSize(!0).divide(2)}return{center:n,radius:r}}}}}),nt=T.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(t,n){if(!this._initialize(t,n!==o&&F.read(arguments))){var r,a=typeof t,l=a==="string"?p.getElementById(t):a==="object"?t:null;if(l&&l!==T.NO_INSERT){if(l.getContext||l.naturalHeight!=null)r=l;else if(l){var g=te.read(arguments);g.isZero()||(r=kt.getCanvas(g))}}r?this.setImage(r):this.setSource(t)}this._size||(this._size=new te,this._loaded=!1)},_equals:function(e){return this.getSource()===e.getSource()},copyContent:function(e){var t=e._image,n=e._canvas;if(t)this._setImage(t);else if(n){var r=kt.getCanvas(e._size);r.getContext("2d").drawImage(n,0,0),this._setImage(r)}this._crossOrigin=e._crossOrigin},getSize:function(){var e=this._size;return new re(e?e.width:0,e?e.height:0,this,"setSize")},setSize:function(e,t){var n=te.read(arguments);if(n.equals(this._size))t&&this.clear();else if(n.width>0&&n.height>0){var r=!t&&this.getElement();this._setImage(kt.getCanvas(n)),r&&this.getContext(!0).drawImage(r,0,0,n.width,n.height)}else this._canvas&&kt.release(this._canvas),this._size=n.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(e){this.setSize(e,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(e){this.setSize(this.getWidth(),e)},getLoaded:function(){return this._loaded},isEmpty:function(){var e=this._size;return!e||e.width===0&&e.height===0},getResolution:function(){var e=this._matrix,t=new F(0,0).transform(e),n=new F(1,0).transform(e).subtract(t),r=new F(0,1).transform(e).subtract(t);return new te(72/n.getLength(),72/r.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(e){var t=this;function n(r){var a=t.getView(),l=r&&r.type||"load";a&&t.responds(l)&&(it=a._scope,t.emit(l,new wi(r)))}this._setImage(e),this._loaded?setTimeout(n,0):e&&ht.add(e,{load:function(r){t._setImage(e),n(r)},error:n})},_setImage:function(e){this._canvas&&kt.release(this._canvas),e&&e.getContext?(this._image=null,this._canvas=e,this._loaded=!0):(this._image=e,this._canvas=null,this._loaded=!!(e&&e.src&&e.complete)),this._size=new te(e?e.naturalWidth||e.width:0,e?e.naturalHeight||e.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var e=kt.getContext(this._size);try{this._image&&e.drawImage(this._image,0,0),this._canvas=e.canvas}catch{kt.release(e)}}return this._canvas},setCanvas:"#setImage",getContext:function(e){return this._context||(this._context=this.getCanvas().getContext("2d")),e&&(this._image=null,this._changed(1025)),this._context},setContext:function(e){this._context=e},getSource:function(){var e=this._image;return e&&e.src||this.toDataURL()},setSource:function(e){var t=new s.Image,n=this._crossOrigin;n&&(t.crossOrigin=n),e&&(t.src=e),this.setImage(t)},getCrossOrigin:function(){var e=this._image;return e&&e.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(e){this._crossOrigin=e;var t=this._image;t&&(t.crossOrigin=e)},getSmoothing:function(){return this._smoothing},setSmoothing:function(e){this._smoothing=typeof e=="string"?e:e?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var e=ie.read(arguments),t=kt.getContext(e.getSize());return t.drawImage(this.getCanvas(),e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.canvas},getSubRaster:function(){var e=ie.read(arguments),t=new nt(T.NO_INSERT);return t._setImage(this.getSubCanvas(e)),t.translate(e.getCenter().subtract(this.getSize().divide(2))),t._matrix.prepend(this._matrix),t.insertAbove(this),t},toDataURL:function(){var e=this._image,t=e&&e.src;if(/^data:/.test(t))return t;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(e){var t=F.read(arguments,1);this.getContext(!0).drawImage(e,t.x,t.y)},getAverageColor:function(e){var t,n;if(e?e instanceof Tt?(n=e,t=e.getBounds()):typeof e=="object"&&("width"in e?t=new ie(e):"x"in e&&(t=new ie(e.x-.5,e.y-.5,1,1))):t=this.getBounds(),!t)return null;var r=32,a=Math.min(t.width,r),l=Math.min(t.height,r),g=nt._sampleContext;g?g.clearRect(0,0,r+1,r+1):g=nt._sampleContext=kt.getContext(new te(r)),g.save();var d=new oe().scale(a/t.width,l/t.height).translate(-t.x,-t.y);d.applyToContext(g),n&&n.draw(g,new f({clip:!0,matrices:[d]})),this._matrix.applyToContext(g);var _=this.getElement(),m=this._size;_&&g.drawImage(_,-m.width/2,-m.height/2),g.restore();for(var w=g.getImageData(.5,.5,Math.ceil(a),Math.ceil(l)).data,C=[0,0,0],x=0,y=0,N=w.length;y<N;y+=4){var P=w[y+3];x+=P,P/=255,C[0]+=w[y]*P,C[1]+=w[y+1]*P,C[2]+=w[y+2]*P}for(var y=0;y<3;y++)C[y]/=x;return x?bt.read(C):null},getPixel:function(){var e=F.read(arguments),t=this.getContext().getImageData(e.x,e.y,1,1).data;return new bt("rgb",[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var e=arguments,t=F.read(e),n=bt.read(e),r=n._convert("rgb"),a=n._alpha,l=this.getContext(!0),g=l.createImageData(1,1),d=g.data;d[0]=r[0]*255,d[1]=r[1]*255,d[2]=r[2]*255,d[3]=a!=null?a*255:255,l.putImageData(g,t.x,t.y)},clear:function(){var e=this._size;this.getContext(!0).clearRect(0,0,e.width+1,e.height+1)},createImageData:function(){var e=te.read(arguments);return this.getContext().createImageData(e.width,e.height)},getImageData:function(){var e=ie.read(arguments);return e.isEmpty()&&(e=new ie(this._size)),this.getContext().getImageData(e.x,e.y,e.width,e.height)},putImageData:function(e){var t=F.read(arguments,1);this.getContext(!0).putImageData(e,t.x,t.y)},setImageData:function(e){this.setSize(e),this.getContext(!0).putImageData(e,0,0)},_getBounds:function(e,t){var n=new ie(this._size).setCenter(0,0);return e?e._transformBounds(n):n},_hitTestSelf:function(e){if(this._contains(e)){var t=this;return new Se("pixel",t,{offset:e.add(t._size.divide(2)).round(),color:{get:function(){return t.getPixel(this.offset)}}})}},_draw:function(e,t,n){var r=this.getElement();if(r&&r.width>0&&r.height>0){e.globalAlpha=q.clamp(this._opacity,0,1),this._setStyles(e,t,n);var a=this._smoothing,l=a==="off";ot.setPrefixed(e,l?"imageSmoothingEnabled":"imageSmoothingQuality",l?!1:a),e.drawImage(r,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),Be=T.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,n){this._initialize(t,n!==o&&F.read(arguments,1))||this.setDefinition(t instanceof Oe?t:new Oe(t))},_equals:function(e){return this._definition===e._definition},copyContent:function(e){this.setDefinition(e._definition)},getDefinition:function(){return this._definition},setDefinition:function(e){this._definition=e,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(e,t){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(e),t)},_hitTestSelf:function(e,t,n){var r=t.extend({all:!1}),a=this._definition._item._hitTest(e,r,n);return a&&(a.item=this),a},_draw:function(e,t){this._definition._item.draw(e,t)}}),Oe=f.extend({_class:"SymbolDefinition",initialize:function(t,n){this._id=ue.get(),this.project=it.project,t&&this.setItem(t,n)},_serialize:function(e,t){return t.add(this,function(){return f.serialize([this._class,this._item],e,!1,t)})},_changed:function(e){e&8&&T._clearBoundsCache(this),e&1&&this.project._changed(e)},getItem:function(){return this._item},setItem:function(e,t){e._symbol&&(e=e.clone()),this._item&&(this._item._symbol=null),this._item=e,e.remove(),e.setSelected(!1),t||e.setPosition(new F),e._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(e){return new Be(this,e)},clone:function(){return new Oe(this._item.clone(!1))},equals:function(e){return e===this||e&&this._item.equals(e._item)||!1}}),Se=f.extend({_class:"HitResult",initialize:function(t,n,r){this.type=t,this.item=n,r&&this.inject(r)},statics:{getOptions:function(e){var t=e&&f.read(e);return new f({type:null,tolerance:it.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),ge=f.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,n,r,a,l,g){var d=arguments.length,_,m,w,C;d>0&&(t==null||typeof t=="object"?d===1&&t&&"point"in t?(_=t.point,m=t.handleIn,w=t.handleOut,C=t.selection):(_=t,m=n,w=r,C=a):(_=[t,n],m=r!==o?[r,a]:null,w=l!==o?[l,g]:null)),new We(_,this,"_point"),new We(m,this,"_handleIn"),new We(w,this,"_handleOut"),C&&this.setSelection(C)},_serialize:function(e,t){var n=this._point,r=this._selection,a=r||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return r&&a.push(r),f.serialize(a,e,!0,t)},_changed:function(e){var t=this._path;if(t){var n=t._curves,r=this._index,a;n&&((!e||e===this._point||e===this._handleIn)&&(a=r>0?n[r-1]:t._closed?n[n.length-1]:null)&&a._changed(),(!e||e===this._point||e===this._handleOut)&&(a=n[r])&&a._changed()),t._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(F.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(F.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(F.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var e=this._handleIn,t=this._handleOut;return!e.isZero()&&!t.isZero()&&e.isCollinear(t)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(e){var t=this._selection,n=this._path;this._selection=e=e||0,n&&e!==t&&(n._updateSelection(this,t,e),n._changed(257))},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){return!!(this._selection&7)},setSelected:function(e){this._changeSelection(7,e)},getIndex:function(){return this._index!==o?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var e=this._path,t=this._index;return e?(t>0&&!e._closed&&t===e._segments.length-1&&t--,e.getCurves()[t]||null):null},getLocation:function(){var e=this.getCurve();return e?new De(e,this===e._segment1?0:1):null},getNext:function(){var e=this._path&&this._path._segments;return e&&(e[this._index+1]||this._path._closed&&e[0])||null},smooth:function(e,t,n){var r=e||{},a=r.type,l=r.factor,g=this.getPrevious(),d=this.getNext(),_=(g||this)._point,m=this._point,w=(d||this)._point,C=_.getDistance(m),x=m.getDistance(w);if(!a||a==="catmull-rom"){var y=l===o?.5:l,N=Math.pow(C,y),P=N*N,E=Math.pow(x,y),S=E*E;if(!t&&g){var I=2*S+3*E*N+P,v=3*E*(E+N);this.setHandleIn(v!==0?new F((S*_._x+I*m._x-P*w._x)/v-m._x,(S*_._y+I*m._y-P*w._y)/v-m._y):new F)}if(!n&&d){var I=2*P+3*N*E+S,v=3*N*(N+E);this.setHandleOut(v!==0?new F((P*w._x+I*m._x-S*_._x)/v-m._x,(P*w._y+I*m._y-S*_._y)/v-m._y):new F)}}else if(a==="geometric"){if(g&&d){var A=_.subtract(w),L=l===o?.4:l,z=L*C/(C+x);t||this.setHandleIn(A.multiply(z)),n||this.setHandleOut(A.multiply(z-L))}}else throw new Error("Smoothing method '"+a+"' not supported.")},getPrevious:function(){var e=this._path&&this._path._segments;return e&&(e[this._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var e=this._path;return e&&this._index===e._segments.length-1||!1},reverse:function(){var e=this._handleIn,t=this._handleOut,n=e.clone();e.set(t),t.set(n)},reversed:function(){return new ge(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new ge(this._point,this._handleIn,this._handleOut)},equals:function(e){return e===this||e&&this._class===e._class&&this._point.equals(e._point)&&this._handleIn.equals(e._handleIn)&&this._handleOut.equals(e._handleOut)||!1},toString:function(){var e=["point: "+this._point];return this._handleIn.isZero()||e.push("handleIn: "+this._handleIn),this._handleOut.isZero()||e.push("handleOut: "+this._handleOut),"{ "+e.join(", ")+" }"},transform:function(e){this._transformCoordinates(e,new Array(6),!0),this._changed()},interpolate:function(e,t,n){var r=1-n,a=n,l=e._point,g=t._point,d=e._handleIn,_=t._handleIn,m=t._handleOut,w=e._handleOut;this._point._set(r*l._x+a*g._x,r*l._y+a*g._y,!0),this._handleIn._set(r*d._x+a*_._x,r*d._y+a*_._y,!0),this._handleOut._set(r*w._x+a*m._x,r*w._y+a*m._y,!0),this._changed()},_transformCoordinates:function(e,t,n){var r=this._point,a=!n||!this._handleIn.isZero()?this._handleIn:null,l=!n||!this._handleOut.isZero()?this._handleOut:null,g=r._x,d=r._y,_=2;return t[0]=g,t[1]=d,a&&(t[_++]=a._x+g,t[_++]=a._y+d),l&&(t[_++]=l._x+g,t[_++]=l._y+d),e&&(e._transformCoordinates(t,t,_/2),g=t[0],d=t[1],n?(r._x=g,r._y=d,_=2,a&&(a._x=t[_++]-g,a._y=t[_++]-d),l&&(l._x=t[_++]-g,l._y=t[_++]-d)):(a||(t[_++]=g,t[_++]=d),l||(t[_++]=g,t[_++]=d))),t}}),We=F.extend({initialize:function(t,n,r){var a,l,g;if(!t)a=l=0;else if((a=t[0])!==o)l=t[1];else{var d=t;(a=d.x)===o&&(d=F.read(arguments),a=d.x),l=d.y,g=d.selected}this._x=a,this._y=l,this._owner=n,n[r]=this,g&&this.setSelected(!0)},_set:function(e,t){return this._x=e,this._y=t,this._owner._changed(this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner._changed(this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner._changed(this)},isZero:function(){var e=q.isZero;return e(this._x)&&e(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){var e=this._owner;return this===e._point?1:this===e._handleIn?2:this===e._handleOut?4:0}}),ve=f.extend({_class:"Curve",beans:!0,initialize:function(t,n,r,a,l,g,d,_){var m=arguments.length,w,C,x,y,N,P;m===3?(this._path=t,w=n,C=r):m?m===1?"segment1"in t?(w=new ge(t.segment1),C=new ge(t.segment2)):"point1"in t?(x=t.point1,N=t.handle1,P=t.handle2,y=t.point2):Array.isArray(t)&&(x=[t[0],t[1]],y=[t[6],t[7]],N=[t[2]-t[0],t[3]-t[1]],P=[t[4]-t[6],t[5]-t[7]]):m===2?(w=new ge(t),C=new ge(n)):m===4?(x=t,N=n,P=r,y=a):m===8&&(x=[t,n],y=[d,_],N=[r-t,a-n],P=[l-d,g-_]):(w=new ge,C=new ge),this._segment1=w||new ge(x,null,N),this._segment2=C||new ge(y,P,null)},_serialize:function(e,t){return f.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],e,!0,t)},_changed:function(){this._length=this._bounds=o},clone:function(){return new ve(this._segment1,this._segment2)},toString:function(){var e=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||e.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||e.push("handle2: "+this._segment2._handleIn),e.push("point2: "+this._segment2._point),"{ "+e.join(", ")+" }"},classify:function(){return ve.classify(this.getValues())},remove:function(){var e=!1;if(this._path){var t=this._segment2,n=t._handleOut;e=t.remove(),e&&this._segment1._handleOut.set(n)}return e},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(F.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(F.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(F.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(F.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var e=this._path;return e&&this._segment1._index===e._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(e){this.getPoint1().setSelected(e),this.getHandle1().setSelected(e),this.getHandle2().setSelected(e),this.getPoint2().setSelected(e)},getValues:function(e){return ve.getValues(this._segment1,this._segment2,e)},getPoints:function(){for(var e=this.getValues(),t=[],n=0;n<8;n+=2)t.push(new F(e[n],e[n+1]));return t}},{getLength:function(){return this._length==null&&(this._length=ve.getLength(this.getValues(),0,1)),this._length},getArea:function(){return ve.getArea(this.getValues())},getLine:function(){return new Me(this._segment1._point,this._segment2._point)},getPart:function(e,t){return new ve(ve.getPart(this.getValues(),e,t))},getPartLength:function(e,t){return ve.getLength(this.getValues(),e,t)},divideAt:function(e){return this.divideAtTime(e&&e.curve===this?e.time:this.getTimeAt(e))},divideAtTime:function(e,t){var n=1e-8,r=1-n,a=null;if(e>=n&&e<=r){var l=ve.subdivide(this.getValues(),e),g=l[0],d=l[1],_=t||this.hasHandles(),m=this._segment1,w=this._segment2,C=this._path;_&&(m._handleOut._set(g[2]-g[0],g[3]-g[1]),w._handleIn._set(d[4]-d[6],d[5]-d[7]));var x=g[6],y=g[7],N=new ge(new F(x,y),_&&new F(g[4]-x,g[5]-y),_&&new F(d[2]-x,d[3]-y));C?(C.insert(m._index+1,N),a=this.getNext()):(this._segment2=N,this._changed(),a=new ve(N,w))}return a},splitAt:function(e){var t=this._path;return t?t.splitAt(e):null},splitAtTime:function(e){return this.splitAt(this.getLocationAtTime(e))},divide:function(e,t){return this.divideAtTime(e===o?.5:t?e:this.getTimeAt(e))},split:function(e,t){return this.splitAtTime(e===o?.5:t?e:this.getTimeAt(e))},reversed:function(){return new ve(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(e,t,n,r){var a=e._point,l=e._handleOut,g=t._handleIn,d=t._point,_=a.x,m=a.y,w=d.x,C=d.y,x=r?[_,m,_,m,w,C,w,C]:[_,m,_+l._x,m+l._y,w+g._x,C+g._y,w,C];return n&&n._transformCoordinates(x,x,4),x},subdivide:function(e,t){var n=e[0],r=e[1],a=e[2],l=e[3],g=e[4],d=e[5],_=e[6],m=e[7];t===o&&(t=.5);var w=1-t,C=w*n+t*a,x=w*r+t*l,y=w*a+t*g,N=w*l+t*d,P=w*g+t*_,E=w*d+t*m,S=w*C+t*y,I=w*x+t*N,v=w*y+t*P,A=w*N+t*E,L=w*S+t*v,z=w*I+t*A;return[[n,r,C,x,S,I,L,z],[L,z,v,A,P,E,_,m]]},getMonoCurves:function(e,t){var n=[],r=t?0:1,a=e[r+0],l=e[r+2],g=e[r+4],d=e[r+6];if(a>=l==l>=g&&l>=g==g>=d||ve.isStraight(e))n.push(e);else{var _=3*(l-g)-a+d,m=2*(a+g)-4*l,w=l-a,C=1e-8,x=1-C,y=[],N=q.solveQuadratic(_,m,w,y,C,x);if(!N)n.push(e);else{y.sort();var P=y[0],E=ve.subdivide(e,P);n.push(E[0]),N>1&&(P=(y[1]-P)/(1-P),E=ve.subdivide(E[1],P),n.push(E[0])),n.push(E[1])}}return n},solveCubic:function(e,t,n,r,a,l){var g=e[t],d=e[t+2],_=e[t+4],m=e[t+6],w=0;if(!(g<n&&m<n&&d<n&&_<n||g>n&&m>n&&d>n&&_>n)){var C=3*(d-g),x=3*(_-d)-C,y=m-g-C-x;w=q.solveCubic(y,x,C,g-n,r,a,l)}return w},getTimeOf:function(e,t){var n=new F(e[0],e[1]),r=new F(e[6],e[7]),a=1e-12,l=1e-7,g=t.isClose(n,a)?0:t.isClose(r,a)?1:null;if(g===null)for(var d=[t.x,t.y],_=[],m=0;m<2;m++)for(var w=ve.solveCubic(e,m,d[m],_,0,1),C=0;C<w;C++){var x=_[C];if(t.isClose(ve.getPoint(e,x),l))return x}return t.isClose(n,l)?0:t.isClose(r,l)?1:null},getNearestTime:function(e,t){if(ve.isStraight(e)){var n=e[0],r=e[1],a=e[6],l=e[7],g=a-n,d=l-r,_=g*g+d*d;if(_===0)return 0;var m=((t.x-n)*g+(t.y-r)*d)/_;return m<1e-12?0:m>.999999999999?1:ve.getTimeOf(e,new F(n+m*g,r+m*d))}var w=100,C=1/0,x=0;function y(E){if(E>=0&&E<=1){var S=t.getDistance(ve.getPoint(e,E),!0);if(S<C)return C=S,x=E,!0}}for(var N=0;N<=w;N++)y(N/w);for(var P=1/(w*2);P>1e-8;)!y(x-P)&&!y(x+P)&&(P/=2);return x},getPart:function(e,t,n){var r=t>n;if(r){var a=t;t=n,n=a}return t>0&&(e=ve.subdivide(e,t)[1]),n<1&&(e=ve.subdivide(e,(n-t)/(1-t))[0]),r?[e[6],e[7],e[4],e[5],e[2],e[3],e[0],e[1]]:e},isFlatEnough:function(e,t){var n=e[0],r=e[1],a=e[2],l=e[3],g=e[4],d=e[5],_=e[6],m=e[7],w=3*a-2*n-_,C=3*l-2*r-m,x=3*g-2*_-n,y=3*d-2*m-r;return Math.max(w*w,x*x)+Math.max(C*C,y*y)<=16*t*t},getArea:function(e){var t=e[0],n=e[1],r=e[2],a=e[3],l=e[4],g=e[5],d=e[6],_=e[7];return 3*((_-n)*(r+l)-(d-t)*(a+g)+a*(t-l)-r*(n-g)+_*(l+t/3)-d*(g+n/3))/20},getBounds:function(e){for(var t=e.slice(0,2),n=t.slice(),r=[0,0],a=0;a<2;a++)ve._addBounds(e[a],e[a+2],e[a+4],e[a+6],a,0,t,n,r);return new ie(t[0],t[1],n[0]-t[0],n[1]-t[1])},_addBounds:function(e,t,n,r,a,l,g,d,_){function m(L,z){var M=L-z,D=L+z;M<g[a]&&(g[a]=M),D>d[a]&&(d[a]=D)}l/=2;var w=g[a]+l,C=d[a]-l;if(e<w||t<w||n<w||r<w||e>C||t>C||n>C||r>C)if(t<e!=t<r&&n<e!=n<r)m(e,0),m(r,0);else{var x=3*(t-n)-e+r,y=2*(e+n)-4*t,N=t-e,P=q.solveQuadratic(x,y,N,_),E=1e-8,S=1-E;m(r,0);for(var I=0;I<P;I++){var v=_[I],A=1-v;E<=v&&v<=S&&m(A*A*A*e+3*A*A*v*t+3*A*v*v*n+v*v*v*r,l)}}}}},f.each(["getBounds","getStrokeBounds","getHandleBounds"],function(e){this[e]=function(){this._bounds||(this._bounds={});var t=this._bounds[e];return t||(t=this._bounds[e]=Fe[e]([this._segment1,this._segment2],!1,this._path)),t.clone()}},{}),f.each({isStraight:function(e,t,n,r){if(t.isZero()&&n.isZero())return!0;var a=r.subtract(e);if(a.isZero())return!1;if(a.isCollinear(t)&&a.isCollinear(n)){var l=new Me(e,r),g=1e-7;if(l.getDistance(e.add(t))<g&&l.getDistance(r.add(n))<g){var d=a.dot(a),_=a.dot(t)/d,m=a.dot(n)/d;return _>=0&&_<=1&&m<=0&&m>=-1}}return!1},isLinear:function(e,t,n,r){var a=r.subtract(e).divide(3);return t.equals(a)&&n.negate().equals(a)}},function(e,t){this[t]=function(n){var r=this._segment1,a=this._segment2;return e(r._point,r._handleOut,a._handleIn,a._point,n)},this.statics[t]=function(n,r){var a=n[0],l=n[1],g=n[6],d=n[7];return e(new F(a,l),new F(n[2]-a,n[3]-l),new F(n[4]-g,n[5]-d),new F(g,d),r)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(e){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(e||0)},isCollinear:function(e){return e&&this.isStraight()&&e.isStraight()&&this.getLine().isCollinear(e.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(e,t){return this.getLocationAtTime(t?e:this.getTimeAt(e))},getLocationAtTime:function(e){return e!=null&&e>=0&&e<=1?new De(this,e):null},getTimeAt:function(e,t){return ve.getTimeAt(this.getValues(),e,t)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var e=F.read(arguments);return e.isZero()?[]:ve.getTimesWithTangent(this.getValues(),e)},getOffsetAtTime:function(e){return this.getPartLength(0,e)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(F.read(arguments)))},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getTimeOf:function(){return ve.getTimeOf(this.getValues(),F.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var e=F.read(arguments),t=this.getValues(),n=ve.getNearestTime(t,e),r=ve.getPoint(t,n);return new De(this,n,r,null,e.getDistance(r))},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()}},new function(){var e=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return f.each(e,function(t){this[t+"At"]=function(n,r){var a=this.getValues();return ve[t](a,r?n:ve.getTimeAt(a,n))},this[t+"AtTime"]=function(n){return ve[t](this.getValues(),n)}},{statics:{_evaluateMethods:e}})},new function(){function e(r){var a=r[0],l=r[1],g=r[2],d=r[3],_=r[4],m=r[5],w=r[6],C=r[7],x=9*(g-_)+3*(w-a),y=6*(a+_)-12*g,N=3*(g-a),P=9*(d-m)+3*(C-l),E=6*(l+m)-12*d,S=3*(d-l);return function(I){var v=(x*I+y)*I+N,A=(P*I+E)*I+S;return Math.sqrt(v*v+A*A)}}function t(r,a){return Math.max(2,Math.min(16,Math.ceil(Math.abs(a-r)*32)))}function n(r,a,l,g){if(a==null||a<0||a>1)return null;var d=r[0],_=r[1],m=r[2],w=r[3],C=r[4],x=r[5],y=r[6],N=r[7],P=q.isZero;P(m-d)&&P(w-_)&&(m=d,w=_),P(C-y)&&P(x-N)&&(C=y,x=N);var E=3*(m-d),S=3*(C-m)-E,I=y-d-E-S,v=3*(w-_),A=3*(x-w)-v,L=N-_-v-A,z,M;if(l===0)z=a===0?d:a===1?y:((I*a+S)*a+E)*a+d,M=a===0?_:a===1?N:((L*a+A)*a+v)*a+_;else{var D=1e-8,H=1-D;if(a<D?(z=E,M=v):a>H?(z=3*(y-C),M=3*(N-x)):(z=(3*I*a+2*S)*a+E,M=(3*L*a+2*A)*a+v),g){z===0&&M===0&&(a<D||a>H)&&(z=C-m,M=x-w);var W=Math.sqrt(z*z+M*M);W&&(z/=W,M/=W)}if(l===3){var C=6*I*a+2*S,x=6*L*a+2*A,X=Math.pow(z*z+M*M,3/2);z=X!==0?(z*x-M*C)/X:0,M=0}}return l===2?new F(M,-z):new F(z,M)}return{statics:{classify:function(r){var a=r[0],l=r[1],g=r[2],d=r[3],_=r[4],m=r[5],w=r[6],C=r[7],x=a*(C-m)+l*(_-w)+w*m-C*_,y=g*(l-C)+d*(w-a)+a*C-l*w,N=_*(d-l)+m*(a-g)+g*l-d*a,P=3*N,E=P-y,S=E-y+x,I=Math.sqrt(S*S+E*E+P*P),v=I!==0?1/I:0,A=q.isZero,L="serpentine";S*=v,E*=v,P*=v;function z(W,X,U){var K=X!==o,Q=K&&X>0&&X<1,J=K&&U>0&&U<1;return K&&(!(Q||J)||W==="loop"&&!(Q&&J))&&(W="arch",Q=J=!1),{type:W,roots:Q||J?Q&&J?X<U?[X,U]:[U,X]:[Q?X:U]:null}}if(A(S))return A(E)?z(A(P)?"line":"quadratic"):z(L,P/(3*E));var M=3*E*E-4*S*P;if(A(M))return z("cusp",E/(2*S));var D=M>0?Math.sqrt(M/3):Math.sqrt(-M),H=2*S;return z(M>0?L:"loop",(E+D)/H,(E-D)/H)},getLength:function(r,a,l,g){if(a===o&&(a=0),l===o&&(l=1),ve.isStraight(r)){var d=r;l<1&&(d=ve.subdivide(d,l)[0],a/=l),a>0&&(d=ve.subdivide(d,a)[1]);var _=d[6]-d[0],m=d[7]-d[1];return Math.sqrt(_*_+m*m)}return q.integrate(g||e(r),a,l,t(a,l))},getTimeAt:function(r,a,l){if(l===o&&(l=a<0?1:0),a===0)return l;var g=Math.abs,d=1e-12,_=a>0,m=_?l:0,w=_?1:l,C=e(r),x=ve.getLength(r,m,w,C),y=g(a)-x;if(g(y)<d)return _?w:m;if(y>d)return null;var N=a/x,P=0;function E(S){return P+=q.integrate(C,l,S,t(l,S)),l=S,P-a}return q.findRoot(E,C,l+N,m,w,32,1e-12)},getPoint:function(r,a){return n(r,a,0,!1)},getTangent:function(r,a){return n(r,a,1,!0)},getWeightedTangent:function(r,a){return n(r,a,1,!1)},getNormal:function(r,a){return n(r,a,2,!0)},getWeightedNormal:function(r,a){return n(r,a,2,!1)},getCurvature:function(r,a){return n(r,a,3,!1).x},getPeaks:function(r){var a=r[0],l=r[1],g=r[2],d=r[3],_=r[4],m=r[5],w=r[6],C=r[7],x=-a+3*g-3*_+w,y=3*a-6*g+3*_,N=-3*a+3*g,P=-l+3*d-3*m+C,E=3*l-6*d+3*m,S=-3*l+3*d,I=1e-8,v=1-I,A=[];return q.solveCubic(9*(x*x+P*P),9*(x*y+E*P),2*(y*y+E*E)+3*(N*x+S*P),N*y+E*S,A,I,v),A.sort()}}}},new function(){function e(y,N,P,E,S,I,v){var A=!v&&P.getPrevious()===S,L=!v&&P!==S&&P.getNext()===S,z=1e-8,M=1-z;if(E!==null&&E>=(A?z:0)&&E<=(L?M:1)&&I!==null&&I>=(L?z:0)&&I<=(A?M:1)){var D=new De(P,E,null,v),H=new De(S,I,null,v);D._intersection=H,H._intersection=D,(!N||N(D))&&De.insert(y,D,!0)}}function t(y,N,P,E,S,I,v,A,L,z,M,D,H){if(++L>=4096||++A>=40)return L;var W=1e-9,X=N[0],U=N[1],K=N[6],Q=N[7],J=Me.getSignedDistance,$=J(X,U,K,Q,N[2],N[3]),se=J(X,U,K,Q,N[4],N[5]),me=$*se>0?3/4:4/9,ye=me*Math.min(0,$,se),we=me*Math.max(0,$,se),Ee=J(X,U,K,Q,y[0],y[1]),fe=J(X,U,K,Q,y[2],y[3]),pe=J(X,U,K,Q,y[4],y[5]),ke=J(X,U,K,Q,y[6],y[7]),Te=n(Ee,fe,pe,ke),Ne=Te[0],Ue=Te[1],He,Qe;if($===0&&se===0&&Ee===0&&fe===0&&pe===0&&ke===0||(He=r(Ne,Ue,ye,we))==null||(Qe=r(Ne.reverse(),Ue.reverse(),ye,we))==null)return L;var Je=z+(M-z)*He,Ge=z+(M-z)*Qe;if(Math.max(H-D,Ge-Je)<W){var Mt=(Je+Ge)/2,Ie=(D+H)/2;e(S,I,v?E:P,v?Ie:Mt,v?P:E,v?Mt:Ie)}else{y=ve.getPart(y,He,Qe);var mt=H-D;if(Qe-He>.8)if(Ge-Je>mt){var wt=ve.subdivide(y,.5),Mt=(Je+Ge)/2;L=t(N,wt[0],E,P,S,I,!v,A,L,D,H,Je,Mt),L=t(N,wt[1],E,P,S,I,!v,A,L,D,H,Mt,Ge)}else{var wt=ve.subdivide(N,.5),Ie=(D+H)/2;L=t(wt[0],y,E,P,S,I,!v,A,L,D,Ie,Je,Ge),L=t(wt[1],y,E,P,S,I,!v,A,L,Ie,H,Je,Ge)}else mt===0||mt>=W?L=t(N,y,E,P,S,I,!v,A,L,D,H,Je,Ge):L=t(y,N,P,E,S,I,v,A,L,Je,Ge,D,H)}return L}function n(y,N,P,E){var S=[0,y],I=[1/3,N],v=[2/3,P],A=[1,E],L=N-(2*y+E)/3,z=P-(y+2*E)/3,M;if(L*z<0)M=[[S,I,A],[S,v,A]];else{var D=L/z;M=[D>=2?[S,I,A]:D<=.5?[S,v,A]:[S,I,v,A],[S,A]]}return(L||z)<0?M.reverse():M}function r(y,N,P,E){return y[0][1]<P?a(y,!0,P):N[0][1]>E?a(N,!1,E):y[0][0]}function a(y,N,P){for(var E=y[0][0],S=y[0][1],I=1,v=y.length;I<v;I++){var A=y[I][0],L=y[I][1];if(N?L>=P:L<=P)return L===P?A:E+(P-S)*(A-E)/(L-S);E=A,S=L}return null}function l(y,N,P,E,S){var I=q.isZero;if(I(E)&&I(S)){var v=ve.getTimeOf(y,new F(N,P));return v===null?[]:[v]}for(var A=Math.atan2(-S,E),L=Math.sin(A),z=Math.cos(A),M=[],D=[],H=0;H<8;H+=2){var W=y[H]-N,X=y[H+1]-P;M.push(W*z-X*L,W*L+X*z)}return ve.solveCubic(M,1,0,D,0,1),D}function g(y,N,P,E,S,I,v){for(var A=N[0],L=N[1],z=N[6],M=N[7],D=l(y,A,L,z-A,M-L),H=0,W=D.length;H<W;H++){var X=D[H],U=ve.getPoint(y,X),K=ve.getTimeOf(N,U);K!==null&&e(S,I,v?E:P,v?K:X,v?P:E,v?X:K)}}function d(y,N,P,E,S,I){var v=Me.intersect(y[0],y[1],y[6],y[7],N[0],N[1],N[6],N[7]);v&&e(S,I,P,ve.getTimeOf(y,v),E,ve.getTimeOf(N,v))}function _(y,N,P,E,S,I){var v=1e-12,A=Math.min,L=Math.max;if(L(y[0],y[2],y[4],y[6])+v>A(N[0],N[2],N[4],N[6])&&A(y[0],y[2],y[4],y[6])-v<L(N[0],N[2],N[4],N[6])&&L(y[1],y[3],y[5],y[7])+v>A(N[1],N[3],N[5],N[7])&&A(y[1],y[3],y[5],y[7])-v<L(N[1],N[3],N[5],N[7])){var z=C(y,N);if(z)for(var M=0;M<2;M++){var D=z[M];e(S,I,P,D[0],E,D[1],!0)}else{var H=ve.isStraight(y),W=ve.isStraight(N),X=H&&W,U=H&&!W,K=S.length;if((X?d:H||W?g:t)(U?N:y,U?y:N,U?E:P,U?P:E,S,I,U,0,0,0,1,0,1),!X||S.length===K)for(var M=0;M<4;M++){var Q=M>>1,J=M&1,$=Q*6,se=J*6,me=new F(y[$],y[$+1]),ye=new F(N[se],N[se+1]);me.isClose(ye,v)&&e(S,I,P,Q,E,J)}}}return S}function m(y,N,P,E){var S=ve.classify(y);if(S.type==="loop"){var I=S.roots;e(P,E,N,I[0],N,I[1])}return P}function w(y,N,P,E,S,I){var v=1e-7,A=!N;A&&(N=y);for(var L=y.length,z=N.length,M=new Array(L),D=A?M:new Array(z),H=[],W=0;W<L;W++)M[W]=y[W].getValues(E);if(!A)for(var W=0;W<z;W++)D[W]=N[W].getValues(S);for(var X=B.findCurveBoundsCollisions(M,D,v),U=0;U<L;U++){var K=y[U],Q=M[U];A&&m(Q,K,H,P);var J=X[U];if(J)for(var $=0;$<J.length;$++){if(I&&H.length)return H;var se=J[$];if(!A||se>U){var me=N[se],ye=D[se];_(Q,ye,K,me,H,P)}}}return H}function C(y,N){function P(ke){var Te=ke[6]-ke[0],Ne=ke[7]-ke[1];return Te*Te+Ne*Ne}var E=Math.abs,S=Me.getDistance,I=1e-8,v=1e-7,A=ve.isStraight(y),L=ve.isStraight(N),z=A&&L,M=P(y)<P(N),D=M?N:y,H=M?y:N,W=D[0],X=D[1],U=D[6]-W,K=D[7]-X;if(S(W,X,U,K,H[0],H[1],!0)<v&&S(W,X,U,K,H[6],H[7],!0)<v)!z&&S(W,X,U,K,D[2],D[3],!0)<v&&S(W,X,U,K,D[4],D[5],!0)<v&&S(W,X,U,K,H[2],H[3],!0)<v&&S(W,X,U,K,H[4],H[5],!0)<v&&(A=L=z=!0);else if(z)return null;if(A^L)return null;for(var Q=[y,N],J=[],$=0;$<4&&J.length<2;$++){var se=$&1,me=se^1,ye=$>>1,we=ve.getTimeOf(Q[se],new F(Q[me][ye?6:0],Q[me][ye?7:1]));if(we!=null){var Ee=se?[ye,we]:[we,ye];(!J.length||E(Ee[0]-J[0][0])>I&&E(Ee[1]-J[0][1])>I)&&J.push(Ee)}if($>2&&!J.length)break}if(J.length!==2)J=null;else if(!z){var fe=ve.getPart(y,J[0][0],J[1][0]),pe=ve.getPart(N,J[0][1],J[1][1]);(E(pe[2]-fe[2])>v||E(pe[3]-fe[3])>v||E(pe[4]-fe[4])>v||E(pe[5]-fe[5])>v)&&(J=null)}return J}function x(y,N){var P=y[0],E=y[1],S=y[2],I=y[3],v=y[4],A=y[5],L=y[6],z=y[7],M=N.normalize(),D=M.x,H=M.y,W=3*L-9*v+9*S-3*P,X=3*z-9*A+9*I-3*E,U=6*v-12*S+6*P,K=6*A-12*I+6*E,Q=3*S-3*P,J=3*I-3*E,$=2*W*H-2*X*D,se=[];if(Math.abs($)<q.CURVETIME_EPSILON){var me=W*J-X*Q,$=W*K-X*U;if($!=0){var ye=-me/$;ye>=0&&ye<=1&&se.push(ye)}}else{var we=(U*U-4*W*Q)*H*H+(-2*U*K+4*X*Q+4*W*J)*D*H+(K*K-4*X*J)*D*D,Ee=U*H-K*D;if(we>=0&&$!=0){var fe=Math.sqrt(we),pe=-(Ee+fe)/$,ke=(-Ee+fe)/$;pe>=0&&pe<=1&&se.push(pe),ke>=0&&ke<=1&&se.push(ke)}}return se}return{getIntersections:function(y){var N=this.getValues(),P=y&&y!==this&&y.getValues();return P?_(N,P,this,y,[]):m(N,this,[])},statics:{getOverlaps:C,getIntersections:w,getCurveLineIntersections:l,getTimesWithTangent:x}}}),De=f.extend({_class:"CurveLocation",initialize:function(t,n,r,a,l){if(n>=.99999999){var g=t.getNext();g&&(n=0,t=g)}this._setCurve(t),this._time=n,this._point=r||t.getPointAtTime(n),this._overlap=a,this._distance=l,this._intersection=this._next=this._previous=null},_setPath:function(e){this._path=e,this._version=e?e._version:0},_setCurve:function(e){this._setPath(e._path),this._curve=e,this._segment=null,this._segment1=e._segment1,this._segment2=e._segment2},_setSegment:function(e){var t=e.getCurve();t?this._setCurve(t):(this._setPath(e._path),this._segment1=e,this._segment2=null),this._segment=e,this._time=e===this._segment1?0:1,this._point=e._point.clone()},getSegment:function(){var e=this._segment;if(!e){var t=this.getCurve(),n=this.getTime();n===0?e=t._segment1:n===1?e=t._segment2:n!=null&&(e=t.getPartLength(0,n)<t.getPartLength(n,1)?t._segment1:t._segment2),this._segment=e}return e},getCurve:function(){var e=this._path,t=this;e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function n(r){var a=r&&r.getCurve();if(a&&(t._time=a.getTimeOf(t._point))!=null)return t._setCurve(a),a}return this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var e=this.getCurve();return e&&e._path},getIndex:function(){var e=this.getCurve();return e&&e.getIndex()},getTime:function(){var e=this.getCurve(),t=this._time;return e&&t==null?this._time=e.getTimeOf(this._point):t},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var e=this._offset;if(e==null){e=0;var t=this.getPath(),n=this.getIndex();if(t&&n!=null)for(var r=t.getCurves(),a=0;a<n;a++)e+=r[a].getLength();this._offset=e+=this.getCurveOffset()}return e},getCurveOffset:function(){var e=this._curveOffset;if(e==null){var t=this.getCurve(),n=this.getTime();this._curveOffset=e=n!=null&&t&&t.getPartLength(0,n)}return e},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var e=this.getCurve(),t=e&&e.divideAtTime(this.getTime());return t&&this._setSegment(t._segment1),t},split:function(){var e=this.getCurve(),t=e._path,n=e&&e.splitAtTime(this.getTime());return n&&this._setSegment(t.getLastSegment()),n},equals:function(e,t){var n=this===e;if(!n&&e instanceof De){var r=this.getCurve(),a=e.getCurve(),l=r._path,g=a._path;if(l===g){var d=Math.abs,_=1e-7,m=d(this.getOffset()-e.getOffset()),w=!t&&this._intersection,C=!t&&e._intersection;n=(m<_||l&&d(l.getLength()-m)<_)&&(!w&&!C||w&&C&&w.equals(C,!0))}}return n},toString:function(){var e=[],t=this.getPoint(),n=Z.instance;t&&e.push("point: "+t);var r=this.getIndex();r!=null&&e.push("index: "+r);var a=this.getTime();return a!=null&&e.push("time: "+n.number(a)),this._distance!=null&&e.push("distance: "+n.number(this._distance)),"{ "+e.join(", ")+" }"},isTouching:function(){var e=this._intersection;if(e&&this.getTangent().isCollinear(e.getTangent())){var t=this.getCurve(),n=e.getCurve();return!(t.isStraight()&&n.isStraight()&&t.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var e=this._intersection;if(!e)return!1;var t=this.getTime(),n=e.getTime(),r=1e-8,a=1-r,l=t>=r&&t<=a,g=n>=r&&n<=a;if(l&&g)return!this.isTouching();var d=this.getCurve(),_=d&&t<r?d.getPrevious():d,m=e.getCurve(),w=m&&n<r?m.getPrevious():m;if(t>a&&(d=d.getNext()),n>a&&(m=m.getNext()),!_||!d||!w||!m)return!1;var C=[];function x(D,H){var W=D.getValues(),X=ve.classify(W).roots||ve.getPeaks(W),U=X.length,K=ve.getLength(W,H&&U?X[U-1]:0,!H&&U?X[0]:1);C.push(U?K:K/32)}function y(D,H,W){return H<W?D>H&&D<W:D>H||D<W}l||(x(_,!0),x(d,!1)),g||(x(w,!0),x(m,!1));var N=this.getPoint(),P=Math.min.apply(Math,C),E=l?d.getTangentAtTime(t):d.getPointAt(P).subtract(N),S=l?E.negate():_.getPointAt(-P).subtract(N),I=g?m.getTangentAtTime(n):m.getPointAt(P).subtract(N),v=g?I.negate():w.getPointAt(-P).subtract(N),A=S.getAngle(),L=E.getAngle(),z=v.getAngle(),M=I.getAngle();return!!(l?y(A,z,M)^y(L,z,M)&&y(A,M,z)^y(L,M,z):y(z,A,L)^y(M,A,L)&&y(z,L,A)^y(M,L,A))},hasOverlap:function(){return!!this._overlap}},f.each(ve._evaluateMethods,function(e){var t=e+"At";this[e]=function(){var n=this.getCurve(),r=this.getTime();return r!=null&&n&&n[t](r,!0)}},{preserve:!0}),new function(){function e(t,n,r){var a=t.length,l=0,g=a-1;function d(N,P){for(var E=N+P;E>=-1&&E<=a;E+=P){var S=t[(E%a+a)%a];if(!n.getPoint().isClose(S.getPoint(),1e-7))break;if(n.equals(S))return S}return null}for(;l<=g;){var _=l+g>>>1,m=t[_],w;if(r&&(w=n.equals(m)?m:d(_,-1)||d(_,1)))return n._overlap&&(w._overlap=w._intersection._overlap=!0),w;var C=n.getPath(),x=m.getPath(),y=C!==x?C._id-x._id:n.getIndex()+n.getTime()-(m.getIndex()+m.getTime());y<0?g=_-1:l=_+1}return t.splice(l,0,n),n}return{statics:{insert:e,expand:function(t){for(var n=t.slice(),r=t.length-1;r>=0;r--)e(n,t[r]._intersection,!1);return n}}}}),Tt=T.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(e){var t,n,r;if(f.isPlainObject(e)?(n=e.segments,t=e.pathData):Array.isArray(e)?n=e:typeof e=="string"&&(t=e),n){var a=n[0];r=a&&Array.isArray(a[0])}else t&&(r=(t.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(t));var l=r?lt:Fe;return new l(e)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(e){this.isClockwise()!=(e=!!e)&&this.reverse()},setPathData:function(e){var t=e&&e.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),n,r=!1,a,l,g=new F,d=new F;function _(v,A){var L=+n[v];return r&&(L+=g[A]),L}function m(v){return new F(_(v,"x"),_(v+1,"y"))}this.clear();for(var w=0,C=t&&t.length;w<C;w++){var x=t[w],y=x[0],N=y.toLowerCase();n=x.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var P=n&&n.length;switch(r=y===N,a==="z"&&!/[mz]/.test(N)&&this.moveTo(g),N){case"m":case"l":for(var E=N==="m",S=0;S<P;S+=2)this[E?"moveTo":"lineTo"](g=m(S)),E&&(d=g,E=!1);l=g;break;case"h":case"v":var I=N==="h"?"x":"y";g=g.clone();for(var S=0;S<P;S++)g[I]=_(S,I),this.lineTo(g);l=g;break;case"c":for(var S=0;S<P;S+=6)this.cubicCurveTo(m(S),l=m(S+2),g=m(S+4));break;case"s":for(var S=0;S<P;S+=4)this.cubicCurveTo(/[cs]/.test(a)?g.multiply(2).subtract(l):g,l=m(S),g=m(S+2)),a=N;break;case"q":for(var S=0;S<P;S+=4)this.quadraticCurveTo(l=m(S),g=m(S+2));break;case"t":for(var S=0;S<P;S+=2)this.quadraticCurveTo(l=/[qt]/.test(a)?g.multiply(2).subtract(l):g,g=m(S)),a=N;break;case"a":for(var S=0;S<P;S+=7)this.arcTo(g=m(S+5),new te(+n[S],+n[S+1]),+n[S+2],+n[S+4],+n[S+3]);break;case"z":this.closePath(1e-12),g=d;break}a=N}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(e){var t=e.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(e):{};return t.onPath||!!(this.getFillRule()==="evenodd"?t.windingL&1||t.windingR&1:t.winding)},getIntersections:function(e,t,n,r){var a=this===e||!e,l=this._matrix._orNullIfIdentity(),g=a?l:(n||e._matrix)._orNullIfIdentity();return a||this.getBounds(l).intersects(e.getBounds(g),1e-12)?ve.getIntersections(this.getCurves(),!a&&e.getCurves(),t,l,g,r):[]},getCrossings:function(e){return this.getIntersections(e,function(t){return t.isCrossing()})},getNearestLocation:function(){for(var e=F.read(arguments),t=this.getCurves(),n=1/0,r=null,a=0,l=t.length;a<l;a++){var g=t[a].getNearestLocation(e);g._distance<n&&(n=g._distance,r=g)}return r},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()},interpolate:function(e,t,n){var r=!this._children,a=r?"_segments":"_children",l=e[a],g=t[a],d=this[a];if(!l||!g||l.length!==g.length)throw new Error("Invalid operands in interpolate() call: "+e+", "+t);var _=d.length,m=g.length;if(_<m)for(var w=r?ge:Fe,C=_;C<m;C++)this.add(new w);else _>m&&this[r?"removeSegments":"removeChildren"](m,_);for(var C=0;C<m;C++)d[C].interpolate(l[C],g[C],n);r&&(this.setClosed(e._closed),this._changed(9))},compare:function(e){var t=!1;if(e){var n=this._children||[this],r=e._children?e._children.slice():[e],a=n.length,l=r.length,g=[],d=0;t=!0;for(var _=B.findItemBoundsCollisions(n,r,q.GEOMETRIC_EPSILON),m=a-1;m>=0&&t;m--){var w=n[m];t=!1;var C=_[m];if(C)for(var x=C.length-1;x>=0&&!t;x--)w.compare(r[C[x]])&&(g[C[x]]||(g[C[x]]=!0,d++),t=!0)}t=t&&d===l}return t}}),Fe=Tt.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var n=arguments,r=Array.isArray(t)?typeof t[0]=="object"?t:n:t&&t.size===o&&(t.x!==o||t.point!==o)?n:null;r&&r.length>0?this.setSegments(r):(this._curves=o,this._segmentSelection=0,!r&&typeof t=="string"&&(this.setPathData(t),t=null)),this._initialize(!r&&t)},_equals:function(e){return this._closed===e._closed&&f.equals(this._segments,e._segments)},copyContent:function(e){this.setSegments(e._segments),this._closed=e._closed},_changed:function e(t){if(e.base.call(this,t),t&8){if(this._length=this._area=o,t&32)this._version++;else if(this._curves)for(var n=0,r=this._curves.length;n<r;n++)this._curves[n]._changed()}else t&64&&(this._bounds=o)},getStyle:function(){var e=this._parent;return(e instanceof lt?e:this)._style},getSegments:function(){return this._segments},setSegments:function(e){var t=this.isFullySelected(),n=e&&e.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=o,n){var r=e[n-1];typeof r=="boolean"&&(this.setClosed(r),n--),this._add(ge.readList(e,0,{},n))}t&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var e=this._curves,t=this._segments;if(!e){var n=this._countCurves();e=this._curves=new Array(n);for(var r=0;r<n;r++)e[r]=new ve(this,t[r],t[r+1]||t[0])}return e},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var e=this.getCurves();return e[e.length-1]},isClosed:function(){return this._closed},setClosed:function(e){if(this._closed!=(e=!!e)){if(this._closed=e,this._curves){var t=this._curves.length=this._countCurves();e&&(this._curves[t-1]=new ve(this,this._segments[t-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(e,t){var n=this._segments,r=n.length,a=new Z(t),l=new Array(6),g=!0,d,_,m,w,C,x,y,N,P=[];function E(I,v){if(I._transformCoordinates(e,l),d=l[0],_=l[1],g)P.push("M"+a.pair(d,_)),g=!1;else if(C=l[2],x=l[3],C===d&&x===_&&y===m&&N===w){if(!v){var A=d-m,L=_-w;P.push(A===0?"v"+a.number(L):L===0?"h"+a.number(A):"l"+a.pair(A,L))}}else P.push("c"+a.pair(y-m,N-w)+" "+a.pair(C-m,x-w)+" "+a.pair(d-m,_-w));m=d,w=_,y=l[4],N=l[5]}if(!r)return"";for(var S=0;S<r;S++)E(n[S]);return this._closed&&r>0&&(E(n[0],!0),P.push("z")),P.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(e){for(var t=this._segments,n=new Array(6),r=0,a=t.length;r<a;r++)t[r]._transformCoordinates(e,n,!0);return!0},_add:function(e,g){for(var n=this._segments,r=this._curves,a=e.length,l=g==null,g=l?n.length:g,d=0;d<a;d++){var _=e[d];_._path&&(_=e[d]=_.clone()),_._path=this,_._index=g+d,_._selection&&this._updateSelection(_,0,_._selection)}if(l)f.push(n,e);else{n.splice.apply(n,[g,0].concat(e));for(var d=g+a,m=n.length;d<m;d++)n[d]._index=d}if(r){var w=this._countCurves(),C=g>0&&g+a-1===w?g-1:g,x=C,y=Math.min(C+a,w);e._curves&&(r.splice.apply(r,[C,0].concat(e._curves)),x+=e._curves.length);for(var d=x;d<y;d++)r.splice(d,0,new ve(this,null,null));this._adjustCurves(C,y)}return this._changed(41),e},_adjustCurves:function(e,t){for(var n=this._segments,r=this._curves,a,l=e;l<t;l++)a=r[l],a._path=this,a._segment1=n[l],a._segment2=n[l+1]||n[0],a._changed();(a=r[this._closed&&!e?n.length-1:e-1])&&(a._segment2=n[e]||n[0],a._changed()),(a=r[t])&&(a._segment1=n[t],a._changed())},_countCurves:function(){var e=this._segments.length;return!this._closed&&e>0?e-1:e},add:function(e){var t=arguments;return t.length>1&&typeof e!="number"?this._add(ge.readList(t)):this._add([ge.read(t)])[0]},insert:function(e,t){var n=arguments;return n.length>2&&typeof t!="number"?this._add(ge.readList(n,1),e):this._add([ge.read(n,1)],e)[0]},addSegment:function(){return this._add([ge.read(arguments)])[0]},insertSegment:function(e){return this._add([ge.read(arguments,1)],e)[0]},addSegments:function(e){return this._add(ge.readList(e))},insertSegments:function(e,t){return this._add(ge.readList(t),e)},removeSegment:function(e){return this.removeSegments(e,e+1)[0]||null},removeSegments:function(e,t,n){e=e||0,t=f.pick(t,this._segments.length);var r=this._segments,a=this._curves,l=r.length,g=r.splice(e,t-e),d=g.length;if(!d)return g;for(var _=0;_<d;_++){var m=g[_];m._selection&&this._updateSelection(m,m._selection,0),m._index=m._path=null}for(var _=e,w=r.length;_<w;_++)r[_]._index=_;if(a){for(var C=e>0&&t===l+(this._closed?1:0)?e-1:e,a=a.splice(C,d),_=a.length-1;_>=0;_--)a[_]._path=null;n&&(g._curves=a.slice(1)),this._adjustCurves(C,C)}return this._changed(41),g},clear:"#removeSegments",hasHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)if(e[t].hasHandles())return!0;return!1},clearHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)e[t].clearHandles()},getLength:function(){if(this._length==null){for(var e=this.getCurves(),t=0,n=0,r=e.length;n<r;n++)t+=e[n].getLength();this._length=t}return this._length},getArea:function(){var e=this._area;if(e==null){var t=this._segments,n=this._closed;e=0;for(var r=0,a=t.length;r<a;r++){var l=r+1===a;e+=ve.getArea(ve.getValues(t[r],t[l?0:r+1],null,l&&!n))}this._area=e}return e},isFullySelected:function(){var e=this._segments.length;return this.isSelected()&&e>0&&this._segmentSelection===e*7},setFullySelected:function(e){e&&this._selectSegments(!0),this.setSelected(e)},setSelection:function e(t){t&1||this._selectSegments(!1),e.base.call(this,t)},_selectSegments:function(e){var t=this._segments,n=t.length,r=e?7:0;this._segmentSelection=r*n;for(var a=0;a<n;a++)t[a]._selection=r},_updateSelection:function(e,t,n){e._selection=n;var r=this._segmentSelection+=n-t;r>0&&this.setSelected(!0)},divideAt:function(e){var t=this.getLocationAt(e),n;return t&&(n=t.getCurve().divideAt(t.getCurveOffset()))?n._segment1:null},splitAt:function(e){var t=this.getLocationAt(e),n=t&&t.index,r=t&&t.time,a=1e-8,l=1-a;r>l&&(n++,r=0);var g=this.getCurves();if(n>=0&&n<g.length){r>=a&&g[n++].divideAtTime(r);var d=this.removeSegments(n,this._segments.length,!0),_;return this._closed?(this.setClosed(!1),_=this):(_=new Fe(T.NO_INSERT),_.insertAbove(this),_.copyAttributes(this)),_._add(d,0),this.addSegment(d[0]),_}return null},split:function(e,t){var n,r=t===o?e:(n=this.getCurves()[e])&&n.getLocationAtTime(t);return r!=null?this.splitAt(r):null},join:function(e,t){var n=t||0;if(e&&e!==this){var r=e._segments,a=this.getLastSegment(),l=e.getLastSegment();if(!l)return this;a&&a._point.isClose(l._point,n)&&e.reverse();var g=e.getFirstSegment();if(a&&a._point.isClose(g._point,n))a.setHandleOut(g._handleOut),this._add(r.slice(1));else{var d=this.getFirstSegment();d&&d._point.isClose(g._point,n)&&e.reverse(),l=e.getLastSegment(),d&&d._point.isClose(l._point,n)?(d.setHandleIn(l._handleIn),this._add(r.slice(0,r.length-1),0)):this._add(r.slice())}e._closed&&this._add([r[0]]),e.remove()}var _=this.getFirstSegment(),m=this.getLastSegment();return _!==m&&_._point.isClose(m._point,n)&&(_.setHandleIn(m._handleIn),m.remove(),this.setClosed(!0)),this},reduce:function(e){for(var t=this.getCurves(),n=e&&e.simplify,r=n?1e-7:0,a=t.length-1;a>=0;a--){var l=t[a];!l.hasHandles()&&(!l.hasLength(r)||n&&l.isCollinear(l.getNext()))&&l.remove()}return this},reverse:function(){this._segments.reverse();for(var e=0,t=this._segments.length;e<t;e++){var n=this._segments[e],r=n._handleIn;n._handleIn=n._handleOut,n._handleOut=r,n._index=e}this._curves=null,this._changed(9)},flatten:function(e){for(var t=new Xt(this,e||.25,256,!0),n=t.parts,r=n.length,a=[],l=0;l<r;l++)a.push(new ge(n[l].curve.slice(0,2)));!this._closed&&r>0&&a.push(new ge(n[r-1].curve.slice(6))),this.setSegments(a)},simplify:function(e){var t=new ii(this).fit(e||2.5);return t&&this.setSegments(t),!!t},smooth:function(e){var t=this,n=e||{},r=n.type||"asymmetric",a=this._segments,l=a.length,g=this._closed;function d(Ne,Ue){var He=Ne&&Ne.index;if(He!=null){var Qe=Ne.path;if(Qe&&Qe!==t)throw new Error(Ne._class+" "+He+" of "+Qe+" is not part of "+t);Ue&&Ne instanceof ve&&He++}else He=typeof Ne=="number"?Ne:Ue;return Math.min(He<0&&g?He%l:He<0?He+l:He,l-1)}var _=g&&n.from===o&&n.to===o,m=d(n.from,0),w=d(n.to,l-1);if(m>w)if(g)m-=l;else{var C=m;m=w,w=C}if(/^(?:asymmetric|continuous)$/.test(r)){var x=r==="asymmetric",y=Math.min,N=w-m+1,P=N-1,E=_?y(N,4):1,S=E,I=E,v=[];if(g||(S=y(1,m),I=y(1,l-w-1)),P+=S+I,P<=1)return;for(var A=0,L=m-S;A<=P;A++,L++)v[A]=a[(L<0?L+l:L)%l]._point;for(var z=v[0]._x+2*v[1]._x,M=v[0]._y+2*v[1]._y,D=2,H=P-1,W=[z],X=[M],U=[D],K=[],Q=[],A=1;A<P;A++){var J=A<H,$=J||x?1:2,se=J?4:x?2:7,me=J?4:x?3:8,ye=J?2:x?0:1,we=$/D;D=U[A]=se-we,z=W[A]=me*v[A]._x+ye*v[A+1]._x-we*z,M=X[A]=me*v[A]._y+ye*v[A+1]._y-we*M}K[H]=W[H]/U[H],Q[H]=X[H]/U[H];for(var A=P-2;A>=0;A--)K[A]=(W[A]-K[A+1])/U[A],Q[A]=(X[A]-Q[A+1])/U[A];K[P]=(3*v[P]._x-K[H])/2,Q[P]=(3*v[P]._y-Q[H])/2;for(var A=S,Ee=P-I,L=m;A<=Ee;A++,L++){var fe=a[L<0?L+l:L],pe=fe._point,ke=K[A]-pe._x,Te=Q[A]-pe._y;(_||A<Ee)&&fe.setHandleOut(ke,Te),(_||A>S)&&fe.setHandleIn(-ke,-Te)}}else for(var A=m;A<=w;A++)a[A<0?A+l:A].smooth(n,!_&&A===m,!_&&A===w)},toShape:function(e){if(!this._closed)return null;var t=this._segments,n,r,a,l;function g(x,y){var N=t[x],P=N.getNext(),E=t[y],S=E.getNext();return N._handleOut.isZero()&&P._handleIn.isZero()&&E._handleOut.isZero()&&S._handleIn.isZero()&&P._point.subtract(N._point).isCollinear(S._point.subtract(E._point))}function d(x){var y=t[x],N=y.getPrevious(),P=y.getNext();return N._handleOut.isZero()&&y._handleIn.isZero()&&y._handleOut.isZero()&&P._handleIn.isZero()&&y._point.subtract(N._point).isOrthogonal(P._point.subtract(y._point))}function _(x){var y=t[x],N=y.getNext(),P=y._handleOut,E=N._handleIn,S=.5522847498307936;if(P.isOrthogonal(E)){var I=y._point,v=N._point,A=new Me(I,P,!0).intersect(new Me(v,E,!0),!0);return A&&q.isZero(P.getLength()/A.subtract(I).getLength()-S)&&q.isZero(E.getLength()/A.subtract(v).getLength()-S)}return!1}function m(x,y){return t[x]._point.getDistance(t[y]._point)}if(!this.hasHandles()&&t.length===4&&g(0,2)&&g(1,3)&&d(1)?(n=Xe.Rectangle,r=new te(m(0,3),m(0,1)),l=t[1]._point.add(t[2]._point).divide(2)):t.length===8&&_(0)&&_(2)&&_(4)&&_(6)&&g(1,5)&&g(3,7)?(n=Xe.Rectangle,r=new te(m(1,6),m(0,3)),a=r.subtract(new te(m(0,7),m(1,2))).divide(2),l=t[3]._point.add(t[4]._point).divide(2)):t.length===4&&_(0)&&_(1)&&_(2)&&_(3)&&(q.isZero(m(0,2)-m(1,3))?(n=Xe.Circle,a=m(0,2)/2):(n=Xe.Ellipse,a=new te(m(2,0)/2,m(3,1)/2)),l=t[1]._point),n){var w=this.getPosition(!0),C=new n({center:w,size:r,radius:a,insert:!1});return C.copyAttributes(this,!0),C._matrix.prepend(this._matrix),C.rotate(l.subtract(w).getAngle()+90),(e===o||e)&&C.insertAbove(this),C}return null},toPath:"#clone",compare:function e(t){if(!t||t instanceof lt)return e.base.call(this,t);var n=this.getCurves(),r=t.getCurves(),a=n.length,l=r.length;if(!a||!l)return a==l;for(var g=n[0].getValues(),d=[],_=0,m,w=0,C,x=0;x<l;x++){var E=r[x].getValues();d.push(E);var y=ve.getOverlaps(g,E);if(y){m=!x&&y[0][0]>0?l-1:x,C=y[0][1];break}}for(var N=Math.abs,P=1e-8,E=d[m],S;g&&E;){var y=ve.getOverlaps(g,E);if(y){var I=y[0][0];if(N(I-w)<P){w=y[1][0],w===1&&(g=++_<a?n[_].getValues():null,w=0);var v=y[0][1];if(N(v-C)<P){if(S||(S=[m,v]),C=y[1][1],C===1&&(++m>=l&&(m=0),E=d[m]||r[m].getValues(),C=0),!g)return S[0]===m&&S[1]===C;continue}}}break}return!1},_hitTestSelf:function(e,t,n,r){var a=this,l=this.getStyle(),g=this._segments,d=g.length,_=this._closed,m=t._tolerancePadding,w=m,C,x,y,N,P,E,S=t.stroke&&l.hasStroke(),I=t.fill&&l.hasFill(),v=t.curves,A=S?l.getStrokeWidth()/2:I&&t.tolerance>0||v?0:null;A!==null&&(A>0?(C=l.getStrokeJoin(),x=l.getStrokeCap(),y=l.getMiterLimit(),w=w.add(Fe._getStrokePadding(A,r))):C=x="round");function L(K,Q){return e.subtract(K).divide(Q).length<=1}function z(K,Q,J){if(!t.selected||Q.isSelected()){var $=K._point;if(Q!==$&&(Q=Q.add($)),L(Q,w))return new Se(J,a,{segment:K,point:Q})}}function M(K,Q){return(Q||t.segments)&&z(K,K._point,"segment")||!Q&&t.handles&&(z(K,K._handleIn,"handle-in")||z(K,K._handleOut,"handle-out"))}function D(K){N.add(K)}function H(K){var Q=_||K._index>0&&K._index<d-1;if((Q?C:x)==="round")return L(K._point,w);if(N=new Fe({internal:!0,closed:!0}),Q?K.isSmooth()||Fe._addBevelJoin(K,C,A,y,null,r,D,!0):x==="square"&&Fe._addSquareCap(K,x,A,null,r,D,!0),!N.isEmpty()){var J;return N.contains(e)||(J=N.getNearestLocation(e))&&L(J.getPoint(),m)}}if(t.ends&&!t.segments&&!_){if(E=M(g[0],!0)||M(g[d-1],!0))return E}else if(t.segments||t.handles){for(var W=0;W<d;W++)if(E=M(g[W]))return E}if(A!==null){if(P=this.getNearestLocation(e),P){var X=P.getTime();X===0||X===1&&d>1?H(P.getSegment())||(P=null):L(P.getPoint(),w)||(P=null)}if(!P&&C==="miter"&&d>1)for(var W=0;W<d;W++){var U=g[W];if(e.getDistance(U._point)<=y*A&&H(U)){P=U.getLocation();break}}}return!P&&I&&this._contains(e)||P&&!S&&!v?new Se("fill",this):P?new Se(S?"stroke":"curve",this,{location:P,point:P.getPoint()}):null}},f.each(ve._evaluateMethods,function(e){this[e+"At"]=function(t){var n=this.getLocationAt(t);return n&&n[e]()}},{beans:!1,getLocationOf:function(){for(var e=F.read(arguments),t=this.getCurves(),n=0,r=t.length;n<r;n++){var a=t[n].getLocationOf(e);if(a)return a}return null},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getLocationAt:function(e){if(typeof e=="number"){for(var t=this.getCurves(),n=0,r=0,a=t.length;r<a;r++){var l=n,g=t[r];if(n+=g.getLength(),n>e)return g.getLocationAt(e-l)}if(t.length>0&&e<=this.getLength())return new De(t[t.length-1],1)}else if(e&&e.getPath&&e.getPath()===this)return e;return null},getOffsetsWithTangent:function(){var e=F.read(arguments);if(e.isZero())return[];for(var t=[],n=0,r=this.getCurves(),a=0,l=r.length;a<l;a++){for(var g=r[a],d=g.getTimesWithTangent(e),_=0,m=d.length;_<m;_++){var w=n+g.getOffsetAtTime(d[_]);t.indexOf(w)<0&&t.push(w)}n+=g.length}return t}}),new function(){function e(n,r,a,l){if(l<=0)return;var g=l/2,d=l-2,_=g-1,m=new Array(6),w,C;function x(I){var v=m[I],A=m[I+1];(w!=v||C!=A)&&(n.beginPath(),n.moveTo(w,C),n.lineTo(v,A),n.stroke(),n.beginPath(),n.arc(v,A,g,0,Math.PI*2,!0),n.fill())}for(var y=0,N=r.length;y<N;y++){var P=r[y],E=P._selection;if(P._transformCoordinates(a,m),w=m[0],C=m[1],E&2&&x(2),E&4&&x(4),n.fillRect(w-g,C-g,l,l),d>0&&!(E&1)){var S=n.fillStyle;n.fillStyle="#ffffff",n.fillRect(w-_,C-_,d,d),n.fillStyle=S}}}function t(n,r,a){var l=r._segments,g=l.length,d=new Array(6),_=!0,m,w,C,x,y,N,P,E;function S(v){if(a)v._transformCoordinates(a,d),m=d[0],w=d[1];else{var A=v._point;m=A._x,w=A._y}if(_)n.moveTo(m,w),_=!1;else{if(a)y=d[2],N=d[3];else{var L=v._handleIn;y=m+L._x,N=w+L._y}y===m&&N===w&&P===C&&E===x?n.lineTo(m,w):n.bezierCurveTo(P,E,y,N,m,w)}if(C=m,x=w,a)P=d[4],E=d[5];else{var L=v._handleOut;P=C+L._x,E=x+L._y}}for(var I=0;I<g;I++)S(l[I]);r._closed&&g>0&&S(l[0])}return{_draw:function(n,r,a,l){var g=r.dontStart,d=r.dontFinish||r.clip,_=this.getStyle(),m=_.hasFill(),w=_.hasStroke(),C=_.getDashArray(),x=!it.support.nativeDash&&w&&C&&C.length;g||n.beginPath(),(m||w&&!x||d)&&(t(n,this,l),this._closed&&n.closePath());function y(v){return C[(v%x+x)%x]}if(!d&&(m||w)&&(this._setStyles(n,r,a),m&&(n.fill(_.getFillRule()),n.shadowColor="rgba(0,0,0,0)"),w)){if(x){g||n.beginPath();for(var N=new Xt(this,.25,32,!1,l),P=N.length,E=-_.getDashOffset(),S,I=0;E>0;)E-=y(I--)+y(I--);for(;E<P;)S=E+y(I++),(E>0||S>0)&&N.drawPart(n,Math.max(E,0),Math.max(S,0)),E=S+y(I++)}n.stroke()}},_drawSelected:function(n,r){n.beginPath(),t(n,this,r),n.stroke(),e(n,this._segments,r,it.settings.handleSize)}}},new function(){function e(t){var n=t._segments;if(!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return{moveTo:function(){var t=this._segments;t.length===1&&this.removeSegment(0),t.length||this._add([new ge(F.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new ge(F.read(arguments))])},cubicCurveTo:function(){var t=arguments,n=F.read(t),r=F.read(t),a=F.read(t),l=e(this);l.setHandleOut(n.subtract(l._point)),this._add([new ge(a,r.subtract(a))])},quadraticCurveTo:function(){var t=arguments,n=F.read(t),r=F.read(t),a=e(this)._point;this.cubicCurveTo(n.add(a.subtract(n).multiply(1/3)),n.add(r.subtract(n).multiply(1/3)),r)},curveTo:function(){var t=arguments,n=F.read(t),r=F.read(t),a=f.pick(f.read(t),.5),l=1-a,g=e(this)._point,d=n.subtract(g.multiply(l*l)).subtract(r.multiply(a*a)).divide(2*a*l);if(d.isNaN())throw new Error("Cannot put a curve through points with parameter = "+a);this.quadraticCurveTo(d,r)},arcTo:function(){var t=arguments,n=Math.abs,r=Math.sqrt,a=e(this),l=a._point,g=F.read(t),d,_=f.peek(t),m=f.pick(_,!0),w,C,x,y;if(typeof m=="boolean")var N=l.add(g).divide(2),d=N.add(N.subtract(l).rotate(m?-90:90));else if(f.remain(t)<=2)d=g,g=F.read(t);else if(!l.equals(g)){var P=te.read(t),E=q.isZero;if(E(P.width)||E(P.height))return this.lineTo(g);var S=f.read(t),m=!!f.read(t),I=!!f.read(t),N=l.add(g).divide(2),v=l.subtract(N).rotate(-S),A=v.x,L=v.y,z=n(P.width),M=n(P.height),D=z*z,H=M*M,W=A*A,X=L*L,U=r(W/D+X/H);if(U>1&&(z*=U,M*=U,D=z*z,H=M*M),U=(D*H-D*X-H*W)/(D*X+H*W),n(U)<1e-12&&(U=0),U<0)throw new Error("Cannot create an arc with the given arguments");w=new F(z*L/M,-M*A/z).multiply((I===m?-1:1)*r(U)).rotate(S).add(N),y=new oe().translate(w).rotate(S).scale(z,M),x=y._inverseTransform(l),C=x.getDirectedAngle(y._inverseTransform(g)),!m&&C>0?C-=360:m&&C<0&&(C+=360)}if(d){var K=new Me(l.add(d).divide(2),d.subtract(l).rotate(90),!0),Q=new Me(d.add(g).divide(2),g.subtract(d).rotate(90),!0),J=new Me(l,g),$=J.getSide(d);if(w=K.intersect(Q,!0),!w){if(!$)return this.lineTo(g);throw new Error("Cannot create an arc with the given arguments")}x=l.subtract(w),C=x.getDirectedAngle(g.subtract(w));var se=J.getSide(w,!0);se===0?C=$*n(C):$===se&&(C+=C<0?360:-360)}if(C){for(var me=1e-5,ye=n(C),we=ye>=360?4:Math.ceil((ye-me)/90),Ee=C/we,fe=Ee*Math.PI/360,pe=4/3*Math.sin(fe)/(1+Math.cos(fe)),ke=[],Te=0;Te<=we;Te++){var v=g,Ne=null;if(Te<we&&(Ne=x.rotate(90).multiply(pe),y?(v=y._transformPoint(x),Ne=y._transformPoint(x.add(Ne)).subtract(v)):v=w.add(x)),!Te)a.setHandleOut(Ne);else{var Ue=x.rotate(-90).multiply(pe);y&&(Ue=y._transformPoint(x.add(Ue)).subtract(v)),ke.push(new ge(v,Ue,Ne))}x=x.rotate(Ee)}this._add(ke)}},lineBy:function(){var t=F.read(arguments),n=e(this)._point;this.lineTo(n.add(t))},curveBy:function(){var t=arguments,n=F.read(t),r=F.read(t),a=f.read(t),l=e(this)._point;this.curveTo(l.add(n),l.add(r),a)},cubicCurveBy:function(){var t=arguments,n=F.read(t),r=F.read(t),a=F.read(t),l=e(this)._point;this.cubicCurveTo(l.add(n),l.add(r),l.add(a))},quadraticCurveBy:function(){var t=arguments,n=F.read(t),r=F.read(t),a=e(this)._point;this.quadraticCurveTo(a.add(n),a.add(r))},arcBy:function(){var t=arguments,n=e(this)._point,r=n.add(F.read(t)),a=f.pick(f.peek(t),!0);typeof a=="boolean"?this.arcTo(r,a):this.arcTo(r,n.add(F.read(t)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(e,t){var n=t.handle?"getHandleBounds":t.stroke?"getStrokeBounds":"getBounds";return Fe[n](this._segments,this._closed,this,e,t)},statics:{getBounds:function(e,t,n,r,a,l){var g=e[0];if(!g)return new ie;var d=new Array(6),_=g._transformCoordinates(r,new Array(6)),m=_.slice(0,2),w=m.slice(),C=new Array(2);function x(P){P._transformCoordinates(r,d);for(var E=0;E<2;E++)ve._addBounds(_[E],_[E+4],d[E+2],d[E],E,l?l[E]:0,m,w,C);var S=_;_=d,d=S}for(var y=1,N=e.length;y<N;y++)x(e[y]);return t&&x(g),new ie(m[0],m[1],w[0]-m[0],w[1]-m[1])},getStrokeBounds:function(e,t,n,r,a){var l=n.getStyle(),g=l.hasStroke(),d=l.getStrokeWidth(),_=g&&n._getStrokeMatrix(r,a),m=g&&Fe._getStrokePadding(d,_),w=Fe.getBounds(e,t,n,r,a,m);if(!g)return w;var C=d/2,x=l.getStrokeJoin(),y=l.getStrokeCap(),N=l.getMiterLimit(),P=new ie(new te(m));function E(z){w=w.include(z)}function S(z){w=w.unite(P.setCenter(z._point.transform(r)))}function I(z,M){M==="round"||z.isSmooth()?S(z):Fe._addBevelJoin(z,M,C,N,r,_,E)}function v(z,M){M==="round"?S(z):Fe._addSquareCap(z,M,C,r,_,E)}var A=e.length-(t?0:1);if(A>0){for(var L=1;L<A;L++)I(e[L],x);t?I(e[0],x):(v(e[0],y),v(e[e.length-1],y))}return w},_getStrokePadding:function(e,t){if(!t)return[e,e];var n=new F(e,0).transform(t),r=new F(0,e).transform(t),a=n.getAngleInRadians(),l=n.getLength(),g=r.getLength(),d=Math.sin(a),_=Math.cos(a),m=Math.tan(a),w=Math.atan2(g*m,l),C=Math.atan2(g,m*l);return[Math.abs(l*Math.cos(w)*_+g*Math.sin(w)*d),Math.abs(g*Math.sin(C)*_+l*Math.cos(C)*d)]},_addBevelJoin:function(e,t,n,r,a,l,g,d){var _=e.getCurve(),m=_.getPrevious(),w=_.getPoint1().transform(a),C=m.getNormalAtTime(1).multiply(n).transform(l),x=_.getNormalAtTime(0).multiply(n).transform(l),y=C.getDirectedAngle(x);if((y<0||y>=180)&&(C=C.negate(),x=x.negate()),d&&g(w),g(w.add(C)),t==="miter"){var N=new Me(w.add(C),new F(-C.y,C.x),!0).intersect(new Me(w.add(x),new F(-x.y,x.x),!0),!0);N&&w.getDistance(N)<=r*n&&g(N)}g(w.add(x))},_addSquareCap:function(e,t,n,r,a,l,g){var d=e._point.transform(r),_=e.getLocation(),m=_.getNormal().multiply(_.getTime()===0?n:-n).transform(a);t==="square"&&(g&&(l(d.subtract(m)),l(d.add(m))),d=d.add(m.rotate(-90))),l(d.add(m)),l(d.subtract(m))},getHandleBounds:function(e,t,n,r,a){var l=n.getStyle(),g=a.stroke&&l.hasStroke(),d,_;if(g){var m=n._getStrokeMatrix(r,a),w=l.getStrokeWidth()/2,C=w;l.getStrokeJoin()==="miter"&&(C=w*l.getMiterLimit()),l.getStrokeCap()==="square"&&(C=Math.max(C,w*Math.SQRT2)),d=Fe._getStrokePadding(w,m),_=Fe._getStrokePadding(C,m)}for(var x=new Array(6),y=1/0,N=-y,P=y,E=N,S=0,I=e.length;S<I;S++){var v=e[S];v._transformCoordinates(r,x);for(var A=0;A<6;A+=2){var L=A?d:_,z=L?L[0]:0,M=L?L[1]:0,D=x[A],H=x[A+1],W=D-z,X=D+z,U=H-M,K=H+M;W<y&&(y=W),X>N&&(N=X),U<P&&(P=U),K>E&&(E=K)}}return new ie(y,P,N-y,E-P)}}});Fe.inject({statics:new function(){var e=.5522847498307936,t=[new ge([-1,0],[0,e],[0,-e]),new ge([0,-1],[-e,0],[e,0]),new ge([1,0],[0,-e],[0,e]),new ge([0,1],[e,0],[-e,0])];function n(a,l,g){var d=f.getNamed(g),_=new Fe(d&&(d.insert==!0?T.INSERT:d.insert==!1?T.NO_INSERT:null));return _._add(a),_._closed=l,_.set(d,T.INSERT)}function r(a,l,g){for(var d=new Array(4),_=0;_<4;_++){var m=t[_];d[_]=new ge(m._point.multiply(l).add(a),m._handleIn.multiply(l),m._handleOut.multiply(l))}return n(d,!0,g)}return{Line:function(){var a=arguments;return n([new ge(F.readNamed(a,"from")),new ge(F.readNamed(a,"to"))],!1,a)},Circle:function(){var a=arguments,l=F.readNamed(a,"center"),g=f.readNamed(a,"radius");return r(l,new te(g),a)},Rectangle:function(){var a=arguments,l=ie.readNamed(a,"rectangle"),g=te.readNamed(a,"radius",0,{readNull:!0}),d=l.getBottomLeft(!0),_=l.getTopLeft(!0),m=l.getTopRight(!0),w=l.getBottomRight(!0),C;if(!g||g.isZero())C=[new ge(d),new ge(_),new ge(m),new ge(w)];else{g=te.min(g,l.getSize(!0).divide(2));var x=g.width,y=g.height,N=x*e,P=y*e;C=[new ge(d.add(x,0),null,[-N,0]),new ge(d.subtract(0,y),[0,P]),new ge(_.add(0,y),null,[0,-P]),new ge(_.add(x,0),[-N,0],null),new ge(m.subtract(x,0),null,[N,0]),new ge(m.add(0,y),[0,-P],null),new ge(w.subtract(0,y),null,[0,P]),new ge(w.subtract(x,0),[N,0])]}return n(C,!0,a)},RoundRectangle:"#Rectangle",Ellipse:function(){var a=arguments,l=Xe._readEllipse(a);return r(l.center,l.radius,a)},Oval:"#Ellipse",Arc:function(){var a=arguments,l=F.readNamed(a,"from"),g=F.readNamed(a,"through"),d=F.readNamed(a,"to"),_=f.getNamed(a),m=new Fe(_&&_.insert==!1&&T.NO_INSERT);return m.moveTo(l),m.arcTo(g,d),m.set(_)},RegularPolygon:function(){for(var a=arguments,l=F.readNamed(a,"center"),g=f.readNamed(a,"sides"),d=f.readNamed(a,"radius"),_=360/g,m=g%3===0,w=new F(0,m?-d:d),C=m?-1:.5,x=new Array(g),y=0;y<g;y++)x[y]=new ge(l.add(w.rotate((y+C)*_)));return n(x,!0,a)},Star:function(){for(var a=arguments,l=F.readNamed(a,"center"),g=f.readNamed(a,"points")*2,d=f.readNamed(a,"radius1"),_=f.readNamed(a,"radius2"),m=360/g,w=new F(0,-1),C=new Array(g),x=0;x<g;x++)C[x]=new ge(l.add(w.rotate(m*x).multiply(x%2?_:d)));return n(C,!0,a)}}}});var lt=Tt.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||(typeof t=="string"?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function e(t,n){var r=n,a=r[0];a&&typeof a[0]=="number"&&(r=[r]);for(var l=n.length-1;l>=0;l--){var g=r[l];r===n&&!(g instanceof Fe)&&(r=f.slice(r)),Array.isArray(g)?r[l]=new Fe({segments:g,insert:!1}):g instanceof lt&&(r.splice.apply(r,[l,1].concat(g.removeChildren())),g.remove())}return e.base.call(this,t,r)},reduce:function e(t){for(var n=this._children,r=n.length-1;r>=0;r--){var a=n[r].reduce(t);a.isEmpty()&&a.remove()}if(!n.length){var a=new Fe(T.NO_INSERT);return a.copyAttributes(this),a.insertAbove(this),this.remove(),a}return e.base.call(this)},isClosed:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)if(!e[t]._closed)return!1;return!0},setClosed:function(e){for(var t=this._children,n=0,r=t.length;n<r;n++)t[n].setClosed(e)},getFirstSegment:function(){var e=this.getFirstChild();return e&&e.getFirstSegment()},getLastSegment:function(){var e=this.getLastChild();return e&&e.getLastSegment()},getCurves:function(){for(var e=this._children,t=[],n=0,r=e.length;n<r;n++)f.push(t,e[n].getCurves());return t},getFirstCurve:function(){var e=this.getFirstChild();return e&&e.getFirstCurve()},getLastCurve:function(){var e=this.getLastChild();return e&&e.getLastCurve()},getArea:function(){for(var e=this._children,t=0,n=0,r=e.length;n<r;n++)t+=e[n].getArea();return t},getLength:function(){for(var e=this._children,t=0,n=0,r=e.length;n<r;n++)t+=e[n].getLength();return t},getPathData:function(e,t){for(var n=this._children,r=[],a=0,l=n.length;a<l;a++){var g=n[a],d=g._matrix;r.push(g.getPathData(e&&!d.isIdentity()?e.appended(d):e,t))}return r.join("")},_hitTestChildren:function e(t,n,r){return e.base.call(this,t,n.class===Fe||n.type==="path"?n:f.set({},n,{fill:!1}),r)},_draw:function(e,t,n,r){var a=this._children;if(a.length){t=t.extend({dontStart:!0,dontFinish:!0}),e.beginPath();for(var l=0,g=a.length;l<g;l++)a[l].draw(e,t,r);if(!t.clip){this._setStyles(e,t,n);var d=this._style;d.hasFill()&&(e.fill(d.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),d.hasStroke()&&e.stroke()}}},_drawSelected:function(e,t,n){for(var r=this._children,a=0,l=r.length;a<l;a++){var g=r[a],d=g._matrix;n[g._id]||g._drawSelected(e,d.isIdentity()?t:t.appended(d))}}},new function(){function e(t,n){var r=t._children;if(n&&!r.length)throw new Error("Use a moveTo() command first");return r[r.length-1]}return f.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(t){this[t]=function(){var n=e(this,!0);n[t].apply(n,arguments)}},{moveTo:function(){var t=e(this),n=t&&t.isEmpty()?t:new Fe(T.NO_INSERT);n!==t&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var t=e(this,!0),n=t&&t.getLastSegment(),r=F.read(arguments);this.moveTo(n?r.add(n._point):r)},closePath:function(t){e(this,!0).closePath(t)}})},f.each(["reverse","flatten","simplify","smooth"],function(e){this[e]=function(t){for(var n=this._children,r,a=0,l=n.length;a<l;a++)r=n[a][e](t)||r;return r}},{}));Tt.inject(new function(){var e=Math.min,t=Math.max,n=Math.abs,r={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function a(S){return S._children||[S]}function l(S,I){var v=S.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(I){for(var A=a(v),L=0,z=A.length;L<z;L++){var S=A[L];!S._closed&&!S.isEmpty()&&(S.closePath(1e-12),S.getFirstSegment().setHandleIn(0,0),S.getLastSegment().setHandleOut(0,0))}v=v.resolveCrossings().reorient(v.getFillRule()==="nonzero",!0)}return v}function g(S,I,v,A,L){var z=new lt(T.NO_INSERT);return z.addChildren(S,!0),z=z.reduce({simplify:I}),L&&L.insert==!1||z.insertAbove(A&&v.isSibling(A)&&v.getIndex()<A.getIndex()?A:v),z.copyAttributes(v,!0),z}function d(S){return S.hasOverlap()||S.isCrossing()}function _(S,I,v,A){if(A&&(A.trace==!1||A.stroke)&&/^(subtract|intersect)$/.test(v))return m(S,I,v);var L=l(S,!0),z=I&&S!==I&&l(I,!0),M=r[v];M[v]=!0,z&&(M.subtract||M.exclude)^(z.isClockwise()^L.isClockwise())&&z.reverse();var D=y(De.expand(L.getIntersections(z,d))),H=a(L),W=z&&a(z),X=[],U=[],K;function Q(Ne){for(var Ue=0,He=Ne.length;Ue<He;Ue++){var Qe=Ne[Ue];f.push(X,Qe._segments),f.push(U,Qe.getCurves()),Qe._overlapsOnly=!0}}function J(Ne){for(var Ue=[],He=0,Qe=Ne&&Ne.length;He<Qe;He++)Ue.push(U[Ne[He]]);return Ue}if(D.length){Q(H),W&&Q(W);for(var $=new Array(U.length),se=0,me=U.length;se<me;se++)$[se]=U[se].getValues();for(var ye=B.findCurveBoundsCollisions($,$,0,!0),we={},se=0;se<U.length;se++){var Ee=U[se],fe=Ee._path._id,pe=we[fe]=we[fe]||{};pe[Ee.getIndex()]={hor:J(ye[se].hor),ver:J(ye[se].ver)}}for(var se=0,me=D.length;se<me;se++)P(D[se]._segment,L,z,we,M);for(var se=0,me=X.length;se<me;se++){var ke=X[se],Te=ke._intersection;ke._winding||P(ke,L,z,we,M),Te&&Te._overlap||(ke._path._overlapsOnly=!1)}K=E(X,M)}else K=x(W?H.concat(W):H.slice(),function(Ne){return!!M[Ne]});return g(K,!0,S,I,A)}function m(S,I,v){var A=l(S),L=l(I),z=A.getIntersections(L,d),M=v==="subtract",D=v==="divide",H={},W=[];function X(Q){if(!H[Q._id]&&(D||L.contains(Q.getPointAt(Q.getLength()/2))^M))return W.unshift(Q),H[Q._id]=!0}for(var U=z.length-1;U>=0;U--){var K=z[U].split();K&&(X(K)&&K.getFirstSegment().setHandleIn(0,0),A.getLastSegment().setHandleOut(0,0))}return X(A),g(W,!1,S,I)}function w(S,I){for(var v=S;v;){if(v===I)return;v=v._previous}for(;S._next&&S._next!==I;)S=S._next;if(!S._next){for(;I._previous;)I=I._previous;S._next=I,I._previous=S}}function C(S){for(var I=S.length-1;I>=0;I--)S[I].clearHandles()}function x(S,I,v){var A=S&&S.length;if(A){var L=f.each(S,function(ye,we){this[ye._id]={container:null,winding:ye.isClockwise()?1:-1,index:we}},{}),z=S.slice().sort(function(ye,we){return n(we.getArea())-n(ye.getArea())}),M=z[0],D=B.findItemBoundsCollisions(z,null,q.GEOMETRIC_EPSILON);v==null&&(v=M.isClockwise());for(var H=0;H<A;H++){var W=z[H],X=L[W._id],U=0,K=D[H];if(K){for(var Q=null,J=K.length-1;J>=0;J--)if(K[J]<H){Q=Q||W.getInteriorPoint();var $=z[K[J]];if($.contains(Q)){var se=L[$._id];U=se.winding,X.winding+=U,X.container=se.exclude?se.container:$;break}}}if(I(X.winding)===I(U))X.exclude=!0,S[X.index]=null;else{var me=X.container;W.setClockwise(me?!me.isClockwise():v)}}}return S}function y(S,I,v){var A=I&&[],L=1e-8,z=1-L,M=!1,D=v||[],H=v&&{},W,X,U;function K(Ue){return Ue._path._id+"."+Ue._segment1._index}for(var Q=(v&&v.length)-1;Q>=0;Q--){var J=v[Q];J._path&&(H[K(J)]=!0)}for(var Q=S.length-1;Q>=0;Q--){var $=S[Q],se=$._time,me=se,ye=I&&!I($),J=$._curve,we;if(J&&(J!==X?(M=!J.hasHandles()||H&&H[K(J)],W=[],U=null,X=J):U>=L&&(se/=U)),ye){W&&W.push($);continue}else I&&A.unshift($);if(U=me,se<L)we=J._segment1;else if(se>z)we=J._segment2;else{var Ee=J.divideAtTime(se,!0);M&&D.push(J,Ee),we=Ee._segment1;for(var fe=W.length-1;fe>=0;fe--){var pe=W[fe];pe._time=(pe._time-se)/(1-se)}}$._setSegment(we);var ke=we._intersection,Te=$._intersection;if(ke){w(ke,Te);for(var Ne=ke;Ne;)w(Ne._intersection,ke),Ne=Ne._next}else we._intersection=Te}return v||C(D),A||S}function N(S,I,v,A,L){var z=Array.isArray(I)?I:I[v?"hor":"ver"],M=v?1:0,D=M^1,H=[S.x,S.y],W=H[M],X=H[D],U=1e-9,K=1e-6,Q=W-U,J=W+U,$=0,se=0,me=0,ye=0,we=!1,Ee=!1,fe=1,pe=[],ke,Te;function Ne(ct){var It=ct[D+0],Ht=ct[D+6];if(!(X<e(It,Ht)||X>t(It,Ht))){var Lt=ct[M+0],$t=ct[M+2],Dt=ct[M+4],St=ct[M+6];if(It===Ht){(Lt<J&&St>Q||St<J&&Lt>Q)&&(we=!0);return}var si=X===It?0:X===Ht||Q>t(Lt,$t,Dt,St)||J<e(Lt,$t,Dt,St)?1:ve.solveCubic(ct,D,X,pe,0,1)>0?pe[0]:1,Ut=si===0?Lt:si===1?St:ve.getPoint(ct,si)[v?"y":"x"],ei=It>Ht?1:-1,bi=ke[D]>ke[D+6]?1:-1,ai=ke[M+6];return X!==It?(Ut<Q?me+=ei:Ut>J?ye+=ei:we=!0,Ut>W-K&&Ut<W+K&&(fe/=2)):(ei!==bi?Lt<Q?me+=ei:Lt>J&&(ye+=ei):Lt!=ai&&(ai<J&&Ut>J?(ye+=ei,we=!0):ai>Q&&Ut<Q&&(me+=ei,we=!0)),fe/=4),ke=ct,!L&&Ut>Q&&Ut<J&&ve.getTangent(ct,si)[v?"x":"y"]===0&&N(S,I,!v,A,!0)}}function Ue(ct){var It=ct[D+0],Ht=ct[D+2],Lt=ct[D+4],$t=ct[D+6];if(X<=t(It,Ht,Lt,$t)&&X>=e(It,Ht,Lt,$t)){for(var Dt=ct[M+0],St=ct[M+2],si=ct[M+4],Ut=ct[M+6],ei=Q>t(Dt,St,si,Ut)||J<e(Dt,St,si,Ut)?[ct]:ve.getMonoCurves(ct,v),bi,ai=0,an=ei.length;ai<an;ai++)if(bi=Ne(ei[ai]))return bi}}for(var He=0,Qe=z.length;He<Qe;He++){var Je=z[He],Ge=Je._path,Mt=Je.getValues(),Ie;if((!He||z[He-1]._path!==Ge)&&(ke=null,Ge._closed||(Te=ve.getValues(Ge.getLastCurve().getSegment2(),Je.getSegment1(),null,!A),Te[D]!==Te[D+6]&&(ke=Te)),!ke)){ke=Mt;for(var mt=Ge.getLastCurve();mt&&mt!==Je;){var wt=mt.getValues();if(wt[D]!==wt[D+6]){ke=wt;break}mt=mt.getPrevious()}}if(Ie=Ue(Mt))return Ie;if(He+1===Qe||z[He+1]._path!==Ge){if(Te&&(Ie=Ue(Te)))return Ie;we&&!me&&!ye&&(me=ye=Ge.isClockwise(A)^v?1:-1),$+=me,se+=ye,me=ye=0,we&&(Ee=!0,we=!1),Te=null}}return $=n($),se=n(se),{winding:t($,se),windingL:$,windingR:se,quality:fe,onPath:Ee}}function P(S,I,v,A,L){var z=[],M=S,D=0,U;do{var H=S.getCurve();if(H){var W=H.getLength();z.push({segment:S,curve:H,length:W}),D+=W}S=S.getNext()}while(S&&!S._intersection&&S!==M);for(var X=[.5,.25,.75],U={winding:0,quality:-1},K=.001,Q=1-K,J=0;J<X.length&&U.quality<.5;J++)for(var W=D*X[J],$=0,se=z.length;$<se;$++){var me=z[$],ye=me.length;if(W<=ye){var H=me.curve,we=H._path,Ee=we._parent,fe=Ee instanceof lt?Ee:we,pe=q.clamp(H.getTimeAt(W),K,Q),ke=H.getPointAtTime(pe),Te=n(H.getTangentAtTime(pe).y)<Math.SQRT1_2,Ne=null;if(L.subtract&&v){var Ue=fe===I?v:I,He=Ue._getWinding(ke,Te,!0);if(fe===I&&He.winding||fe===v&&!He.winding){if(He.quality<1)continue;Ne={winding:0,quality:1}}}Ne=Ne||N(ke,A[we._id][H.getIndex()],Te,!0),Ne.quality>U.quality&&(U=Ne);break}W-=ye}for(var $=z.length-1;$>=0;$--)z[$].segment._winding=U}function E(S,I){var v=[],A;function L(Qe){var Je;return!!(Qe&&!Qe._visited&&(!I||I[(Je=Qe._winding||{}).winding]&&!(I.unite&&Je.winding===2&&Je.windingL&&Je.windingR)))}function z(Qe){if(Qe){for(var Je=0,Ge=A.length;Je<Ge;Je++)if(Qe===A[Je])return!0}return!1}function M(Qe){for(var Je=Qe._segments,Ge=0,Mt=Je.length;Ge<Mt;Ge++)Je[Ge]._visited=!0}function D(Qe,Je){var Ge=Qe._intersection,Mt=Ge,Ie=[];Je&&(A=[Qe]);function mt(wt,ct){for(;wt&&wt!==ct;){var It=wt._segment,Ht=It&&It._path;if(Ht){var Lt=It.getNext()||Ht.getFirstSegment(),$t=Lt._intersection;It!==Qe&&(z(It)||z(Lt)||Lt&&L(It)&&(L(Lt)||$t&&L($t._segment)))&&Ie.push(It),Je&&A.push(It)}wt=wt._next}}if(Ge){for(mt(Ge);Ge&&Ge._previous;)Ge=Ge._previous;mt(Ge,Mt)}return Ie}S.sort(function(Qe,Je){var Ge=Qe._intersection,Mt=Je._intersection,Ie=!!(Ge&&Ge._overlap),mt=!!(Mt&&Mt._overlap),wt=Qe._path,ct=Je._path;return Ie^mt?Ie?1:-1:!Ge^!Mt?Ge?1:-1:wt!==ct?wt._id-ct._id:Qe._index-Je._index});for(var H=0,W=S.length;H<W;H++){var X=S[H],U=L(X),K=null,Q=!1,J=!0,$=[],se,me,ye;if(U&&X._path._overlapsOnly){var we=X._path,Ee=X._intersection._segment._path;we.compare(Ee)&&(we.getArea()&&v.push(we.clone(!1)),M(we),M(Ee),U=!1)}for(;U;){var fe=!K,pe=D(X,fe),ke=pe.shift(),Q=!fe&&(z(X)||z(ke)),Te=!Q&&ke;if(fe&&(K=new Fe(T.NO_INSERT),se=null),Q){(X.isFirst()||X.isLast())&&(J=X._path._closed),X._visited=!0;break}if(Te&&se&&($.push(se),se=null),se||(Te&&pe.push(X),se={start:K._segments.length,crossings:pe,visited:me=[],handleIn:ye}),Te&&(X=ke),!L(X)){K.removeSegments(se.start);for(var Ne=0,Ue=me.length;Ne<Ue;Ne++)me[Ne]._visited=!1;me.length=0;do X=se&&se.crossings.shift(),(!X||!X._path)&&(X=null,se=$.pop(),se&&(me=se.visited,ye=se.handleIn));while(se&&!L(X));if(!X)break}var He=X.getNext();K.add(new ge(X._point,ye,He&&X._handleOut)),X._visited=!0,me.push(X),X=He||X._path.getFirstSegment(),ye=He&&He._handleIn}Q&&(J&&(K.getFirstSegment().setHandleIn(ye),K.setClosed(J)),K.getArea()!==0&&v.push(K))}return v}return{_getWinding:function(S,I,v){return N(S,this.getCurves(),I,v)},unite:function(S,I){return _(this,S,"unite",I)},intersect:function(S,I){return _(this,S,"intersect",I)},subtract:function(S,I){return _(this,S,"subtract",I)},exclude:function(S,I){return _(this,S,"exclude",I)},divide:function(S,I){return I&&(I.trace==!1||I.stroke)?m(this,S,"divide"):g([this.subtract(S,I),this.intersect(S,I)],!0,this,S,I)},resolveCrossings:function(){var S=this._children,I=S||[this];function v(se,me){var ye=se&&se._intersection;return ye&&ye._overlap&&ye._path===me}var A=!1,L=!1,z=this.getIntersections(null,function(se){return se.hasOverlap()&&(A=!0)||se.isCrossing()&&(L=!0)}),M=A&&L&&[];if(z=De.expand(z),A)for(var D=y(z,function(se){return se.hasOverlap()},M),H=D.length-1;H>=0;H--){var W=D[H],X=W._path,U=W._segment,K=U.getPrevious(),Q=U.getNext();v(K,X)&&v(Q,X)&&(U.remove(),K._handleOut._set(0,0),Q._handleIn._set(0,0),K!==U&&!K.getCurve().hasLength()&&(Q._handleIn.set(K._handleIn),K.remove()))}L&&(y(z,A&&function(se){var me=se.getCurve(),ye=se.getSegment(),we=se._intersection,Ee=we._curve,fe=we._segment;if(me&&Ee&&me._path&&Ee._path)return!0;ye&&(ye._intersection=null),fe&&(fe._intersection=null)},M),M&&C(M),I=E(f.each(I,function(se){f.push(this,se._segments)},[])));var J=I.length,$;return J>1&&S?(I!==S&&this.setChildren(I),$=this):J===1&&!S&&(I[0]!==this&&this.setSegments(I[0].removeSegments()),$=this),$||($=new lt(T.NO_INSERT),$.addChildren(I),$=$.reduce(),$.copyAttributes(this),this.replaceWith($)),$},reorient:function(S,I){var v=this._children;return v&&v.length?this.setChildren(x(this.removeChildren(),function(A){return!!(S?A:A&1)},I)):I!==o&&this.setClockwise(I),this},getInteriorPoint:function(){var S=this.getBounds(),I=S.getCenter(!0);if(!this.contains(I)){for(var v=this.getCurves(),A=I.y,L=[],z=[],M=0,D=v.length;M<D;M++){var H=v[M].getValues(),W=H[1],X=H[3],U=H[5],K=H[7];if(A>=e(W,X,U,K)&&A<=t(W,X,U,K))for(var Q=ve.getMonoCurves(H),J=0,$=Q.length;J<$;J++){var se=Q[J],me=se[1],ye=se[7];if(me!==ye&&(A>=me&&A<=ye||A>=ye&&A<=me)){var we=A===me?se[0]:A===ye?se[6]:ve.solveCubic(se,1,A,z,0,1)===1?ve.getPoint(se,z[0]).x:(se[0]+se[6])/2;L.push(we)}}}L.length>1&&(L.sort(function(Ee,fe){return Ee-fe}),I.x=(L[0]+L[1])/2)}return I}}});var Xt=f.extend({_class:"PathFlattener",initialize:function(e,t,n,r,a){var l=[],g=[],d=0,_=1/(n||32),m=e._segments,w=m[0],C;function x(E,S){var I=ve.getValues(E,S,a);l.push(I),y(I,E._index,0,1)}function y(E,S,I,v){if(v-I>_&&!(r&&ve.isStraight(E))&&!ve.isFlatEnough(E,t||.25)){var A=ve.subdivide(E,.5),L=(I+v)/2;y(A[0],S,I,L),y(A[1],S,L,v)}else{var z=E[6]-E[0],M=E[7]-E[1],D=Math.sqrt(z*z+M*M);D>0&&(d+=D,g.push({offset:d,curve:E,index:S,time:v}))}}for(var N=1,P=m.length;N<P;N++)C=m[N],x(w,C),w=C;e._closed&&x(C||w,m[0]),this.curves=l,this.parts=g,this.length=d,this.index=0},_get:function(e){for(var t=this.parts,n=t.length,r,a=this.index;r=a,!(!a||t[--a].offset<e););for(;r<n;r++){var l=t[r];if(l.offset>=e){this.index=r;var g=t[r-1],d=g&&g.index===l.index?g.time:0,_=g?g.offset:0;return{index:l.index,time:d+(l.time-d)*(e-_)/(l.offset-_)}}}return{index:t[n-1].index,time:1}},drawPart:function(e,t,n){for(var r=this._get(t),a=this._get(n),l=r.index,g=a.index;l<=g;l++){var d=ve.getPart(this.curves[l],l===r.index?r.time:0,l===a.index?a.time:1);l===r.index&&e.moveTo(d[0],d[1]),e.bezierCurveTo.apply(e,d.slice(2))}}},f.each(ve._evaluateMethods,function(e){this[e+"At"]=function(t){var n=this._get(t);return ve[e](this.curves[n.index],n.time)}},{})),ii=f.extend({initialize:function(e){for(var t=this.points=[],n=e._segments,r=e._closed,a=0,l,g=n.length;a<g;a++){var d=n[a].point;(!l||!l.equals(d))&&t.push(l=d.clone())}r&&(t.unshift(t[t.length-1]),t.push(t[1])),this.closed=r},fit:function(e){var t=this.points,n=t.length,r=null;return n>0&&(r=[new ge(t[0])],n>1&&(this.fitCubic(r,e,0,n-1,t[1].subtract(t[0]),t[n-2].subtract(t[n-1])),this.closed&&(r.shift(),r.pop()))),r},fitCubic:function(e,t,n,r,a,l){var g=this.points;if(r-n===1){var d=g[n],_=g[r],m=d.getDistance(_)/3;this.addCurve(e,[d,d.add(a.normalize(m)),_.add(l.normalize(m)),_]);return}for(var w=this.chordLengthParameterize(n,r),C=Math.max(t,t*t),x,y=!0,N=0;N<=4;N++){var P=this.generateBezier(n,r,w,a,l),E=this.findMaxError(n,r,P,w);if(E.error<t&&y){this.addCurve(e,P);return}if(x=E.index,E.error>=C)break;y=this.reparameterize(n,r,w,P),C=E.error}var S=g[x-1].subtract(g[x+1]);this.fitCubic(e,t,n,x,a,S),this.fitCubic(e,t,x,r,S.negate(),l)},addCurve:function(e,t){var n=e[e.length-1];n.setHandleOut(t[1].subtract(t[0])),e.push(new ge(t[3],t[2].subtract(t[3])))},generateBezier:function(e,t,n,r,a){for(var l=1e-12,g=Math.abs,d=this.points,_=d[e],m=d[t],w=[[0,0],[0,0]],C=[0,0],x=0,y=t-e+1;x<y;x++){var N=n[x],P=1-N,E=3*N*P,S=P*P*P,I=E*P,v=E*N,A=N*N*N,L=r.normalize(I),z=a.normalize(v),M=d[e+x].subtract(_.multiply(S+I)).subtract(m.multiply(v+A));w[0][0]+=L.dot(L),w[0][1]+=L.dot(z),w[1][0]=w[0][1],w[1][1]+=z.dot(z),C[0]+=L.dot(M),C[1]+=z.dot(M)}var D=w[0][0]*w[1][1]-w[1][0]*w[0][1],H,W;if(g(D)>l){var X=w[0][0]*C[1]-w[1][0]*C[0],U=C[0]*w[1][1]-C[1]*w[0][1];H=U/D,W=X/D}else{var K=w[0][0]+w[0][1],Q=w[1][0]+w[1][1];H=W=g(K)>l?C[0]/K:g(Q)>l?C[1]/Q:0}var J=m.getDistance(_),$=l*J,se,me;if(H<$||W<$)H=W=J/3;else{var ye=m.subtract(_);se=r.normalize(H),me=a.normalize(W),se.dot(ye)-me.dot(ye)>J*J&&(H=W=J/3,se=me=null)}return[_,_.add(se||r.normalize(H)),m.add(me||a.normalize(W)),m]},reparameterize:function(e,t,n,r){for(var a=e;a<=t;a++)n[a-e]=this.findRoot(r,this.points[a],n[a-e]);for(var a=1,l=n.length;a<l;a++)if(n[a]<=n[a-1])return!1;return!0},findRoot:function(e,t,n){for(var r=[],a=[],l=0;l<=2;l++)r[l]=e[l+1].subtract(e[l]).multiply(3);for(var l=0;l<=1;l++)a[l]=r[l+1].subtract(r[l]).multiply(2);var g=this.evaluate(3,e,n),d=this.evaluate(2,r,n),_=this.evaluate(1,a,n),m=g.subtract(t),w=d.dot(d)+m.dot(_);return q.isMachineZero(w)?n:n-m.dot(d)/w},evaluate:function(e,t,n){for(var r=t.slice(),a=1;a<=e;a++)for(var l=0;l<=e-a;l++)r[l]=r[l].multiply(1-n).add(r[l+1].multiply(n));return r[0]},chordLengthParameterize:function(e,t){for(var n=[0],r=e+1;r<=t;r++)n[r-e]=n[r-e-1]+this.points[r].getDistance(this.points[r-1]);for(var r=1,a=t-e;r<=a;r++)n[r]/=n[a];return n},findMaxError:function(e,t,n,r){for(var a=Math.floor((t-e+1)/2),l=0,g=e+1;g<t;g++){var d=this.evaluate(3,n,r[g-e]),_=d.subtract(this.points[g]),m=_.x*_.x+_.y*_.y;m>=l&&(l=m,a=g)}return{error:l,index:a}}}),vt=T.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var n=t&&f.isPlainObject(t)&&t.x===o&&t.y===o;this._initialize(n&&t,!n&&F.read(arguments))},_equals:function(e){return this._content===e._content},copyContent:function(e){this.setContent(e._content)},getContent:function(){return this._content},setContent:function(e){this._content=""+e,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),Bi=vt.extend({_class:"PointText",initialize:function(){vt.apply(this,arguments)},getPoint:function(){var e=this._matrix.getTranslation();return new be(e.x,e.y,this,"setPoint")},setPoint:function(){var e=F.read(arguments);this.translate(e.subtract(this._matrix.getTranslation()))},_draw:function(e,t,n){if(this._content){this._setStyles(e,t,n);var r=this._lines,a=this._style,l=a.hasFill(),g=a.hasStroke(),d=a.getLeading(),_=e.shadowColor;e.font=a.getFontStyle(),e.textAlign=a.getJustification();for(var m=0,w=r.length;m<w;m++){e.shadowColor=_;var C=r[m];l&&(e.fillText(C,0,0),e.shadowColor="rgba(0,0,0,0)"),g&&e.strokeText(C,0,0),e.translate(0,d)}}},_getBounds:function(e,t){var n=this._style,r=this._lines,a=r.length,l=n.getJustification(),g=n.getLeading(),d=this.getView().getTextWidth(n.getFontStyle(),r),_=0;l!=="left"&&(_-=d/(l==="center"?2:1));var m=new ie(_,a?-.75*g:0,d,a*g);return e?e._transformBounds(m,m):m}}),bt=f.extend(new function(){var e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},t={},n={transparent:[0,0,0,0]},r;function a(d){var _=d.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||d.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),m="rgb",w;if(_){var C=_[4]?4:3;w=new Array(C);for(var x=0;x<C;x++){var y=_[x+1];w[x]=parseInt(y.length==1?y+y:y,16)/255}}else if(_=d.match(/^(rgb|hsl)a?\((.*)\)$/)){m=_[1],w=_[2].trim().split(/[,\s]+/g);for(var N=m==="hsl",x=0,P=Math.min(w.length,4);x<P;x++){var E=w[x],y=parseFloat(E);if(N)if(x===0){var S=E.match(/([a-z]*)$/)[1];y*={turn:360,rad:180/Math.PI,grad:.9}[S]||1}else x<3&&(y/=100);else x<3&&(y/=/%$/.test(E)?100:255);w[x]=y}}else{var I=n[d];if(!I)if(c){r||(r=kt.getContext(1,1,{willReadFrequently:!0}),r.globalCompositeOperation="copy"),r.fillStyle="rgba(0,0,0,0)",r.fillStyle=d,r.fillRect(0,0,1,1);var v=r.getImageData(0,0,1,1).data;I=n[d]=[v[0]/255,v[1]/255,v[2]/255]}else I=[0,0,0];w=I.slice()}return[m,w]}var l=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],g={"rgb-hsb":function(d,_,m){var w=Math.max(d,_,m),C=Math.min(d,_,m),x=w-C,y=x===0?0:(w==d?(_-m)/x+(_<m?6:0):w==_?(m-d)/x+2:(d-_)/x+4)*60;return[y,w===0?0:x/w,w]},"hsb-rgb":function(d,_,m){d=(d/60%6+6)%6;var C=Math.floor(d),w=d-C,C=l[C],x=[m,m*(1-_),m*(1-_*w),m*(1-_*(1-w))];return[x[C[0]],x[C[1]],x[C[2]]]},"rgb-hsl":function(d,_,m){var w=Math.max(d,_,m),C=Math.min(d,_,m),x=w-C,y=x===0,N=y?0:(w==d?(_-m)/x+(_<m?6:0):w==_?(m-d)/x+2:(d-_)/x+4)*60,P=(w+C)/2,E=y?0:P<.5?x/(w+C):x/(2-w-C);return[N,E,P]},"hsl-rgb":function(d,_,m){if(d=(d/360%1+1)%1,_===0)return[m,m,m];for(var w=[d+1/3,d,d-1/3],C=m<.5?m*(1+_):m+_-m*_,x=2*m-C,y=[],N=0;N<3;N++){var P=w[N];P<0&&(P+=1),P>1&&(P-=1),y[N]=6*P<1?x+(C-x)*6*P:2*P<1?C:3*P<2?x+(C-x)*(2/3-P)*6:x}return y},"rgb-gray":function(d,_,m){return[d*.2989+_*.587+m*.114]},"gray-rgb":function(d){return[d,d,d]},"gray-hsb":function(d){return[0,0,d]},"gray-hsl":function(d){return[0,0,d]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return f.each(e,function(d,_){t[_]=[],f.each(d,function(m,w){var C=f.capitalize(m),x=/^(hue|saturation)$/.test(m),y=t[_][w]=_==="gradient"?m==="gradient"?function(N){var P=this._components[0];return N=Le.read(Array.isArray(N)?N:arguments,0,{readNull:!0}),P!==N&&(P&&P._removeOwner(this),N&&N._addOwner(this)),N}:function(){return F.read(arguments,0,{readNull:m==="highlight",clone:!0})}:function(N){return N==null||isNaN(N)?0:+N};this["get"+C]=function(){return this._type===_||x&&/^hs[bl]$/.test(this._type)?this._components[w]:this._convert(_)[w]},this["set"+C]=function(N){this._type!==_&&!(x&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(_),this._properties=e[_],this._type=_),this._components[w]=y.call(this,N),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function d(_){var m=arguments,w=this.__read,C=0,x,y,N,P;Array.isArray(_)&&(m=_,_=m[0]);var E=_!=null&&typeof _;if(E==="string"&&_ in e&&(x=_,_=m[1],Array.isArray(_)?(y=_,N=m[2]):(w&&(C=1),m=f.slice(m,1),E=typeof _)),!y){if(P=E==="number"?m:E==="object"&&_.length!=null?_:null,P){x||(x=P.length>=3?"rgb":"gray");var S=e[x].length;N=P[S],w&&(C+=P===arguments?S+(N!=null?1:0):1),P.length>S&&(P=f.slice(P,0,S))}else if(E==="string"){var I=a(_);x=I[0],y=I[1],y.length===4&&(N=y[3],y.length--)}else if(E==="object")if(_.constructor===d){if(x=_._type,y=_._components.slice(),N=_._alpha,x==="gradient")for(var v=1,A=y.length;v<A;v++){var L=y[v];L&&(y[v]=L.clone())}}else if(_.constructor===Le)x="gradient",P=m;else{x="hue"in _?"lightness"in _?"hsl":"hsb":"gradient"in _||"stops"in _||"radial"in _?"gradient":"gray"in _?"gray":"rgb";var z=e[x],M=t[x];this._components=y=[];for(var v=0,A=z.length;v<A;v++){var D=_[z[v]];D==null&&!v&&x==="gradient"&&"stops"in _&&(D={stops:_.stops,radial:_.radial}),D=M[v].call(this,D),D!=null&&(y[v]=D)}N=_.alpha}w&&x&&(C=1)}if(this._type=x||"rgb",!y){this._components=y=[];for(var M=t[this._type],v=0,A=M.length;v<A;v++){var D=M[v].call(this,P&&P[v]);D!=null&&(y[v]=D)}}return this._components=y,this._properties=e[this._type],this._alpha=N,w&&(this.__read=C),this},set:"#initialize",_serialize:function(d,_){var m=this.getComponents();return f.serialize(/^(gray|rgb)$/.test(this._type)?m:[this._type].concat(m),d,!0,_)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(d){var _;return this._type===d?this._components.slice():(_=g[this._type+"-"+d])?_.apply(this,this._components):g["rgb-"+d].apply(this,g[this._type+"-rgb"].apply(this,this._components))},convert:function(d){return new bt(d,this._convert(d),this._alpha)},getType:function(){return this._type},setType:function(d){this._components=this._convert(d),this._properties=e[d],this._type=d},getComponents:function(){var d=this._components.slice();return this._alpha!=null&&d.push(this._alpha),d},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(d){this._alpha=d==null?null:Math.min(Math.max(d,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(d){var _=f.isPlainValue(d,!0)?bt.read(arguments):d;return _===this||_&&this._class===_._class&&this._type===_._type&&this.getAlpha()===_.getAlpha()&&f.equals(this._components,_._components)||!1},toString:function(){for(var d=this._properties,_=[],m=this._type==="gradient",w=Z.instance,C=0,x=d.length;C<x;C++){var y=this._components[C];y!=null&&_.push(d[C]+": "+(m?y:w.number(y)))}return this._alpha!=null&&_.push("alpha: "+w.number(this._alpha)),"{ "+_.join(", ")+" }"},toCSS:function(d){var _=this._convert("rgb"),m=d||this._alpha==null?1:this._alpha;function w(C){return Math.round((C<0?0:C>1?1:C)*255)}return _=[w(_[0]),w(_[1]),w(_[2])],m<1&&_.push(m<0?0:m),d?"#"+((1<<24)+(_[0]<<16)+(_[1]<<8)+_[2]).toString(16).slice(1):(_.length==4?"rgba(":"rgb(")+_.join(",")+")"},toCanvasStyle:function(d,_){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var m=this._components,w=m[0],C=w._stops,x=m[1],y=m[2],N=m[3],P=_&&_.inverted(),E;if(P&&(x=P._transformPoint(x),y=P._transformPoint(y),N&&(N=P._transformPoint(N))),w._radial){var S=y.getDistance(x);if(N){var I=N.subtract(x);I.getLength()>S&&(N=x.add(I.normalize(S-.1)))}var v=N||x;E=d.createRadialGradient(v.x,v.y,0,x.x,x.y,S)}else E=d.createLinearGradient(x.x,x.y,y.x,y.y);for(var A=0,L=C.length;A<L;A++){var z=C[A],M=z._offset;E.addColorStop(M??A/(L-1),z._color.toCanvasStyle())}return this._canvasStyle=E},transform:function(d){if(this._type==="gradient"){for(var _=this._components,m=1,w=_.length;m<w;m++){var C=_[m];d._transformPoint(C,C,!0)}this._changed()}},statics:{_types:e,random:function(){var d=Math.random;return new bt(d(),d(),d())},_setOwner:function(d,_,m){return d&&(d._owner&&_&&d._owner!==_&&(d=d.clone()),!d._owner^!_&&(d._owner=_||null,d._setter=m||null)),d}}})},new function(){var e={add:function(t,n){return t+n},subtract:function(t,n){return t-n},multiply:function(t,n){return t*n},divide:function(t,n){return t/n}};return f.each(e,function(t,n){this[n]=function(r){r=bt.read(arguments);for(var a=this._type,l=this._components,g=r._convert(a),d=0,_=l.length;d<_;d++)g[d]=t(l[d],g[d]);return new bt(a,g,this._alpha!=null?t(this._alpha,r.getAlpha()):null)}},{})}),Le=f.extend({_class:"Gradient",initialize:function(t,n){this._id=ue.get(),t&&f.isPlainObject(t)&&(this.set(t),t=n=null),this._stops==null&&this.setStops(t||["white","black"]),this._radial==null&&this.setRadial(typeof n=="string"&&n==="radial"||n||!1)},_serialize:function(e,t){return t.add(this,function(){return f.serialize([this._stops,this._radial],e,!0,t)})},_changed:function(){for(var e=0,t=this._owners&&this._owners.length;e<t;e++)this._owners[e]._changed()},_addOwner:function(e){this._owners||(this._owners=[]),this._owners.push(e)},_removeOwner:function(e){var t=this._owners?this._owners.indexOf(e):-1;t!=-1&&(this._owners.splice(t,1),this._owners.length||(this._owners=o))},clone:function(){for(var e=[],t=0,n=this._stops.length;t<n;t++)e[t]=this._stops[t].clone();return new Le(e,this._radial)},getStops:function(){return this._stops},setStops:function(e){if(e.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var t=this._stops;if(t)for(var n=0,r=t.length;n<r;n++)t[n]._owner=o;t=this._stops=vi.readList(e,0,{clone:!0});for(var n=0,r=t.length;n<r;n++)t[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(e){this._radial=e,this._changed()},equals:function(e){if(e===this)return!0;if(e&&this._class===e._class){var t=this._stops,n=e._stops,r=t.length;if(r===n.length){for(var a=0;a<r;a++)if(!t[a].equals(n[a]))return!1;return!0}}return!1}}),vi=f.extend({_class:"GradientStop",initialize:function(t,n){var r=t,a=n;typeof t=="object"&&n===o&&(Array.isArray(t)&&typeof t[0]!="number"?(r=t[0],a=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(r=t.color,a=t.offset||t.rampPoint||0)),this.setColor(r),this.setOffset(a)},clone:function(){return new vi(this._color.clone(),this._offset)},_serialize:function(e,t){var n=this._color,r=this._offset;return f.serialize(r==null?[n]:[n,r],e,!0,t)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(e){this._offset=e,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){bt._setOwner(this._color,null),this._color=bt._setOwner(bt.read(arguments,0),this,"setColor"),this._changed()},equals:function(e){return e===this||e&&this._class===e._class&&this._color.equals(e._color)&&this._offset==e._offset||!1}}),ni=f.extend(new function(){var e={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new F,selectedColor:null},t=f.set({},e,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=f.set({},t,{fillColor:new bt}),r={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},a={beans:!0},l={_class:"Style",beans:!0,initialize:function(d,_,m){this._values={},this._owner=_,this._project=_&&_._project||m||it.project,this._defaults=!_||_ instanceof Ce?t:_ instanceof vt?n:e,d&&this.set(d)}};return f.each(t,function(g,d){var _=/Color$/.test(d),m=d==="shadowOffset",w=f.capitalize(d),C=r[d],x="set"+w,y="get"+w;l[x]=function(N){var P=this._owner,E=P&&P._children,S=E&&E.length>0&&!(P instanceof lt);if(S)for(var I=0,v=E.length;I<v;I++)E[I]._style[x](N);if((d==="selectedColor"||!S)&&d in this._defaults){var A=this._values[d];A!==N&&(_&&(A&&(bt._setOwner(A,null),A._canvasStyle=null),N&&N.constructor===bt&&(N=bt._setOwner(N,P,S&&x))),this._values[d]=N,P&&P._changed(C||129))}},l[y]=function(N){var P=this._owner,E=P&&P._children,S=E&&E.length>0&&!(P instanceof lt),I;if(S&&!N)for(var v=0,A=E.length;v<A;v++){var L=E[v]._style[y]();if(!v)I=L;else if(!f.equals(I,L))return o}else if(d in this._defaults){var I=this._values[d];if(I===o)I=this._defaults[d],I&&I.clone&&(I=I.clone());else{var z=_?bt:m?F:null;z&&!(I&&I.constructor===z)&&(this._values[d]=I=z.read([I],0,{readNull:!0,clone:!0}))}}return I&&_&&(I=bt._setOwner(I,P,S&&x)),I},a[y]=function(N){return this._style[y](N)},a[x]=function(N){this._style[x](N)}}),f.each({Font:"FontFamily",WindingRule:"FillRule"},function(g,d){var _="get"+d,m="set"+d;l[_]=a[_]="#get"+g,l[m]=a[m]="#set"+g}),T.inject(a),l},{set:function(e){var t=e instanceof ni,n=t?e._values:e;if(n){for(var r in n)if(r in this._defaults){var a=n[r];this[r]=a&&t&&a.clone?a.clone():a}}},equals:function(e){function t(n,r,a){var l=n._values,g=r._values,d=r._defaults;for(var _ in l){var m=l[_],w=g[_];if(!(a&&_ in g)&&!f.equals(m,w===o?d[_]:w))return!1}return!0}return e===this||e&&this._class===e._class&&t(this,e)&&t(e,this,!0)||!1},_dispose:function(){var e;e=this.getFillColor(),e&&(e._canvasStyle=null),e=this.getStrokeColor(),e&&(e._canvasStyle=null),e=this.getShadowColor(),e&&(e._canvasStyle=null)},hasFill:function(){var e=this.getFillColor();return!!e&&e.alpha>0},hasStroke:function(){var e=this.getStrokeColor();return!!e&&e.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var e=this.getShadowColor();return!!e&&e.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var e=this.getFontSize();return this.getFontWeight()+" "+e+(/[a-z]/i.test(e+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function e(){var t=e.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),t??n*1.2}}),ot=new function(){function e(t,n,r,a){for(var l=["","webkit","moz","Moz","ms","o"],g=n[0].toUpperCase()+n.substring(1),d=0;d<6;d++){var _=l[d],m=_?_+g:n;if(m in t){if(r)t[m]=a;else return t[m];break}}}return{getStyles:function(t){var n=t&&t.nodeType!==9?t.ownerDocument:t,r=n&&n.defaultView;return r&&r.getComputedStyle(t,"")},getBounds:function(t,n){var r=t.ownerDocument,a=r.body,l=r.documentElement,g;try{g=t.getBoundingClientRect()}catch{g={left:0,top:0,width:0,height:0}}var d=g.left-(l.clientLeft||a.clientLeft||0),_=g.top-(l.clientTop||a.clientTop||0);if(!n){var m=r.defaultView;d+=m.pageXOffset||l.scrollLeft||a.scrollLeft,_+=m.pageYOffset||l.scrollTop||a.scrollTop}return new ie(d,_,g.width,g.height)},getViewportBounds:function(t){var n=t.ownerDocument,r=n.defaultView,a=n.documentElement;return new ie(0,0,r.innerWidth||a.clientWidth,r.innerHeight||a.clientHeight)},getOffset:function(t,n){return ot.getBounds(t,n).getPoint()},getSize:function(t){return ot.getBounds(t,!0).getSize()},isInvisible:function(t){return ot.getSize(t).equals(new te(0,0))},isInView:function(t){return!ot.isInvisible(t)&&ot.getViewportBounds(t).intersects(ot.getBounds(t,!0))},isInserted:function(t){return p.body.contains(t)},getPrefixed:function(t,n){return t&&e(t,n)},setPrefixed:function(t,n,r){if(typeof n=="object")for(var a in n)e(t,a,!0,n[a]);else e(t,n,!0,r)}}},ht={add:function(e,t){if(e)for(var n in t)for(var r=t[n],a=n.split(/[\s,]+/g),l=0,g=a.length;l<g;l++){var d=a[l],_=e===p&&(d==="touchstart"||d==="touchmove")?{passive:!1}:!1;e.addEventListener(d,r,_)}},remove:function(e,t){if(e)for(var n in t)for(var r=t[n],a=n.split(/[\s,]+/g),l=0,g=a.length;l<g;l++)e.removeEventListener(a[l],r,!1)},getPoint:function(e){var t=e.targetTouches?e.targetTouches.length?e.targetTouches[0]:e.changedTouches[0]:e;return new F(t.pageX||t.clientX+p.documentElement.scrollLeft,t.pageY||t.clientY+p.documentElement.scrollTop)},getTarget:function(e){return e.target||e.srcElement},getRelatedTarget:function(e){return e.relatedTarget||e.toElement},getOffset:function(e,t){return ht.getPoint(e).subtract(ot.getOffset(t||ht.getTarget(e)))}};ht.requestAnimationFrame=new function(){var e=ot.getPrefixed(c,"requestAnimationFrame"),t=!1,n=[],r;function a(){var l=n;n=[];for(var g=0,d=l.length;g<d;g++)l[g]();t=e&&n.length,t&&e(a)}return function(l){n.push(l),e?t||(e(a),t=!0):r||(r=setInterval(a,1e3/60))}};var _t=f.extend(b,{_class:"View",initialize:function e(t,n){function r(C){return n[C]||parseInt(n.getAttribute(C),10)}function a(){var C=ot.getSize(n);return C.isNaN()||C.isZero()?new te(r("width"),r("height")):C}var l;if(c&&n){this._id=n.getAttribute("id"),this._id==null&&n.setAttribute("id",this._id="paper-view-"+e._id++),ht.add(n,this._viewEvents);var g="none";if(ot.setPrefixed(n.style,{userDrag:g,userSelect:g,touchCallout:g,contentZooming:g,tapHighlightColor:"rgba(0,0,0,0)"}),O.hasAttribute(n,"resize")){var d=this;ht.add(c,this._windowEvents={resize:function(){d.setViewSize(a())}})}if(l=a(),O.hasAttribute(n,"stats")&&typeof Stats<"u"){this._stats=new Stats;var _=this._stats.domElement,m=_.style,w=ot.getOffset(n);m.position="absolute",m.left=w.x+"px",m.top=w.y+"px",p.body.appendChild(_)}}else l=new te(n),n=null;this._project=t,this._scope=t._scope,this._element=n,this._pixelRatio||(this._pixelRatio=c&&c.devicePixelRatio||1),this._setElementSize(l.width,l.height),this._viewSize=l,e._views.push(this),e._viewsById[this._id]=this,(this._matrix=new oe)._owner=this,e._focused||(e._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!it.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;_t._focused===this&&(_t._focused=null),_t._views.splice(_t._views.indexOf(this),1),delete _t._viewsById[this._id];var e=this._project;return e._view===this&&(e._view=null),ht.remove(this._element,this._viewEvents),ht.remove(c,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:f.each(T._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(e){this[e]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(e){this._autoUpdate=e,e&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var e=this;ht.requestAnimationFrame(function(){if(e._requested=!1,e._animate){e.requestUpdate();var t=e._element;(!ot.getPrefixed(p,"hidden")||O.getAttribute(t,"keepalive")==="true")&&ot.isInView(t)&&e._handleFrame()}e._autoUpdate&&e.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){it=this._scope;var e=Date.now()/1e3,t=this._last?e-this._last:0;this._last=e,this.emit("frame",new f({delta:t,time:this._time+=t,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(e,t){var n=this._frameItems;t?(n[e._id]={item:e,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete n[e._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(e){for(var t in this._frameItems){var n=this._frameItems[t];n.item.emit("frame",new f(e,{time:n.time+=e.delta,count:n.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=o},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var e=this._viewSize;return new re(e.width,e.height,this,"setViewSize")},setViewSize:function(){var e=te.read(arguments),t=e.subtract(this._viewSize);t.isZero()||(this._setElementSize(e.width,e.height),this._viewSize.set(e),this._changed(),this.emit("resize",{size:e,delta:t}),this._autoUpdate&&this.update())},_setElementSize:function(e,t){var n=this._element;n&&(n.width!==e&&(n.width=e),n.height!==t&&(n.height=t))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new ie(new F,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return ot.isInView(this._element)},isInserted:function(){return ot.isInserted(this._element)},getPixelSize:function(e){var t=this._element,n;if(t){var r=t.parentNode,a=p.createElement("div");a.style.fontSize=e,r.appendChild(a),n=parseFloat(ot.getStyles(a).fontSize),r.removeChild(a)}else n=parseFloat(n);return n},getTextWidth:function(e,t){return 0}},f.each(["rotate","scale","shear","skew"],function(e){var t=e==="rotate";this[e]=function(){var n=arguments,r=(t?f:F).read(n),a=F.read(n,0,{readNull:!0});return this.transform(new oe()[e](r,a||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var e=new oe;return this.transform(e.translate.apply(e,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var e=F.read(arguments);this.translate(this.getCenter().subtract(e))},getZoom:function(){var e=this._decompose().scaling;return(e.x+e.y)/2},setZoom:function(e){this.transform(new oe().scale(e/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(e){var t=this.getRotation();t!=null&&e!=null&&this.rotate(e-t)},getScaling:function(){var e=this._decompose().scaling;return new be(e.x,e.y,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=F.read(arguments,0,{clone:!0,readNull:!0});e&&t&&this.scale(t.x/e.x,t.y/e.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},transform:function(e){this._matrix.append(e)},scrollBy:function(){this.translate(F.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(F.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(F.read(arguments))},getEventPoint:function(e){return this.viewToProject(ht.getOffset(e,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(e,t){p&&typeof t=="string"&&(t=p.getElementById(t));var n=c?nn:_t;return new n(e,t)}}},new function(){if(!c)return;var e,t,n=!1,r=!1;function a(U){var K=ht.getTarget(U);return K.getAttribute&&_t._viewsById[K.getAttribute("id")]}function l(){var U=_t._focused;if(!U||!U.isVisible()){for(var K=0,Q=_t._views.length;K<Q;K++)if((U=_t._views[K]).isVisible()){_t._focused=t=U;break}}}function g(U,K,Q){U._handleMouseEvent("mousemove",K,Q)}var d=c.navigator,_,m,w;d.pointerEnabled||d.msPointerEnabled?(_="pointerdown MSPointerDown",m="pointermove MSPointerMove",w="pointerup pointercancel MSPointerUp MSPointerCancel"):(_="touchstart",m="touchmove",w="touchend touchcancel","ontouchstart"in c&&d.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(_+=" mousedown",m+=" mousemove",w+=" mouseup"));var C={},x={mouseout:function(U){var K=_t._focused,Q=ht.getRelatedTarget(U);if(K&&(!Q||Q.nodeName==="HTML")){var J=ht.getOffset(U,K._element),$=J.x,se=Math.abs,me=se($),ye=1<<25,we=me-ye;J.x=se(we)<me?we*($<0?-1:1):$,g(K,U,K.viewToProject(J))}},scroll:l};C[_]=function(U){var K=_t._focused=a(U);n||(n=!0,K._handleMouseEvent("mousedown",U))},x[m]=function(U){var K=_t._focused;if(!r){var Q=a(U);Q?K!==Q&&(K&&g(K,U),e||(e=K),K=_t._focused=t=Q):t&&t===K&&(e&&!e.isInserted()&&(e=null),K=_t._focused=e,e=null,l())}K&&g(K,U)},x[_]=function(){r=!0},x[w]=function(U){var K=_t._focused;K&&n&&K._handleMouseEvent("mouseup",U),r=n=!1},ht.add(p,x),ht.add(c,{load:l});var y=!1,N=!1,P={doubleclick:"click",mousedrag:"mousemove"},E=!1,S,I,v,A,L,z,M,D;function H(U,K,Q,J,$,se,me){var ye=!1,we;function Ee(fe,pe){if(fe.responds(pe)){if(we||(we=new sn(pe,J,$,K||fe,se?$.subtract(se):null)),fe.emit(pe,we)&&(y=!0,we.prevented&&(N=!0),we.stopped))return ye=!0}else{var ke=P[pe];if(ke)return Ee(fe,ke)}}for(;U&&U!==me&&!Ee(U,Q);)U=U._parent;return ye}function W(U,K,Q,J,$,se){return U._project.removeOn(Q),N=y=!1,L&&H(L,null,Q,J,$,se)||K&&K!==L&&!K.isDescendant(L)&&H(K,null,Q==="mousedrag"?"mousemove":Q,J,$,se,L)||H(U,L||K||U,Q,J,$,se)}var X={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:C,_handleMouseEvent:function(U,K,Q){var J=this._itemEvents,$=J.native[U],se=U==="mousemove",me=this._scope.tool,ye=this;function we(Ue){return J.virtual[Ue]||ye.responds(Ue)||me&&me.responds(Ue)}se&&n&&we("mousedrag")&&(U="mousedrag"),Q||(Q=this.getEventPoint(K));var Ee=this.getBounds().contains(Q),fe=$&&Ee&&ye._project.hitTest(Q,{tolerance:0,fill:!0,stroke:!0}),pe=fe&&fe.item||null,ke=!1,Te={};if(Te[U.substr(5)]=!0,$&&pe!==A&&(A&&H(A,null,"mouseleave",K,Q),pe&&H(pe,null,"mouseenter",K,Q),A=pe),E^Ee&&(H(this,null,Ee?"mouseenter":"mouseleave",K,Q),ke=!0),(Ee||Te.drag)&&!Q.equals(I)&&(W(this,pe,se?U:"mousemove",K,Q,I),ke=!0),E=Ee,Te.down&&Ee||Te.up&&S){if(W(this,pe,U,K,Q,S),Te.down){if(D=pe===z&&Date.now()-M<300,v=z=pe,!N&&pe){for(var Ne=pe;Ne&&!Ne.responds("mousedrag");)Ne=Ne._parent;Ne&&(L=pe)}S=Q}else Te.up&&(!N&&pe===v&&(M=Date.now(),W(this,pe,D?"doubleclick":"click",K,Q,S),D=!1),v=L=null);E=!1,ke=!0}I=Q,ke&&me&&(y=me._handleMouseEvent(U,K,Q,Te)||y),K.cancelable!==!1&&(y&&!Te.move||Te.down&&we("mouseup"))&&K.preventDefault()},_handleKeyEvent:function(U,K,Q,J){var $=this._scope,se=$.tool,me;function ye(we){we.responds(U)&&(it=$,we.emit(U,me=me||new rn(U,K,Q,J)))}this.isVisible()&&(ye(this),se&&se.responds(U)&&ye(se))},_countItemEvent:function(U,K){var Q=this._itemEvents,J=Q.native,$=Q.virtual;for(var se in X)J[se]=(J[se]||0)+(X[se][U]||0)*K;$[U]=($[U]||0)+K},statics:{updateFocus:l,_resetState:function(){n=r=y=E=!1,e=t=S=I=v=A=L=z=M=D=null}}}}),nn=_t.extend({_class:"CanvasView",initialize:function(t,n){if(!(n instanceof c.HTMLCanvasElement)){var r=te.read(arguments,1);if(r.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+f.slice(arguments,1));n=kt.getCanvas(r)}var a=this._context=n.getContext("2d");if(a.save(),this._pixelRatio=1,!/^off|false$/.test(O.getAttribute(n,"hidpi"))){var l=c.devicePixelRatio||1,g=ot.getPrefixed(a,"backingStorePixelRatio")||1;this._pixelRatio=l/g}_t.call(this,t,n),this._needsUpdate=!0},remove:function e(){return this._context.restore(),e.base.call(this)},_setElementSize:function e(t,n){var r=this._pixelRatio;if(e.base.call(this,t*r,n*r),r!==1){var a=this._element,l=this._context;if(!O.hasAttribute(a,"resize")){var g=a.style;g.width=t+"px",g.height=n+"px"}l.restore(),l.save(),l.scale(r,r)}},getContext:function(){return this._context},getPixelSize:function e(t){var n=it.agent,r;if(n&&n.firefox)r=e.base.call(this,t);else{var a=this._context,l=a.font;a.font=t+" serif",r=parseFloat(a.font),a.font=l}return r},getTextWidth:function(e,t){var n=this._context,r=n.font,a=0;n.font=e;for(var l=0,g=t.length;l<g;l++)a=Math.max(a,n.measureText(t[l]).width);return n.font=r,a},update:function(){if(!this._needsUpdate)return!1;var e=this._project,t=this._context,n=this._viewSize;return t.clearRect(0,0,n.width+1,n.height+1),e&&e.draw(t,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),wi=f.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return Ti.modifiers}}),rn=wi.extend({_class:"KeyEvent",initialize:function(t,n,r,a){this.type=t,this.event=n,this.key=r,this.character=a},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Ti=new function(){var e={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},t={tab:"	",space:" ",enter:"\r"},n={},r={},a,l,g=new f({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var m=it&&it.agent;return m&&m.mac?this.meta:this.control}}});function d(m){var w=m.key||m.keyIdentifier;return w=/^U\+/.test(w)?String.fromCharCode(parseInt(w.substr(2),16)):/^Arrow[A-Z]/.test(w)?w.substr(5):w==="Unidentified"||w===o?String.fromCharCode(m.keyCode):w,e[w]||(w.length>1?f.hyphenate(w):w.toLowerCase())}function _(m,w,C,x){var y=_t._focused,N;if(n[w]=m,m?r[w]=C:delete r[w],w.length>1&&(N=f.camelize(w))in g){g[N]=m;var P=it&&it.agent;if(N==="meta"&&P&&P.mac)if(m)a={};else{for(var E in a)E in r&&_(!1,E,a[E],x);a=null}}else m&&a&&(a[w]=C);y&&y._handleKeyEvent(m?"keydown":"keyup",x,w,C)}return ht.add(p,{keydown:function(m){var w=d(m),C=it&&it.agent;w.length>1||C&&C.chrome&&(m.altKey||C.mac&&m.metaKey||!C.mac&&m.ctrlKey)?_(!0,w,t[w]||(w.length>1?"":w),m):l=w},keypress:function(m){if(l){var w=d(m),C=m.charCode,x=C>=32?String.fromCharCode(C):w.length>1?"":w;w!==l&&(w=x.toLowerCase()),_(!0,w,x,m),l=null}},keyup:function(m){var w=d(m);w in r&&_(!1,w,r[w],m)}}),ht.add(c,{blur:function(m){for(var w in r)_(!1,w,r[w],m)}}),{modifiers:g,isDown:function(m){return!!n[m]}}},sn=wi.extend({_class:"MouseEvent",initialize:function(t,n,r,a,l){this.type=t,this.event=n,this.point=r,this.target=a,this.delta=l},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Di=wi.extend({_class:"ToolEvent",_item:null,initialize:function(t,n,r){this.tool=t,this.type=n,this.event=r},_choosePoint:function(e,t){return e||(t?t.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(e){this._point=e},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(e){this._lastPoint=e},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(e){this._downPoint=e},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(e){this._middlePoint=e},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(e){this._delta=e},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(e){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=e},getItem:function(){if(!this._item){var e=this.tool._scope.project.hitTest(this.getPoint());if(e){for(var t=e.item,n=t._parent;/^(Group|CompoundPath)$/.test(n._class);)t=n,n=n._parent;this._item=t}}return this._item},setItem:function(e){this._item=e},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),xn=V.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){V.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(e){this._minDistance=e,e!=null&&this._maxDistance!=null&&e>this._maxDistance&&(this._maxDistance=e)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(e){this._maxDistance=e,this._minDistance!=null&&e!=null&&e<this._minDistance&&(this._minDistance=e)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(e){this._minDistance=this._maxDistance=e},_handleMouseEvent:function(e,t,n,r){it=this._scope,r.drag&&!this.responds(e)&&(e="mousemove");var a=r.move||r.drag,l=this.responds(e),g=this.minDistance,d=this.maxDistance,_=!1,m=this;function w(x,y){var N=n,P=a?m._point:m._downPoint||N;if(a){if(m._moveCount>=0&&N.equals(P))return!1;if(P&&(x!=null||y!=null)){var E=N.subtract(P),S=E.getLength();if(S<(x||0))return!1;y&&(N=P.add(E.normalize(Math.min(S,y))))}m._moveCount++}return m._point=N,m._lastPoint=P||N,r.down&&(m._moveCount=-1,m._downPoint=N,m._downCount++),!0}function C(){l&&(_=m.emit(e,new Di(m,e,t))||_)}if(r.down)w(),C();else if(r.up)w(null,d),C();else if(l)for(;w(g,d);)C();return _}}),wn=f.extend(b,{_class:"Tween",statics:{easings:new f({linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:-1+2*(2-e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}})},initialize:function e(t,n,r,a,l,g){this.object=t;var d=typeof l,_=d==="function";this.type=_?d:d==="string"?l:"linear",this.easing=_?l:e.easings[this.type],this.duration=a,this.running=!1,this._then=null,this._startTime=null;var m=n||r;this._keys=m?Object.keys(m):[],this._parsedKeys=this._parseKeys(this._keys),this._from=m&&this._getState(n),this._to=m&&this._getState(r),g!==!1&&this.start()},then:function(e){return this._then=e,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(e){if(this.running){e>=1&&(e=1,this.running=!1);for(var t=this.easing(e),n=this._keys,r=function(w){return typeof w=="function"?w(t,e):w},a=0,l=n&&n.length;a<l;a++){var g=n[a],d=r(this._from[g]),_=r(this._to[g]),m=d&&_&&d.__add&&_.__add?_.__subtract(d).__multiply(t).__add(d):(_-d)*t+d;this._setProperty(this._parsedKeys[g],m)}this.responds("update")&&this.emit("update",new f({progress:e,factor:t})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(e){var t=this._startTime,n=t?(e-t)/this.duration:0;t||(this._startTime=e),this.update(n)},_getState:function(e){for(var t=this._keys,n={},r=0,a=t.length;r<a;r++){var l=t[r],g=this._parsedKeys[l],d=this._getProperty(g),_;if(e){var m=this._resolveValue(d,e[l]);this._setProperty(g,m),_=this._getProperty(g),_=_&&_.clone?_.clone():_,this._setProperty(g,d)}else _=d&&d.clone?d.clone():d;n[l]=_}return n},_resolveValue:function(e,t){if(t){if(Array.isArray(t)&&t.length===2){var n=t[0];return n&&n.match&&n.match(/^[+\-\*\/]=/)?this._calculate(e,n[0],t[1]):t}else if(typeof t=="string"){var r=t.match(/^[+\-*/]=(.*)/);if(r){var a=JSON.parse(r[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(e,t[0],a)}}}return t},_calculate:function(e,t,n){return it.PaperScript.calculateBinary(e,t,n)},_parseKeys:function(e){for(var t={},n=0,r=e.length;n<r;n++){var a=e[n],l=a.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");t[a]=l.split("/")}return t},_getProperty:function(e,t){for(var n=this.object,r=0,a=e.length-(t||0);r<a&&n;r++)n=n[e[r]];return n},_setProperty:function(e,t){var n=this._getProperty(e,1);n&&(n[e[e.length-1]]=t)}}),Fi={request:function(e){var t=new s.XMLHttpRequest;return t.open((e.method||"get").toUpperCase(),e.url,f.pick(e.async,!0)),e.mimeType&&t.overrideMimeType(e.mimeType),t.onload=function(){var n=t.status;n===0||n===200?e.onLoad&&e.onLoad.call(t,t.responseText):t.onerror()},t.onerror=function(){var n=t.status,r='Could not load "'+e.url+'" (Status: '+n+")";if(e.onError)e.onError(r,n);else throw new Error(r)},t.send(null)}},kt=f.exports.CanvasProvider={canvases:[],getCanvas:function(e,t,n){if(!c)return null;var r,a=!0;typeof e=="object"&&(t=e.height,e=e.width),this.canvases.length?r=this.canvases.pop():(r=p.createElement("canvas"),a=!1);var l=r.getContext("2d",n||{});if(!l)throw new Error("Canvas "+r+" is unable to provide a 2D context.");return r.width===e&&r.height===t?a&&l.clearRect(0,0,e+1,t+1):(r.width=e,r.height=t),l.save(),r},getContext:function(e,t,n){var r=this.getCanvas(e,t,n);return r?r.getContext("2d",n||{}):null},release:function(e){var t=e&&e.canvas?e.canvas:e;t&&t.getContext&&(t.getContext("2d").restore(),this.canvases.push(t))}},ri=new function(){var e=Math.min,t=Math.max,n=Math.abs,r,a,l,g,d,_,m,w,C,x,y;function N(L,z,M){return .2989*L+.587*z+.114*M}function P(L,z,M,W){var H=W-N(L,z,M);C=L+H,x=z+H,y=M+H;var W=N(C,x,y),X=e(C,x,y),U=t(C,x,y);if(X<0){var K=W-X;C=W+(C-W)*W/K,x=W+(x-W)*W/K,y=W+(y-W)*W/K}if(U>255){var Q=255-W,J=U-W;C=W+(C-W)*Q/J,x=W+(x-W)*Q/J,y=W+(y-W)*Q/J}}function E(L,z,M){return t(L,z,M)-e(L,z,M)}function S(L,z,M,D){var H=[L,z,M],W=t(L,z,M),X=e(L,z,M),U;X=X===L?0:X===z?1:2,W=W===L?0:W===z?1:2,U=e(X,W)===0?t(X,W)===1?2:1:0,H[W]>H[X]?(H[U]=(H[U]-H[X])*D/(H[W]-H[X]),H[W]=D):H[U]=H[W]=0,H[X]=0,C=H[0],x=H[1],y=H[2]}var I={multiply:function(){C=d*r/255,x=_*a/255,y=m*l/255},screen:function(){C=d+r-d*r/255,x=_+a-_*a/255,y=m+l-m*l/255},overlay:function(){C=d<128?2*d*r/255:255-2*(255-d)*(255-r)/255,x=_<128?2*_*a/255:255-2*(255-_)*(255-a)/255,y=m<128?2*m*l/255:255-2*(255-m)*(255-l)/255},"soft-light":function(){var L=r*d/255;C=L+d*(255-(255-d)*(255-r)/255-L)/255,L=a*_/255,x=L+_*(255-(255-_)*(255-a)/255-L)/255,L=l*m/255,y=L+m*(255-(255-m)*(255-l)/255-L)/255},"hard-light":function(){C=r<128?2*r*d/255:255-2*(255-r)*(255-d)/255,x=a<128?2*a*_/255:255-2*(255-a)*(255-_)/255,y=l<128?2*l*m/255:255-2*(255-l)*(255-m)/255},"color-dodge":function(){C=d===0?0:r===255?255:e(255,255*d/(255-r)),x=_===0?0:a===255?255:e(255,255*_/(255-a)),y=m===0?0:l===255?255:e(255,255*m/(255-l))},"color-burn":function(){C=d===255?255:r===0?0:t(0,255-(255-d)*255/r),x=_===255?255:a===0?0:t(0,255-(255-_)*255/a),y=m===255?255:l===0?0:t(0,255-(255-m)*255/l)},darken:function(){C=d<r?d:r,x=_<a?_:a,y=m<l?m:l},lighten:function(){C=d>r?d:r,x=_>a?_:a,y=m>l?m:l},difference:function(){C=d-r,C<0&&(C=-C),x=_-a,x<0&&(x=-x),y=m-l,y<0&&(y=-y)},exclusion:function(){C=d+r*(255-d-d)/255,x=_+a*(255-_-_)/255,y=m+l*(255-m-m)/255},hue:function(){S(r,a,l,E(d,_,m)),P(C,x,y,N(d,_,m))},saturation:function(){S(d,_,m,E(r,a,l)),P(C,x,y,N(d,_,m))},luminosity:function(){P(d,_,m,N(r,a,l))},color:function(){P(r,a,l,N(d,_,m))},add:function(){C=e(d+r,255),x=e(_+a,255),y=e(m+l,255)},subtract:function(){C=t(d-r,0),x=t(_-a,0),y=t(m-l,0)},average:function(){C=(d+r)/2,x=(_+a)/2,y=(m+l)/2},negation:function(){C=255-n(255-r-d),x=255-n(255-a-_),y=255-n(255-l-m)}},v=this.nativeModes=f.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(L){this[L]=!0},{}),A=kt.getContext(1,1,{willReadFrequently:!0});A&&(f.each(I,function(L,z){var M=z==="darken",D=!1;A.save();try{A.fillStyle=M?"#300":"#a00",A.fillRect(0,0,1,1),A.globalCompositeOperation=z,A.globalCompositeOperation===z&&(A.fillStyle=M?"#a00":"#300",A.fillRect(0,0,1,1),D=A.getImageData(0,0,1,1).data[0]!==M?170:51)}catch{}A.restore(),v[z]=D}),kt.release(A)),this.process=function(L,z,M,D,H){var W=z.canvas,X=L==="normal";if(X||v[L])M.save(),M.setTransform(1,0,0,1,0,0),M.globalAlpha=D,X||(M.globalCompositeOperation=L),M.drawImage(W,H.x,H.y),M.restore();else{var U=I[L];if(!U)return;for(var K=M.getImageData(H.x,H.y,W.width,W.height),Q=K.data,J=z.getImageData(0,0,W.width,W.height).data,$=0,se=Q.length;$<se;$+=4){r=J[$],d=Q[$],a=J[$+1],_=Q[$+1],l=J[$+2],m=Q[$+2],g=J[$+3],w=Q[$+3],U();var me=g*D/255,ye=1-me;Q[$]=me*C+ye*d,Q[$+1]=me*x+ye*_,Q[$+2]=me*y+ye*m,Q[$+3]=g*D+ye*w}M.putImageData(K,H.x,H.y)}}},xt=new function(){var e="http://www.w3.org/2000/svg",t="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",r={href:n,xlink:t,xmlns:t+"/","xmlns:xlink":t+"/"};function a(d,_,m){return g(p.createElementNS(e,d),_,m)}function l(d,_){var m=r[_],w=m?d.getAttributeNS(m,_):d.getAttribute(_);return w==="null"?null:w}function g(d,_,m){for(var w in _){var C=_[w],x=r[w];typeof C=="number"&&m&&(C=m.number(C)),x?d.setAttributeNS(x,w,C):d.setAttribute(w,C)}return d}return{svg:e,xmlns:t,xlink:n,create:a,get:l,set:g}},Sn=f.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(e,t){return!t&&(e instanceof Tt||e instanceof Xe||e instanceof vt)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(e,t){var n=f.capitalize(t),r=e[2];this[t]={type:e[1],property:t,attribute:e[0],toSVG:r,fromSVG:r&&f.each(r,function(a,l){this[a]=l},{}),exportFilter:e[3],get:"get"+n,set:"set"+n}},{});new function(){var e;function t(I,v,A){var L=new f,z=I.getTranslation();if(v){var M;I.isInvertible()?(I=I._shiftless(),M=I._inverseTransform(z),z=null):M=new F,L[A?"cx":"x"]=M.x,L[A?"cy":"y"]=M.y}if(!I.isIdentity()){var D=I.decompose();if(D){var H=[],W=D.rotation,X=D.scaling,U=D.skewing;z&&!z.isZero()&&H.push("translate("+e.point(z)+")"),W&&H.push("rotate("+e.number(W)+")"),(!q.isZero(X.x-1)||!q.isZero(X.y-1))&&H.push("scale("+e.point(X)+")"),U.x&&H.push("skewX("+e.number(U.x)+")"),U.y&&H.push("skewY("+e.number(U.y)+")"),L.transform=H.join(" ")}else L.transform="matrix("+I.getValues().join(",")+")"}return L}function n(I,v){for(var A=t(I._matrix),L=I._children,z=xt.create("g",A,e),M=0,D=L.length;M<D;M++){var H=L[M],W=E(H,v);if(W)if(H.isClipMask()){var X=xt.create("clipPath");X.appendChild(W),N(H,X,"clip"),xt.set(z,{"clip-path":"url(#"+X.id+")"})}else z.appendChild(W)}return z}function r(I,v){var A=t(I._matrix,!0),L=I.getSize(),z=I.getImage();return A.x-=L.width/2,A.y-=L.height/2,A.width=L.width,A.height=L.height,A.href=v.embedImages==!1&&z&&z.src||I.toDataURL(),xt.create("image",A,e)}function a(I,v){var A=v.matchShapes;if(A){var L=I.toShape(!1);if(L)return l(L)}var z=I._segments,M=z.length,D,H=t(I._matrix);if(A&&M>=2&&!I.hasHandles())if(M>2){D=I._closed?"polygon":"polyline";for(var W=[],X=0;X<M;X++)W.push(e.point(z[X]._point));H.points=W.join(" ")}else{D="line";var U=z[0]._point,K=z[1]._point;H.set({x1:U.x,y1:U.y,x2:K.x,y2:K.y})}else D="path",H.d=I.getPathData(null,v.precision);return xt.create(D,H,e)}function l(I){var v=I._type,A=I._radius,L=t(I._matrix,!0,v!=="rectangle");if(v==="rectangle"){v="rect";var z=I._size,M=z.width,D=z.height;L.x-=M/2,L.y-=D/2,L.width=M,L.height=D,A.isZero()&&(A=null)}return A&&(v==="circle"?L.r=A:(L.rx=A.width,L.ry=A.height)),xt.create(v,L,e)}function g(I,v){var A=t(I._matrix),L=I.getPathData(null,v.precision);return L&&(A.d=L),xt.create("path",A,e)}function d(I,v){var A=t(I._matrix,!0),L=I._definition,z=y(L,"symbol"),M=L._item,D=M.getStrokeBounds();return z||(z=xt.create("symbol",{viewBox:e.rectangle(D)}),z.appendChild(E(M,v)),N(L,z,"symbol")),A.href="#"+z.id,A.x+=D.x,A.y+=D.y,A.width=D.width,A.height=D.height,A.overflow="visible",xt.create("use",A,e)}function _(I){var v=y(I,"color");if(!v){var A=I.getGradient(),L=A._radial,z=I.getOrigin(),M=I.getDestination(),D;if(L){D={cx:z.x,cy:z.y,r:z.getDistance(M)};var H=I.getHighlight();H&&(D.fx=H.x,D.fy=H.y)}else D={x1:z.x,y1:z.y,x2:M.x,y2:M.y};D.gradientUnits="userSpaceOnUse",v=xt.create((L?"radial":"linear")+"Gradient",D,e);for(var W=A._stops,X=0,U=W.length;X<U;X++){var K=W[X],Q=K._color,J=Q.getAlpha(),$=K._offset;D={offset:$??X/(U-1)},Q&&(D["stop-color"]=Q.toCSS(!0)),J<1&&(D["stop-opacity"]=J),v.appendChild(xt.create("stop",D,e))}N(I,v,"color")}return"url(#"+v.id+")"}function m(I){var v=xt.create("text",t(I._matrix,!0),e);return v.textContent=I._content,v}var w={Group:n,Layer:n,Raster:r,Path:a,Shape:l,CompoundPath:g,SymbolItem:d,PointText:m};function C(I,v,A){var L={},z=!A&&I.getParent(),M=[];return I._name!=null&&(L.id=I._name),f.each(Sn,function(D){var H=D.get,W=D.type,X=I[H]();if(D.exportFilter?D.exportFilter(I,X):!z||!f.equals(z[H](),X)){if(W==="color"&&X!=null){var U=X.getAlpha();U<1&&(L[D.attribute+"-opacity"]=U)}W==="style"?M.push(D.attribute+": "+X):L[D.attribute]=X==null?"none":W==="color"?X.gradient?_(X):X.toCSS(!0):W==="array"?X.join(","):W==="lookup"?D.toSVG[X]:X}}),M.length&&(L.style=M.join(";")),L.opacity===1&&delete L.opacity,I._visible||(L.visibility="hidden"),xt.set(v,L,e)}var x;function y(I,v){return x||(x={ids:{},svgs:{}}),I&&x.svgs[v+"-"+(I._id||I.__id||(I.__id=ue.get("svg")))]}function N(I,v,A){x||y();var L=x.ids[A]=(x.ids[A]||0)+1;v.id=A+"-"+L,x.svgs[A+"-"+(I._id||I.__id)]=v}function P(I,v){var A=I,L=null;if(x){A=I.nodeName.toLowerCase()==="svg"&&I;for(var z in x.svgs)L||(A||(A=xt.create("svg"),A.appendChild(I)),L=A.insertBefore(xt.create("defs"),A.firstChild)),L.appendChild(x.svgs[z]);x=null}return v.asString?new s.XMLSerializer().serializeToString(A):A}function E(I,v,A){var L=w[I._class],z=L&&L(I,v);if(z){var M=v.onExport;M&&(z=M(I,z,v)||z);var D=JSON.stringify(I._data);D&&D!=="{}"&&D!=="null"&&z.setAttribute("data-paper-data",D)}return z&&C(I,z,A)}function S(I){return I||(I={}),e=new Z(I.precision),I}T.inject({exportSVG:function(I){return I=S(I),P(E(this,I,!0),I)}}),de.inject({exportSVG:function(I){I=S(I);var v=this._children,A=this.getView(),L=f.pick(I.bounds,"view"),z=I.matrix||L==="view"&&A._matrix,M=z&&oe.read([z]),D=L==="view"?new ie([0,0],A.getViewSize()):L==="content"?T._getBounds(v,M,{stroke:!0}).rect:ie.read([L],0,{readNull:!0}),H={version:"1.1",xmlns:xt.svg,"xmlns:xlink":xt.xlink};D&&(H.width=D.width,H.height=D.height,(D.x||D.x===0||D.y||D.y===0)&&(H.viewBox=e.rectangle(D)));var W=xt.create("svg",H,e),X=W;M&&!M.isIdentity()&&(X=W.appendChild(xt.create("g",t(M),e)));for(var U=0,K=v.length;U<K;U++)X.appendChild(E(v[U],I,!0));return P(W,I)}})},new function(){var e={},t;function n(v,A,L,z,M,D){var H=xt.get(v,A)||D,W=H==null?z?null:L?"":0:L?H:parseFloat(H);return/%\s*$/.test(H)?W/100*(M?1:t[/x|^width/.test(A)?"width":"height"]):W}function r(v,A,L,z,M,D,H){return A=n(v,A||"x",!1,z,M,D),L=n(v,L||"y",!1,z,M,H),z&&(A==null||L==null)?null:new F(A,L)}function a(v,A,L,z,M){return A=n(v,A||"width",!1,z,M),L=n(v,L||"height",!1,z,M),z&&(A==null||L==null)?null:new te(A,L)}function l(v,A,L){return v==="none"?null:A==="number"?parseFloat(v):A==="array"?v?v.split(/[\s,]+/g).map(parseFloat):[]:A==="color"?E(v)||v:A==="lookup"?L[v]:v}function g(v,A,L,z){var M=v.childNodes,D=A==="clippath",H=A==="defs",W=new Ce,X=W._project,U=X._currentStyle,K=[];if(!D&&!H&&(W=P(W,v,z),X._currentStyle=W._style.clone()),z)for(var Q=v.querySelectorAll("defs"),J=0,$=Q.length;J<$;J++)S(Q[J],L,!1);for(var J=0,$=M.length;J<$;J++){var se=M[J],me;se.nodeType===1&&!/^defs$/i.test(se.nodeName)&&(me=S(se,L,!1))&&!(me instanceof Oe)&&K.push(me)}return W.addChildren(K),D&&(W=P(W.reduce(),v,z)),X._currentStyle=U,(D||H)&&(W.remove(),W=null),W}function d(v,A){for(var L=v.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),z=[],M=0,D=L.length;M<D;M+=2)z.push(new F(parseFloat(L[M]),parseFloat(L[M+1])));var H=new Fe(z);return A==="polygon"&&H.closePath(),H}function _(v){return Tt.create(v.getAttribute("d"))}function m(v,A){var L=(n(v,"href",!0)||"").substring(1),z=A==="radialgradient",M;if(L)M=e[L].getGradient(),M._radial^z&&(M=M.clone(),M._radial=z);else{for(var D=v.childNodes,H=[],W=0,X=D.length;W<X;W++){var U=D[W];U.nodeType===1&&H.push(P(new vi,U))}M=new Le(H,z)}var K,Q,J,$=n(v,"gradientUnits",!0)!=="userSpaceOnUse";z?(K=r(v,"cx","cy",!1,$,"50%","50%"),Q=K.add(n(v,"r",!1,!1,$,"50%"),0),J=r(v,"fx","fy",!0,$)):(K=r(v,"x1","y1",!1,$,"0%","0%"),Q=r(v,"x2","y2",!1,$,"100%","0%"));var se=P(new bt(M,K,Q,J),v);return se._scaleToBounds=$,null}var w={"#document":function(v,A,L,z){for(var M=v.childNodes,D=0,H=M.length;D<H;D++){var W=M[D];if(W.nodeType===1)return S(W,L,z)}},g,svg:g,clippath:g,polygon:d,polyline:d,path:_,lineargradient:m,radialgradient:m,image:function(v){var A=new nt(n(v,"href",!0));return A.on("load",function(){var L=a(v);this.setSize(L);var z=r(v).add(L.divide(2));this._matrix.append(new oe().translate(z))}),A},symbol:function(v,A,L,z){return new Oe(g(v,A,L,z),!0)},defs:g,use:function(v){var A=(n(v,"href",!0)||"").substring(1),L=e[A],z=r(v);return L?L instanceof Oe?L.place(z):L.clone().translate(z):null},circle:function(v){return new Xe.Circle(r(v,"cx","cy"),n(v,"r"))},ellipse:function(v){return new Xe.Ellipse({center:r(v,"cx","cy"),radius:a(v,"rx","ry")})},rect:function(v){return new Xe.Rectangle(new ie(r(v),a(v)),a(v,"rx","ry"))},line:function(v){return new Fe.Line(r(v,"x1","y1"),r(v,"x2","y2"))},text:function(v){var A=new Bi(r(v).add(r(v,"dx","dy")));return A.setContent(v.textContent.trim()||""),A},switch:g};function C(v,A,L,z){if(v.transform){for(var M=(z.getAttribute(L)||"").split(/\)\s*/g),D=new oe,H=0,W=M.length;H<W;H++){var X=M[H];if(!X)break;for(var U=X.split(/\(\s*/),K=U[0],Q=U[1].split(/[\s,]+/g),J=0,$=Q.length;J<$;J++)Q[J]=parseFloat(Q[J]);switch(K){case"matrix":D.append(new oe(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5]));break;case"rotate":D.rotate(Q[0],Q[1]||0,Q[2]||0);break;case"translate":D.translate(Q[0],Q[1]||0);break;case"scale":D.scale(Q);break;case"skewX":D.skew(Q[0],0);break;case"skewY":D.skew(0,Q[0]);break}}v.transform(D)}}function x(v,A,L){var z=L==="fill-opacity"?"getFillColor":"getStrokeColor",M=v[z]&&v[z]();M&&M.setAlpha(parseFloat(A))}var y=f.set(f.each(Sn,function(v){this[v.attribute]=function(A,L){if(A[v.set]&&(A[v.set](l(L,v.type,v.fromSVG)),v.type==="color")){var z=A[v.get]();if(z&&z._scaleToBounds){var M=A.getBounds();z.transform(new oe().translate(M.getPoint()).scale(M.getSize()))}}}},{}),{id:function(v,A){e[A]=v,v.setName&&v.setName(A)},"clip-path":function(v,A){var L=E(A);if(L)if(L=L.clone(),L.setClipMask(!0),v instanceof Ce)v.insertChild(0,L);else return new Ce(L,v)},gradientTransform:C,transform:C,"fill-opacity":x,"stroke-opacity":x,visibility:function(v,A){v.setVisible&&v.setVisible(A==="visible")},display:function(v,A){v.setVisible&&v.setVisible(A!==null)},"stop-color":function(v,A){v.setColor&&v.setColor(A)},"stop-opacity":function(v,A){v._color&&v._color.setAlpha(parseFloat(A))},offset:function(v,A){if(v.setOffset){var L=A.match(/(.*)%$/);v.setOffset(L?L[1]/100:parseFloat(A))}},viewBox:function(v,A,L,z,M){var D=new ie(l(A,"array")),H=a(z,null,null,!0),W,X;if(v instanceof Ce){var U=H?H.divide(D.getSize()):1,X=new oe().scale(U).translate(D.getPoint().negate());W=v}else v instanceof Oe&&(H&&D.setSize(H),W=v._item);if(W){if(N(z,"overflow",M)!=="visible"){var K=new Xe.Rectangle(D);K.setClipMask(!0),W.addChild(K)}X&&W.transform(X)}}});function N(v,A,L){var z=v.attributes[A],M=z&&z.value;if(!M&&v.style){var D=f.camelize(A);M=v.style[D],!M&&L.node[D]!==L.parent[D]&&(M=L.node[D])}return M?M==="none"?null:M:o}function P(v,A,L){var z=A.parentNode,M={node:ot.getStyles(A)||{},parent:!L&&!/^defs$/i.test(z.tagName)&&ot.getStyles(z)||{}};return f.each(y,function(D,H){var W=N(A,H,M);v=W!==o&&D(v,W,H,A,M)||v}),v}function E(v){var A=v&&v.match(/\((?:["'#]*)([^"')]+)/),L=A&&A[1],z=L&&e[c?L.replace(c.location.href.split("#")[0]+"#",""):L];return z&&z._scaleToBounds&&(z=z.clone(),z._scaleToBounds=!0),z}function S(v,A,L){var z=v.nodeName.toLowerCase(),M=z!=="#document",D=p.body,H,W,X;L&&M&&(t=it.getView().getSize(),t=a(v,null,null,!0)||t,H=xt.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),W=v.parentNode,X=v.nextSibling,H.appendChild(v),D.appendChild(H));var U=it.settings,K=U.applyMatrix,Q=U.insertItems;U.applyMatrix=!1,U.insertItems=!1;var J=w[z],$=J&&J(v,z,A,L)||null;if(U.insertItems=Q,U.applyMatrix=K,$){M&&!($ instanceof Ce)&&($=P($,v,L));var se=A.onImport,me=M&&v.getAttribute("data-paper-data");se&&($=se(v,$,A)||$),A.expandShapes&&$ instanceof Xe&&($.remove(),$=$.toPath()),me&&($._data=JSON.parse(me))}return H&&(D.removeChild(H),W&&(X?W.insertBefore(v,X):W.appendChild(v))),L&&(e={},$&&f.pick(A.applyMatrix,K)&&$.matrix.apply(!0,!0)),$}function I(v,A,L){if(!v)return null;A=typeof A=="function"?{onLoad:A}:A||{};var z=it,M=null;function D(U){try{var K=typeof U=="object"?U:new s.DOMParser().parseFromString(U.trim(),"image/svg+xml");if(!K.nodeName)throw K=null,new Error("Unsupported SVG source: "+v);it=z,M=S(K,A,!0),(!A||A.insert!==!1)&&L._insertItem(o,M);var Q=A.onLoad;Q&&Q(M,U)}catch(J){H(J)}}function H(U,K){var Q=A.onError;if(Q)Q(U,K);else throw new Error(U)}if(typeof v=="string"&&!/^[\s\S]*</.test(v)){var W=p.getElementById(v);W?D(W):Fi.request({url:v,async:!0,onLoad:D,onError:H})}else if(typeof File<"u"&&v instanceof File){var X=new FileReader;return X.onload=function(){D(X.result)},X.onerror=function(){H(X.error)},X.readAsText(v)}else D(v);return M}T.inject({importSVG:function(v,A){return I(v,A,this)}}),de.inject({importSVG:function(v,A){return this.activate(),I(v,A,this)}})},f.exports.PaperScript=(function(){var e=this,t=e.acorn;if(!t&&typeof Do<"u")try{t=Ho()}catch{}if(!t){var n,r;t=n=r={},function(P,E){if(typeof n=="object"&&typeof r=="object")return E(n);if(typeof o=="function"&&o.amd)return o(["exports"],E);E(P.acorn||(P.acorn={}))}(this,function(P){P.version="0.5.0";var E,S,I,v;P.parse=function(G,Y){return S=String(G),I=S.length,L(Y),Gr(),Qa(E.program)};var A=P.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function L(G){E=G||{};for(var Y in A)Object.prototype.hasOwnProperty.call(E,Y)||(E[Y]=A[Y]);v=E.sourceFile||null}var z=P.getLineInfo=function(G,Y){for(var he=1,_e=0;;){on.lastIndex=_e;var Ze=on.exec(G);if(Ze&&Ze.index<Y)++he,_e=Ze.index+Ze[0].length;else break}return{line:he,column:Y-_e}};P.tokenize=function(G,Y){S=String(G),I=S.length,L(Y),Gr();var he={};function _e(Ze){return me=H,Zi(Ze),he.start=D,he.end=H,he.startLoc=W,he.endLoc=X,he.type=U,he.value=K,he}return _e.jumpTo=function(Ze,Ye){if(M=Ze,E.locations){J=1,$=on.lastIndex=0;for(var $e;($e=on.exec(S))&&$e.index<Ze;)++J,$=$e.index+$e[0].length}Q=Ye,ln()},_e};var M,D,H,W,X,U,K,Q,J,$,se,me,ye,we,Ee,fe;function pe(G,Y){var he=z(S,G);Y+=" ("+he.line+":"+he.column+")";var _e=new SyntaxError(Y);throw _e.pos=G,_e.loc=he,_e.raisedAt=M,_e}var ke=[],Te={type:"num"},Ne={type:"regexp"},Ue={type:"string"},He={type:"name"},Qe={type:"eof"},Je={keyword:"break"},Ge={keyword:"case",beforeExpr:!0},Mt={keyword:"catch"},Ie={keyword:"continue"},mt={keyword:"debugger"},wt={keyword:"default"},ct={keyword:"do",isLoop:!0},It={keyword:"else",beforeExpr:!0},Ht={keyword:"finally"},Lt={keyword:"for",isLoop:!0},$t={keyword:"function"},Dt={keyword:"if"},St={keyword:"return",beforeExpr:!0},si={keyword:"switch"},Ut={keyword:"throw",beforeExpr:!0},ei={keyword:"try"},bi={keyword:"var"},ai={keyword:"while",isLoop:!0},an={keyword:"with"},qi={keyword:"new",beforeExpr:!0},Cn={keyword:"this"},kn={keyword:"null",atomValue:null},In={keyword:"true",atomValue:!0},Hi={keyword:"false",atomValue:!1},rt={keyword:"in",binop:7,beforeExpr:!0},Pn={break:Je,case:Ge,catch:Mt,continue:Ie,debugger:mt,default:wt,do:ct,else:It,finally:Ht,for:Lt,function:$t,if:Dt,return:St,switch:si,throw:Ut,try:ei,var:bi,while:ai,with:an,null:kn,true:In,false:Hi,new:qi,in:rt,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Cn,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},Ui={type:"[",beforeExpr:!0},ji={type:"]"},Si={type:"{",beforeExpr:!0},Ci={type:"}"},fi={type:"(",beforeExpr:!0},ui={type:")"},i={type:",",beforeExpr:!0},h={type:";",beforeExpr:!0},k={type:":",beforeExpr:!0},R={type:"."},j={type:"?",beforeExpr:!0},ne={binop:10,beforeExpr:!0},le={isAssign:!0,beforeExpr:!0},xe={isAssign:!0,beforeExpr:!0},Ae={postfix:!0,prefix:!0,isUpdate:!0},et={prefix:!0,beforeExpr:!0},st={binop:1,beforeExpr:!0},Nt={binop:2,beforeExpr:!0},ki={binop:3,beforeExpr:!0},Wi={binop:4,beforeExpr:!0},Ni={binop:5,beforeExpr:!0},un={binop:6,beforeExpr:!0},Mi={binop:7,beforeExpr:!0},Li={binop:8,beforeExpr:!0},Ta={binop:9,prefix:!0,beforeExpr:!0},Na={binop:10,beforeExpr:!0};P.tokTypes={bracketL:Ui,bracketR:ji,braceL:Si,braceR:Ci,parenL:fi,parenR:ui,comma:i,semi:h,colon:k,dot:R,question:j,slash:ne,eq:le,name:He,eof:Qe,num:Te,regexp:Ne,string:Ue};for(var qr in Pn)P.tokTypes["_"+qr]=Pn[qr];function An(G){G=G.split(" ");var Y="",he=[];e:for(var _e=0;_e<G.length;++_e){for(var Ze=0;Ze<he.length;++Ze)if(he[Ze][0].length==G[_e].length){he[Ze].push(G[_e]);continue e}he.push([G[_e]])}function Ye(dt){if(dt.length==1)return Y+="return str === "+JSON.stringify(dt[0])+";";Y+="switch(str){";for(var di=0;di<dt.length;++di)Y+="case "+JSON.stringify(dt[di])+":";Y+="return true}return false;"}if(he.length>3){he.sort(function(dt,di){return di.length-dt.length}),Y+="switch(str.length){";for(var _e=0;_e<he.length;++_e){var $e=he[_e];Y+="case "+$e[0].length+":",Ye($e)}Y+="}"}else Ye(G);return new Function("str",Y)}var Ma=An("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),La=An("class enum extends super const export import"),Hr=An("implements interface let package private protected public static yield"),Fn=An("eval arguments"),Oa=An("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Ra=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Ur="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",za="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",jr=new RegExp("["+Ur+"]"),Va=new RegExp("["+Ur+za+"]"),qn=/[\n\r\u2028\u2029]/,on=/\r\n|[\n\r\u2028\u2029]/g,Hn=P.isIdentifierStart=function(G){return G<65?G===36:G<91?!0:G<97?G===95:G<123?!0:G>=170&&jr.test(String.fromCharCode(G))},Wr=P.isIdentifierChar=function(G){return G<48?G===36:G<58?!0:G<65?!1:G<91?!0:G<97?G===95:G<123?!0:G>=170&&Va.test(String.fromCharCode(G))};function Gi(){this.line=J,this.column=M-$}function Gr(){J=1,M=$=0,Q=!0,ln()}function Ft(G,Y){H=M,E.locations&&(X=new Gi),U=G,ln(),K=Y,Q=G.beforeExpr}function Ba(){var G=E.onComment&&E.locations&&new Gi,Y=M,he=S.indexOf("*/",M+=2);if(he===-1&&pe(M-2,"Unterminated comment"),M=he+2,E.locations){on.lastIndex=Y;for(var _e;(_e=on.exec(S))&&_e.index<M;)++J,$=_e.index+_e[0].length}E.onComment&&E.onComment(!0,S.slice(Y+2,he),Y,M,G,E.locations&&new Gi)}function cr(){for(var G=M,Y=E.onComment&&E.locations&&new Gi,he=S.charCodeAt(M+=2);M<I&&he!==10&&he!==13&&he!==8232&&he!==8233;)++M,he=S.charCodeAt(M);E.onComment&&E.onComment(!1,S.slice(G+2,M),G,M,Y,E.locations&&new Gi)}function ln(){for(;M<I;){var G=S.charCodeAt(M);if(G===32)++M;else if(G===13){++M;var Y=S.charCodeAt(M);Y===10&&++M,E.locations&&(++J,$=M)}else if(G===10||G===8232||G===8233)++M,E.locations&&(++J,$=M);else if(G>8&&G<14)++M;else if(G===47){var Y=S.charCodeAt(M+1);if(Y===42)Ba();else if(Y===47)cr();else break}else if(G===160)++M;else if(G>=5760&&Ra.test(String.fromCharCode(G)))++M;else break}}function Da(){var G=S.charCodeAt(M+1);return G>=48&&G<=57?Kr(!0):(++M,Ft(R))}function Fa(){var G=S.charCodeAt(M+1);return Q?(++M,Zr()):G===61?qt(xe,2):qt(ne,1)}function qa(){var G=S.charCodeAt(M+1);return G===61?qt(xe,2):qt(Na,1)}function Ha(G){var Y=S.charCodeAt(M+1);return Y===G?qt(G===124?st:Nt,2):Y===61?qt(xe,2):qt(G===124?ki:Ni,1)}function Ua(){var G=S.charCodeAt(M+1);return G===61?qt(xe,2):qt(Wi,1)}function ja(G){var Y=S.charCodeAt(M+1);return Y===G?Y==45&&S.charCodeAt(M+2)==62&&qn.test(S.slice(me,M))?(M+=3,cr(),ln(),Zi()):qt(Ae,2):Y===61?qt(xe,2):qt(Ta,1)}function Wa(G){var Y=S.charCodeAt(M+1),he=1;return Y===G?(he=G===62&&S.charCodeAt(M+2)===62?3:2,S.charCodeAt(M+he)===61?qt(xe,he+1):qt(Li,he)):Y==33&&G==60&&S.charCodeAt(M+2)==45&&S.charCodeAt(M+3)==45?(M+=4,cr(),ln(),Zi()):(Y===61&&(he=S.charCodeAt(M+2)===61?3:2),qt(Mi,he))}function Ga(G){var Y=S.charCodeAt(M+1);return Y===61?qt(un,S.charCodeAt(M+2)===61?3:2):qt(G===61?le:et,1)}function Za(G){switch(G){case 46:return Da();case 40:return++M,Ft(fi);case 41:return++M,Ft(ui);case 59:return++M,Ft(h);case 44:return++M,Ft(i);case 91:return++M,Ft(Ui);case 93:return++M,Ft(ji);case 123:return++M,Ft(Si);case 125:return++M,Ft(Ci);case 58:return++M,Ft(k);case 63:return++M,Ft(j);case 48:var Y=S.charCodeAt(M+1);if(Y===120||Y===88)return Ka();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Kr(!1);case 34:case 39:return Xa(G);case 47:return Fa();case 37:case 42:return qa();case 124:case 38:return Ha(G);case 94:return Ua();case 43:case 45:return ja(G);case 60:case 62:return Wa(G);case 61:case 33:return Ga(G);case 126:return qt(et,1)}return!1}function Zi(G){if(G?M=D+1:D=M,E.locations&&(W=new Gi),G)return Zr();if(M>=I)return Ft(Qe);var Y=S.charCodeAt(M);if(Hn(Y)||Y===92)return Qr();var he=Za(Y);if(he===!1){var _e=String.fromCharCode(Y);if(_e==="\\"||jr.test(_e))return Qr();pe(M,"Unexpected character '"+_e+"'")}return he}function qt(G,Y){var he=S.slice(M,M+Y);M+=Y,Ft(G,he)}function Zr(){for(var Ze="",G,Y,he=M;;){M>=I&&pe(he,"Unterminated regular expression");var _e=S.charAt(M);if(qn.test(_e)&&pe(he,"Unterminated regular expression"),G)G=!1;else{if(_e==="[")Y=!0;else if(_e==="]"&&Y)Y=!1;else if(_e==="/"&&!Y)break;G=_e==="\\"}++M}var Ze=S.slice(he,M);++M;var Ye=Xr();Ye&&!/^[gmsiy]*$/.test(Ye)&&pe(he,"Invalid regexp flag");try{var $e=new RegExp(Ze,Ye)}catch(dt){dt instanceof SyntaxError&&pe(he,dt.message),pe(dt)}return Ft(Ne,$e)}function En(G,Y){for(var he=M,_e=0,Ze=0,Ye=Y??1/0;Ze<Ye;++Ze){var $e=S.charCodeAt(M),dt;if($e>=97?dt=$e-97+10:$e>=65?dt=$e-65+10:$e>=48&&$e<=57?dt=$e-48:dt=1/0,dt>=G)break;++M,_e=_e*G+dt}return M===he||Y!=null&&M-he!==Y?null:_e}function Ka(){M+=2;var G=En(16);return G==null&&pe(D+2,"Expected hexadecimal number"),Hn(S.charCodeAt(M))&&pe(M,"Identifier directly after number"),Ft(Te,G)}function Kr(G){var Y=M,he=!1,_e=S.charCodeAt(M)===48;!G&&En(10)===null&&pe(Y,"Invalid number"),S.charCodeAt(M)===46&&(++M,En(10),he=!0);var Ze=S.charCodeAt(M);(Ze===69||Ze===101)&&(Ze=S.charCodeAt(++M),(Ze===43||Ze===45)&&++M,En(10)===null&&pe(Y,"Invalid number"),he=!0),Hn(S.charCodeAt(M))&&pe(M,"Identifier directly after number");var Ye=S.slice(Y,M),$e;return he?$e=parseFloat(Ye):!_e||Ye.length===1?$e=parseInt(Ye,10):/[89]/.test(Ye)||fe?pe(Y,"Invalid number"):$e=parseInt(Ye,8),Ft(Te,$e)}function Xa(G){M++;for(var Y="";;){M>=I&&pe(D,"Unterminated string constant");var he=S.charCodeAt(M);if(he===G)return++M,Ft(Ue,Y);if(he===92){he=S.charCodeAt(++M);var _e=/^[0-7]+/.exec(S.slice(M,M+3));for(_e&&(_e=_e[0]);_e&&parseInt(_e,8)>255;)_e=_e.slice(0,-1);if(_e==="0"&&(_e=null),++M,_e)fe&&pe(M-2,"Octal literal in strict mode"),Y+=String.fromCharCode(parseInt(_e,8)),M+=_e.length-1;else switch(he){case 110:Y+=`
`;break;case 114:Y+="\r";break;case 120:Y+=String.fromCharCode(Un(2));break;case 117:Y+=String.fromCharCode(Un(4));break;case 85:Y+=String.fromCharCode(Un(8));break;case 116:Y+="	";break;case 98:Y+="\b";break;case 118:Y+="\v";break;case 102:Y+="\f";break;case 48:Y+="\0";break;case 13:S.charCodeAt(M)===10&&++M;case 10:E.locations&&($=M,++J);break;default:Y+=String.fromCharCode(he);break}}else(he===13||he===10||he===8232||he===8233)&&pe(D,"Unterminated string constant"),Y+=String.fromCharCode(he),++M}}function Un(G){var Y=En(16,G);return Y===null&&pe(D,"Bad character escape sequence"),Y}var hn;function Xr(){hn=!1;for(var G,Y=!0,he=M;;){var _e=S.charCodeAt(M);if(Wr(_e))hn&&(G+=S.charAt(M)),++M;else if(_e===92){hn||(G=S.slice(he,M)),hn=!0,S.charCodeAt(++M)!=117&&pe(M,"Expecting Unicode escape sequence \\uXXXX"),++M;var Ze=Un(4),Ye=String.fromCharCode(Ze);Ye||pe(M-1,"Invalid Unicode escape"),(Y?Hn(Ze):Wr(Ze))||pe(M-4,"Invalid Unicode escape"),G+=Ye}else break;Y=!1}return hn?G:S.slice(he,M)}function Qr(){var G=Xr(),Y=He;return!hn&&Oa(G)&&(Y=Pn[G]),Ft(Y,G)}function ft(){se=D,me=H,ye=X,Zi()}function dr(G){if(fe=G,M=D,E.locations)for(;M<$;)$=S.lastIndexOf(`
`,$-2)+1,--J;ln(),Zi()}function Yr(){this.type=null,this.start=D,this.end=null}function Jr(){this.start=W,this.end=null,v!==null&&(this.source=v)}function jt(){var G=new Yr;return E.locations&&(G.loc=new Jr),E.directSourceFile&&(G.sourceFile=E.directSourceFile),E.ranges&&(G.range=[D,0]),G}function Oi(G){var Y=new Yr;return Y.start=G.start,E.locations&&(Y.loc=new Jr,Y.loc.start=G.loc.start),E.ranges&&(Y.range=[G.range[0],0]),Y}function at(G,Y){return G.type=Y,G.end=me,E.locations&&(G.loc.end=ye),E.ranges&&(G.range[1]=me),G}function pr(G){return E.ecmaVersion>=5&&G.type==="ExpressionStatement"&&G.expression.type==="Literal"&&G.expression.value==="use strict"}function Pt(G){if(U===G)return ft(),!0}function jn(){return!E.strictSemicolons&&(U===Qe||U===Ci||qn.test(S.slice(me,D)))}function Ki(){!Pt(h)&&!jn()&&Ii()}function Ot(G){U===G?ft():Ii()}function Ii(){pe(D,"Unexpected token")}function Wn(G){G.type!=="Identifier"&&G.type!=="MemberExpression"&&pe(G.start,"Assigning to rvalue"),fe&&G.type==="Identifier"&&Fn(G.name)&&pe(G.start,"Assigning to "+G.name+" in strict mode")}function Qa(G){se=me=M,E.locations&&(ye=new Gi),we=fe=null,Ee=[],Zi();var Y=G||jt(),he=!0;for(G||(Y.body=[]);U!==Qe;){var _e=ci();Y.body.push(_e),he&&pr(_e)&&dr(!0),he=!1}return at(Y,"Program")}var gr={kind:"loop"},Ya={kind:"switch"};function ci(){(U===ne||U===xe&&K=="/=")&&Zi(!0);var G=U,Y=jt();switch(G){case Je:case Ie:ft();var he=G===Je;Pt(h)||jn()?Y.label=null:U!==He?Ii():(Y.label=Ri(),Ki());for(var _e=0;_e<Ee.length;++_e){var Ze=Ee[_e];if((Y.label==null||Ze.name===Y.label.name)&&(Ze.kind!=null&&(he||Ze.kind==="loop")||Y.label&&he))break}return _e===Ee.length&&pe(Y.start,"Unsyntactic "+G.keyword),at(Y,he?"BreakStatement":"ContinueStatement");case mt:return ft(),Ki(),at(Y,"DebuggerStatement");case ct:return ft(),Ee.push(gr),Y.body=ci(),Ee.pop(),Ot(ai),Y.test=Tn(),Ki(),at(Y,"DoWhileStatement");case Lt:if(ft(),Ee.push(gr),Ot(fi),U===h)return _r(Y,null);if(U===bi){var Ye=jt();return ft(),es(Ye,!0),at(Ye,"VariableDeclaration"),Ye.declarations.length===1&&Pt(rt)?$r(Y,Ye):_r(Y,Ye)}var Ye=Qt(!1,!0);return Pt(rt)?(Wn(Ye),$r(Y,Ye)):_r(Y,Ye);case $t:return ft(),xr(Y,!0);case Dt:return ft(),Y.test=Tn(),Y.consequent=ci(),Y.alternate=Pt(It)?ci():null,at(Y,"IfStatement");case St:return!we&&!E.allowReturnOutsideFunction&&pe(D,"'return' outside of function"),ft(),Pt(h)||jn()?Y.argument=null:(Y.argument=Qt(),Ki()),at(Y,"ReturnStatement");case si:ft(),Y.discriminant=Tn(),Y.cases=[],Ot(Si),Ee.push(Ya);for(var $e,dt;U!=Ci;)if(U===Ge||U===wt){var di=U===Ge;$e&&at($e,"SwitchCase"),Y.cases.push($e=jt()),$e.consequent=[],ft(),di?$e.test=Qt():(dt&&pe(se,"Multiple default clauses"),dt=!0,$e.test=null),Ot(k)}else $e||Ii(),$e.consequent.push(ci());return $e&&at($e,"SwitchCase"),ft(),Ee.pop(),at(Y,"SwitchStatement");case Ut:return ft(),qn.test(S.slice(me,D))&&pe(me,"Illegal newline after throw"),Y.argument=Qt(),Ki(),at(Y,"ThrowStatement");case ei:if(ft(),Y.block=Nn(),Y.handler=null,U===Mt){var Xi=jt();ft(),Ot(fi),Xi.param=Ri(),fe&&Fn(Xi.param.name)&&pe(Xi.param.start,"Binding "+Xi.param.name+" in strict mode"),Ot(ui),Xi.guard=null,Xi.body=Nn(),Y.handler=at(Xi,"CatchClause")}return Y.guardedHandlers=ke,Y.finalizer=Pt(Ht)?Nn():null,!Y.handler&&!Y.finalizer&&pe(Y.start,"Missing catch or finally clause"),at(Y,"TryStatement");case bi:return ft(),es(Y),Ki(),at(Y,"VariableDeclaration");case ai:return ft(),Y.test=Tn(),Ee.push(gr),Y.body=ci(),Ee.pop(),at(Y,"WhileStatement");case an:return fe&&pe(D,"'with' in strict mode"),ft(),Y.object=Tn(),Y.body=ci(),at(Y,"WithStatement");case Si:return Nn();case h:return ft(),at(Y,"EmptyStatement");default:var Sr=K,Gn=Qt();if(G===He&&Gn.type==="Identifier"&&Pt(k)){for(var _e=0;_e<Ee.length;++_e)Ee[_e].name===Sr&&pe(Gn.start,"Label '"+Sr+"' is already declared");var nu=U.isLoop?"loop":U===si?"switch":null;return Ee.push({name:Sr,kind:nu}),Y.body=ci(),Ee.pop(),Y.label=Gn,at(Y,"LabeledStatement")}else return Y.expression=Gn,Ki(),at(Y,"ExpressionStatement")}}function Tn(){Ot(fi);var G=Qt();return Ot(ui),G}function Nn(G){var Y=jt(),he=!0,_e=!1,Ze;for(Y.body=[],Ot(Si);!Pt(Ci);){var Ye=ci();Y.body.push(Ye),he&&G&&pr(Ye)&&(Ze=_e,dr(_e=!0)),he=!1}return _e&&!Ze&&dr(!1),at(Y,"BlockStatement")}function _r(G,Y){return G.init=Y,Ot(h),G.test=U===h?null:Qt(),Ot(h),G.update=U===ui?null:Qt(),Ot(ui),G.body=ci(),Ee.pop(),at(G,"ForStatement")}function $r(G,Y){return G.left=Y,G.right=Qt(),Ot(ui),G.body=ci(),Ee.pop(),at(G,"ForInStatement")}function es(G,Y){for(G.declarations=[],G.kind="var";;){var he=jt();if(he.id=Ri(),fe&&Fn(he.id.name)&&pe(he.id.start,"Binding "+he.id.name+" in strict mode"),he.init=Pt(le)?Qt(!0,Y):null,G.declarations.push(at(he,"VariableDeclarator")),!Pt(i))break}return G}function Qt(G,Y){var he=mr(Y);if(!G&&U===i){var _e=Oi(he);for(_e.expressions=[he];Pt(i);)_e.expressions.push(mr(Y));return at(_e,"SequenceExpression")}return he}function mr(G){var Y=Ja(G);if(U.isAssign){var he=Oi(Y);return he.operator=K,he.left=Y,ft(),he.right=mr(G),Wn(Y),at(he,"AssignmentExpression")}return Y}function Ja(G){var Y=$a(G);if(Pt(j)){var he=Oi(Y);return he.test=Y,he.consequent=Qt(!0),Ot(k),he.alternate=Qt(!0,G),at(he,"ConditionalExpression")}return Y}function $a(G){return vr(br(),-1,G)}function vr(G,Y,he){var _e=U.binop;if(_e!=null&&(!he||U!==rt)&&_e>Y){var Ze=Oi(G);Ze.left=G,Ze.operator=K;var Ye=U;ft(),Ze.right=vr(br(),_e,he);var $e=at(Ze,Ye===st||Ye===Nt?"LogicalExpression":"BinaryExpression");return vr($e,Y,he)}return G}function br(){if(U.prefix){var G=jt(),Y=U.isUpdate;return G.operator=K,G.prefix=!0,Q=!0,ft(),G.argument=br(),Y?Wn(G.argument):fe&&G.operator==="delete"&&G.argument.type==="Identifier"&&pe(G.start,"Deleting local variable in strict mode"),at(G,Y?"UpdateExpression":"UnaryExpression")}for(var he=eu();U.postfix&&!jn();){var G=Oi(he);G.operator=K,G.prefix=!1,G.argument=he,Wn(he),ft(),he=at(G,"UpdateExpression")}return he}function eu(){return Mn(yr())}function Mn(G,Y){if(Pt(R)){var he=Oi(G);return he.object=G,he.property=Ri(!0),he.computed=!1,Mn(at(he,"MemberExpression"),Y)}else if(Pt(Ui)){var he=Oi(G);return he.object=G,he.property=Qt(),he.computed=!0,Ot(ji),Mn(at(he,"MemberExpression"),Y)}else if(!Y&&Pt(fi)){var he=Oi(G);return he.callee=G,he.arguments=wr(ui,!1),Mn(at(he,"CallExpression"),Y)}else return G}function yr(){switch(U){case Cn:var _e=jt();return ft(),at(_e,"ThisExpression");case He:return Ri();case Te:case Ue:case Ne:var _e=jt();return _e.value=K,_e.raw=S.slice(D,H),ft(),at(_e,"Literal");case kn:case In:case Hi:var _e=jt();return _e.value=U.atomValue,_e.raw=U.keyword,ft(),at(_e,"Literal");case fi:var G=W,Y=D;ft();var he=Qt();return he.start=Y,he.end=H,E.locations&&(he.loc.start=G,he.loc.end=X),E.ranges&&(he.range=[Y,H]),Ot(ui),he;case Ui:var _e=jt();return ft(),_e.elements=wr(ji,!0,!0),at(_e,"ArrayExpression");case Si:return iu();case $t:var _e=jt();return ft(),xr(_e,!1);case qi:return tu();default:Ii()}}function tu(){var G=jt();return ft(),G.callee=Mn(yr(),!0),Pt(fi)?G.arguments=wr(ui,!1):G.arguments=ke,at(G,"NewExpression")}function iu(){var G=jt(),Y=!0,he=!1;for(G.properties=[],ft();!Pt(Ci);){if(Y)Y=!1;else if(Ot(i),E.allowTrailingCommas&&Pt(Ci))break;var _e={key:ts()},Ze=!1,Ye;if(Pt(k)?(_e.value=Qt(!0),Ye=_e.kind="init"):E.ecmaVersion>=5&&_e.key.type==="Identifier"&&(_e.key.name==="get"||_e.key.name==="set")?(Ze=he=!0,Ye=_e.kind=_e.key.name,_e.key=ts(),U!==fi&&Ii(),_e.value=xr(jt(),!1)):Ii(),_e.key.type==="Identifier"&&(fe||he))for(var $e=0;$e<G.properties.length;++$e){var dt=G.properties[$e];if(dt.key.name===_e.key.name){var di=Ye==dt.kind||Ze&&dt.kind==="init"||Ye==="init"&&(dt.kind==="get"||dt.kind==="set");di&&!fe&&Ye==="init"&&dt.kind==="init"&&(di=!1),di&&pe(_e.key.start,"Redefinition of property")}}G.properties.push(_e)}return at(G,"ObjectExpression")}function ts(){return U===Te||U===Ue?yr():Ri(!0)}function xr(G,Y){U===He?G.id=Ri():Y?Ii():G.id=null,G.params=[];var he=!0;for(Ot(fi);!Pt(ui);)he?he=!1:Ot(i),G.params.push(Ri());var _e=we,Ze=Ee;if(we=!0,Ee=[],G.body=Nn(!0),we=_e,Ee=Ze,fe||G.body.body.length&&pr(G.body.body[0]))for(var Ye=G.id?-1:0;Ye<G.params.length;++Ye){var $e=Ye<0?G.id:G.params[Ye];if((Hr($e.name)||Fn($e.name))&&pe($e.start,"Defining '"+$e.name+"' in strict mode"),Ye>=0)for(var dt=0;dt<Ye;++dt)$e.name===G.params[dt].name&&pe($e.start,"Argument name clash in strict mode")}return at(G,Y?"FunctionDeclaration":"FunctionExpression")}function wr(G,Y,he){for(var _e=[],Ze=!0;!Pt(G);){if(Ze)Ze=!1;else if(Ot(i),Y&&E.allowTrailingCommas&&Pt(G))break;he&&U===i?_e.push(null):_e.push(Qt(!0))}return _e}function Ri(G){var Y=jt();return G&&E.forbidReserved=="everywhere"&&(G=!1),U===He?(!G&&(E.forbidReserved&&(E.ecmaVersion===3?Ma:La)(K)||fe&&Hr(K))&&S.slice(D,H).indexOf("\\")==-1&&pe(D,"The keyword '"+K+"' is reserved"),Y.name=K):G&&U.keyword?Y.name=U.keyword:Ii(),Q=!1,ft(),at(Y,"Identifier")}}),t.version||(t=null)}function a(P,E){return(e.acorn||t).parse(P,E)}var l={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},g={"-":"__negate","+":"__self"},d=f.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(P){this["__"+P]="#"+P},{__self:function(){return this}});F.inject(d),te.inject(d),bt.inject(d);function _(P,E,S){var I=l[E];if(P&&P[I]){var v=P[I](S);return E==="!="?!v:v}switch(E){case"+":return P+S;case"-":return P-S;case"*":return P*S;case"/":return P/S;case"%":return P%S;case"==":return P==S;case"!=":return P!=S}}function m(P,E){var S=g[P];if(E&&E[S])return E[S]();switch(P){case"+":return+E;case"-":return-E}}function w(P,E){if(!P)return"";E=E||{};var S=[];function I(fe){for(var pe=0,ke=S.length;pe<ke;pe++){var Te=S[pe];if(Te[0]>=fe)break;fe+=Te[1]}return fe}function v(fe){return P.substring(I(fe.range[0]),I(fe.range[1]))}function A(fe,pe){return P.substring(I(fe.range[1]),I(pe.range[0]))}function L(fe,pe){for(var ke=I(fe.range[0]),Te=I(fe.range[1]),Ne=0,Ue=S.length-1;Ue>=0;Ue--)if(ke>S[Ue][0]){Ne=Ue+1;break}S.splice(Ne,0,[ke,pe.length-Te+ke]),P=P.substring(0,ke)+pe+P.substring(Te)}function z(fe,pe){switch(fe.type){case"UnaryExpression":if(fe.operator in g&&fe.argument.type!=="Literal"){var ke=v(fe.argument);L(fe,'$__("'+fe.operator+'", '+ke+")")}break;case"BinaryExpression":if(fe.operator in l&&fe.left.type!=="Literal"){var Te=v(fe.left),Ne=v(fe.right),Ue=A(fe.left,fe.right),He=fe.operator;L(fe,"__$__("+Te+","+Ue.replace(new RegExp("\\"+He),'"'+He+'"')+", "+Ne+")")}break;case"UpdateExpression":case"AssignmentExpression":var Qe=pe&&pe.type;if(!(Qe==="ForStatement"||Qe==="BinaryExpression"&&/^[=!<>]/.test(pe.operator)||Qe==="MemberExpression"&&pe.computed)){if(fe.type==="UpdateExpression"){var ke=v(fe.argument),Je="__$__("+ke+', "'+fe.operator[0]+'", 1)',Ge=ke+" = "+Je;fe.prefix?Ge="("+Ge+")":(Qe==="AssignmentExpression"||Qe==="VariableDeclarator"||Qe==="BinaryExpression")&&(v(pe.left||pe.id)===ke&&(Ge=Je),Ge=ke+"; "+Ge),L(fe,Ge)}else if(/^.=$/.test(fe.operator)&&fe.left.type!=="Literal"){var Te=v(fe.left),Ne=v(fe.right),Je=Te+" = __$__("+Te+', "'+fe.operator[0]+'", '+Ne+")";L(fe,/^\(.*\)$/.test(v(fe))?"("+Je+")":Je)}}break}}function M(fe){switch(fe.type){case"ExportDefaultDeclaration":L({range:[fe.start,fe.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var pe=fe.declaration,ke=fe.specifiers;if(pe){var Te=pe.declarations;Te&&(Te.forEach(function(Ue){L(Ue,"module.exports."+v(Ue))}),L({range:[fe.start,pe.start+pe.kind.length]},""))}else if(ke){var Ne=ke.map(function(Ue){var He=v(Ue);return"module.exports."+He+" = "+He+"; "}).join("");Ne&&L(fe,Ne)}break}}function D(fe,pe,ke){if(fe){for(var Te in fe)if(Te!=="range"&&Te!=="loc"){var Ne=fe[Te];if(Array.isArray(Ne))for(var Ue=0,He=Ne.length;Ue<He;Ue++)D(Ne[Ue],fe,ke);else Ne&&typeof Ne=="object"&&D(Ne,fe,ke)}ke.operatorOverloading!==!1&&z(fe,pe),ke.moduleExports!==!1&&M(fe)}}function H(fe){var pe="",ke="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(fe=(Math.abs(fe)<<1)+(fe<0?1:0);fe||!pe;){var Te=fe&31;fe>>=5,fe&&(Te|=32),pe+=ke[Te]}return pe}var W=E.url||"",X=E.sourceMaps,U=E.paperFeatures||{},K=E.source||P,Q=E.offset||0,J=it.agent,$=J.versionNumber,se=!1,me=/\r\n|\n|\r/mg,ye;if(X&&(J.chrome&&$>=30||J.webkit&&$>=537.76||J.firefox&&$>=23||J.node)){if(J.node)Q-=2;else if(c&&W&&!c.location.href.indexOf(W)){var we=p.getElementsByTagName("html")[0].innerHTML;Q=we.substr(0,we.indexOf(P)+1).match(me).length+1}se=Q>0&&!(J.chrome&&$>=36||J.safari&&$>=600||J.firefox&&$>=40||J.node);var Ee=["AA"+H(se?0:Q)+"A"];Ee.length=(P.match(me)||[]).length+1+(se?Q:0),ye={version:3,file:W,names:[],mappings:Ee.join(";AACA"),sourceRoot:"",sources:[W],sourcesContent:[K]}}return(U.operatorOverloading!==!1||U.moduleExports!==!1)&&D(a(P,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,U),ye&&(se&&(P=new Array(Q+1).join(`
`)+P),/^(inline|both)$/.test(X)&&(P+=`
//# sourceMappingURL=data:application/json;base64,`+s.btoa(unescape(encodeURIComponent(JSON.stringify(ye))))),P+=`
//# sourceURL=`+(W||"paperscript")),{url:W,source:K,code:P,map:ye}}function C(P,E,S){it=E;var I=E.getView(),v=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(P)&&!/\bnew\s+Tool\b/.test(P)?new xn:null,A=v?v._events:[],L=["onFrame","onResize"].concat(A),z=[],M=[],D,H=typeof P=="object"?P:w(P,S);P=H.code;function W($,se){for(var me in $)(se||!/^_/.test(me))&&new RegExp("([\\b\\s\\W]|^)"+me.replace(/\$/g,"\\$")+"\\b").test(P)&&(z.push(me),M.push($[me]))}W({__$__:_,$__:m,paper:E,tool:v},!0),W(E),P="var module = { exports: {} }; "+P;var Q=f.each(L,function($){new RegExp("\\s+"+$+"\\b").test(P)&&(z.push($),this.push("module.exports."+$+" = "+$+";"))},[]).join(`
`);Q&&(P+=`
`+Q),P+=`
return module.exports;`;var X=it.agent;if(p&&(X.chrome||X.firefox&&X.versionNumber<40)){var U=p.createElement("script"),K=p.head||p.getElementsByTagName("head")[0];X.firefox&&(P=`
`+P),U.appendChild(p.createTextNode("document.__paperscript__ = function("+z+") {"+P+`
}`)),K.appendChild(U),D=p.__paperscript__,delete p.__paperscript__,K.removeChild(U)}else D=Function(z,P);var Q=D&&D.apply(E,M),J=Q||{};return f.each(A,function($){var se=J[$];se&&(v[$]=se)}),I&&(J.onResize&&I.setOnResize(J.onResize),I.emit("resize",{size:I.size,delta:new F}),J.onFrame&&I.setOnFrame(J.onFrame),I.requestUpdate()),Q}function x(P){if(/^text\/(?:x-|)paperscript$/.test(P.type)&&O.getAttribute(P,"ignore")!=="true"){var E=O.getAttribute(P,"canvas"),S=p.getElementById(E),I=P.src||P.getAttribute("data-src"),v=O.hasAttribute(P,"async"),A="data-paper-scope";if(!S)throw new Error('Unable to find canvas with id "'+E+'"');var L=O.get(S.getAttribute(A))||new O().setup(S);return S.setAttribute(A,L._id),I?Fi.request({url:I,async:v,mimeType:"text/plain",onLoad:function(z){C(z,L,I)}}):C(P.innerHTML,L,P.baseURI),P.setAttribute("data-paper-ignore","true"),L}}function y(){f.each(p&&p.getElementsByTagName("script"),x)}function N(P){return P?x(P):y()}return c&&(p.readyState==="complete"?setTimeout(y):ht.add(c,{load:y})),{compile:w,execute:C,load:N,parse:a,calculateBinary:_,calculateUnary:m}}).call(this);var it=new(O.inject(f.exports,{Base:f,Numerical:q,Key:Ti,DomEvent:ht,DomElement:ot,document:p,window:c,Symbol:Oe,PlacedSymbol:Be}));return it.agent.node&&Ss(it),typeof o=="function"&&o.amd?o("paper",it):u&&(u.exports=it),it}).call(fa,typeof self=="object"?self:null)})(Aa);var Uo=Aa.exports;const zi=du(Uo);function zr(u){return yn(".0%")(u)}function Vr(u,s){return[u*Math.sin(s),u*Math.cos(s)]}function er(u,s,o){o=Math.min(o,u);function c(f){return Math.acos(f/u)}function p(f){return-1/2*u**2*(f-Math.sin(f)*Math.cos(f))}return p(c(o))-p(c(s))}function Yn({layerRadius:u,cutY:s,cutX:o,nextCutX:c}){const p=Math.sqrt(u**2-s**2),f=Math.min(p,c);return er(u,o,f)-(f-o)*s}function jo({slope:u,yIntercept:s,radius:o}){const c=s**2*u**2-(u**2+1)*(s**2-o**2);return{discriminant:c,doesIntersect:c>0}}function Jn({slope:u,yIntercept:s,x1:o,x2:c}){return 1/2*u*(c**2-o**2)+s*(c-o)}function ks(u,s,o){return u>s&&u-s>3e-14&&u<o&&o-u>3e-14}function Wo(u){return u.map(({pieceColumn:s})=>s.map(({pieceArea:o,subPieces:c})=>c.length?c:o)).flat(2)}function Go(u){return u.map(({pieces:s})=>s.map(({area:o,subPieces:c})=>c.length?c:o)).flat(2)}var Bn,Br;class Is{constructor({radius:s,numLayers:o,numCuts:c,cutType:p,cutTargetDepthPercentage:f,numHorizontalCuts:b}){is(this,Bn);this.radius=s,this.numLayers=o,this.numCuts=c,this.cutType=p,this.cutTargetDepthPercentage=f,this.numHorizontalCuts=b}get rScale(){return $i().domain([0,this.numLayers]).range([0,this.radius])}get layerRadii(){return Array.from({length:this.numLayers}).map((s,o)=>this.rScale(o+1))}get layerThickness(){return this.rScale(1)}get layerArcs(){return this.layerRadii.map(s=>o=>Math.sqrt(s**2-o**2))}get cutNumbers(){return Array.from({length:this.numCuts}).map((s,o)=>o)}get cutWidthScale(){return $i().domain([0,this.numCuts]).range([0,this.radius])}get cutThickness(){return this.cutWidthScale(1)}get cutAngleScale(){return $i().domain([0,this.numCuts]).range([Math.PI/2,0])}get cutTargetDepth(){return this.radius*this.cutTargetDepthPercentage}get horizontalCutNumbers(){return Array.from({length:this.numHorizontalCuts}).map((s,o)=>o).reverse()}get horizontalCutScale(){return $i().domain([0,this.numHorizontalCuts]).range([1/(this.numHorizontalCuts+1),1])}get storageKey(){return[`${this.numLayers}l`,`${this.numCuts}c`,this.cutType==="radial"?"r":"v",...this.cutType==="radial"?[`${zr(this.cutTargetDepthPercentage)}d`]:[],`${this.numHorizontalCuts}h`].join(":")}get verticalAreas(){const s=this.cutNumbers,o=this.cutWidthScale,c=this.radius,p=this.layerRadii,f=this.horizontalCutNumbers,b=this.horizontalCutScale,O=s.map(V=>({cutX:o(V),pieceColumn:[]}));return s.forEach(V=>{const{cutX:B,pieceColumn:Z}=O[V];p.forEach((q,ue)=>{const F=ue===0,be=p[ue-1];if(q>B){const te=o(V+1),re=er(q,B,te),ie=Z.length?re-Z.at(-1).verticalCutArea:re,ae=[F?0:Math.sqrt(be**2-te**2)||0,Math.sqrt(q**2-B**2)];let oe=[];f.forEach(Me=>{const de=b(Me)*c;if(ks(de,ae[0],ae[1])){let T=Yn({layerRadius:q,cutY:de,cutX:B,nextCutX:te});const Ce=Math.sqrt(be**2-B**2);if(de<Ce&&(T-=Yn({layerRadius:be,cutY:de,cutX:B,nextCutX:te})),oe.length){const Ve=oe[0];oe=[Ve,T-Ve,ie-T]}else oe=[T,ie-T]}}),Z.push({layerRadius:q,verticalCutArea:re,pieceArea:ie,yRange:ae,subPieces:oe})}})}),O}get radialAreas(){const s=this.layerRadii,o=this.cutAngleScale,c=this.radius,p=this.cutNumbers,f=this.cutTargetDepth,b=this.horizontalCutNumbers,O=this.horizontalCutScale;function V(q){return ue=>q*ue-f}function B(q){const ue=o(q);return(f+c*Math.sin(ue))/(c*Math.cos(ue))}const Z=s.map(q=>{const ue=[];return p.forEach(F=>{const be=B(F),te=V(be),{discriminant:re,doesIntersect:ie}=jo({slope:be,yIntercept:-f,radius:q});if(ie){const ae=(f*be+Math.sqrt(re))/(be**2+1);ae>0&&te(ae)>0&&ue.push({xOfLeftCutIntersection:ae,leftCutLineSlope:be,cutNum:F})}}),{layerRadius:q,pieces:ue}});return Z.forEach(({pieces:q,layerRadius:ue},F,be)=>{const te=F===0,re=be[F-1];q.forEach((ie,ae,oe)=>{var ve,De,Tt;const Me=ae===0,de=ae===oe.length-1,{leftCutLineSlope:T,xOfLeftCutIntersection:Ce}=ie,Ve=[void 0,void 0],Xe=[void 0,void 0],nt=oe[ae+1];function Be(Fe){var ii,vt;const lt=(ii=re==null?void 0:re.pieces[Fe])==null?void 0:ii.xOfLeftCutIntersection,Xt=f/((vt=oe[Fe])==null?void 0:vt.leftCutLineSlope);return lt??Xt}Ve[0]=Ce,Ve[1]=de?ue:nt.xOfLeftCutIntersection,Me||(Ve[0]=Be(ae)),ie.xRange=Ve,Xe[0]=de||te?0:Math.sqrt(re.layerRadius**2-((ve=re.pieces[ae+1])==null?void 0:ve.xOfLeftCutIntersection)**2)||0,Xe[1]=Math.sqrt(ue**2-Ce**2),ie.yRange=Xe;let Oe=er(ue,Ce,Ve[1]);if(Me||(Oe+=Jn({slope:T,yIntercept:-f,x1:Ve[0],x2:Ce})),!de){const Fe=Be(ae+1);Oe-=Jn({slope:nt.leftCutLineSlope,yIntercept:-f,x1:Fe,x2:Ve[1]})}const Se=(De=re==null?void 0:re.pieces[ae])==null?void 0:De.xRange[1];!te&&Se>Ve[0]&&(Oe-=er(re.layerRadius,(Tt=re.pieces[ae])==null?void 0:Tt.xOfLeftCutIntersection,Se)),ie.area=Oe;let We=[];b.forEach(Fe=>{const lt=O(Fe)*c;if(ks(lt,Xe[0],Xe[1])){let Xt=Yn({layerRadius:ue,cutY:lt,cutX:Ce,nextCutX:Ve[1]});if(!Me){const vt=Math.max((lt+f)/T,Ve[0]);Xt+=Jn({slope:T,yIntercept:-f,x1:vt,x2:Ce})-(Ce-vt)*lt}if(!te&&lt<Math.sqrt(re.layerRadius**2-Ve[0]**2)){const vt=Math.sqrt(re.layerRadius**2-lt**2);Xt-=Yn({layerRadius:re.layerRadius,cutY:lt,cutX:Ve[0],nextCutX:vt})}if(!de&&lt<Math.sqrt(ue**2-Ve[1]**2)){const vt=(lt+f)/nt.leftCutLineSlope;Xt-=Jn({slope:nt.leftCutLineSlope,yIntercept:-f,x1:vt,x2:Ve[1]})-(Ve[1]-vt)*lt}if(We.length){const vt=We[0];We=[vt,Xt-vt,Oe-Xt]}else We=[Xt,Oe-Xt]}}),ie.subPieces=We})}),Z}get meanArea(){return Vu(Cr(this,Bn,Br))}get standardDeviation(){return Nu(Cr(this,Bn,Br))/this.meanArea*100}get standardDeviationString(){return+yn(".1f")(this.standardDeviation)}}Bn=new WeakSet,Br=function(){return this.cutType==="vertical"?Wo(this.verticalAreas):Go(this.radialAreas)};function Zo(u){let s,o,c;return{c(){s=oi("line"),this.h()},l(p){s=li(p,"line",{x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),Ke(s).forEach(ce),this.h()},h(){ee(s,"x1",o=-u[0]/2),ee(s,"y1",u[2]),ee(s,"x2",c=u[0]/2),ee(s,"y2",u[2]),ee(s,"class","svelte-p4w993"),Yt(s,"half-width",u[1])},m(p,f){qe(p,s,f)},p(p,[f]){f&1&&o!==(o=-p[0]/2)&&ee(s,"x1",o),f&1&&c!==(c=p[0]/2)&&ee(s,"x2",c),f&2&&Yt(s,"half-width",p[1])},i:ut,o:ut,d(p){p&&ce(s)}}}function Ko(u,s,o){let{width:c}=s,{height:p}=s,{isBottom:f=!1}=s,{isHalfWidth:b=!1}=s,O=f?p:0;return u.$$set=V=>{"width"in V&&o(0,c=V.width),"height"in V&&o(3,p=V.height),"isBottom"in V&&o(4,f=V.isBottom),"isHalfWidth"in V&&o(1,b=V.isHalfWidth)},[c,b,O,p,f]}class Xo extends Zt{constructor(s){super(),Kt(this,s,Ko,Zo,Gt,{width:0,height:3,isBottom:4,isHalfWidth:1})}}function Ps(u,s,o){const c=u.slice();return c[4]=s[o],c}function As(u){let s,o;return{c(){s=oi("circle"),this.h()},l(c){s=li(c,"circle",{cx:!0,cy:!0,r:!0,"clip-path":!0,class:!0}),Ke(s).forEach(ce),this.h()},h(){ee(s,"cx","0"),ee(s,"cy",u[0]),ee(s,"r",o=u[4]),ee(s,"clip-path","url(#layer-mask)"),ee(s,"class","svelte-4enqpx")},m(c,p){qe(c,s,p)},p(c,p){p&1&&ee(s,"cy",c[0]),p&2&&o!==(o=c[4])&&ee(s,"r",o)},d(c){c&&ce(s)}}}function Qo(u){let s,o=yt(u[1]),c=[];for(let p=0;p<o.length;p+=1)c[p]=As(Ps(u,o,p));return{c(){s=oi("g");for(let p=0;p<c.length;p+=1)c[p].c();this.h()},l(p){s=li(p,"g",{class:!0});var f=Ke(s);for(let b=0;b<c.length;b+=1)c[b].l(f);f.forEach(ce),this.h()},h(){ee(s,"class","onion")},m(p,f){qe(p,s,f);for(let b=0;b<c.length;b+=1)c[b]&&c[b].m(s,null)},p(p,[f]){if(f&3){o=yt(p[1]);let b;for(b=0;b<o.length;b+=1){const O=Ps(p,o,b);c[b]?c[b].p(O,f):(c[b]=As(O),c[b].c(),c[b].m(s,null))}for(;b<c.length;b+=1)c[b].d(1);c.length=o.length}},i:ut,o:ut,d(p){p&&ce(s),hi(c,p)}}}function Yo(u,s,o){let c,p,{height:f}=s;const b=ti("onionStore");return Wt(u,b,O=>o(3,p=O)),u.$$set=O=>{"height"in O&&o(0,f=O.height)},u.$$.update=()=>{u.$$.dirty&8&&o(1,{layerRadii:c}=p,c)},[f,c,b,p]}class Jo extends Zt{constructor(s){super(),Kt(this,s,Yo,Qo,Gt,{height:0})}}function Es(u,s,o){const c=u.slice();c[13]=s[o];const p=c[3](c[13])*c[10];c[14]=p;const f=c[2](c[14]);return c[15]=f,c}function Ts(u,s,o){const c=u.slice();return c[13]=s[o],c}function $o(u){const s=u.slice(),o=s[6](s[13]+1);s[21]=o;const c=Vr(s[10],s[21]);return s[22]=c[0],s[23]=c[1],s}function el(u){const s=u.slice(),o=s[7](s[13]);return s[20]=o,s}function Ns(u){let s,o,c,p;return{c(){s=oi("line"),this.h()},l(f){s=li(f,"line",{x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),Ke(s).forEach(ce),this.h()},h(){ee(s,"x1",o=u[22]*2),ee(s,"y1",c=u[2](u[23]*2+u[5])),ee(s,"x2","0"),ee(s,"y2",p=u[2](-u[5])),ee(s,"class","svelte-1j3y5u1")},m(f,b){qe(f,s,b)},p(f,b){b&1600&&o!==(o=f[22]*2)&&ee(s,"x1",o),b&1636&&c!==(c=f[2](f[23]*2+f[5]))&&ee(s,"y1",c),b&36&&p!==(p=f[2](-f[5]))&&ee(s,"y2",p)},d(f){f&&ce(s)}}}function Ms(u){let s,o,c;return{c(){s=oi("line"),this.h()},l(p){s=li(p,"line",{x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),Ke(s).forEach(ce),this.h()},h(){ee(s,"x1",o=u[20]),ee(s,"y1","0"),ee(s,"x2",c=u[20]),ee(s,"y2",u[1]),ee(s,"class","svelte-1j3y5u1")},m(p,f){qe(p,s,f)},p(p,f){f&640&&o!==(o=p[20])&&ee(s,"x1",o),f&640&&c!==(c=p[20])&&ee(s,"x2",c),f&2&&ee(s,"y2",p[1])},d(p){p&&ce(s)}}}function Ls(u){let s;function o(b,O){if(b[8]==="vertical")return Ms;if(b[8]==="radial")return Ns}function c(b,O){if(O===Ms)return el(b);if(O===Ns)return $o(b)}let p=o(u),f=p&&p(c(u,p));return{c(){f&&f.c(),s=Ct()},l(b){f&&f.l(b),s=Ct()},m(b,O){f&&f.m(b,O),qe(b,s,O)},p(b,O){p===(p=o(b))&&f?f.p(c(b,p),O):(f&&f.d(1),f=p&&p(c(b,p)),f&&(f.c(),f.m(s.parentNode,s)))},d(b){b&&ce(s),f&&f.d(b)}}}function Os(u){let s,o,c,p;return{c(){s=oi("line"),this.h()},l(f){s=li(f,"line",{x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),Ke(s).forEach(ce),this.h()},h(){ee(s,"x1","0"),ee(s,"y1",o=u[15]),ee(s,"x2",c=u[0]/2),ee(s,"y2",p=u[15]),ee(s,"class","svelte-1j3y5u1")},m(f,b){qe(f,s,b)},p(f,b){b&1052&&o!==(o=f[15])&&ee(s,"y1",o),b&1&&c!==(c=f[0]/2)&&ee(s,"x2",c),b&1052&&p!==(p=f[15])&&ee(s,"y2",p)},d(f){f&&ce(s)}}}function tl(u){let s,o,c=yt(u[9]),p=[];for(let O=0;O<c.length;O+=1)p[O]=Ls(Ts(u,c,O));let f=yt(u[4]),b=[];for(let O=0;O<f.length;O+=1)b[O]=Os(Es(u,f,O));return{c(){s=oi("g");for(let O=0;O<p.length;O+=1)p[O].c();o=Ct();for(let O=0;O<b.length;O+=1)b[O].c();this.h()},l(O){s=li(O,"g",{class:!0});var V=Ke(s);for(let B=0;B<p.length;B+=1)p[B].l(V);o=Ct();for(let B=0;B<b.length;B+=1)b[B].l(V);V.forEach(ce),this.h()},h(){ee(s,"class","cuts")},m(O,V){qe(O,s,V);for(let B=0;B<p.length;B+=1)p[B]&&p[B].m(s,null);Pe(s,o);for(let B=0;B<b.length;B+=1)b[B]&&b[B].m(s,null)},p(O,[V]){if(V&2022){c=yt(O[9]);let B;for(B=0;B<c.length;B+=1){const Z=Ts(O,c,B);p[B]?p[B].p(Z,V):(p[B]=Ls(Z),p[B].c(),p[B].m(s,o))}for(;B<p.length;B+=1)p[B].d(1);p.length=c.length}if(V&1053){f=yt(O[4]);let B;for(B=0;B<f.length;B+=1){const Z=Es(O,f,B);b[B]?b[B].p(Z,V):(b[B]=Os(Z),b[B].c(),b[B].m(s,null))}for(;B<b.length;B+=1)b[B].d(1);b.length=f.length}},i:ut,o:ut,d(O){O&&ce(s),hi(p,O),hi(b,O)}}}function il(u,s,o){let c,p,f,b,O,V,B,Z,q,{width:ue}=s,{height:F}=s,{yScale:be}=s;const te=ti("onionStore");return Wt(u,te,re=>o(12,q=re)),u.$$set=re=>{"width"in re&&o(0,ue=re.width),"height"in re&&o(1,F=re.height),"yScale"in re&&o(2,be=re.yScale)},u.$$.update=()=>{u.$$.dirty&4096&&o(10,{radius:c,cutNumbers:p,cutType:f,cutWidthScale:b,cutAngleScale:O,cutTargetDepth:V,horizontalCutNumbers:B,horizontalCutScale:Z}=q,c,(o(9,p),o(12,q)),(o(8,f),o(12,q)),(o(7,b),o(12,q)),(o(6,O),o(12,q)),(o(5,V),o(12,q)),(o(4,B),o(12,q)),(o(3,Z),o(12,q)))},[ue,F,be,Z,B,V,O,b,f,p,c,te,q]}class nl extends Zt{constructor(s){super(),Kt(this,s,il,tl,Gt,{width:0,height:1,yScale:2})}}function Rs(u,s,o){const c=u.slice();return c[30]=s[o],c}function rl(u){let s,o,c;return{c(){s=oi("path"),this.h()},l(p){s=li(p,"path",{d:!0,style:!0,class:!0}),Ke(s).forEach(ce),this.h()},h(){ee(s,"d",o=u[5].pathData),ee(s,"style",c=u[12]?`stroke: ${u[13](Math.abs(u[0]-u[8])/u[7])}; transform: translate(${-u[5].bounds.center.x+u[14](u[0])}px, ${-u[5].bounds.center.y+u[11]*.7}px)`:void 0),ee(s,"class","svelte-42u8sx"),Yt(s,"highlight",u[2]),Yt(s,"primary",u[2]&&u[3]),Yt(s,"secondary",u[2]&&u[4]),Yt(s,"thin",u[4]&&u[10]==="radial"&&u[9]===0)},m(p,f){qe(p,s,f)},p(p,f){f[0]&32&&o!==(o=p[5].pathData)&&ee(s,"d",o),f[0]&31137&&c!==(c=p[12]?`stroke: ${p[13](Math.abs(p[0]-p[8])/p[7])}; transform: translate(${-p[5].bounds.center.x+p[14](p[0])}px, ${-p[5].bounds.center.y+p[11]*.7}px)`:void 0)&&ee(s,"style",c),f[0]&4&&Yt(s,"highlight",p[2]),f[0]&12&&Yt(s,"primary",p[2]&&p[3]),f[0]&20&&Yt(s,"secondary",p[2]&&p[4]),f[0]&1552&&Yt(s,"thin",p[4]&&p[10]==="radial"&&p[9]===0)},d(p){p&&ce(s)}}}function sl(u){let s,o=yt(u[6]),c=[];for(let p=0;p<o.length;p+=1)c[p]=zs(Rs(u,o,p));return{c(){for(let p=0;p<c.length;p+=1)c[p].c();s=Ct()},l(p){for(let f=0;f<c.length;f+=1)c[f].l(p);s=Ct()},m(p,f){for(let b=0;b<c.length;b+=1)c[b]&&c[b].m(p,f);qe(p,s,f)},p(p,f){if(f[0]&64){o=yt(p[6]);let b;for(b=0;b<o.length;b+=1){const O=Rs(p,o,b);c[b]?c[b].p(O,f):(c[b]=zs(O),c[b].c(),c[b].m(s.parentNode,s))}for(;b<c.length;b+=1)c[b].d(1);c.length=o.length}},d(p){p&&ce(s),hi(c,p)}}}function zs(u){let s,o;return{c(){s=oi("path"),this.h()},l(c){s=li(c,"path",{d:!0,class:!0}),Ke(s).forEach(ce),this.h()},h(){ee(s,"d",o=u[30].pathData),ee(s,"class","subpiece svelte-42u8sx")},m(c,p){qe(c,s,p)},p(c,p){p[0]&64&&o!==(o=c[30].pathData)&&ee(s,"d",o)},d(c){c&&ce(s)}}}function al(u){let s;function o(f,b){return f[1].length?sl:rl}let c=o(u),p=c(u);return{c(){p.c(),s=Ct()},l(f){p.l(f),s=Ct()},m(f,b){p.m(f,b),qe(f,s,b)},p(f,b){c===(c=o(f))&&p?p.p(f,b):(p.d(1),p=c(f),p&&(p.c(),p.m(s.parentNode,s)))},i:ut,o:ut,d(f){f&&ce(s),p.d(f)}}}function ul(u,s,o){let c,p,f,b,O,V,B,Z,q,ue,F,be,te,re,ie,ae,{area:oe}=s,{layerNum:Me}=s,{cutNum:de}=s,{subPieces:T}=s,{highlight:Ce=!1}=s,{primary:Ve=!1}=s,{secondary:Xe=!1}=s;const nt=ti("onionStore");Wt(u,nt,De=>o(29,te=De));const Be=ti("layerPathStore");Wt(u,Be,De=>o(28,be=De));const Oe=ti("cutPathStore");Wt(u,Oe,De=>o(27,F=De));const Se=ti("horizontalCutPathStore");Wt(u,Se,De=>o(26,ue=De));const ge=ti("explodeStore");Wt(u,ge,De=>o(12,re=De));const We=ti("explodeXScaleStore");Wt(u,We,De=>o(14,ae=De));const ve=ti("colorScaleStore");return Wt(u,ve,De=>o(13,ie=De)),u.$$set=De=>{"area"in De&&o(0,oe=De.area),"layerNum"in De&&o(22,Me=De.layerNum),"cutNum"in De&&o(23,de=De.cutNum),"subPieces"in De&&o(1,T=De.subPieces),"highlight"in De&&o(2,Ce=De.highlight),"primary"in De&&o(3,Ve=De.primary),"secondary"in De&&o(4,Xe=De.secondary)},u.$$.update=()=>{u.$$.dirty[0]&536870912&&o(11,{radius:c,cutType:p,cutTargetDepthPercentage:f,meanArea:b,standardDeviation:O}=te,c,(o(10,p),o(29,te)),(o(9,f),o(29,te)),(o(8,b),o(29,te)),(o(7,O),o(29,te))),u.$$.dirty[0]&272629760&&o(25,V=be[Me]),u.$$.dirty[0]&142606336&&o(24,B=F[de]),u.$$.dirty[0]&50331648&&o(5,Z=V.intersect(B)),u.$$.dirty[0]&67108896&&o(6,q=ue.map(De=>Z.intersect(De)))},[oe,T,Ce,Ve,Xe,Z,q,O,b,f,p,c,re,ie,ae,nt,Be,Oe,Se,ge,We,ve,Me,de,B,V,ue,F,be,te]}class Ea extends Zt{constructor(s){super(),Kt(this,s,ul,al,Gt,{area:0,layerNum:22,cutNum:23,subPieces:1,highlight:2,primary:3,secondary:4},null,[-1,-1])}}function Vs(u,s,o){const c=u.slice();c[42]=s[o].xOfLeftCutIntersection,c[43]=s[o].xRange,c[44]=s[o].area,c[29]=s[o].yRange,c[30]=s[o].subPieces,c[32]=s[o].cutNum,c[27]=s[o].layerRadius,c[45]=s[o].layerNum,c[46]=s[o].numPieces,c[47]=s[o].isInnermostLayer,c[48]=s[o].isOutermostLayer,c[49]=s[o].pieceNum;const p=c[42];c[50]=p;const f=c[6][c[45]];c[37]=f;const b=c[37](c[50]);c[38]=b;const O=c[0](c[38]);c[51]=O;const V=c[7]!==0&&c[49]===c[46]-1;return c[35]=V,c}function Bs(u,s,o){const c=u.slice();c[27]=s[o].layerRadius,c[28]=s[o].pieceArea,c[29]=s[o].yRange,c[30]=s[o].subPieces,c[31]=s[o].cutX,c[32]=s[o].cutNum,c[33]=s[o].layerNumInColumn;const p=c[32]===0;c[34]=p;const f=c[33]===0;c[35]=f;const b=c[6].filter(function(...q){return u[22](c[31],...q)});c[36]=b;const O=c[36][c[33]]??c[36][0];c[37]=O;const V=c[37](c[31]);c[38]=V;const B=c[0](c[38]);return c[39]=B,c}function ol(u){let s,o,c=yt(u[2]),p=[];for(let b=0;b<c.length;b+=1)p[b]=Ds(Vs(u,c,b));const f=b=>tt(p[b],1,1,()=>{p[b]=null});return{c(){for(let b=0;b<p.length;b+=1)p[b].c();s=Ct()},l(b){for(let O=0;O<p.length;O+=1)p[O].l(b);s=Ct()},m(b,O){for(let V=0;V<p.length;V+=1)p[V]&&p[V].m(b,O);qe(b,s,O),o=!0},p(b,O){if(O[0]&134){c=yt(b[2]);let V;for(V=0;V<c.length;V+=1){const B=Vs(b,c,V);p[V]?(p[V].p(B,O),je(p[V],1)):(p[V]=Ds(B),p[V].c(),je(p[V],1),p[V].m(s.parentNode,s))}for(gi(),V=c.length;V<p.length;V+=1)f(V);_i()}},i(b){if(!o){for(let O=0;O<c.length;O+=1)je(p[O]);o=!0}},o(b){p=p.filter(Boolean);for(let O=0;O<p.length;O+=1)tt(p[O]);o=!1},d(b){b&&ce(s),hi(p,b)}}}function ll(u){let s,o,c=yt(u[3]),p=[];for(let b=0;b<c.length;b+=1)p[b]=Fs(Bs(u,c,b));const f=b=>tt(p[b],1,1,()=>{p[b]=null});return{c(){for(let b=0;b<p.length;b+=1)p[b].c();s=Ct()},l(b){for(let O=0;O<p.length;O+=1)p[O].l(b);s=Ct()},m(b,O){for(let V=0;V<p.length;V+=1)p[V]&&p[V].m(b,O);qe(b,s,O),o=!0},p(b,O){if(O[0]&42){c=yt(b[3]);let V;for(V=0;V<c.length;V+=1){const B=Bs(b,c,V);p[V]?(p[V].p(B,O),je(p[V],1)):(p[V]=Fs(B),p[V].c(),je(p[V],1),p[V].m(s.parentNode,s))}for(gi(),V=c.length;V<p.length;V+=1)f(V);_i()}},i(b){if(!o){for(let O=0;O<c.length;O+=1)je(p[O]);o=!0}},o(b){p=p.filter(Boolean);for(let O=0;O<p.length;O+=1)tt(p[O]);o=!1},d(b){b&&ce(s),hi(p,b)}}}function Ds(u){let s,o,c;return s=new Ea({props:{area:u[44],layerNum:u[45],cutNum:u[32],subPieces:u[30],highlight:u[1],primary:u[7]===0&&u[48]||u[35],secondary:u[7]===0&&u[47]}}),{c(){Rt(s.$$.fragment),o=pt()},l(p){zt(s.$$.fragment,p),o=gt(p)},m(p,f){Vt(s,p,f),qe(p,o,f),c=!0},p(p,f){const b={};f[0]&4&&(b.area=p[44]),f[0]&4&&(b.layerNum=p[45]),f[0]&4&&(b.cutNum=p[32]),f[0]&4&&(b.subPieces=p[30]),f[0]&2&&(b.highlight=p[1]),f[0]&132&&(b.primary=p[7]===0&&p[48]||p[35]),f[0]&132&&(b.secondary=p[7]===0&&p[47]),s.$set(b)},i(p){c||(je(s.$$.fragment,p),c=!0)},o(p){tt(s.$$.fragment,p),c=!1},d(p){p&&ce(o),Bt(s,p)}}}function Fs(u){let s,o;function c(...p){return u[21](u[31],...p)}return s=new Ea({props:{area:u[28],layerNum:u[33]+u[5].findLastIndex(c)+1,cutNum:u[32],subPieces:u[30],highlight:u[1],primary:u[34],secondary:u[35]}}),{c(){Rt(s.$$.fragment)},l(p){zt(s.$$.fragment,p)},m(p,f){Vt(s,p,f),o=!0},p(p,f){u=p;const b={};f[0]&8&&(b.area=u[28]),f[0]&40&&(b.layerNum=u[33]+u[5].findLastIndex(c)+1),f[0]&8&&(b.cutNum=u[32]),f[0]&8&&(b.subPieces=u[30]),f[0]&2&&(b.highlight=u[1]),f[0]&8&&(b.primary=u[34]),f[0]&8&&(b.secondary=u[35]),s.$set(b)},i(p){o||(je(s.$$.fragment,p),o=!0)},o(p){tt(s.$$.fragment,p),o=!1},d(p){Bt(s,p)}}}function hl(u){let s,o,c,p;const f=[ll,ol],b=[];function O(V,B){return V[4]==="vertical"?0:V[4]==="radial"?1:-1}return~(s=O(u))&&(o=b[s]=f[s](u)),{c(){o&&o.c(),c=Ct()},l(V){o&&o.l(V),c=Ct()},m(V,B){~s&&b[s].m(V,B),qe(V,c,B),p=!0},p(V,B){let Z=s;s=O(V),s===Z?~s&&b[s].p(V,B):(o&&(gi(),tt(b[Z],1,1,()=>{b[Z]=null}),_i()),~s?(o=b[s],o?o.p(V,B):(o=b[s]=f[s](V),o.c()),je(o,1),o.m(c.parentNode,c)):o=null)},i(V){p||(je(o),p=!0)},o(V){tt(o),p=!1},d(V){V&&ce(c),~s&&b[s].d(V)}}}function fl(u,s,o){let c,p,f,b,O,V,B,Z,q,ue,F,be,te,re,ie,ae,oe,Me,de,{yScale:T}=s,{highlightExtremes:Ce}=s;const Ve=ti("onionStore");Wt(u,Ve,Se=>o(20,de=Se));const Xe=Yi();Wt(u,Xe,Se=>o(25,Me=Se)),Pi("explodeXScaleStore",Xe);const nt=Yi();Wt(u,nt,Se=>o(24,oe=Se)),Pi("colorScaleStore",nt);const Be=(Se,ge)=>ge<=Se,Oe=(Se,ge,We)=>O[We]>Se;return u.$$set=Se=>{"yScale"in Se&&o(0,T=Se.yScale),"highlightExtremes"in Se&&o(1,Ce=Se.highlightExtremes)},u.$$.update=()=>{u.$$.dirty[0]&1048576&&o(17,{radius:c,cutTargetDepthPercentage:p,cutType:f,layerArcs:b,layerRadii:O,numHorizontalCuts:V,verticalAreas:B,radialAreas:Z,meanArea:q,standardDeviation:ue}=de,c,(o(7,p),o(20,de)),(o(4,f),o(20,de)),(o(6,b),o(20,de)),(o(5,O),o(20,de)),(o(19,B),o(20,de)),(o(18,Z),o(20,de)),(o(14,q),o(20,de)),(o(13,ue),o(20,de))),u.$$.dirty[0]&524288&&o(3,F=B.map(({cutX:Se,pieceColumn:ge},We)=>ge.map((ve,De)=>({...ve,cutX:Se,cutNum:We,layerNumInColumn:De}))).flat(2).sort((Se,ge)=>ge.pieceArea-Se.pieceArea)),u.$$.dirty[0]&262144&&o(2,be=Z.map(({layerRadius:Se,pieces:ge},We)=>ge.map((ve,De)=>({...ve,layerRadius:Se,layerNum:We,numPieces:ge.length,isInnermostLayer:We===0,isOutermostLayer:We===Z.length-1,pieceNum:De}))).flat(2).sort((Se,ge)=>ge.area-Se.area)),u.$$.dirty[0]&28&&o(16,te=f==="vertical"?F.at(-1).pieceArea:be.at(-1).area),u.$$.dirty[0]&28&&o(15,re=f==="vertical"?F[0].pieceArea:be[0].area),u.$$.dirty[0]&229376&&Qi(Xe,Me=$i().domain([te,re]).range([-c,c]),Me),u.$$.dirty[0]&90112&&o(11,ie=(te-q)/ue),u.$$.dirty[0]&57344&&o(12,ae=(re-q)/ue),u.$$.dirty[0]&6144&&Qi(nt,oe=Pa().domain([0,Math.max(ae,Math.abs(ie))]).interpolator(po("purple","orange")),oe)},[T,Ce,be,F,f,O,b,p,Ve,Xe,nt,ie,ae,ue,q,re,te,c,Z,B,de,Be,Oe]}class cl extends Zt{constructor(s){super(),Kt(this,s,fl,hl,Gt,{yScale:0,highlightExtremes:1},null,[-1,-1])}}function qs(u,s,o){const c=u.slice();return c[12]=s[o],c}function Hs(u){let s,o;return{c(){s=Re("div"),o=At(u[1]),this.h()},l(c){s=ze(c,"DIV",{class:!0,id:!0});var p=Ke(s);o=Et(p,u[1]),p.forEach(ce),this.h()},h(){ee(s,"class","legend svelte-13oh5yk"),ee(s,"id","legend-"+u[6])},m(c,p){qe(c,s,p),Pe(s,o)},p(c,p){p&2&&mi(o,c[1])},d(c){c&&ce(s)}}}function Us(u){let s,o,c,p,f=!1,b,O,V=(u[12].label||u[12].value)+"",B,Z,q,ue,F,be,te;return F=uu(u[10][0]),{c(){s=Re("div"),o=Re("input"),b=pt(),O=Re("label"),B=At(V),ue=pt(),this.h()},l(re){s=ze(re,"DIV",{class:!0});var ie=Ke(s);o=ze(ie,"INPUT",{type:!0,id:!0,name:!0,class:!0}),b=gt(ie),O=ze(ie,"LABEL",{class:!0,for:!0});var ae=Ke(O);B=Et(ae,V),ae.forEach(ce),ue=gt(ie),ie.forEach(ce),this.h()},h(){ee(o,"type","radio"),ee(o,"id",c=`${u[6]}-${u[12].slug}`),ee(o,"name","name-"+u[6]),ee(o,"class","sr-only svelte-13oh5yk"),o.__value=p=u[12].value,gn(o,o.__value),o.disabled=u[3],ee(O,"class",Z="option "+u[2]+" svelte-13oh5yk"),ee(O,"for",q=`${u[6]}-${u[12].slug}`),ee(s,"class","option svelte-13oh5yk"),F.p(o)},m(re,ie){qe(re,s,ie),Pe(s,o),o.checked=o.__value===u[0],Pe(s,b),Pe(s,O),Pe(O,B),Pe(s,ue),be||(te=On(o,"change",u[9]),be=!0)},p(re,ie){ie&32&&c!==(c=`${re[6]}-${re[12].slug}`)&&ee(o,"id",c),ie&32&&p!==(p=re[12].value)&&(o.__value=p,gn(o,o.__value),f=!0),ie&8&&(o.disabled=re[3]),(f||ie&33)&&(o.checked=o.__value===re[0]),ie&32&&V!==(V=(re[12].label||re[12].value)+"")&&mi(B,V),ie&4&&Z!==(Z="option "+re[2]+" svelte-13oh5yk")&&ee(O,"class",Z),ie&32&&q!==(q=`${re[6]}-${re[12].slug}`)&&ee(O,"for",q)},d(re){re&&ce(s),F.r(),be=!1,te()}}}function dl(u){let s,o,c,p,f=u[1]&&Hs(u),b=yt(u[5]),O=[];for(let V=0;V<b.length;V+=1)O[V]=Us(qs(u,b,V));return{c(){s=Re("div"),o=Re("div"),f&&f.c(),c=pt(),p=Re("div");for(let V=0;V<O.length;V+=1)O[V].c();this.h()},l(V){s=ze(V,"DIV",{class:!0});var B=Ke(s);o=ze(B,"DIV",{id:!0,class:!0,role:!0,"aria-labelledby":!0});var Z=Ke(o);f&&f.l(Z),c=gt(Z),p=ze(Z,"DIV",{class:!0});var q=Ke(p);for(let ue=0;ue<O.length;ue+=1)O[ue].l(q);q.forEach(ce),Z.forEach(ce),B.forEach(ce),this.h()},h(){ee(p,"class","options svelte-13oh5yk"),ee(o,"id",`group-${u[6]}`),ee(o,"class","group svelte-13oh5yk"),ee(o,"role","radiogroup"),ee(o,"aria-labelledby",`label-${u[6]}`),Yt(o,"is-top",u[4]),ee(s,"class","button-set svelte-13oh5yk")},m(V,B){qe(V,s,B),Pe(s,o),f&&f.m(o,null),Pe(o,c),Pe(o,p);for(let Z=0;Z<O.length;Z+=1)O[Z]&&O[Z].m(p,null)},p(V,[B]){if(V[1]?f?f.p(V,B):(f=Hs(V),f.c(),f.m(o,c)):f&&(f.d(1),f=null),B&109){b=yt(V[5]);let Z;for(Z=0;Z<b.length;Z+=1){const q=qs(V,b,Z);O[Z]?O[Z].p(q,B):(O[Z]=Us(q),O[Z].c(),O[Z].m(p,null))}for(;Z<O.length;Z+=1)O[Z].d(1);O.length=b.length}B&16&&Yt(o,"is-top",V[4])},i:ut,o:ut,d(V){V&&ce(s),f&&f.d(),hi(O,V)}}}function pl(u,s,o){let c,p,{options:f=[]}=s,{legend:b=""}=s,{legendPosition:O="top"}=s,{labelClass:V=""}=s,{disabled:B=!1}=s,{value:Z=f.length?f[0].value:""}=s;const q=`legend-${Math.floor(Math.random()*1e6)}`,ue=(te="")=>`${te}`.toLowerCase().replace(/\W/g,""),F=[[]];function be(){Z=this.__value,o(0,Z)}return u.$$set=te=>{"options"in te&&o(7,f=te.options),"legend"in te&&o(1,b=te.legend),"legendPosition"in te&&o(8,O=te.legendPosition),"labelClass"in te&&o(2,V=te.labelClass),"disabled"in te&&o(3,B=te.disabled),"value"in te&&o(0,Z=te.value)},u.$$.update=()=>{u.$$.dirty&128&&o(5,c=f.map(te=>({...te,val:te.value,slug:ue(te.value)}))),u.$$.dirty&256&&o(4,p=O==="top")},[Z,b,V,B,p,c,q,f,O,be,F]}class gl extends Zt{constructor(s){super(),Kt(this,s,pl,dl,Gt,{options:7,legend:1,legendPosition:8,labelClass:2,disabled:3,value:0})}}function js(u,s,o){const c=u.slice();return c[10]=s[o],c}function Ws(u){let s,o=yn(`.${u[6]}f`)(u[10])+"",c;return{c(){s=Re("span"),c=At(o),this.h()},l(p){s=ze(p,"SPAN",{class:!0});var f=Ke(s);c=Et(f,o),f.forEach(ce),this.h()},h(){ee(s,"class","tick svelte-q7ecsm")},m(p,f){qe(p,s,f),Pe(s,c)},p(p,f){f&96&&o!==(o=yn(`.${p[6]}f`)(p[10])+"")&&mi(c,o)},d(p){p&&ce(s)}}}function _l(u){let s,o,c,p,f,b,O=yt(u[5]),V=[];for(let B=0;B<O.length;B+=1)V[B]=Ws(js(u,O,B));return{c(){s=Re("div"),o=Re("div");for(let B=0;B<V.length;B+=1)V[B].c();c=pt(),p=Re("input"),this.h()},l(B){s=ze(B,"DIV",{class:!0});var Z=Ke(s);o=ze(Z,"DIV",{class:!0});var q=Ke(o);for(let ue=0;ue<V.length;ue+=1)V[ue].l(q);q.forEach(ce),c=gt(Z),p=ze(Z,"INPUT",{type:!0,"aria-label":!0,min:!0,max:!0,step:!0,class:!0}),Z.forEach(ce),this.h()},h(){ee(o,"class","ticks svelte-q7ecsm"),ee(p,"type","range"),ee(p,"aria-label",u[4]),ee(p,"min",u[1]),ee(p,"max",u[2]),ee(p,"step",u[3]),ee(p,"class","svelte-q7ecsm"),ee(s,"class","range svelte-q7ecsm")},m(B,Z){qe(B,s,Z),Pe(s,o);for(let q=0;q<V.length;q+=1)V[q]&&V[q].m(o,null);Pe(s,c),Pe(s,p),gn(p,u[0]),f||(b=[On(p,"change",u[8]),On(p,"input",u[8])],f=!0)},p(B,[Z]){if(Z&96){O=yt(B[5]);let q;for(q=0;q<O.length;q+=1){const ue=js(B,O,q);V[q]?V[q].p(ue,Z):(V[q]=Ws(ue),V[q].c(),V[q].m(o,null))}for(;q<V.length;q+=1)V[q].d(1);V.length=O.length}Z&16&&ee(p,"aria-label",B[4]),Z&2&&ee(p,"min",B[1]),Z&4&&ee(p,"max",B[2]),Z&8&&ee(p,"step",B[3]),Z&1&&gn(p,B[0])},i:ut,o:ut,d(B){B&&ce(s),hi(V,B),f=!1,ou(b)}}}function ml(u,s,o){let c,p,{min:f=0}=s,{max:b=100}=s,{step:O=1}=s,{showTicks:V=!1}=s,{value:B=f}=s,{label:Z=""}=s;const q=F=>Math.floor(F)===F?0:F.toString().split(".")[1].length||0;function ue(){B=Dr(this.value),o(0,B)}return u.$$set=F=>{"min"in F&&o(1,f=F.min),"max"in F&&o(2,b=F.max),"step"in F&&o(3,O=F.step),"showTicks"in F&&o(7,V=F.showTicks),"value"in F&&o(0,B=F.value),"label"in F&&o(4,Z=F.label)},u.$$.update=()=>{u.$$.dirty&8&&o(6,c=q(O)),u.$$.dirty&142&&o(5,p=V?Bu(f,b+O,O):[])},[B,f,b,O,Z,p,c,V,ue]}class fr extends Zt{constructor(s){super(),Kt(this,s,ml,_l,Gt,{min:1,max:2,step:3,showTicks:7,value:0,label:4})}}function Gs(u){let s,o=u[2][0]+"",c,p,f,b=u[2][1]+"",O;return{c(){s=Re("span"),c=At(o),p=pt(),f=Re("span"),O=At(b),this.h()},l(V){s=ze(V,"SPAN",{class:!0});var B=Ke(s);c=Et(B,o),B.forEach(ce),p=gt(V),f=ze(V,"SPAN",{class:!0});var Z=Ke(f);O=Et(Z,b),Z.forEach(ce),this.h()},h(){ee(s,"class","svelte-157h5as"),ee(f,"class","svelte-157h5as")},m(V,B){qe(V,s,B),Pe(s,c),qe(V,p,B),qe(V,f,B),Pe(f,O)},p(V,B){B&4&&o!==(o=V[2][0]+"")&&mi(c,o),B&4&&b!==(b=V[2][1]+"")&&mi(O,b)},d(V){V&&(ce(s),ce(p),ce(f))}}}function vl(u){let s,o,c,p,f,b,O,V,B=u[1]==="inner"&&Gs(u);return{c(){s=Re("div"),o=Re("span"),c=At(u[0]),p=pt(),f=Re("button"),B&&B.c(),this.h()},l(Z){s=ze(Z,"DIV",{class:!0});var q=Ke(s);o=ze(q,"SPAN",{class:!0,id:!0});var ue=Ke(o);c=Et(ue,u[0]),ue.forEach(ce),p=gt(q),f=ze(q,"BUTTON",{role:!0,"aria-checked":!0,"aria-labelledby":!0,class:!0});var F=Ke(f);B&&B.l(F),F.forEach(ce),q.forEach(ce),this.h()},h(){ee(o,"class","label svelte-157h5as"),ee(o,"id",u[4]),ee(f,"role","switch"),ee(f,"aria-checked",u[3]),ee(f,"aria-labelledby",u[4]),ee(f,"class","svelte-157h5as"),ee(s,"class",b="toggle toggle--"+u[1]+" svelte-157h5as")},m(Z,q){qe(Z,s,q),Pe(s,o),Pe(o,c),Pe(s,p),Pe(s,f),B&&B.m(f,null),O||(V=On(f,"click",u[5]),O=!0)},p(Z,[q]){q&1&&mi(c,Z[0]),Z[1]==="inner"?B?B.p(Z,q):(B=Gs(Z),B.c(),B.m(f,null)):B&&(B.d(1),B=null),q&8&&ee(f,"aria-checked",Z[3]),q&2&&b!==(b="toggle toggle--"+Z[1]+" svelte-157h5as")&&ee(s,"class",b)},i:ut,o:ut,d(Z){Z&&ce(s),B&&B.d(),O=!1,V()}}}function bl(u,s,o){let{label:c}=s,{style:p="inner"}=s,{options:f=["on","off"]}=s,{value:b=f[0]}=s,O=b===f[0];const V=`toggle-${Math.floor(Math.random()*1e6)}`,B=Z=>{const ue=Z.target.getAttribute("aria-checked");o(3,O=ue!=="true"),o(6,b=O?f[0]:f[1])};return u.$$set=Z=>{"label"in Z&&o(0,c=Z.label),"style"in Z&&o(1,p=Z.style),"options"in Z&&o(2,f=Z.options),"value"in Z&&o(6,b=Z.value)},[c,p,f,O,V,B,b]}class yl extends Zt{constructor(s){super(),Kt(this,s,bl,vl,Gt,{label:0,style:1,options:2,value:6})}}function Zs(u){let s,o,c,p=u[10]&&Ks(u),f=u[11]&&Xs(u);return{c(){s=Re("div"),p&&p.c(),o=pt(),f&&f.c(),this.h()},l(b){s=ze(b,"DIV",{class:!0});var O=Ke(s);p&&p.l(O),o=gt(O),f&&f.l(O),O.forEach(ce),this.h()},h(){ee(s,"class","controls top svelte-mo4xt9")},m(b,O){qe(b,s,O),p&&p.m(s,null),Pe(s,o),f&&f.m(s,null),c=!0},p(b,O){b[10]?p?(p.p(b,O),O[0]&1024&&je(p,1)):(p=Ks(b),p.c(),je(p,1),p.m(s,o)):p&&(gi(),tt(p,1,1,()=>{p=null}),_i()),b[11]?f?f.p(b,O):(f=Xs(b),f.c(),f.m(s,null)):f&&(f.d(1),f=null)},i(b){c||(je(p),c=!0)},o(b){tt(p),c=!1},d(b){b&&ce(s),p&&p.d(),f&&f.d()}}}function Ks(u){let s,o,c;function p(b){u[28](b)}let f={label:"explode",style:"slider"};return u[16]!==void 0&&(f.value=u[16]),s=new yl({props:f}),_n.push(()=>vn(s,"value",p)),{c(){Rt(s.$$.fragment)},l(b){zt(s.$$.fragment,b)},m(b,O){Vt(s,b,O),c=!0},p(b,O){const V={};!o&&O[0]&65536&&(o=!0,V.value=b[16],mn(()=>o=!1)),s.$set(V)},i(b){c||(je(s.$$.fragment,b),c=!0)},o(b){tt(s.$$.fragment,b),c=!1},d(b){Bt(s,b)}}}function Xs(u){let s,o,c,p,f,b;return{c(){s=Re("label"),o=At(`standard deviation
					`),c=Re("input"),p=At(`
					%`),this.h()},l(O){s=ze(O,"LABEL",{class:!0});var V=Ke(s);o=Et(V,`standard deviation
					`),c=ze(V,"INPUT",{type:!0}),p=Et(V,`
					%`),V.forEach(ce),this.h()},h(){ee(c,"type","number"),c.readOnly=!0,ee(s,"class","standard-deviation")},m(O,V){qe(O,s,V),Pe(s,o),Pe(s,c),gn(c,u[18].standardDeviationString),Pe(s,p),f||(b=On(c,"input",u[29]),f=!0)},p(O,V){V[0]&262144&&Dr(c.value)!==O[18].standardDeviationString&&gn(c,O[18].standardDeviationString)},d(O){O&&ce(s),f=!1,b()}}}function Qs(u){let s,o;return s=new nl({props:{width:Ai,height:u[19],yScale:u[20]}}),{c(){Rt(s.$$.fragment)},l(c){zt(s.$$.fragment,c)},m(c,p){Vt(s,c,p),o=!0},p:ut,i(c){o||(je(s.$$.fragment,c),o=!0)},o(c){tt(s.$$.fragment,c),o=!1},d(c){Bt(s,c)}}}function Ys(u){let s,o,c,p;return{c(){s=oi("clipPath"),o=oi("rect"),c=oi("circle"),this.h()},l(f){s=li(f,"clipPath",{id:!0});var b=Ke(s);o=li(b,"rect",{width:!0,height:!0,x:!0}),Ke(o).forEach(ce),b.forEach(ce),c=li(f,"circle",{r:!0,cx:!0,cy:!0,class:!0}),Ke(c).forEach(ce),this.h()},h(){ee(o,"width",Ai),ee(o,"height",u[19]),ee(o,"x",-Ai/2),ee(s,"id","layer-mask"),ee(c,"r","10"),ee(c,"cx","0"),ee(c,"cy",p=u[20](-u[17])),ee(c,"class","radial-target svelte-mo4xt9")},m(f,b){qe(f,s,b),Pe(s,o),qe(f,c,b)},p(f,b){b[0]&131072&&p!==(p=f[20](-f[17]))&&ee(c,"cy",p)},d(f){f&&(ce(s),ce(c))}}}function Js(u){let s,o,c,p,f,b,O,V,B,Z,q,ue=u[5]&&$s(u);function F(ie){u[31](ie)}let be={min:1,max:10,label:"number of cuts"};u[14]!==void 0&&(be.value=u[14]),O=new fr({props:be}),_n.push(()=>vn(O,"value",F));let te=u[6]&&ea(u),re=u[8]&&ta(u);return{c(){s=Re("div"),ue&&ue.c(),o=pt(),c=Re("p"),p=At("number of cuts: "),f=At(u[14]),b=pt(),Rt(O.$$.fragment),B=pt(),te&&te.c(),Z=pt(),re&&re.c(),this.h()},l(ie){s=ze(ie,"DIV",{class:!0});var ae=Ke(s);ue&&ue.l(ae),o=gt(ae),c=ze(ae,"P",{});var oe=Ke(c);p=Et(oe,"number of cuts: "),f=Et(oe,u[14]),oe.forEach(ce),b=gt(ae),zt(O.$$.fragment,ae),B=gt(ae),te&&te.l(ae),Z=gt(ae),re&&re.l(ae),ae.forEach(ce),this.h()},h(){ee(s,"class","controls bottom svelte-mo4xt9")},m(ie,ae){qe(ie,s,ae),ue&&ue.m(s,null),Pe(s,o),Pe(s,c),Pe(c,p),Pe(c,f),Pe(s,b),Vt(O,s,null),Pe(s,B),te&&te.m(s,null),Pe(s,Z),re&&re.m(s,null),q=!0},p(ie,ae){ie[5]?ue?(ue.p(ie,ae),ae[0]&32&&je(ue,1)):(ue=$s(ie),ue.c(),je(ue,1),ue.m(s,o)):ue&&(gi(),tt(ue,1,1,()=>{ue=null}),_i()),(!q||ae[0]&16384)&&mi(f,ie[14]);const oe={};!V&&ae[0]&16384&&(V=!0,oe.value=ie[14],mn(()=>V=!1)),O.$set(oe),ie[6]?te?(te.p(ie,ae),ae[0]&64&&je(te,1)):(te=ea(ie),te.c(),je(te,1),te.m(s,Z)):te&&(gi(),tt(te,1,1,()=>{te=null}),_i()),ie[8]?re?(re.p(ie,ae),ae[0]&256&&je(re,1)):(re=ta(ie),re.c(),je(re,1),re.m(s,null)):re&&(gi(),tt(re,1,1,()=>{re=null}),_i())},i(ie){q||(je(ue),je(O.$$.fragment,ie),je(te),je(re),q=!0)},o(ie){tt(ue),tt(O.$$.fragment,ie),tt(te),tt(re),q=!1},d(ie){ie&&ce(s),ue&&ue.d(),Bt(O),te&&te.d(),re&&re.d()}}}function $s(u){let s,o,c,p,f,b,O;function V(Z){u[30](Z)}let B={min:7,max:13,label:"number of layers"};return u[13]!==void 0&&(B.value=u[13]),f=new fr({props:B}),_n.push(()=>vn(f,"value",V)),{c(){s=Re("p"),o=At("number of layers: "),c=At(u[13]),p=pt(),Rt(f.$$.fragment)},l(Z){s=ze(Z,"P",{});var q=Ke(s);o=Et(q,"number of layers: "),c=Et(q,u[13]),q.forEach(ce),p=gt(Z),zt(f.$$.fragment,Z)},m(Z,q){qe(Z,s,q),Pe(s,o),Pe(s,c),qe(Z,p,q),Vt(f,Z,q),O=!0},p(Z,q){(!O||q[0]&8192)&&mi(c,Z[13]);const ue={};!b&&q[0]&8192&&(b=!0,ue.value=Z[13],mn(()=>b=!1)),f.$set(ue)},i(Z){O||(je(f.$$.fragment,Z),O=!0)},o(Z){tt(f.$$.fragment,Z),O=!1},d(Z){Z&&(ce(s),ce(p)),Bt(f,Z)}}}function ea(u){let s,o,c,p,f,b,O=zr(-u[1])+"",V,B,Z,q,ue,F;function be(ae){u[32](ae)}let te={legend:"cut type",options:u[21]};u[0]!==void 0&&(te.value=u[0]),s=new gl({props:te}),_n.push(()=>vn(s,"value",be));function re(ae){u[33](ae)}let ie={min:0,max:1,step:.01,label:"cut target depth percentage"};return u[1]!==void 0&&(ie.value=u[1]),q=new fr({props:ie}),_n.push(()=>vn(q,"value",re)),{c(){Rt(s.$$.fragment),c=pt(),p=Re("div"),f=Re("p"),b=At(`cut target height:
						`),V=At(O),B=At(" of outer radius"),Z=pt(),Rt(q.$$.fragment),this.h()},l(ae){zt(s.$$.fragment,ae),c=gt(ae),p=ze(ae,"DIV",{class:!0});var oe=Ke(p);f=ze(oe,"P",{});var Me=Ke(f);b=Et(Me,`cut target height:
						`),V=Et(Me,O),B=Et(Me," of outer radius"),Me.forEach(ce),Z=gt(oe),zt(q.$$.fragment,oe),oe.forEach(ce),this.h()},h(){ee(p,"class","svelte-mo4xt9"),Yt(p,"hidden",!(u[0]==="radial"&&u[7]))},m(ae,oe){Vt(s,ae,oe),qe(ae,c,oe),qe(ae,p,oe),Pe(p,f),Pe(f,b),Pe(f,V),Pe(f,B),Pe(p,Z),Vt(q,p,null),F=!0},p(ae,oe){const Me={};!o&&oe[0]&1&&(o=!0,Me.value=ae[0],mn(()=>o=!1)),s.$set(Me),(!F||oe[0]&2)&&O!==(O=zr(-ae[1])+"")&&mi(V,O);const de={};!ue&&oe[0]&2&&(ue=!0,de.value=ae[1],mn(()=>ue=!1)),q.$set(de),(!F||oe[0]&129)&&Yt(p,"hidden",!(ae[0]==="radial"&&ae[7]))},i(ae){F||(je(s.$$.fragment,ae),je(q.$$.fragment,ae),F=!0)},o(ae){tt(s.$$.fragment,ae),tt(q.$$.fragment,ae),F=!1},d(ae){ae&&(ce(c),ce(p)),Bt(s,ae),Bt(q)}}}function ta(u){let s,o,c,p,f,b,O;function V(Z){u[34](Z)}let B={min:0,max:2,label:"horizontal cuts"};return u[15]!==void 0&&(B.value=u[15]),f=new fr({props:B}),_n.push(()=>vn(f,"value",V)),{c(){s=Re("p"),o=At("horizontal cuts: "),c=At(u[15]),p=pt(),Rt(f.$$.fragment)},l(Z){s=ze(Z,"P",{});var q=Ke(s);o=Et(q,"horizontal cuts: "),c=Et(q,u[15]),q.forEach(ce),p=gt(Z),zt(f.$$.fragment,Z)},m(Z,q){qe(Z,s,q),Pe(s,o),Pe(s,c),qe(Z,p,q),Vt(f,Z,q),O=!0},p(Z,q){(!O||q[0]&32768)&&mi(c,Z[15]);const ue={};!b&&q[0]&32768&&(b=!0,ue.value=Z[15],mn(()=>b=!1)),f.$set(ue)},i(Z){O||(je(f.$$.fragment,Z),O=!0)},o(Z){tt(f.$$.fragment,Z),O=!1},d(Z){Z&&(ce(s),ce(p)),Bt(f,Z)}}}function ia(u){let s,o;return{c(){s=Re("figcaption"),o=At(u[9])},l(c){s=ze(c,"FIGCAPTION",{});var p=Ke(s);o=Et(p,u[9]),p.forEach(ce)},m(c,p){qe(c,s,p),Pe(s,o)},p(c,p){p[0]&512&&mi(o,c[9])},d(c){c&&ce(s)}}}function xl(u){let s,o,c,p,f,b,O,V,B,Z,q,ue,F=(u[10]||u[11])&&Zs(u);p=new Xo({props:{width:Ai,height:u[19],isBottom:!0,isHalfWidth:u[12]}}),f=new Jo({props:{height:u[19]}});let be=u[2]&&Qs(u),te=u[12]&&Ys(u);V=new cl({props:{yScale:u[20],highlightExtremes:u[3]}});let re=u[4]&&Js(u),ie=u[9]&&ia(u);return{c(){s=Re("figure"),F&&F.c(),o=pt(),c=oi("svg"),Rt(p.$$.fragment),Rt(f.$$.fragment),be&&be.c(),b=Ct(),te&&te.c(),O=Ct(),Rt(V.$$.fragment),Z=pt(),re&&re.c(),q=pt(),ie&&ie.c(),this.h()},l(ae){s=ze(ae,"FIGURE",{class:!0});var oe=Ke(s);F&&F.l(oe),o=gt(oe),c=li(oe,"svg",{viewBox:!0});var Me=Ke(c);zt(p.$$.fragment,Me),zt(f.$$.fragment,Me),be&&be.l(Me),b=Ct(),te&&te.l(Me),O=Ct(),zt(V.$$.fragment,Me),Me.forEach(ce),Z=gt(oe),re&&re.l(oe),q=gt(oe),ie&&ie.l(oe),oe.forEach(ce),this.h()},h(){ee(c,"viewBox",B=-Ai/2+" 0 "+Ai+" "+(u[12]?u[19]*(5/3):u[19])),ee(s,"class","svelte-mo4xt9"),Yt(s,"explode",u[16]==="on")},m(ae,oe){qe(ae,s,oe),F&&F.m(s,null),Pe(s,o),Pe(s,c),Vt(p,c,null),Vt(f,c,null),be&&be.m(c,null),Pe(c,b),te&&te.m(c,null),Pe(c,O),Vt(V,c,null),Pe(s,Z),re&&re.m(s,null),Pe(s,q),ie&&ie.m(s,null),ue=!0},p(ae,oe){ae[10]||ae[11]?F?(F.p(ae,oe),oe[0]&3072&&je(F,1)):(F=Zs(ae),F.c(),je(F,1),F.m(s,o)):F&&(gi(),tt(F,1,1,()=>{F=null}),_i());const Me={};oe[0]&4096&&(Me.isHalfWidth=ae[12]),p.$set(Me),ae[2]?be?(be.p(ae,oe),oe[0]&4&&je(be,1)):(be=Qs(ae),be.c(),je(be,1),be.m(c,b)):be&&(gi(),tt(be,1,1,()=>{be=null}),_i()),ae[12]?te?te.p(ae,oe):(te=Ys(ae),te.c(),te.m(c,O)):te&&(te.d(1),te=null);const de={};oe[0]&8&&(de.highlightExtremes=ae[3]),V.$set(de),(!ue||oe[0]&4096&&B!==(B=-Ai/2+" 0 "+Ai+" "+(ae[12]?ae[19]*(5/3):ae[19])))&&ee(c,"viewBox",B),ae[4]?re?(re.p(ae,oe),oe[0]&16&&je(re,1)):(re=Js(ae),re.c(),je(re,1),re.m(s,q)):re&&(gi(),tt(re,1,1,()=>{re=null}),_i()),ae[9]?ie?ie.p(ae,oe):(ie=ia(ae),ie.c(),ie.m(s,null)):ie&&(ie.d(1),ie=null),(!ue||oe[0]&65536)&&Yt(s,"explode",ae[16]==="on")},i(ae){ue||(je(F),je(p.$$.fragment,ae),je(f.$$.fragment,ae),je(be),je(V.$$.fragment,ae),je(re),ue=!0)},o(ae){tt(F),tt(p.$$.fragment,ae),tt(f.$$.fragment,ae),tt(be),tt(V.$$.fragment,ae),tt(re),ue=!1},d(ae){ae&&ce(s),F&&F.d(),Bt(p),Bt(f),be&&be.d(),te&&te.d(),Bt(V),re&&re.d(),ie&&ie.d()}}}const Ai=600;function wl(u,s,o){let c,p,f,b,O,V,{showCuts:B=!0}=s,{highlightExtremes:Z=!1}=s,{showControls:q=!0}=s,{controlLayers:ue=!1}=s,{controlCutType:F=!1}=s,{controlRadialDepth:be=!1}=s,{controlHorizontalCuts:te=!1}=s,{caption:re=""}=s,{cutType:ie="vertical"}=s,{cutTargetDepthPercentage:ae=0}=s,{toggleExplode:oe=!1}=s,{showStandardDeviation:Me=!1}=s,{showRadialTarget:de=!1}=s;const T=Ai/2,Ce=T*.8,Ve=$i().domain([0,T]).range([T,0]),Xe=[{value:"vertical"},{value:"radial"}];let nt=10,Be=10,Oe=0,Se="off";zi.setup(new zi.Size(1,1)),zi.view.autoUpdate=!1;const ge=Yi(new Is({radius:Ce,numLayers:nt,numCuts:Be,cutType:ie,cutTargetDepthPercentage:ae,numHorizontalCuts:Oe}));Wt(u,ge,Le=>o(18,f=Le)),Pi("onionStore",ge);const We=Yi([]);Wt(u,We,Le=>o(38,V=Le)),Pi("layerPathStore",We);const ve=Yi([]);Wt(u,ve,Le=>o(37,O=Le)),Pi("cutPathStore",ve);const De=Yi([]);Wt(u,De,Le=>o(36,b=Le)),Pi("horizontalCutPathStore",De);const Tt=Yi(Se==="on");Wt(u,Tt,Le=>o(35,p=Le)),Pi("explodeStore",Tt);function Fe(Le){Se=Le,o(16,Se)}function lt(){f.standardDeviationString=Dr(this.value),ge.set(f)}function Xt(Le){nt=Le,o(13,nt)}function ii(Le){Be=Le,o(14,Be)}function vt(Le){ie=Le,o(0,ie)}function Bi(Le){ae=Le,o(1,ae)}function bt(Le){Oe=Le,o(15,Oe)}return u.$$set=Le=>{"showCuts"in Le&&o(2,B=Le.showCuts),"highlightExtremes"in Le&&o(3,Z=Le.highlightExtremes),"showControls"in Le&&o(4,q=Le.showControls),"controlLayers"in Le&&o(5,ue=Le.controlLayers),"controlCutType"in Le&&o(6,F=Le.controlCutType),"controlRadialDepth"in Le&&o(7,be=Le.controlRadialDepth),"controlHorizontalCuts"in Le&&o(8,te=Le.controlHorizontalCuts),"caption"in Le&&o(9,re=Le.caption),"cutType"in Le&&o(0,ie=Le.cutType),"cutTargetDepthPercentage"in Le&&o(1,ae=Le.cutTargetDepthPercentage),"toggleExplode"in Le&&o(10,oe=Le.toggleExplode),"showStandardDeviation"in Le&&o(11,Me=Le.showStandardDeviation),"showRadialTarget"in Le&&o(12,de=Le.showRadialTarget)},u.$$.update=()=>{u.$$.dirty[0]&57347&&Qi(ge,f=new Is({radius:Ce,numLayers:nt,numCuts:Be,cutType:ie,cutTargetDepthPercentage:ae,numHorizontalCuts:Oe}),f),u.$$.dirty[0]&262144&&o(17,{cutTargetDepth:c}=f,c),u.$$.dirty[0]&134479872&&Qi(We,V=f.layerRadii.map(Le=>{const{layerThickness:vi}=f,ni=Le-vi,ot=[`M ${Le} ${T}`,`A ${Le} ${Le} 0 0 0 ${-Le} ${T}`,`H ${-ni}`,`A ${ni} ${ni} 0 0 1 ${ni} ${T}`,"z"].join(" ");return new zi.Path(ot)}),V),u.$$.dirty[0]&134610945&&Qi(ve,O=f.cutNumbers.map((Le,vi,ni)=>{let ot;if(ie==="vertical"){const{cutThickness:ht}=f;ot=[`M ${f.cutWidthScale(Le)} ${T}`,"V 0",`h ${ht}`,`V ${T}`,"z"].join(" ")}if(ie==="radial"){const ht=ni.length-Le,_t=f.cutAngleScale(ht),nn=f.cutAngleScale(ht-1),[wi,rn]=Vr(Ce,_t),[Ti,sn]=Vr(Ce,nn);ot=[`M 0 ${Ve(-c)}`,`L ${wi*2} ${Ve(rn*2+c)}`,`L ${Ti*2} ${Ve(sn*2+c)}`,"z"].join(" ")}return new zi.Path(ot)}),O),u.$$.dirty[0]&134479872&&Qi(De,b=[...f.horizontalCutNumbers.length?[new zi.Path([`M 0 ${Ve(Ce)}`,`V ${Ve(f.horizontalCutScale(f.horizontalCutNumbers.length-1)*Ce)}`,`H ${Ce}`,`V ${Ve(Ce)}`,"z"].join(" "))]:[],...f.horizontalCutNumbers.map(Le=>{const vi=f.horizontalCutScale(Le)*Ce,ni=Ve(vi),ot=Ve(f.horizontalCutScale(Le-1)*Ce),ht=[`M 0 ${ot}`,`V ${ni}`,`H ${Ce}`,`V ${ot}`,"z"].join(" ");return new zi.Path(ht)})].reverse(),b),u.$$.dirty[0]&65536&&Qi(Tt,p=Se==="on",p)},[ie,ae,B,Z,q,ue,F,be,te,re,oe,Me,de,nt,Be,Oe,Se,c,f,T,Ve,Xe,ge,We,ve,De,Tt,zi,Fe,lt,Xt,ii,vt,Bi,bt]}class Sl extends Zt{constructor(s){super(),Kt(this,s,wl,xl,Gt,{showCuts:2,highlightExtremes:3,showControls:4,controlLayers:5,controlCutType:6,controlRadialDepth:7,controlHorizontalCuts:8,caption:9,cutType:0,cutTargetDepthPercentage:1,toggleExplode:10,showStandardDeviation:11,showRadialTarget:12},null,[-1,-1])}}function na(u,s,o){const c=u.slice();return c[1]=s[o].type,c[2]=s[o].value,c[4]=o,c}function Cl(u){const s=u.slice(),o=s[2];return s[5]=o.src,s[6]=o.alt,s}function kl(u){let s,o,c=u[2]+"";return{c(){s=Re("p"),o=new dn(!1),this.h()},l(p){s=ze(p,"P",{class:!0});var f=Ke(s);o=pn(f,!1),f.forEach(ce),this.h()},h(){o.a=null,ee(s,"class",ha(u[1])+" svelte-rnb746")},m(p,f){qe(p,s,f),o.m(c,s)},p:ut,i:ut,o:ut,d(p){p&&ce(s)}}}function Il(u){let s,o;return{c(){s=Re("img"),this.h()},l(c){s=ze(c,"IMG",{src:!0,alt:!0}),this.h()},h(){lu(s.src,o=u[5])||ee(s,"src",o),ee(s,"alt",u[6])},m(c,p){qe(c,s,p)},p:ut,i:ut,o:ut,d(c){c&&ce(s)}}}function Pl(u){let s,o;const c=[us(u[2])];let p={};for(let f=0;f<c.length;f+=1)p=hu(p,c[f]);return s=new Sl({props:p}),{c(){Rt(s.$$.fragment)},l(f){zt(s.$$.fragment,f)},m(f,b){Vt(s,f,b),o=!0},p(f,b){const O=b&1?pu(c,[gu(us(f[2]))]):{};s.$set(O)},i(f){o||(je(s.$$.fragment,f),o=!0)},o(f){tt(s.$$.fragment,f),o=!1},d(f){Bt(s,f)}}}function ra(u){let s,o,c,p;const f=[Pl,Il,kl],b=[];function O(B,Z){return B[1]==="Component"?0:B[1]==="image"?1:2}function V(B,Z){return Z===1?Cl(B):B}return s=O(u),o=b[s]=f[s](V(u,s)),{c(){o.c(),c=Ct()},l(B){o.l(B),c=Ct()},m(B,Z){b[s].m(B,Z),qe(B,c,Z),p=!0},p(B,Z){o.p(V(B,s),Z)},i(B){p||(je(o),p=!0)},o(B){tt(o),p=!1},d(B){B&&ce(c),b[s].d(B)}}}function Al(u){let s,o=u[0].hed+"",c,p,f,b,O,V,B=u[0].author1+"",Z,q,ue,F,be=u[0].author2+"",te,re,ie,ae=yt(u[0].story),oe=[];for(let de=0;de<ae.length;de+=1)oe[de]=ra(na(u,ae,de));const Me=de=>tt(oe[de],1,1,()=>{oe[de]=null});return{c(){s=Re("h1"),c=At(o),p=pt(),f=Re("div"),b=Re("span"),O=At("By "),V=new dn(!1),Z=pt(),q=Re("span"),ue=At("With "),F=new dn(!1),te=pt();for(let de=0;de<oe.length;de+=1)oe[de].c();re=Ct(),this.h()},l(de){s=ze(de,"H1",{});var T=Ke(s);c=Et(T,o),T.forEach(ce),p=gt(de),f=ze(de,"DIV",{class:!0});var Ce=Ke(f);b=ze(Ce,"SPAN",{});var Ve=Ke(b);O=Et(Ve,"By "),V=pn(Ve,!1),Ve.forEach(ce),Z=gt(Ce),q=ze(Ce,"SPAN",{});var Xe=Ke(q);ue=Et(Xe,"With "),F=pn(Xe,!1),Xe.forEach(ce),Ce.forEach(ce),te=gt(de);for(let nt=0;nt<oe.length;nt+=1)oe[nt].l(de);re=Ct(),this.h()},h(){V.a=null,F.a=null,ee(f,"class","authors svelte-rnb746")},m(de,T){qe(de,s,T),Pe(s,c),qe(de,p,T),qe(de,f,T),Pe(f,b),Pe(b,O),V.m(B,b),Pe(f,Z),Pe(f,q),Pe(q,ue),F.m(be,q),qe(de,te,T);for(let Ce=0;Ce<oe.length;Ce+=1)oe[Ce]&&oe[Ce].m(de,T);qe(de,re,T),ie=!0},p(de,[T]){if(T&1){ae=yt(de[0].story);let Ce;for(Ce=0;Ce<ae.length;Ce+=1){const Ve=na(de,ae,Ce);oe[Ce]?(oe[Ce].p(Ve,T),je(oe[Ce],1)):(oe[Ce]=ra(Ve),oe[Ce].c(),je(oe[Ce],1),oe[Ce].m(re.parentNode,re))}for(gi(),Ce=ae.length;Ce<oe.length;Ce+=1)Me(Ce);_i()}},i(de){if(!ie){for(let T=0;T<ae.length;T+=1)je(oe[T]);ie=!0}},o(de){oe=oe.filter(Boolean);for(let T=0;T<oe.length;T+=1)tt(oe[T]);ie=!1},d(de){de&&(ce(s),ce(p),ce(f),ce(te),ce(re)),hi(oe,de)}}}function El(u){return[ti("copy")]}class Tl extends Zt{constructor(s){super(),Kt(this,s,El,Al,Gt,{})}}function sa(u,s,o){const c=u.slice();c[1]=s[o].type,c[2]=s[o].value;const p=["us","kenji"].includes(c[1]);c[3]=p;const f=c[3]?"blockquote":"svelte:fragment";return c[4]=f,c}function Nl(u){let s,o=u[1]+"",c,p;return{c(){s=Re("b"),c=At(o),p=At(":"),this.h()},l(f){s=ze(f,"B",{class:!0});var b=Ke(s);c=Et(b,o),p=Et(b,":"),b.forEach(ce),this.h()},h(){ee(s,"class","speaker svelte-chcwu")},m(f,b){qe(f,s,b),Pe(s,c),Pe(s,p)},p:ut,d(f){f&&ce(s)}}}function Ml(u){let s,o,c,p,f=u[2]+"",b,O=u[3]&&Nl(u);return{c(){s=Re(u[4]),o=Re("p"),O&&O.c(),c=pt(),p=new dn(!1),b=pt(),this.h()},l(V){s=ze(V,(u[4]||"null").toUpperCase(),{class:!0});var B=Ke(s);o=ze(B,"P",{class:!0});var Z=Ke(o);O&&O.l(Z),c=gt(Z),p=pn(Z,!1),Z.forEach(ce),b=gt(B),B.forEach(ce),this.h()},h(){p.a=null,ee(o,"class",ha(u[1])+" svelte-chcwu"),fu(u[4])(s,{class:"svelte-chcwu"})},m(V,B){qe(V,s,B),Pe(s,o),O&&O.m(o,null),Pe(o,c),p.m(f,o),Pe(s,b)},p(V,B){V[3]&&O.p(V,B)},d(V){V&&ce(s),O&&O.d()}}}function aa(u){let s=u[4]&&Ml(u);return{c(){s&&s.c()},l(o){s&&s.l(o)},m(o,c){s&&s.m(o,c)},p(o,c){o[4]&&s.p(o,c)},d(o){s&&s.d(o)}}}function Ll(u){let s,o=yt(u[0].conclusion),c=[];for(let p=0;p<o.length;p+=1)c[p]=aa(sa(u,o,p));return{c(){s=Re("section");for(let p=0;p<c.length;p+=1)c[p].c();this.h()},l(p){s=ze(p,"SECTION",{class:!0});var f=Ke(s);for(let b=0;b<c.length;b+=1)c[b].l(f);f.forEach(ce),this.h()},h(){ee(s,"class","conclusion")},m(p,f){qe(p,s,f);for(let b=0;b<c.length;b+=1)c[b]&&c[b].m(s,null)},p(p,[f]){if(f&1){o=yt(p[0].conclusion);let b;for(b=0;b<o.length;b+=1){const O=sa(p,o,b);c[b]?c[b].p(O,f):(c[b]=aa(O),c[b].c(),c[b].m(s,null))}for(;b<c.length;b+=1)c[b].d(1);c.length=o.length}},i:ut,o:ut,d(p){p&&ce(s),hi(c,p)}}}function Ol(u){return[ti("copy")]}class Rl extends Zt{constructor(s){super(),Kt(this,s,Ol,Ll,Gt,{})}}function ua(u,s,o){const c=u.slice();return c[1]=s[o].type,c[2]=s[o].value,c}function oa(u){let s,o,c=u[2]+"",p;return{c(){s=Re("p"),o=new dn(!1),p=pt(),this.h()},l(f){s=ze(f,"P",{class:!0});var b=Ke(s);o=pn(b,!1),p=gt(b),b.forEach(ce),this.h()},h(){o.a=p,ee(s,"class",u[1])},m(f,b){qe(f,s,b),o.m(c,s),Pe(s,p)},p:ut,d(f){f&&ce(s)}}}function zl(u){let s,o=yt(u[0].appendix),c=[];for(let p=0;p<o.length;p+=1)c[p]=oa(ua(u,o,p));return{c(){s=Re("section");for(let p=0;p<c.length;p+=1)c[p].c();this.h()},l(p){s=ze(p,"SECTION",{class:!0});var f=Ke(s);for(let b=0;b<c.length;b+=1)c[b].l(f);f.forEach(ce),this.h()},h(){ee(s,"class","appendix")},m(p,f){qe(p,s,f);for(let b=0;b<c.length;b+=1)c[b]&&c[b].m(s,null)},p(p,[f]){if(f&1){o=yt(p[0].appendix);let b;for(b=0;b<o.length;b+=1){const O=ua(p,o,b);c[b]?c[b].p(O,f):(c[b]=oa(O),c[b].c(),c[b].m(s,null))}for(;b<c.length;b+=1)c[b].d(1);c.length=o.length}},i:ut,o:ut,d(p){p&&ce(s),hi(c,p)}}}function Vl(u){return[ti("copy")]}class Bl extends Zt{constructor(s){super(),Kt(this,s,Vl,zl,Gt,{})}}function Dl(u){let s,o,c,p,f,b,O,V,B,Z;return s=new xu({}),c=new Cu({}),f=new Tl({}),O=new Rl({}),B=new Bl({}),{c(){Rt(s.$$.fragment),o=pt(),Rt(c.$$.fragment),p=pt(),Rt(f.$$.fragment),b=pt(),Rt(O.$$.fragment),V=pt(),Rt(B.$$.fragment)},l(q){zt(s.$$.fragment,q),o=gt(q),zt(c.$$.fragment,q),p=gt(q),zt(f.$$.fragment,q),b=gt(q),zt(O.$$.fragment,q),V=gt(q),zt(B.$$.fragment,q)},m(q,ue){Vt(s,q,ue),qe(q,o,ue),Vt(c,q,ue),qe(q,p,ue),Vt(f,q,ue),qe(q,b,ue),Vt(O,q,ue),qe(q,V,ue),Vt(B,q,ue),Z=!0},p:ut,i(q){Z||(je(s.$$.fragment,q),je(c.$$.fragment,q),je(f.$$.fragment,q),je(O.$$.fragment,q),je(B.$$.fragment,q),Z=!0)},o(q){tt(s.$$.fragment,q),tt(c.$$.fragment,q),tt(f.$$.fragment,q),tt(O.$$.fragment,q),tt(B.$$.fragment,q),Z=!1},d(q){q&&(ce(o),ce(p),ce(b),ce(V)),Bt(s,q),Bt(c,q),Bt(f,q),Bt(O,q),Bt(B,q)}}}function Fl(u){const s=ti("copy");return console.log({copy:s}),[]}class ql extends Zt{constructor(s){super(),Kt(this,s,Fl,Dl,Gt,{})}}const Hl=[{type:"text",value:"This is a story about onions and math."},{type:"small",value:"Not your taste? Try something else from <a href=https://pudding.cool>The Pudding</a>."},{type:"text",value:"Tens of millions of people are curious about how to properly dice an onion, <a href=https://www.youtube.com/results?search_query=how+to+dice+an+onion target=_blank rel=noreferrer>according to YouTube</a>."},{type:"text",value:"In 2021, renowned chef / food journalist J. Kenji López-Alt <a href=https://www.instagram.com/p/CV6L30MBFy8/ target=_blank rel=noreferrer>broke out some math</a> to optimize a technique for getting uniform piece sizes. How does it work?"}],Ul="Dicing an Onion, The Mathematically Optimal Way",jl="<a target=_blank rel=noreferrer href=https://pudding.cool/author/andrew-aquino>Andrew Aquino</a>",Wl="<a target=_blank rel=noreferrer href=https://pudding.cool/author/russell-samora>Russell Samora</a>",Gl=[{type:"text",value:"This is an onion. It’s also a series of concentric circles. What’s the best way to cut it? That is, how do we get the most uniform piece size?"},{type:"Component",value:{showControls:"false",showCuts:"false"}},{type:"text",value:"The average onion has 7-13 layers. For the sake of example, let’s assume our onion has 10 layers."},{type:"text",value:"Let’s try a common approach - <mark>all vertical cuts</mark>."},{type:"text",value:"The pieces <strong class=primary>near the center line</strong> are fairly consistent in shape and size."},{type:"text",value:"But <strong class=secondary>along the bottom</strong> there are some noticeably larger pieces. When you dice an onion, you’re probably not imagining pieces like these."},{type:"Component",value:{showControls:"false",highlightExtremes:"true"}},{type:"text",value:"This inconsistency can be measured by calculating the <strong>standard deviation</strong> of our pieces’ areas. A higher value means a greater variation in piece size."},{type:"Component",value:{toggleExplode:"true",showStandardDeviation:"true",caption:"Adjust the slider to see how the standard deviation changes with the number of cuts."}},{type:"text",value:"Okay, let’s try a different technique - <mark>radial cuts</mark>."},{type:"text",value:"The piece size still isn’t very consistent - those <strong class=primary>near the outside</strong> are much larger than those <strong class=secondary>near the center</strong>."},{type:"Component",value:{showControls:"false",cutType:"radial",highlightExtremes:"true"}},{type:"text",value:"How does the standard deviation of pieces cut radially compare to those cut vertically?"},{type:"Component",value:{cutType:"radial",controlCutType:"true",toggleExplode:"true",showStandardDeviation:"true"}},{type:"text",value:"The standard deviation when cutting radially is greater (57.7% versus 37.3%), which means that our piece size is less consistent."},{type:"text",value:"But we can improve the radial cut strategy. Kenji claims that the most uniform pieces can be produced by <strong>aiming at a point ~60% of the onion’s radius below the cutting surface.</strong>"},{type:"text",value:"The pieces now look more consistent, except for a few smaller ones <strong class=primary>along the bottom</strong>."},{type:"Component",value:{showControls:"false",cutType:"radial",cutTargetDepthPercentage:"0.6",highlightExtremes:"true",showStandardDeviation:"true",showRadialTarget:"true"}},{type:"text",value:"Does the math confirm ~60% depth as the superior technique? Indeed, 34.5% is the smallest standard deviation we’ve seen so far."},{type:"text",value:"Dr. Dylan Poulsen, associate professor of mathematics at Washington College, <a href=https://medium.com/@drspoulsen/a-solution-to-the-onion-problem-of-j-kenji-l%C3%B3pez-alt-c3c4ab22e67c target=_blank rel=noreferrer>found</a> <a href=https://drspoulsen.github.io/MARP/ target=_blank rel=noreferrer>that</a> the ideal “onion constant” is about ~55.731% depth."},{type:"text",value:"But we can improve the radial cut strategy even more!"},{type:"text",value:"Dr. Poulsen’s analysis is based on making <em>infinitely many cuts</em> into an onion with <em>infinitely many layers</em>. The diagrams from Kenji’s claim show 10 cuts being made into an onion with 10 layers. How can we optimize that?"},{type:"text",value:"<mark>would another visualization help here?</mark>"},{type:"Component",value:{controlCutType:"true",cutType:"radial",controlRadialDepth:"true",cutTargetDepthPercentage:"0.96",toggleExplode:"true",showStandardDeviation:"true"}},{type:"text",value:"When making 10 cuts into a 10-layer onion, the smallest standard deviation occurs when making radial cuts <strong>aimed 96% of the onion’s radius below the cutting surface.</strong>"},{type:"text",value:"—"},{type:"text",value:"Another popular technique is to make 1-2 horizontal cuts before vertical, <a href=https://www.youtube.com/watch?v=BuebC0CfD8E&t=79s target=_blank rel=noreferrer>which Kenji recommended in 2016</a>. What does the math say about this strategy?"},{type:"text",value:"Here are the minimum standard deviations for every combination of layer numbers, vertical/radial cut numbers, radial cut depth, and horizontal cut numbers:"},{type:"text",value:"<mark>(This image of data is presented as a rough draft. What’s the best way to visualize it?)</mark>"},{type:"image",value:{src:"https://github.com/the-pudding/onion/blob/main/src/data/onion-standard-deviation-optimal.png?raw=true",alt:"minimum standard deviations for every onion dicing configuration"}},{type:"text",value:"Insights"},{type:"text",value:"* It turns out that making horizontal cuts almost never helps with consistency."},{type:"text",value:"* Radial cuts are usually more consistent than vertical cuts, but you have to aim below the center of the onion."},{type:"text",value:"* The ideal radial depth varies, but it’s always ≥48%. (Recall that this converges to the “onion constant” of ~55.731%, mentioned above.)"},{type:"text",value:"<strong>Explore all the possibilities below</strong>."},{type:"Component",value:{controlLayers:"true",controlCutType:"true",controlRadialDepth:"true",controlHorizontalCuts:"true",toggleExplode:"true",showStandardDeviation:"true"}}],Zl=[{type:"text",value:"Armed with this knowledge, we can apply the optimal dicing strategy to any onion. 🥷But how big a difference does being mathematically optimal make? We got in touch with Kenji to find out."},{type:"us",value:"How much does uniformity matter?"},{type:"kenji",value:"<em>It matters*</em> far more for winning internet debates and solving interesting math problems than it does for cooking. For home cooks, having onion dice that are a little off from perfect is not really an issue anyone should seriously worry about."},{type:"note",value:"*Emphasis our own"},{type:"text",value:"Good enough for us!"}],Kl=[{type:"text",value:"<mark>Appendix (a.k.a bonus nerd content): How do you calculate the area of an onion piece?</mark>"}],la={intro:Hl,hed:Ul,author1:jl,author2:Wl,story:Gl,conclusion:Zl,appendix:Kl};function Xl(){console.log("--- --- --- --- --- ---"),console.log("svelte-starter: 5.14.0"),console.log("build: 2024-05-30-16:21"),console.log("--- --- --- --- --- ---")}function Ql(u){let s,o,c,p;return s=new bu({props:{title:u[1],description:u[2],url:u[3],preloadFont:u[0],keywords:u[4]}}),c=new ql({}),{c(){Rt(s.$$.fragment),o=pt(),Rt(c.$$.fragment)},l(f){zt(s.$$.fragment,f),o=gt(f),zt(c.$$.fragment,f)},m(f,b){Vt(s,f,b),qe(f,o,b),Vt(c,f,b),p=!0},p:ut,i(f){p||(je(s.$$.fragment,f),je(c.$$.fragment,f),p=!0)},o(f){tt(s.$$.fragment,f),tt(c.$$.fragment,f),p=!1},d(f){f&&ce(o),Bt(s,f),Bt(c,f)}}}function Yl(u,s,o){let{data:c}=s;Xl();const p=["https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Regular.woff2","https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Bold.woff2","https://pudding.cool/assets/fonts/national/National2Web-Regular.woff2","https://pudding.cool/assets/fonts/national/National2Web-Bold.woff2"],{title:f,description:b,url:O,keywords:V}=la;return Pi("copy",la),Pi("data",c.data),u.$$set=B=>{"data"in B&&o(5,c=B.data)},[p,f,b,O,V,c]}class sh extends Zt{constructor(s){super(),Kt(this,s,Yl,Ql,Gt,{data:5})}}export{sh as component};
