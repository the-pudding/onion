import{s as Xt,f as Be,e as Tt,B as Ea,g as Fe,d as pe,j as re,u as Ae,v as ft,C as _i,i as je,D as Ta,h as Ye,E as hi,a as _t,H as Zn,c as mt,r as Xn,F as Ws,G as Na,l as At,m as Et,I as vi,J as bi,A as $t,K as ii,L as Oi,M as nn,n as mi,N as Ma,O as on,P as In,Q as La,R as wr,p as ln,S as hn,T as Oa}from"../chunks/scheduler.f8afd43d.js";import{S as Kt,i as Qt,g as pi,t as $e,c as gi,a as Ue,b as Ot,d as Rt,m as zt,e as Vt,f as fn}from"../chunks/index.042959b7.js";import{e as Pt}from"../chunks/each.e59479a4.js";import{g as Ra,c as Gs,a as za,b as Va,d as Ba}from"../chunks/_commonjsHelpers.08cd8a15.js";import{w as rn}from"../chunks/index.5f6b8c75.js";import{d as Fa}from"../chunks/transform.6fe4cd5d.js";function Hr(o,a,h){const p=o.slice();return p[5]=a[h],p}function Ur(o){let a,h;return{c(){a=Be("link"),this.h()},l(p){a=Fe(p,"LINK",{rel:!0,href:!0,as:!0,type:!0,crossorigin:!0}),this.h()},h(){re(a,"rel","preload"),re(a,"href",h=o[5]),re(a,"as","font"),re(a,"type","font/woff2"),re(a,"crossorigin","")},m(p,g){je(p,a,g)},p(p,g){g&16&&h!==(h=p[5])&&re(a,"href",h)},d(p){p&&pe(a)}}}function Da(o){let a,h,p,g,c,P,O,B,D,Z,K,oe,F,be,te,ie,ee,fe,le,Me,ce,T,xe,Le,qe,nt;document.title=a=o[0];let Re=Pt(o[4]),ze=[];for(let Se=0;Se<Re.length;Se+=1)ze[Se]=Ur(Hr(o,Re,Se));return{c(){h=Be("meta"),p=Be("meta"),g=Be("meta"),c=Be("meta"),P=Be("meta"),O=Be("meta"),B=Be("meta"),D=Be("meta"),Z=Be("meta"),K=Be("meta"),F=Be("meta"),be=Be("meta"),te=Be("meta"),ie=Be("meta"),ee=Be("meta"),fe=Be("meta"),le=Be("meta"),Me=Be("meta"),ce=Be("meta"),xe=Be("meta"),Le=Be("link");for(let Se=0;Se<ze.length;Se+=1)ze[Se].c();nt=Tt(),this.h()},l(Se){const me=Ea("svelte-1htu80s",document.head);h=Fe(me,"META",{name:!0,content:!0}),p=Fe(me,"META",{name:!0,content:!0}),g=Fe(me,"META",{name:!0,content:!0}),c=Fe(me,"META",{property:!0,content:!0}),P=Fe(me,"META",{property:!0,content:!0}),O=Fe(me,"META",{property:!0,content:!0}),B=Fe(me,"META",{property:!0,content:!0}),D=Fe(me,"META",{property:!0,content:!0}),Z=Fe(me,"META",{property:!0,content:!0}),K=Fe(me,"META",{property:!0,content:!0}),F=Fe(me,"META",{property:!0,content:!0}),be=Fe(me,"META",{property:!0,content:!0}),te=Fe(me,"META",{property:!0,content:!0}),ie=Fe(me,"META",{name:!0,content:!0}),ee=Fe(me,"META",{name:!0,content:!0}),fe=Fe(me,"META",{name:!0,content:!0}),le=Fe(me,"META",{name:!0,content:!0}),Me=Fe(me,"META",{name:!0,content:!0}),ce=Fe(me,"META",{name:!0,content:!0}),xe=Fe(me,"META",{name:!0,content:!0}),Le=Fe(me,"LINK",{rel:!0,href:!0});for(let tt=0;tt<ze.length;tt+=1)ze[tt].l(me);nt=Tt(),me.forEach(pe),this.h()},h(){re(h,"name","description"),re(h,"content",o[1]),re(p,"name","author"),re(p,"content","The Pudding"),re(g,"name","news_keywords"),re(g,"content",o[3]),re(c,"property","og:title"),re(c,"content",o[0]),re(P,"property","og:site_name"),re(P,"content","The Pudding"),re(O,"property","og:url"),re(O,"content",o[2]),re(B,"property","og:description"),re(B,"content",o[1]),re(D,"property","og:type"),re(D,"content","article"),re(Z,"property","og:locale"),re(Z,"content","en_US"),re(K,"property","og:image"),re(K,"content",oe=o[2]+"/assets/social-facebook.jpg"),re(F,"property","og:image:type"),re(F,"content","image/jpeg"),re(be,"property","og:image:width"),re(be,"content","1200"),re(te,"property","og:image:height"),re(te,"content","600"),re(ie,"name","twitter:card"),re(ie,"content","summary_large_image"),re(ee,"name","twitter:site"),re(ee,"content","https://pudding.cool"),re(fe,"name","twitter:creator"),re(fe,"content","@puddingviz"),re(le,"name","twitter:title"),re(le,"content",o[0]),re(Me,"name","twitter:description"),re(Me,"content",o[1]),re(ce,"name","twitter:image:src"),re(ce,"content",T=o[2]+"/assets/social-twitter.jpg"),re(xe,"name","robots"),re(xe,"content","max-image-preview:large"),re(Le,"rel","canonical"),re(Le,"href",qe=o[2]+"/")},m(Se,me){Ae(document.head,h),Ae(document.head,p),Ae(document.head,g),Ae(document.head,c),Ae(document.head,P),Ae(document.head,O),Ae(document.head,B),Ae(document.head,D),Ae(document.head,Z),Ae(document.head,K),Ae(document.head,F),Ae(document.head,be),Ae(document.head,te),Ae(document.head,ie),Ae(document.head,ee),Ae(document.head,fe),Ae(document.head,le),Ae(document.head,Me),Ae(document.head,ce),Ae(document.head,xe),Ae(document.head,Le);for(let tt=0;tt<ze.length;tt+=1)ze[tt]&&ze[tt].m(document.head,null);Ae(document.head,nt)},p(Se,[me]){if(me&1&&a!==(a=Se[0])&&(document.title=a),me&2&&re(h,"content",Se[1]),me&8&&re(g,"content",Se[3]),me&1&&re(c,"content",Se[0]),me&4&&re(O,"content",Se[2]),me&2&&re(B,"content",Se[1]),me&4&&oe!==(oe=Se[2]+"/assets/social-facebook.jpg")&&re(K,"content",oe),me&1&&re(le,"content",Se[0]),me&2&&re(Me,"content",Se[1]),me&4&&T!==(T=Se[2]+"/assets/social-twitter.jpg")&&re(ce,"content",T),me&4&&qe!==(qe=Se[2]+"/")&&re(Le,"href",qe),me&16){Re=Pt(Se[4]);let tt;for(tt=0;tt<Re.length;tt+=1){const ve=Hr(Se,Re,tt);ze[tt]?ze[tt].p(ve,me):(ze[tt]=Ur(ve),ze[tt].c(),ze[tt].m(nt.parentNode,nt))}for(;tt<ze.length;tt+=1)ze[tt].d(1);ze.length=Re.length}},i:ft,o:ft,d(Se){pe(h),pe(p),pe(g),pe(c),pe(P),pe(O),pe(B),pe(D),pe(Z),pe(K),pe(F),pe(be),pe(te),pe(ie),pe(ee),pe(fe),pe(le),pe(Me),pe(ce),pe(xe),pe(Le),_i(ze,Se),pe(nt)}}}function qa(o,a,h){let{title:p="Title TK"}=a,{description:g="Description TK"}=a,{url:c="https://pudding.cool"}=a,{keywords:P=""}=a,{preloadFont:O=[]}=a;return o.$$set=B=>{"title"in B&&h(0,p=B.title),"description"in B&&h(1,g=B.description),"url"in B&&h(2,c=B.url),"keywords"in B&&h(3,P=B.keywords),"preloadFont"in B&&h(4,O=B.preloadFont)},[p,g,c,P,O]}class Ha extends Kt{constructor(a){super(),Qt(this,a,qa,Da,Xt,{title:0,description:1,url:2,keywords:3,preloadFont:4})}}function Ua(o){let a,h="🚧 This project is a work in progress. Please do not share the URL. 🚧";return{c(){a=Be("div"),a.textContent=h,this.h()},l(p){a=Fe(p,"DIV",{class:!0,"data-svelte-h":!0}),Ta(a)!=="svelte-1huwx5x"&&(a.textContent=h),this.h()},h(){re(a,"class","svelte-svusjd")},m(p,g){je(p,a,g)},p:ft,i:ft,o:ft,d(p){p&&pe(a)}}}class ja extends Kt{constructor(a){super(),Qt(this,a,null,Ua,Xt,{})}}function jr(o,a,h){const p=o.slice();p[1]=a[h].type,p[2]=a[h].value;const g=["us","kenji"].includes(p[1]);p[3]=g;const c=p[3]?"blockquote":"svelte:fragment";return p[4]=c,p}function Wa(o){let a,h=o[1]+"",p,g;return{c(){a=Be("b"),p=At(h),g=At(":"),this.h()},l(c){a=Fe(c,"B",{class:!0});var P=Ye(a);p=Et(P,h),g=Et(P,":"),P.forEach(pe),this.h()},h(){re(a,"class","speaker svelte-chcwu")},m(c,P){je(c,a,P),Ae(a,p),Ae(a,g)},p:ft,d(c){c&&pe(a)}}}function Ga(o){let a,h,p,g,c=o[2]+"",P,O=o[3]&&Wa(o);return{c(){a=Be(o[4]),h=Be("p"),O&&O.c(),p=_t(),g=new Zn(!1),P=_t(),this.h()},l(B){a=Fe(B,(o[4]||"null").toUpperCase(),{class:!0});var D=Ye(a);h=Fe(D,"P",{class:!0});var Z=Ye(h);O&&O.l(Z),p=mt(Z),g=Xn(Z,!1),Z.forEach(pe),P=mt(D),D.forEach(pe),this.h()},h(){g.a=null,re(h,"class",Ws(o[1])+" svelte-chcwu"),Na(o[4])(a,{class:"svelte-chcwu"})},m(B,D){je(B,a,D),Ae(a,h),O&&O.m(h,null),Ae(h,p),g.m(c,h),Ae(a,P)},p(B,D){B[3]&&O.p(B,D)},d(B){B&&pe(a),O&&O.d()}}}function Wr(o){let a=o[4]&&Ga(o);return{c(){a&&a.c()},l(h){a&&a.l(h)},m(h,p){a&&a.m(h,p)},p(h,p){h[4]&&a.p(h,p)},d(h){a&&a.d(h)}}}function Za(o){let a,h=Pt(o[0].intro),p=[];for(let g=0;g<h.length;g+=1)p[g]=Wr(jr(o,h,g));return{c(){a=Be("section");for(let g=0;g<p.length;g+=1)p[g].c();this.h()},l(g){a=Fe(g,"SECTION",{class:!0});var c=Ye(a);for(let P=0;P<p.length;P+=1)p[P].l(c);c.forEach(pe),this.h()},h(){re(a,"class","intro")},m(g,c){je(g,a,c);for(let P=0;P<p.length;P+=1)p[P]&&p[P].m(a,null)},p(g,[c]){if(c&1){h=Pt(g[0].intro);let P;for(P=0;P<h.length;P+=1){const O=jr(g,h,P);p[P]?p[P].p(O,c):(p[P]=Wr(O),p[P].c(),p[P].m(a,null))}for(;P<p.length;P+=1)p[P].d(1);p.length=h.length}},i:ft,o:ft,d(g){g&&pe(a),_i(p,g)}}}function Xa(o){return[hi("copy")]}class Ka extends Kt{constructor(a){super(),Qt(this,a,Xa,Za,Xt,{})}}function Gr(o){return Object.fromEntries(Object.entries(o).map(([a,h])=>[a,h==="true"?!0:h==="false"?!1:h]))}function Wn(o,a){return o==null||a==null?NaN:o<a?-1:o>a?1:o>=a?0:NaN}function Zs(o){let a,h,p;o.length!==2?(a=Wn,h=(O,B)=>Wn(o(O),B),p=(O,B)=>o(O)-B):(a=o===Wn||o===Fa?o:Qa,h=o,p=o);function g(O,B,D=0,Z=O.length){if(D<Z){if(a(B,B)!==0)return Z;do{const K=D+Z>>>1;h(O[K],B)<0?D=K+1:Z=K}while(D<Z)}return D}function c(O,B,D=0,Z=O.length){if(D<Z){if(a(B,B)!==0)return Z;do{const K=D+Z>>>1;h(O[K],B)<=0?D=K+1:Z=K}while(D<Z)}return D}function P(O,B,D=0,Z=O.length){const K=g(O,B,D,Z-1);return K>D&&p(O[K-1],B)>-p(O[K],B)?K-1:K}return{left:g,center:P,right:c}}function Qa(){return 0}function Ya(o){return o===null?NaN:+o}const Ja=Zs(Wn),$a=Ja.right;Zs(Ya).center;const eu=$a;function tu(o,a){let h=0,p,g=0,c=0;if(a===void 0)for(let P of o)P!=null&&(P=+P)>=P&&(p=P-g,g+=p/++h,c+=p*(P-g));else{let P=-1;for(let O of o)(O=a(O,++P,o))!=null&&(O=+O)>=O&&(p=O-g,g+=p/++h,c+=p*(O-g))}if(h>1)return c/(h-1)}function iu(o,a){const h=tu(o,a);return h&&Math.sqrt(h)}const nu=Math.sqrt(50),ru=Math.sqrt(10),su=Math.sqrt(2);function Kn(o,a,h){const p=(a-o)/Math.max(0,h),g=Math.floor(Math.log10(p)),c=p/Math.pow(10,g),P=c>=nu?10:c>=ru?5:c>=su?2:1;let O,B,D;return g<0?(D=Math.pow(10,-g)/P,O=Math.round(o*D),B=Math.round(a*D),O/D<o&&++O,B/D>a&&--B,D=-D):(D=Math.pow(10,g)*P,O=Math.round(o/D),B=Math.round(a/D),O*D<o&&++O,B*D>a&&--B),B<O&&.5<=h&&h<2?Kn(o,a,h*2):[O,B,D]}function au(o,a,h){if(a=+a,o=+o,h=+h,!(h>0))return[];if(o===a)return[o];const p=a<o,[g,c,P]=p?Kn(a,o,h):Kn(o,a,h);if(!(c>=g))return[];const O=c-g+1,B=new Array(O);if(p)if(P<0)for(let D=0;D<O;++D)B[D]=(c-D)/-P;else for(let D=0;D<O;++D)B[D]=(c-D)*P;else if(P<0)for(let D=0;D<O;++D)B[D]=(g+D)/-P;else for(let D=0;D<O;++D)B[D]=(g+D)*P;return B}function _r(o,a,h){return a=+a,o=+o,h=+h,Kn(o,a,h)[2]}function uu(o,a,h){a=+a,o=+o,h=+h;const p=a<o,g=p?_r(a,o,h):_r(o,a,h);return(p?-1:1)*(g<0?1/-g:g)}function ou(o,a){let h=0,p=0;if(a===void 0)for(let g of o)g!=null&&(g=+g)>=g&&(++h,p+=g);else{let g=-1;for(let c of o)(c=a(c,++g,o))!=null&&(c=+c)>=c&&(++h,p+=c)}if(h)return p/h}function lu(o,a,h){o=+o,a=+a,h=(g=arguments.length)<2?(a=o,o=0,1):g<3?1:+h;for(var p=-1,g=Math.max(0,Math.ceil((a-o)/h))|0,c=new Array(g);++p<g;)c[p]=o+p*h;return c}function Sr(o,a,h){o.prototype=a.prototype=h,h.constructor=o}function Xs(o,a){var h=Object.create(o.prototype);for(var p in a)h[p]=a[p];return h}function Tn(){}var Pn=.7,Qn=1/Pn,un="\\s*([+-]?\\d+)\\s*",An="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hu=/^#([0-9a-f]{3,8})$/,fu=new RegExp(`^rgb\\(${un},${un},${un}\\)$`),cu=new RegExp(`^rgb\\(${xi},${xi},${xi}\\)$`),du=new RegExp(`^rgba\\(${un},${un},${un},${An}\\)$`),pu=new RegExp(`^rgba\\(${xi},${xi},${xi},${An}\\)$`),gu=new RegExp(`^hsl\\(${An},${xi},${xi}\\)$`),_u=new RegExp(`^hsla\\(${An},${xi},${xi},${An}\\)$`),Zr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Sr(Tn,En,{copy(o){return Object.assign(new this.constructor,this,o)},displayable(){return this.rgb().displayable()},hex:Xr,formatHex:Xr,formatHex8:mu,formatHsl:vu,formatRgb:Kr,toString:Kr});function Xr(){return this.rgb().formatHex()}function mu(){return this.rgb().formatHex8()}function vu(){return Ks(this).formatHsl()}function Kr(){return this.rgb().formatRgb()}function En(o){var a,h;return o=(o+"").trim().toLowerCase(),(a=hu.exec(o))?(h=a[1].length,a=parseInt(a[1],16),h===6?Qr(a):h===3?new ni(a>>8&15|a>>4&240,a>>4&15|a&240,(a&15)<<4|a&15,1):h===8?Fn(a>>24&255,a>>16&255,a>>8&255,(a&255)/255):h===4?Fn(a>>12&15|a>>8&240,a>>8&15|a>>4&240,a>>4&15|a&240,((a&15)<<4|a&15)/255):null):(a=fu.exec(o))?new ni(a[1],a[2],a[3],1):(a=cu.exec(o))?new ni(a[1]*255/100,a[2]*255/100,a[3]*255/100,1):(a=du.exec(o))?Fn(a[1],a[2],a[3],a[4]):(a=pu.exec(o))?Fn(a[1]*255/100,a[2]*255/100,a[3]*255/100,a[4]):(a=gu.exec(o))?$r(a[1],a[2]/100,a[3]/100,1):(a=_u.exec(o))?$r(a[1],a[2]/100,a[3]/100,a[4]):Zr.hasOwnProperty(o)?Qr(Zr[o]):o==="transparent"?new ni(NaN,NaN,NaN,0):null}function Qr(o){return new ni(o>>16&255,o>>8&255,o&255,1)}function Fn(o,a,h,p){return p<=0&&(o=a=h=NaN),new ni(o,a,h,p)}function bu(o){return o instanceof Tn||(o=En(o)),o?(o=o.rgb(),new ni(o.r,o.g,o.b,o.opacity)):new ni}function mr(o,a,h,p){return arguments.length===1?bu(o):new ni(o,a,h,p??1)}function ni(o,a,h,p){this.r=+o,this.g=+a,this.b=+h,this.opacity=+p}Sr(ni,mr,Xs(Tn,{brighter(o){return o=o==null?Qn:Math.pow(Qn,o),new ni(this.r*o,this.g*o,this.b*o,this.opacity)},darker(o){return o=o==null?Pn:Math.pow(Pn,o),new ni(this.r*o,this.g*o,this.b*o,this.opacity)},rgb(){return this},clamp(){return new ni(Xi(this.r),Xi(this.g),Xi(this.b),Yn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yr,formatHex:Yr,formatHex8:yu,formatRgb:Jr,toString:Jr}));function Yr(){return`#${Gi(this.r)}${Gi(this.g)}${Gi(this.b)}`}function yu(){return`#${Gi(this.r)}${Gi(this.g)}${Gi(this.b)}${Gi((isNaN(this.opacity)?1:this.opacity)*255)}`}function Jr(){const o=Yn(this.opacity);return`${o===1?"rgb(":"rgba("}${Xi(this.r)}, ${Xi(this.g)}, ${Xi(this.b)}${o===1?")":`, ${o})`}`}function Yn(o){return isNaN(o)?1:Math.max(0,Math.min(1,o))}function Xi(o){return Math.max(0,Math.min(255,Math.round(o)||0))}function Gi(o){return o=Xi(o),(o<16?"0":"")+o.toString(16)}function $r(o,a,h,p){return p<=0?o=a=h=NaN:h<=0||h>=1?o=a=NaN:a<=0&&(o=NaN),new di(o,a,h,p)}function Ks(o){if(o instanceof di)return new di(o.h,o.s,o.l,o.opacity);if(o instanceof Tn||(o=En(o)),!o)return new di;if(o instanceof di)return o;o=o.rgb();var a=o.r/255,h=o.g/255,p=o.b/255,g=Math.min(a,h,p),c=Math.max(a,h,p),P=NaN,O=c-g,B=(c+g)/2;return O?(a===c?P=(h-p)/O+(h<p)*6:h===c?P=(p-a)/O+2:P=(a-h)/O+4,O/=B<.5?c+g:2-c-g,P*=60):O=B>0&&B<1?0:P,new di(P,O,B,o.opacity)}function xu(o,a,h,p){return arguments.length===1?Ks(o):new di(o,a,h,p??1)}function di(o,a,h,p){this.h=+o,this.s=+a,this.l=+h,this.opacity=+p}Sr(di,xu,Xs(Tn,{brighter(o){return o=o==null?Qn:Math.pow(Qn,o),new di(this.h,this.s,this.l*o,this.opacity)},darker(o){return o=o==null?Pn:Math.pow(Pn,o),new di(this.h,this.s,this.l*o,this.opacity)},rgb(){var o=this.h%360+(this.h<0)*360,a=isNaN(o)||isNaN(this.s)?0:this.s,h=this.l,p=h+(h<.5?h:1-h)*a,g=2*h-p;return new ni(pr(o>=240?o-240:o+120,g,p),pr(o,g,p),pr(o<120?o+240:o-120,g,p),this.opacity)},clamp(){return new di(es(this.h),Dn(this.s),Dn(this.l),Yn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const o=Yn(this.opacity);return`${o===1?"hsl(":"hsla("}${es(this.h)}, ${Dn(this.s)*100}%, ${Dn(this.l)*100}%${o===1?")":`, ${o})`}`}}));function es(o){return o=(o||0)%360,o<0?o+360:o}function Dn(o){return Math.max(0,Math.min(1,o||0))}function pr(o,a,h){return(o<60?a+(h-a)*o/60:o<180?h:o<240?a+(h-a)*(240-o)/60:a)*255}const Cr=o=>()=>o;function wu(o,a){return function(h){return o+h*a}}function Su(o,a,h){return o=Math.pow(o,h),a=Math.pow(a,h)-o,h=1/h,function(p){return Math.pow(o+p*a,h)}}function Cu(o){return(o=+o)==1?Qs:function(a,h){return h-a?Su(a,h,o):Cr(isNaN(a)?h:a)}}function Qs(o,a){var h=a-o;return h?wu(o,h):Cr(isNaN(o)?a:o)}const ts=function o(a){var h=Cu(a);function p(g,c){var P=h((g=mr(g)).r,(c=mr(c)).r),O=h(g.g,c.g),B=h(g.b,c.b),D=Qs(g.opacity,c.opacity);return function(Z){return g.r=P(Z),g.g=O(Z),g.b=B(Z),g.opacity=D(Z),g+""}}return p.gamma=o,p}(1);function ku(o,a){a||(a=[]);var h=o?Math.min(a.length,o.length):0,p=a.slice(),g;return function(c){for(g=0;g<h;++g)p[g]=o[g]*(1-c)+a[g]*c;return p}}function Iu(o){return ArrayBuffer.isView(o)&&!(o instanceof DataView)}function Pu(o,a){var h=a?a.length:0,p=o?Math.min(h,o.length):0,g=new Array(p),c=new Array(h),P;for(P=0;P<p;++P)g[P]=kr(o[P],a[P]);for(;P<h;++P)c[P]=a[P];return function(O){for(P=0;P<p;++P)c[P]=g[P](O);return c}}function Au(o,a){var h=new Date;return o=+o,a=+a,function(p){return h.setTime(o*(1-p)+a*p),h}}function Jn(o,a){return o=+o,a=+a,function(h){return o*(1-h)+a*h}}function Eu(o,a){var h={},p={},g;(o===null||typeof o!="object")&&(o={}),(a===null||typeof a!="object")&&(a={});for(g in a)g in o?h[g]=kr(o[g],a[g]):p[g]=a[g];return function(c){for(g in h)p[g]=h[g](c);return p}}var vr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gr=new RegExp(vr.source,"g");function Tu(o){return function(){return o}}function Nu(o){return function(a){return o(a)+""}}function Mu(o,a){var h=vr.lastIndex=gr.lastIndex=0,p,g,c,P=-1,O=[],B=[];for(o=o+"",a=a+"";(p=vr.exec(o))&&(g=gr.exec(a));)(c=g.index)>h&&(c=a.slice(h,c),O[P]?O[P]+=c:O[++P]=c),(p=p[0])===(g=g[0])?O[P]?O[P]+=g:O[++P]=g:(O[++P]=null,B.push({i:P,x:Jn(p,g)})),h=gr.lastIndex;return h<a.length&&(c=a.slice(h),O[P]?O[P]+=c:O[++P]=c),O.length<2?B[0]?Nu(B[0].x):Tu(a):(a=B.length,function(D){for(var Z=0,K;Z<a;++Z)O[(K=B[Z]).i]=K.x(D);return O.join("")})}function kr(o,a){var h=typeof a,p;return a==null||h==="boolean"?Cr(a):(h==="number"?Jn:h==="string"?(p=En(a))?(a=p,ts):Mu:a instanceof En?ts:a instanceof Date?Au:Iu(a)?ku:Array.isArray(a)?Pu:typeof a.valueOf!="function"&&typeof a.toString!="function"||isNaN(a)?Eu:Jn)(o,a)}function Lu(o,a){return o=+o,a=+a,function(h){return Math.round(o*(1-h)+a*h)}}function Ou(o){return Math.abs(o=Math.round(o))>=1e21?o.toLocaleString("en").replace(/,/g,""):o.toString(10)}function $n(o,a){if((h=(o=a?o.toExponential(a-1):o.toExponential()).indexOf("e"))<0)return null;var h,p=o.slice(0,h);return[p.length>1?p[0]+p.slice(2):p,+o.slice(h+1)]}function cn(o){return o=$n(Math.abs(o)),o?o[1]:NaN}function Ru(o,a){return function(h,p){for(var g=h.length,c=[],P=0,O=o[0],B=0;g>0&&O>0&&(B+O+1>p&&(O=Math.max(1,p-B)),c.push(h.substring(g-=O,g+O)),!((B+=O+1)>p));)O=o[P=(P+1)%o.length];return c.reverse().join(a)}}function zu(o){return function(a){return a.replace(/[0-9]/g,function(h){return o[+h]})}}var Vu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function er(o){if(!(a=Vu.exec(o)))throw new Error("invalid format: "+o);var a;return new Ir({fill:a[1],align:a[2],sign:a[3],symbol:a[4],zero:a[5],width:a[6],comma:a[7],precision:a[8]&&a[8].slice(1),trim:a[9],type:a[10]})}er.prototype=Ir.prototype;function Ir(o){this.fill=o.fill===void 0?" ":o.fill+"",this.align=o.align===void 0?">":o.align+"",this.sign=o.sign===void 0?"-":o.sign+"",this.symbol=o.symbol===void 0?"":o.symbol+"",this.zero=!!o.zero,this.width=o.width===void 0?void 0:+o.width,this.comma=!!o.comma,this.precision=o.precision===void 0?void 0:+o.precision,this.trim=!!o.trim,this.type=o.type===void 0?"":o.type+""}Ir.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Bu(o){e:for(var a=o.length,h=1,p=-1,g;h<a;++h)switch(o[h]){case".":p=g=h;break;case"0":p===0&&(p=h),g=h;break;default:if(!+o[h])break e;p>0&&(p=0);break}return p>0?o.slice(0,p)+o.slice(g+1):o}var Ys;function Fu(o,a){var h=$n(o,a);if(!h)return o+"";var p=h[0],g=h[1],c=g-(Ys=Math.max(-8,Math.min(8,Math.floor(g/3)))*3)+1,P=p.length;return c===P?p:c>P?p+new Array(c-P+1).join("0"):c>0?p.slice(0,c)+"."+p.slice(c):"0."+new Array(1-c).join("0")+$n(o,Math.max(0,a+c-1))[0]}function is(o,a){var h=$n(o,a);if(!h)return o+"";var p=h[0],g=h[1];return g<0?"0."+new Array(-g).join("0")+p:p.length>g+1?p.slice(0,g+1)+"."+p.slice(g+1):p+new Array(g-p.length+2).join("0")}const ns={"%":(o,a)=>(o*100).toFixed(a),b:o=>Math.round(o).toString(2),c:o=>o+"",d:Ou,e:(o,a)=>o.toExponential(a),f:(o,a)=>o.toFixed(a),g:(o,a)=>o.toPrecision(a),o:o=>Math.round(o).toString(8),p:(o,a)=>is(o*100,a),r:is,s:Fu,X:o=>Math.round(o).toString(16).toUpperCase(),x:o=>Math.round(o).toString(16)};function rs(o){return o}var ss=Array.prototype.map,as=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Du(o){var a=o.grouping===void 0||o.thousands===void 0?rs:Ru(ss.call(o.grouping,Number),o.thousands+""),h=o.currency===void 0?"":o.currency[0]+"",p=o.currency===void 0?"":o.currency[1]+"",g=o.decimal===void 0?".":o.decimal+"",c=o.numerals===void 0?rs:zu(ss.call(o.numerals,String)),P=o.percent===void 0?"%":o.percent+"",O=o.minus===void 0?"−":o.minus+"",B=o.nan===void 0?"NaN":o.nan+"";function D(K){K=er(K);var oe=K.fill,F=K.align,be=K.sign,te=K.symbol,ie=K.zero,ee=K.width,fe=K.comma,le=K.precision,Me=K.trim,ce=K.type;ce==="n"?(fe=!0,ce="g"):ns[ce]||(le===void 0&&(le=12),Me=!0,ce="g"),(ie||oe==="0"&&F==="=")&&(ie=!0,oe="0",F="=");var T=te==="$"?h:te==="#"&&/[boxX]/.test(ce)?"0"+ce.toLowerCase():"",xe=te==="$"?p:/[%p]/.test(ce)?P:"",Le=ns[ce],qe=/[defgprs%]/.test(ce);le=le===void 0?6:/[gprs]/.test(ce)?Math.max(1,Math.min(21,le)):Math.max(0,Math.min(20,le));function nt(Re){var ze=T,Se=xe,me,tt,ve;if(ce==="c")Se=Le(Re)+Se,Re="";else{Re=+Re;var wt=Re<0||1/Re<0;if(Re=isNaN(Re)?B:Le(Math.abs(Re),le),Me&&(Re=Bu(Re)),wt&&+Re==0&&be!=="+"&&(wt=!1),ze=(wt?be==="("?be:O:be==="-"||be==="("?"":be)+ze,Se=(ce==="s"?as[8+Ys/3]:"")+Se+(wt&&be==="("?")":""),qe){for(me=-1,tt=Re.length;++me<tt;)if(ve=Re.charCodeAt(me),48>ve||ve>57){Se=(ve===46?g+Re.slice(me+1):Re.slice(me))+Se,Re=Re.slice(0,me);break}}}fe&&!ie&&(Re=a(Re,1/0));var Bt=ze.length+Re.length+Se.length,Ve=Bt<ee?new Array(ee-Bt+1).join(oe):"";switch(fe&&ie&&(Re=a(Ve+Re,Ve.length?ee-Se.length:1/0),Ve=""),F){case"<":Re=ze+Re+Se+Ve;break;case"=":Re=ze+Ve+Re+Se;break;case"^":Re=Ve.slice(0,Bt=Ve.length>>1)+ze+Re+Se+Ve.slice(Bt);break;default:Re=Ve+ze+Re+Se;break}return c(Re)}return nt.toString=function(){return K+""},nt}function Z(K,oe){var F=D((K=er(K),K.type="f",K)),be=Math.max(-8,Math.min(8,Math.floor(cn(oe)/3)))*3,te=Math.pow(10,-be),ie=as[8+be/3];return function(ee){return F(te*ee)+ie}}return{format:D,formatPrefix:Z}}var qn,dn,Js;qu({thousands:",",grouping:[3],currency:["$",""]});function qu(o){return qn=Du(o),dn=qn.format,Js=qn.formatPrefix,qn}function Hu(o){return Math.max(0,-cn(Math.abs(o)))}function Uu(o,a){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(cn(a)/3)))*3-cn(Math.abs(o)))}function ju(o,a){return o=Math.abs(o),a=Math.abs(a)-o,Math.max(0,cn(a)-cn(o))+1}function Wu(o,a){switch(arguments.length){case 0:break;case 1:this.range(o);break;default:this.range(a).domain(o);break}return this}function Gu(o){return function(){return o}}function Zu(o){return+o}var us=[0,1];function sn(o){return o}function br(o,a){return(a-=o=+o)?function(h){return(h-o)/a}:Gu(isNaN(a)?NaN:.5)}function Xu(o,a){var h;return o>a&&(h=o,o=a,a=h),function(p){return Math.max(o,Math.min(a,p))}}function Ku(o,a,h){var p=o[0],g=o[1],c=a[0],P=a[1];return g<p?(p=br(g,p),c=h(P,c)):(p=br(p,g),c=h(c,P)),function(O){return c(p(O))}}function Qu(o,a,h){var p=Math.min(o.length,a.length)-1,g=new Array(p),c=new Array(p),P=-1;for(o[p]<o[0]&&(o=o.slice().reverse(),a=a.slice().reverse());++P<p;)g[P]=br(o[P],o[P+1]),c[P]=h(a[P],a[P+1]);return function(O){var B=eu(o,O,1,p)-1;return c[B](g[B](O))}}function Yu(o,a){return a.domain(o.domain()).range(o.range()).interpolate(o.interpolate()).clamp(o.clamp()).unknown(o.unknown())}function Ju(){var o=us,a=us,h=kr,p,g,c,P=sn,O,B,D;function Z(){var oe=Math.min(o.length,a.length);return P!==sn&&(P=Xu(o[0],o[oe-1])),O=oe>2?Qu:Ku,B=D=null,K}function K(oe){return oe==null||isNaN(oe=+oe)?c:(B||(B=O(o.map(p),a,h)))(p(P(oe)))}return K.invert=function(oe){return P(g((D||(D=O(a,o.map(p),Jn)))(oe)))},K.domain=function(oe){return arguments.length?(o=Array.from(oe,Zu),Z()):o.slice()},K.range=function(oe){return arguments.length?(a=Array.from(oe),Z()):a.slice()},K.rangeRound=function(oe){return a=Array.from(oe),h=Lu,Z()},K.clamp=function(oe){return arguments.length?(P=oe?!0:sn,Z()):P!==sn},K.interpolate=function(oe){return arguments.length?(h=oe,Z()):h},K.unknown=function(oe){return arguments.length?(c=oe,K):c},function(oe,F){return p=oe,g=F,Z()}}function $u(){return Ju()(sn,sn)}function eo(o,a,h,p){var g=uu(o,a,h),c;switch(p=er(p??",f"),p.type){case"s":{var P=Math.max(Math.abs(o),Math.abs(a));return p.precision==null&&!isNaN(c=Uu(g,P))&&(p.precision=c),Js(p,P)}case"":case"e":case"g":case"p":case"r":{p.precision==null&&!isNaN(c=ju(g,Math.max(Math.abs(o),Math.abs(a))))&&(p.precision=c-(p.type==="e"));break}case"f":case"%":{p.precision==null&&!isNaN(c=Hu(g))&&(p.precision=c-(p.type==="%")*2);break}}return dn(p)}function to(o){var a=o.domain;return o.ticks=function(h){var p=a();return au(p[0],p[p.length-1],h??10)},o.tickFormat=function(h,p){var g=a();return eo(g[0],g[g.length-1],h??10,p)},o.nice=function(h){h==null&&(h=10);var p=a(),g=0,c=p.length-1,P=p[g],O=p[c],B,D,Z=10;for(O<P&&(D=P,P=O,O=D,D=g,g=c,c=D);Z-- >0;){if(D=_r(P,O,h),D===B)return p[g]=P,p[c]=O,a(p);if(D>0)P=Math.floor(P/D)*D,O=Math.ceil(O/D)*D;else if(D<0)P=Math.ceil(P*D)/D,O=Math.floor(O*D)/D;else break;B=D}return o},o}function Zi(){var o=$u();return o.copy=function(){return Yu(o,Zi())},Wu.apply(o,arguments),to(o)}function io(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var $s={exports:{}};const no={},ro=Object.freeze(Object.defineProperty({__proto__:null,default:no},Symbol.toStringTag,{value:"Module"})),os=Ra(ro);var Hn={exports:{}},ls;function so(){return ls||(ls=1,function(o,a){(function(h,p){p(a)})(Gs,function(h){var p=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],g=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],c="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",P="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",O={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},B="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",D={5:B,"5module":B+" export import",6:B+" const class extends export import super"},Z=/^in(stanceof)?$/,K=new RegExp("["+P+"]"),oe=new RegExp("["+P+c+"]");function F(i,l){for(var C=65536,R=0;R<l.length;R+=2){if(C+=l[R],C>i)return!1;if(C+=l[R+1],C>=i)return!0}return!1}function be(i,l){return i<65?i===36:i<91?!0:i<97?i===95:i<123?!0:i<=65535?i>=170&&K.test(String.fromCharCode(i)):l===!1?!1:F(i,g)}function te(i,l){return i<48?i===36:i<58?!0:i<65?!1:i<91?!0:i<97?i===95:i<123?!0:i<=65535?i>=170&&oe.test(String.fromCharCode(i)):l===!1?!1:F(i,g)||F(i,p)}var ie=function(l,C){C===void 0&&(C={}),this.label=l,this.keyword=C.keyword,this.beforeExpr=!!C.beforeExpr,this.startsExpr=!!C.startsExpr,this.isLoop=!!C.isLoop,this.isAssign=!!C.isAssign,this.prefix=!!C.prefix,this.postfix=!!C.postfix,this.binop=C.binop||null,this.updateContext=null};function ee(i,l){return new ie(i,{beforeExpr:!0,binop:l})}var fe={beforeExpr:!0},le={startsExpr:!0},Me={};function ce(i,l){return l===void 0&&(l={}),l.keyword=i,Me[i]=new ie(i,l)}var T={num:new ie("num",le),regexp:new ie("regexp",le),string:new ie("string",le),name:new ie("name",le),privateId:new ie("privateId",le),eof:new ie("eof"),bracketL:new ie("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ie("]"),braceL:new ie("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ie("}"),parenL:new ie("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ie(")"),comma:new ie(",",fe),semi:new ie(";",fe),colon:new ie(":",fe),dot:new ie("."),question:new ie("?",fe),questionDot:new ie("?."),arrow:new ie("=>",fe),template:new ie("template"),invalidTemplate:new ie("invalidTemplate"),ellipsis:new ie("...",fe),backQuote:new ie("`",le),dollarBraceL:new ie("${",{beforeExpr:!0,startsExpr:!0}),eq:new ie("=",{beforeExpr:!0,isAssign:!0}),assign:new ie("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ie("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ie("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:ee("||",1),logicalAND:ee("&&",2),bitwiseOR:ee("|",3),bitwiseXOR:ee("^",4),bitwiseAND:ee("&",5),equality:ee("==/!=/===/!==",6),relational:ee("</>/<=/>=",7),bitShift:ee("<</>>/>>>",8),plusMin:new ie("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:ee("%",10),star:ee("*",10),slash:ee("/",10),starstar:new ie("**",{beforeExpr:!0}),coalesce:ee("??",1),_break:ce("break"),_case:ce("case",fe),_catch:ce("catch"),_continue:ce("continue"),_debugger:ce("debugger"),_default:ce("default",fe),_do:ce("do",{isLoop:!0,beforeExpr:!0}),_else:ce("else",fe),_finally:ce("finally"),_for:ce("for",{isLoop:!0}),_function:ce("function",le),_if:ce("if"),_return:ce("return",fe),_switch:ce("switch"),_throw:ce("throw",fe),_try:ce("try"),_var:ce("var"),_const:ce("const"),_while:ce("while",{isLoop:!0}),_with:ce("with"),_new:ce("new",{beforeExpr:!0,startsExpr:!0}),_this:ce("this",le),_super:ce("super",le),_class:ce("class",le),_extends:ce("extends",fe),_export:ce("export"),_import:ce("import",le),_null:ce("null",le),_true:ce("true",le),_false:ce("false",le),_in:ce("in",{beforeExpr:!0,binop:7}),_instanceof:ce("instanceof",{beforeExpr:!0,binop:7}),_typeof:ce("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:ce("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:ce("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},xe=/\r\n?|\n|\u2028|\u2029/,Le=new RegExp(xe.source,"g");function qe(i){return i===10||i===13||i===8232||i===8233}function nt(i,l,C){C===void 0&&(C=i.length);for(var R=l;R<C;R++){var U=i.charCodeAt(R);if(qe(U))return R<C-1&&U===13&&i.charCodeAt(R+1)===10?R+2:R+1}return-1}var Re=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ze=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Se=Object.prototype,me=Se.hasOwnProperty,tt=Se.toString,ve=Object.hasOwn||function(i,l){return me.call(i,l)},wt=Array.isArray||function(i){return tt.call(i)==="[object Array]"},Bt=Object.create(null);function Ve(i){return Bt[i]||(Bt[i]=new RegExp("^(?:"+i.replace(/ /g,"|")+")$"))}function at(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}var Wt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,ei=function(l,C){this.line=l,this.column=C};ei.prototype.offset=function(l){return new ei(this.line,this.column+l)};var vt=function(l,C,R){this.start=C,this.end=R,l.sourceFile!==null&&(this.source=l.sourceFile)};function Oe(i,l){for(var C=1,R=0;;){var U=nt(i,R,l);if(U<0)return new ei(C,l-R);++C,R=U}}var ct={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Gt=!1;function ti(i){var l={};for(var C in ct)l[C]=i&&ve(i,C)?i[C]:ct[C];if(l.ecmaVersion==="latest"?l.ecmaVersion=1e8:l.ecmaVersion==null?(!Gt&&typeof console=="object"&&console.warn&&(Gt=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),l.ecmaVersion=11):l.ecmaVersion>=2015&&(l.ecmaVersion-=2009),l.allowReserved==null&&(l.allowReserved=l.ecmaVersion<5),(!i||i.allowHashBang==null)&&(l.allowHashBang=l.ecmaVersion>=14),wt(l.onToken)){var R=l.onToken;l.onToken=function(U){return R.push(U)}}return wt(l.onComment)&&(l.onComment=oi(l,l.onComment)),l}function oi(i,l){return function(C,R,U,ne,ae,we){var Pe={type:C?"Block":"Line",value:R,start:U,end:ne};i.locations&&(Pe.loc=new vt(this,ae,we)),i.ranges&&(Pe.range=[U,ne]),l.push(Pe)}}var ot=1,dt=2,pt=4,Ki=8,wi=16,Qi=32,Pi=64,Nn=128,Ri=256,pn=ot|dt|Ri;function gn(i,l){return dt|(i?pt:0)|(l?Ki:0)}var zi=0,St=1,ri=2,bt=3,_n=4,et=5,e=function(l,C,R){this.options=l=ti(l),this.sourceFile=l.sourceFile,this.keywords=Ve(D[l.ecmaVersion>=6?6:l.sourceType==="module"?"5module":5]);var U="";l.allowReserved!==!0&&(U=O[l.ecmaVersion>=6?6:l.ecmaVersion===5?5:3],l.sourceType==="module"&&(U+=" await")),this.reservedWords=Ve(U);var ne=(U?U+" ":"")+O.strict;this.reservedWordsStrict=Ve(ne),this.reservedWordsStrictBind=Ve(ne+" "+O.strictBind),this.input=String(C),this.containsEsc=!1,R?(this.pos=R,this.lineStart=this.input.lastIndexOf(`
`,R-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(xe).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=T.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=l.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&l.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(ot),this.regexpState=null,this.privateNameStack=[]},t={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};e.prototype.parse=function(){var l=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(l)},t.inFunction.get=function(){return(this.currentVarScope().flags&dt)>0},t.inGenerator.get=function(){return(this.currentVarScope().flags&Ki)>0&&!this.currentVarScope().inClassFieldInit},t.inAsync.get=function(){return(this.currentVarScope().flags&pt)>0&&!this.currentVarScope().inClassFieldInit},t.canAwait.get=function(){for(var i=this.scopeStack.length-1;i>=0;i--){var l=this.scopeStack[i];if(l.inClassFieldInit||l.flags&Ri)return!1;if(l.flags&dt)return(l.flags&pt)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},t.allowSuper.get=function(){var i=this.currentThisScope(),l=i.flags,C=i.inClassFieldInit;return(l&Pi)>0||C||this.options.allowSuperOutsideMethod},t.allowDirectSuper.get=function(){return(this.currentThisScope().flags&Nn)>0},t.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},t.allowNewDotTarget.get=function(){var i=this.currentThisScope(),l=i.flags,C=i.inClassFieldInit;return(l&(dt|Ri))>0||C},t.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Ri)>0},e.extend=function(){for(var l=[],C=arguments.length;C--;)l[C]=arguments[C];for(var R=this,U=0;U<l.length;U++)R=l[U](R);return R},e.parse=function(l,C){return new this(C,l).parse()},e.parseExpressionAt=function(l,C,R){var U=new this(R,l,C);return U.nextToken(),U.parseExpression()},e.tokenizer=function(l,C){return new this(C,l)},Object.defineProperties(e.prototype,t);var n=e.prototype,r=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;n.strictDirective=function(i){if(this.options.ecmaVersion<5)return!1;for(;;){ze.lastIndex=i,i+=ze.exec(this.input)[0].length;var l=r.exec(this.input.slice(i));if(!l)return!1;if((l[1]||l[2])==="use strict"){ze.lastIndex=i+l[0].length;var C=ze.exec(this.input),R=C.index+C[0].length,U=this.input.charAt(R);return U===";"||U==="}"||xe.test(C[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(U)||U==="!"&&this.input.charAt(R+1)==="=")}i+=l[0].length,ze.lastIndex=i,i+=ze.exec(this.input)[0].length,this.input[i]===";"&&i++}},n.eat=function(i){return this.type===i?(this.next(),!0):!1},n.isContextual=function(i){return this.type===T.name&&this.value===i&&!this.containsEsc},n.eatContextual=function(i){return this.isContextual(i)?(this.next(),!0):!1},n.expectContextual=function(i){this.eatContextual(i)||this.unexpected()},n.canInsertSemicolon=function(){return this.type===T.eof||this.type===T.braceR||xe.test(this.input.slice(this.lastTokEnd,this.start))},n.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},n.semicolon=function(){!this.eat(T.semi)&&!this.insertSemicolon()&&this.unexpected()},n.afterTrailingComma=function(i,l){if(this.type===i)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),l||this.next(),!0},n.expect=function(i){this.eat(i)||this.unexpected()},n.unexpected=function(i){this.raise(i??this.start,"Unexpected token")};var s=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};n.checkPatternErrors=function(i,l){if(i){i.trailingComma>-1&&this.raiseRecoverable(i.trailingComma,"Comma is not permitted after the rest element");var C=l?i.parenthesizedAssign:i.parenthesizedBind;C>-1&&this.raiseRecoverable(C,l?"Assigning to rvalue":"Parenthesized pattern")}},n.checkExpressionErrors=function(i,l){if(!i)return!1;var C=i.shorthandAssign,R=i.doubleProto;if(!l)return C>=0||R>=0;C>=0&&this.raise(C,"Shorthand property assignments are valid only in destructuring patterns"),R>=0&&this.raiseRecoverable(R,"Redefinition of __proto__ property")},n.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},n.isSimpleAssignTarget=function(i){return i.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(i.expression):i.type==="Identifier"||i.type==="MemberExpression"};var u=e.prototype;u.parseTopLevel=function(i){var l=Object.create(null);for(i.body||(i.body=[]);this.type!==T.eof;){var C=this.parseStatement(null,!0,l);i.body.push(C)}if(this.inModule)for(var R=0,U=Object.keys(this.undefinedExports);R<U.length;R+=1){var ne=U[R];this.raiseRecoverable(this.undefinedExports[ne].start,"Export '"+ne+"' is not defined")}return this.adaptDirectivePrologue(i.body),this.next(),i.sourceType=this.options.sourceType,this.finishNode(i,"Program")};var d={kind:"loop"},f={kind:"switch"};u.isLet=function(i){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;ze.lastIndex=this.pos;var l=ze.exec(this.input),C=this.pos+l[0].length,R=this.input.charCodeAt(C);if(R===91||R===92)return!0;if(i)return!1;if(R===123||R>55295&&R<56320)return!0;if(be(R,!0)){for(var U=C+1;te(R=this.input.charCodeAt(U),!0);)++U;if(R===92||R>55295&&R<56320)return!0;var ne=this.input.slice(C,U);if(!Z.test(ne))return!0}return!1},u.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;ze.lastIndex=this.pos;var i=ze.exec(this.input),l=this.pos+i[0].length,C;return!xe.test(this.input.slice(this.pos,l))&&this.input.slice(l,l+8)==="function"&&(l+8===this.input.length||!(te(C=this.input.charCodeAt(l+8))||C>55295&&C<56320))},u.parseStatement=function(i,l,C){var R=this.type,U=this.startNode(),ne;switch(this.isLet(i)&&(R=T._var,ne="let"),R){case T._break:case T._continue:return this.parseBreakContinueStatement(U,R.keyword);case T._debugger:return this.parseDebuggerStatement(U);case T._do:return this.parseDoStatement(U);case T._for:return this.parseForStatement(U);case T._function:return i&&(this.strict||i!=="if"&&i!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(U,!1,!i);case T._class:return i&&this.unexpected(),this.parseClass(U,!0);case T._if:return this.parseIfStatement(U);case T._return:return this.parseReturnStatement(U);case T._switch:return this.parseSwitchStatement(U);case T._throw:return this.parseThrowStatement(U);case T._try:return this.parseTryStatement(U);case T._const:case T._var:return ne=ne||this.value,i&&ne!=="var"&&this.unexpected(),this.parseVarStatement(U,ne);case T._while:return this.parseWhileStatement(U);case T._with:return this.parseWithStatement(U);case T.braceL:return this.parseBlock(!0,U);case T.semi:return this.parseEmptyStatement(U);case T._export:case T._import:if(this.options.ecmaVersion>10&&R===T._import){ze.lastIndex=this.pos;var ae=ze.exec(this.input),we=this.pos+ae[0].length,Pe=this.input.charCodeAt(we);if(Pe===40||Pe===46)return this.parseExpressionStatement(U,this.parseExpression())}return this.options.allowImportExportEverywhere||(l||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),R===T._import?this.parseImport(U):this.parseExport(U,C);default:if(this.isAsyncFunction())return i&&this.unexpected(),this.next(),this.parseFunctionStatement(U,!0,!i);var Je=this.value,rt=this.parseExpression();return R===T.name&&rt.type==="Identifier"&&this.eat(T.colon)?this.parseLabeledStatement(U,Je,rt,i):this.parseExpressionStatement(U,rt)}},u.parseBreakContinueStatement=function(i,l){var C=l==="break";this.next(),this.eat(T.semi)||this.insertSemicolon()?i.label=null:this.type!==T.name?this.unexpected():(i.label=this.parseIdent(),this.semicolon());for(var R=0;R<this.labels.length;++R){var U=this.labels[R];if((i.label==null||U.name===i.label.name)&&(U.kind!=null&&(C||U.kind==="loop")||i.label&&C))break}return R===this.labels.length&&this.raise(i.start,"Unsyntactic "+l),this.finishNode(i,C?"BreakStatement":"ContinueStatement")},u.parseDebuggerStatement=function(i){return this.next(),this.semicolon(),this.finishNode(i,"DebuggerStatement")},u.parseDoStatement=function(i){return this.next(),this.labels.push(d),i.body=this.parseStatement("do"),this.labels.pop(),this.expect(T._while),i.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(T.semi):this.semicolon(),this.finishNode(i,"DoWhileStatement")},u.parseForStatement=function(i){this.next();var l=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(d),this.enterScope(0),this.expect(T.parenL),this.type===T.semi)return l>-1&&this.unexpected(l),this.parseFor(i,null);var C=this.isLet();if(this.type===T._var||this.type===T._const||C){var R=this.startNode(),U=C?"let":this.value;return this.next(),this.parseVar(R,!0,U),this.finishNode(R,"VariableDeclaration"),(this.type===T._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&R.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===T._in?l>-1&&this.unexpected(l):i.await=l>-1),this.parseForIn(i,R)):(l>-1&&this.unexpected(l),this.parseFor(i,R))}var ne=this.isContextual("let"),ae=!1,we=new s,Pe=this.parseExpression(l>-1?"await":!0,we);return this.type===T._in||(ae=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===T._in?l>-1&&this.unexpected(l):i.await=l>-1),ne&&ae&&this.raise(Pe.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(Pe,!1,we),this.checkLValPattern(Pe),this.parseForIn(i,Pe)):(this.checkExpressionErrors(we,!0),l>-1&&this.unexpected(l),this.parseFor(i,Pe))},u.parseFunctionStatement=function(i,l,C){return this.next(),this.parseFunction(i,m|(C?0:x),!1,l)},u.parseIfStatement=function(i){return this.next(),i.test=this.parseParenExpression(),i.consequent=this.parseStatement("if"),i.alternate=this.eat(T._else)?this.parseStatement("if"):null,this.finishNode(i,"IfStatement")},u.parseReturnStatement=function(i){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(T.semi)||this.insertSemicolon()?i.argument=null:(i.argument=this.parseExpression(),this.semicolon()),this.finishNode(i,"ReturnStatement")},u.parseSwitchStatement=function(i){this.next(),i.discriminant=this.parseParenExpression(),i.cases=[],this.expect(T.braceL),this.labels.push(f),this.enterScope(0);for(var l,C=!1;this.type!==T.braceR;)if(this.type===T._case||this.type===T._default){var R=this.type===T._case;l&&this.finishNode(l,"SwitchCase"),i.cases.push(l=this.startNode()),l.consequent=[],this.next(),R?l.test=this.parseExpression():(C&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),C=!0,l.test=null),this.expect(T.colon)}else l||this.unexpected(),l.consequent.push(this.parseStatement(null));return this.exitScope(),l&&this.finishNode(l,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(i,"SwitchStatement")},u.parseThrowStatement=function(i){return this.next(),xe.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),i.argument=this.parseExpression(),this.semicolon(),this.finishNode(i,"ThrowStatement")};var _=[];u.parseCatchClauseParam=function(){var i=this.parseBindingAtom(),l=i.type==="Identifier";return this.enterScope(l?Qi:0),this.checkLValPattern(i,l?_n:ri),this.expect(T.parenR),i},u.parseTryStatement=function(i){if(this.next(),i.block=this.parseBlock(),i.handler=null,this.type===T._catch){var l=this.startNode();this.next(),this.eat(T.parenL)?l.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),l.param=null,this.enterScope(0)),l.body=this.parseBlock(!1),this.exitScope(),i.handler=this.finishNode(l,"CatchClause")}return i.finalizer=this.eat(T._finally)?this.parseBlock():null,!i.handler&&!i.finalizer&&this.raise(i.start,"Missing catch or finally clause"),this.finishNode(i,"TryStatement")},u.parseVarStatement=function(i,l,C){return this.next(),this.parseVar(i,!1,l,C),this.semicolon(),this.finishNode(i,"VariableDeclaration")},u.parseWhileStatement=function(i){return this.next(),i.test=this.parseParenExpression(),this.labels.push(d),i.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(i,"WhileStatement")},u.parseWithStatement=function(i){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),i.object=this.parseParenExpression(),i.body=this.parseStatement("with"),this.finishNode(i,"WithStatement")},u.parseEmptyStatement=function(i){return this.next(),this.finishNode(i,"EmptyStatement")},u.parseLabeledStatement=function(i,l,C,R){for(var U=0,ne=this.labels;U<ne.length;U+=1){var ae=ne[U];ae.name===l&&this.raise(C.start,"Label '"+l+"' is already declared")}for(var we=this.type.isLoop?"loop":this.type===T._switch?"switch":null,Pe=this.labels.length-1;Pe>=0;Pe--){var Je=this.labels[Pe];if(Je.statementStart===i.start)Je.statementStart=this.start,Je.kind=we;else break}return this.labels.push({name:l,kind:we,statementStart:this.start}),i.body=this.parseStatement(R?R.indexOf("label")===-1?R+"label":R:"label"),this.labels.pop(),i.label=C,this.finishNode(i,"LabeledStatement")},u.parseExpressionStatement=function(i,l){return i.expression=l,this.semicolon(),this.finishNode(i,"ExpressionStatement")},u.parseBlock=function(i,l,C){for(i===void 0&&(i=!0),l===void 0&&(l=this.startNode()),l.body=[],this.expect(T.braceL),i&&this.enterScope(0);this.type!==T.braceR;){var R=this.parseStatement(null);l.body.push(R)}return C&&(this.strict=!1),this.next(),i&&this.exitScope(),this.finishNode(l,"BlockStatement")},u.parseFor=function(i,l){return i.init=l,this.expect(T.semi),i.test=this.type===T.semi?null:this.parseExpression(),this.expect(T.semi),i.update=this.type===T.parenR?null:this.parseExpression(),this.expect(T.parenR),i.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(i,"ForStatement")},u.parseForIn=function(i,l){var C=this.type===T._in;return this.next(),l.type==="VariableDeclaration"&&l.declarations[0].init!=null&&(!C||this.options.ecmaVersion<8||this.strict||l.kind!=="var"||l.declarations[0].id.type!=="Identifier")&&this.raise(l.start,(C?"for-in":"for-of")+" loop variable declaration may not have an initializer"),i.left=l,i.right=C?this.parseExpression():this.parseMaybeAssign(),this.expect(T.parenR),i.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(i,C?"ForInStatement":"ForOfStatement")},u.parseVar=function(i,l,C,R){for(i.declarations=[],i.kind=C;;){var U=this.startNode();if(this.parseVarId(U,C),this.eat(T.eq)?U.init=this.parseMaybeAssign(l):!R&&C==="const"&&!(this.type===T._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!R&&U.id.type!=="Identifier"&&!(l&&(this.type===T._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):U.init=null,i.declarations.push(this.finishNode(U,"VariableDeclarator")),!this.eat(T.comma))break}return i},u.parseVarId=function(i,l){i.id=this.parseBindingAtom(),this.checkLValPattern(i.id,l==="var"?St:ri,!1)};var m=1,x=2,S=4;u.parseFunction=function(i,l,C,R,U){this.initFunction(i),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!R)&&(this.type===T.star&&l&x&&this.unexpected(),i.generator=this.eat(T.star)),this.options.ecmaVersion>=8&&(i.async=!!R),l&m&&(i.id=l&S&&this.type!==T.name?null:this.parseIdent(),i.id&&!(l&x)&&this.checkLValSimple(i.id,this.strict||i.generator||i.async?this.treatFunctionsAsVar?St:ri:bt));var ne=this.yieldPos,ae=this.awaitPos,we=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(gn(i.async,i.generator)),l&m||(i.id=this.type===T.name?this.parseIdent():null),this.parseFunctionParams(i),this.parseFunctionBody(i,C,!1,U),this.yieldPos=ne,this.awaitPos=ae,this.awaitIdentPos=we,this.finishNode(i,l&m?"FunctionDeclaration":"FunctionExpression")},u.parseFunctionParams=function(i){this.expect(T.parenL),i.params=this.parseBindingList(T.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},u.parseClass=function(i,l){this.next();var C=this.strict;this.strict=!0,this.parseClassId(i,l),this.parseClassSuper(i);var R=this.enterClassBody(),U=this.startNode(),ne=!1;for(U.body=[],this.expect(T.braceL);this.type!==T.braceR;){var ae=this.parseClassElement(i.superClass!==null);ae&&(U.body.push(ae),ae.type==="MethodDefinition"&&ae.kind==="constructor"?(ne&&this.raiseRecoverable(ae.start,"Duplicate constructor in the same class"),ne=!0):ae.key&&ae.key.type==="PrivateIdentifier"&&y(R,ae)&&this.raiseRecoverable(ae.key.start,"Identifier '#"+ae.key.name+"' has already been declared"))}return this.strict=C,this.next(),i.body=this.finishNode(U,"ClassBody"),this.exitClassBody(),this.finishNode(i,l?"ClassDeclaration":"ClassExpression")},u.parseClassElement=function(i){if(this.eat(T.semi))return null;var l=this.options.ecmaVersion,C=this.startNode(),R="",U=!1,ne=!1,ae="method",we=!1;if(this.eatContextual("static")){if(l>=13&&this.eat(T.braceL))return this.parseClassStaticBlock(C),C;this.isClassElementNameStart()||this.type===T.star?we=!0:R="static"}if(C.static=we,!R&&l>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===T.star)&&!this.canInsertSemicolon()?ne=!0:R="async"),!R&&(l>=9||!ne)&&this.eat(T.star)&&(U=!0),!R&&!ne&&!U){var Pe=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?ae=Pe:R=Pe)}if(R?(C.computed=!1,C.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),C.key.name=R,this.finishNode(C.key,"Identifier")):this.parseClassElementName(C),l<13||this.type===T.parenL||ae!=="method"||U||ne){var Je=!C.static&&b(C,"constructor"),rt=Je&&i;Je&&ae!=="method"&&this.raise(C.key.start,"Constructor can't have get/set modifier"),C.kind=Je?"constructor":ae,this.parseClassMethod(C,U,ne,rt)}else this.parseClassField(C);return C},u.isClassElementNameStart=function(){return this.type===T.name||this.type===T.privateId||this.type===T.num||this.type===T.string||this.type===T.bracketL||this.type.keyword},u.parseClassElementName=function(i){this.type===T.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),i.computed=!1,i.key=this.parsePrivateIdent()):this.parsePropertyName(i)},u.parseClassMethod=function(i,l,C,R){var U=i.key;i.kind==="constructor"?(l&&this.raise(U.start,"Constructor can't be a generator"),C&&this.raise(U.start,"Constructor can't be an async method")):i.static&&b(i,"prototype")&&this.raise(U.start,"Classes may not have a static property named prototype");var ne=i.value=this.parseMethod(l,C,R);return i.kind==="get"&&ne.params.length!==0&&this.raiseRecoverable(ne.start,"getter should have no params"),i.kind==="set"&&ne.params.length!==1&&this.raiseRecoverable(ne.start,"setter should have exactly one param"),i.kind==="set"&&ne.params[0].type==="RestElement"&&this.raiseRecoverable(ne.params[0].start,"Setter cannot use rest params"),this.finishNode(i,"MethodDefinition")},u.parseClassField=function(i){if(b(i,"constructor")?this.raise(i.key.start,"Classes can't have a field named 'constructor'"):i.static&&b(i,"prototype")&&this.raise(i.key.start,"Classes can't have a static field named 'prototype'"),this.eat(T.eq)){var l=this.currentThisScope(),C=l.inClassFieldInit;l.inClassFieldInit=!0,i.value=this.parseMaybeAssign(),l.inClassFieldInit=C}else i.value=null;return this.semicolon(),this.finishNode(i,"PropertyDefinition")},u.parseClassStaticBlock=function(i){i.body=[];var l=this.labels;for(this.labels=[],this.enterScope(Ri|Pi);this.type!==T.braceR;){var C=this.parseStatement(null);i.body.push(C)}return this.next(),this.exitScope(),this.labels=l,this.finishNode(i,"StaticBlock")},u.parseClassId=function(i,l){this.type===T.name?(i.id=this.parseIdent(),l&&this.checkLValSimple(i.id,ri,!1)):(l===!0&&this.unexpected(),i.id=null)},u.parseClassSuper=function(i){i.superClass=this.eat(T._extends)?this.parseExprSubscripts(null,!1):null},u.enterClassBody=function(){var i={declared:Object.create(null),used:[]};return this.privateNameStack.push(i),i.declared},u.exitClassBody=function(){var i=this.privateNameStack.pop(),l=i.declared,C=i.used;if(this.options.checkPrivateFields)for(var R=this.privateNameStack.length,U=R===0?null:this.privateNameStack[R-1],ne=0;ne<C.length;++ne){var ae=C[ne];ve(l,ae.name)||(U?U.used.push(ae):this.raiseRecoverable(ae.start,"Private field '#"+ae.name+"' must be declared in an enclosing class"))}};function y(i,l){var C=l.key.name,R=i[C],U="true";return l.type==="MethodDefinition"&&(l.kind==="get"||l.kind==="set")&&(U=(l.static?"s":"i")+l.kind),R==="iget"&&U==="iset"||R==="iset"&&U==="iget"||R==="sget"&&U==="sset"||R==="sset"&&U==="sget"?(i[C]="true",!1):R?!0:(i[C]=U,!1)}function b(i,l){var C=i.computed,R=i.key;return!C&&(R.type==="Identifier"&&R.name===l||R.type==="Literal"&&R.value===l)}u.parseExportAllDeclaration=function(i,l){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(i.exported=this.parseModuleExportName(),this.checkExport(l,i.exported,this.lastTokStart)):i.exported=null),this.expectContextual("from"),this.type!==T.string&&this.unexpected(),i.source=this.parseExprAtom(),this.semicolon(),this.finishNode(i,"ExportAllDeclaration")},u.parseExport=function(i,l){if(this.next(),this.eat(T.star))return this.parseExportAllDeclaration(i,l);if(this.eat(T._default))return this.checkExport(l,"default",this.lastTokStart),i.declaration=this.parseExportDefaultDeclaration(),this.finishNode(i,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())i.declaration=this.parseExportDeclaration(i),i.declaration.type==="VariableDeclaration"?this.checkVariableExport(l,i.declaration.declarations):this.checkExport(l,i.declaration.id,i.declaration.id.start),i.specifiers=[],i.source=null;else{if(i.declaration=null,i.specifiers=this.parseExportSpecifiers(l),this.eatContextual("from"))this.type!==T.string&&this.unexpected(),i.source=this.parseExprAtom();else{for(var C=0,R=i.specifiers;C<R.length;C+=1){var U=R[C];this.checkUnreserved(U.local),this.checkLocalExport(U.local),U.local.type==="Literal"&&this.raise(U.local.start,"A string literal cannot be used as an exported binding without `from`.")}i.source=null}this.semicolon()}return this.finishNode(i,"ExportNamedDeclaration")},u.parseExportDeclaration=function(i){return this.parseStatement(null)},u.parseExportDefaultDeclaration=function(){var i;if(this.type===T._function||(i=this.isAsyncFunction())){var l=this.startNode();return this.next(),i&&this.next(),this.parseFunction(l,m|S,!1,i)}else if(this.type===T._class){var C=this.startNode();return this.parseClass(C,"nullableID")}else{var R=this.parseMaybeAssign();return this.semicolon(),R}},u.checkExport=function(i,l,C){i&&(typeof l!="string"&&(l=l.type==="Identifier"?l.name:l.value),ve(i,l)&&this.raiseRecoverable(C,"Duplicate export '"+l+"'"),i[l]=!0)},u.checkPatternExport=function(i,l){var C=l.type;if(C==="Identifier")this.checkExport(i,l,l.start);else if(C==="ObjectPattern")for(var R=0,U=l.properties;R<U.length;R+=1){var ne=U[R];this.checkPatternExport(i,ne)}else if(C==="ArrayPattern")for(var ae=0,we=l.elements;ae<we.length;ae+=1){var Pe=we[ae];Pe&&this.checkPatternExport(i,Pe)}else C==="Property"?this.checkPatternExport(i,l.value):C==="AssignmentPattern"?this.checkPatternExport(i,l.left):C==="RestElement"&&this.checkPatternExport(i,l.argument)},u.checkVariableExport=function(i,l){if(i)for(var C=0,R=l;C<R.length;C+=1){var U=R[C];this.checkPatternExport(i,U.id)}},u.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},u.parseExportSpecifier=function(i){var l=this.startNode();return l.local=this.parseModuleExportName(),l.exported=this.eatContextual("as")?this.parseModuleExportName():l.local,this.checkExport(i,l.exported,l.exported.start),this.finishNode(l,"ExportSpecifier")},u.parseExportSpecifiers=function(i){var l=[],C=!0;for(this.expect(T.braceL);!this.eat(T.braceR);){if(C)C=!1;else if(this.expect(T.comma),this.afterTrailingComma(T.braceR))break;l.push(this.parseExportSpecifier(i))}return l},u.parseImport=function(i){return this.next(),this.type===T.string?(i.specifiers=_,i.source=this.parseExprAtom()):(i.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),i.source=this.type===T.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(i,"ImportDeclaration")},u.parseImportSpecifier=function(){var i=this.startNode();return i.imported=this.parseModuleExportName(),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLValSimple(i.local,ri),this.finishNode(i,"ImportSpecifier")},u.parseImportDefaultSpecifier=function(){var i=this.startNode();return i.local=this.parseIdent(),this.checkLValSimple(i.local,ri),this.finishNode(i,"ImportDefaultSpecifier")},u.parseImportNamespaceSpecifier=function(){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLValSimple(i.local,ri),this.finishNode(i,"ImportNamespaceSpecifier")},u.parseImportSpecifiers=function(){var i=[],l=!0;if(this.type===T.name&&(i.push(this.parseImportDefaultSpecifier()),!this.eat(T.comma)))return i;if(this.type===T.star)return i.push(this.parseImportNamespaceSpecifier()),i;for(this.expect(T.braceL);!this.eat(T.braceR);){if(l)l=!1;else if(this.expect(T.comma),this.afterTrailingComma(T.braceR))break;i.push(this.parseImportSpecifier())}return i},u.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===T.string){var i=this.parseLiteral(this.value);return Wt.test(i.value)&&this.raise(i.start,"An export name cannot include a lone surrogate."),i}return this.parseIdent(!0)},u.adaptDirectivePrologue=function(i){for(var l=0;l<i.length&&this.isDirectiveCandidate(i[l]);++l)i[l].directive=i[l].expression.raw.slice(1,-1)},u.isDirectiveCandidate=function(i){return this.options.ecmaVersion>=5&&i.type==="ExpressionStatement"&&i.expression.type==="Literal"&&typeof i.expression.value=="string"&&(this.input[i.start]==='"'||this.input[i.start]==="'")};var N=e.prototype;N.toAssignable=function(i,l,C){if(this.options.ecmaVersion>=6&&i)switch(i.type){case"Identifier":this.inAsync&&i.name==="await"&&this.raise(i.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":i.type="ObjectPattern",C&&this.checkPatternErrors(C,!0);for(var R=0,U=i.properties;R<U.length;R+=1){var ne=U[R];this.toAssignable(ne,l),ne.type==="RestElement"&&(ne.argument.type==="ArrayPattern"||ne.argument.type==="ObjectPattern")&&this.raise(ne.argument.start,"Unexpected token")}break;case"Property":i.kind!=="init"&&this.raise(i.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(i.value,l);break;case"ArrayExpression":i.type="ArrayPattern",C&&this.checkPatternErrors(C,!0),this.toAssignableList(i.elements,l);break;case"SpreadElement":i.type="RestElement",this.toAssignable(i.argument,l),i.argument.type==="AssignmentPattern"&&this.raise(i.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":i.operator!=="="&&this.raise(i.left.end,"Only '=' operator can be used for specifying default value."),i.type="AssignmentPattern",delete i.operator,this.toAssignable(i.left,l);break;case"ParenthesizedExpression":this.toAssignable(i.expression,l,C);break;case"ChainExpression":this.raiseRecoverable(i.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!l)break;default:this.raise(i.start,"Assigning to rvalue")}else C&&this.checkPatternErrors(C,!0);return i},N.toAssignableList=function(i,l){for(var C=i.length,R=0;R<C;R++){var U=i[R];U&&this.toAssignable(U,l)}if(C){var ne=i[C-1];this.options.ecmaVersion===6&&l&&ne&&ne.type==="RestElement"&&ne.argument.type!=="Identifier"&&this.unexpected(ne.argument.start)}return i},N.parseSpread=function(i){var l=this.startNode();return this.next(),l.argument=this.parseMaybeAssign(!1,i),this.finishNode(l,"SpreadElement")},N.parseRestBinding=function(){var i=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==T.name&&this.unexpected(),i.argument=this.parseBindingAtom(),this.finishNode(i,"RestElement")},N.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case T.bracketL:var i=this.startNode();return this.next(),i.elements=this.parseBindingList(T.bracketR,!0,!0),this.finishNode(i,"ArrayPattern");case T.braceL:return this.parseObj(!0)}return this.parseIdent()},N.parseBindingList=function(i,l,C,R){for(var U=[],ne=!0;!this.eat(i);)if(ne?ne=!1:this.expect(T.comma),l&&this.type===T.comma)U.push(null);else{if(C&&this.afterTrailingComma(i))break;if(this.type===T.ellipsis){var ae=this.parseRestBinding();this.parseBindingListItem(ae),U.push(ae),this.type===T.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(i);break}else U.push(this.parseAssignableListItem(R))}return U},N.parseAssignableListItem=function(i){var l=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(l),l},N.parseBindingListItem=function(i){return i},N.parseMaybeDefault=function(i,l,C){if(C=C||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(T.eq))return C;var R=this.startNodeAt(i,l);return R.left=C,R.right=this.parseMaybeAssign(),this.finishNode(R,"AssignmentPattern")},N.checkLValSimple=function(i,l,C){l===void 0&&(l=zi);var R=l!==zi;switch(i.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(i.name)&&this.raiseRecoverable(i.start,(R?"Binding ":"Assigning to ")+i.name+" in strict mode"),R&&(l===ri&&i.name==="let"&&this.raiseRecoverable(i.start,"let is disallowed as a lexically bound name"),C&&(ve(C,i.name)&&this.raiseRecoverable(i.start,"Argument name clash"),C[i.name]=!0),l!==et&&this.declareName(i.name,l,i.start));break;case"ChainExpression":this.raiseRecoverable(i.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":R&&this.raiseRecoverable(i.start,"Binding member expression");break;case"ParenthesizedExpression":return R&&this.raiseRecoverable(i.start,"Binding parenthesized expression"),this.checkLValSimple(i.expression,l,C);default:this.raise(i.start,(R?"Binding":"Assigning to")+" rvalue")}},N.checkLValPattern=function(i,l,C){switch(l===void 0&&(l=zi),i.type){case"ObjectPattern":for(var R=0,U=i.properties;R<U.length;R+=1){var ne=U[R];this.checkLValInnerPattern(ne,l,C)}break;case"ArrayPattern":for(var ae=0,we=i.elements;ae<we.length;ae+=1){var Pe=we[ae];Pe&&this.checkLValInnerPattern(Pe,l,C)}break;default:this.checkLValSimple(i,l,C)}},N.checkLValInnerPattern=function(i,l,C){switch(l===void 0&&(l=zi),i.type){case"Property":this.checkLValInnerPattern(i.value,l,C);break;case"AssignmentPattern":this.checkLValPattern(i.left,l,C);break;case"RestElement":this.checkLValPattern(i.argument,l,C);break;default:this.checkLValPattern(i,l,C)}};var I=function(l,C,R,U,ne){this.token=l,this.isExpr=!!C,this.preserveSpace=!!R,this.override=U,this.generator=!!ne},E={b_stat:new I("{",!1),b_expr:new I("{",!0),b_tmpl:new I("${",!1),p_stat:new I("(",!1),p_expr:new I("(",!0),q_tmpl:new I("`",!0,!0,function(i){return i.tryReadTemplateToken()}),f_stat:new I("function",!1),f_expr:new I("function",!0),f_expr_gen:new I("function",!0,!1,null,!0),f_gen:new I("function",!1,!1,null,!0)},w=e.prototype;w.initialContext=function(){return[E.b_stat]},w.curContext=function(){return this.context[this.context.length-1]},w.braceIsBlock=function(i){var l=this.curContext();return l===E.f_expr||l===E.f_stat?!0:i===T.colon&&(l===E.b_stat||l===E.b_expr)?!l.isExpr:i===T._return||i===T.name&&this.exprAllowed?xe.test(this.input.slice(this.lastTokEnd,this.start)):i===T._else||i===T.semi||i===T.eof||i===T.parenR||i===T.arrow?!0:i===T.braceL?l===E.b_stat:i===T._var||i===T._const||i===T.name?!1:!this.exprAllowed},w.inGeneratorContext=function(){for(var i=this.context.length-1;i>=1;i--){var l=this.context[i];if(l.token==="function")return l.generator}return!1},w.updateContext=function(i){var l,C=this.type;C.keyword&&i===T.dot?this.exprAllowed=!1:(l=C.updateContext)?l.call(this,i):this.exprAllowed=C.beforeExpr},w.overrideContext=function(i){this.curContext()!==i&&(this.context[this.context.length-1]=i)},T.parenR.updateContext=T.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var i=this.context.pop();i===E.b_stat&&this.curContext().token==="function"&&(i=this.context.pop()),this.exprAllowed=!i.isExpr},T.braceL.updateContext=function(i){this.context.push(this.braceIsBlock(i)?E.b_stat:E.b_expr),this.exprAllowed=!0},T.dollarBraceL.updateContext=function(){this.context.push(E.b_tmpl),this.exprAllowed=!0},T.parenL.updateContext=function(i){var l=i===T._if||i===T._for||i===T._with||i===T._while;this.context.push(l?E.p_stat:E.p_expr),this.exprAllowed=!0},T.incDec.updateContext=function(){},T._function.updateContext=T._class.updateContext=function(i){i.beforeExpr&&i!==T._else&&!(i===T.semi&&this.curContext()!==E.p_stat)&&!(i===T._return&&xe.test(this.input.slice(this.lastTokEnd,this.start)))&&!((i===T.colon||i===T.braceL)&&this.curContext()===E.b_stat)?this.context.push(E.f_expr):this.context.push(E.f_stat),this.exprAllowed=!1},T.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},T.backQuote.updateContext=function(){this.curContext()===E.q_tmpl?this.context.pop():this.context.push(E.q_tmpl),this.exprAllowed=!1},T.star.updateContext=function(i){if(i===T._function){var l=this.context.length-1;this.context[l]===E.f_expr?this.context[l]=E.f_expr_gen:this.context[l]=E.f_gen}this.exprAllowed=!0},T.name.updateContext=function(i){var l=!1;this.options.ecmaVersion>=6&&i!==T.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(l=!0),this.exprAllowed=l};var k=e.prototype;k.checkPropClash=function(i,l,C){if(!(this.options.ecmaVersion>=9&&i.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(i.computed||i.method||i.shorthand))){var R=i.key,U;switch(R.type){case"Identifier":U=R.name;break;case"Literal":U=String(R.value);break;default:return}var ne=i.kind;if(this.options.ecmaVersion>=6){U==="__proto__"&&ne==="init"&&(l.proto&&(C?C.doubleProto<0&&(C.doubleProto=R.start):this.raiseRecoverable(R.start,"Redefinition of __proto__ property")),l.proto=!0);return}U="$"+U;var ae=l[U];if(ae){var we;ne==="init"?we=this.strict&&ae.init||ae.get||ae.set:we=ae.init||ae[ne],we&&this.raiseRecoverable(R.start,"Redefinition of property")}else ae=l[U]={init:!1,get:!1,set:!1};ae[ne]=!0}},k.parseExpression=function(i,l){var C=this.start,R=this.startLoc,U=this.parseMaybeAssign(i,l);if(this.type===T.comma){var ne=this.startNodeAt(C,R);for(ne.expressions=[U];this.eat(T.comma);)ne.expressions.push(this.parseMaybeAssign(i,l));return this.finishNode(ne,"SequenceExpression")}return U},k.parseMaybeAssign=function(i,l,C){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(i);this.exprAllowed=!1}var R=!1,U=-1,ne=-1,ae=-1;l?(U=l.parenthesizedAssign,ne=l.trailingComma,ae=l.doubleProto,l.parenthesizedAssign=l.trailingComma=-1):(l=new s,R=!0);var we=this.start,Pe=this.startLoc;(this.type===T.parenL||this.type===T.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=i==="await");var Je=this.parseMaybeConditional(i,l);if(C&&(Je=C.call(this,Je,we,Pe)),this.type.isAssign){var rt=this.startNodeAt(we,Pe);return rt.operator=this.value,this.type===T.eq&&(Je=this.toAssignable(Je,!1,l)),R||(l.parenthesizedAssign=l.trailingComma=l.doubleProto=-1),l.shorthandAssign>=Je.start&&(l.shorthandAssign=-1),this.type===T.eq?this.checkLValPattern(Je):this.checkLValSimple(Je),rt.left=Je,this.next(),rt.right=this.parseMaybeAssign(i),ae>-1&&(l.doubleProto=ae),this.finishNode(rt,"AssignmentExpression")}else R&&this.checkExpressionErrors(l,!0);return U>-1&&(l.parenthesizedAssign=U),ne>-1&&(l.trailingComma=ne),Je},k.parseMaybeConditional=function(i,l){var C=this.start,R=this.startLoc,U=this.parseExprOps(i,l);if(this.checkExpressionErrors(l))return U;if(this.eat(T.question)){var ne=this.startNodeAt(C,R);return ne.test=U,ne.consequent=this.parseMaybeAssign(),this.expect(T.colon),ne.alternate=this.parseMaybeAssign(i),this.finishNode(ne,"ConditionalExpression")}return U},k.parseExprOps=function(i,l){var C=this.start,R=this.startLoc,U=this.parseMaybeUnary(l,!1,!1,i);return this.checkExpressionErrors(l)||U.start===C&&U.type==="ArrowFunctionExpression"?U:this.parseExprOp(U,C,R,-1,i)},k.parseExprOp=function(i,l,C,R,U){var ne=this.type.binop;if(ne!=null&&(!U||this.type!==T._in)&&ne>R){var ae=this.type===T.logicalOR||this.type===T.logicalAND,we=this.type===T.coalesce;we&&(ne=T.logicalAND.binop);var Pe=this.value;this.next();var Je=this.start,rt=this.startLoc,It=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,U),Je,rt,ne,U),ki=this.buildBinary(l,C,i,It,Pe,ae||we);return(ae&&this.type===T.coalesce||we&&(this.type===T.logicalOR||this.type===T.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(ki,l,C,R,U)}return i},k.buildBinary=function(i,l,C,R,U,ne){R.type==="PrivateIdentifier"&&this.raise(R.start,"Private identifier can only be left side of binary expression");var ae=this.startNodeAt(i,l);return ae.left=C,ae.operator=U,ae.right=R,this.finishNode(ae,ne?"LogicalExpression":"BinaryExpression")},k.parseMaybeUnary=function(i,l,C,R){var U=this.start,ne=this.startLoc,ae;if(this.isContextual("await")&&this.canAwait)ae=this.parseAwait(R),l=!0;else if(this.type.prefix){var we=this.startNode(),Pe=this.type===T.incDec;we.operator=this.value,we.prefix=!0,this.next(),we.argument=this.parseMaybeUnary(null,!0,Pe,R),this.checkExpressionErrors(i,!0),Pe?this.checkLValSimple(we.argument):this.strict&&we.operator==="delete"&&we.argument.type==="Identifier"?this.raiseRecoverable(we.start,"Deleting local variable in strict mode"):we.operator==="delete"&&v(we.argument)?this.raiseRecoverable(we.start,"Private fields can not be deleted"):l=!0,ae=this.finishNode(we,Pe?"UpdateExpression":"UnaryExpression")}else if(!l&&this.type===T.privateId)(R||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),ae=this.parsePrivateIdent(),this.type!==T._in&&this.unexpected();else{if(ae=this.parseExprSubscripts(i,R),this.checkExpressionErrors(i))return ae;for(;this.type.postfix&&!this.canInsertSemicolon();){var Je=this.startNodeAt(U,ne);Je.operator=this.value,Je.prefix=!1,Je.argument=ae,this.checkLValSimple(ae),this.next(),ae=this.finishNode(Je,"UpdateExpression")}}if(!C&&this.eat(T.starstar))if(l)this.unexpected(this.lastTokStart);else return this.buildBinary(U,ne,ae,this.parseMaybeUnary(null,!1,!1,R),"**",!1);else return ae};function v(i){return i.type==="MemberExpression"&&i.property.type==="PrivateIdentifier"||i.type==="ChainExpression"&&v(i.expression)}k.parseExprSubscripts=function(i,l){var C=this.start,R=this.startLoc,U=this.parseExprAtom(i,l);if(U.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return U;var ne=this.parseSubscripts(U,C,R,!1,l);return i&&ne.type==="MemberExpression"&&(i.parenthesizedAssign>=ne.start&&(i.parenthesizedAssign=-1),i.parenthesizedBind>=ne.start&&(i.parenthesizedBind=-1),i.trailingComma>=ne.start&&(i.trailingComma=-1)),ne},k.parseSubscripts=function(i,l,C,R,U){for(var ne=this.options.ecmaVersion>=8&&i.type==="Identifier"&&i.name==="async"&&this.lastTokEnd===i.end&&!this.canInsertSemicolon()&&i.end-i.start===5&&this.potentialArrowAt===i.start,ae=!1;;){var we=this.parseSubscript(i,l,C,R,ne,ae,U);if(we.optional&&(ae=!0),we===i||we.type==="ArrowFunctionExpression"){if(ae){var Pe=this.startNodeAt(l,C);Pe.expression=we,we=this.finishNode(Pe,"ChainExpression")}return we}i=we}},k.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(T.arrow)},k.parseSubscriptAsyncArrow=function(i,l,C,R){return this.parseArrowExpression(this.startNodeAt(i,l),C,!0,R)},k.parseSubscript=function(i,l,C,R,U,ne,ae){var we=this.options.ecmaVersion>=11,Pe=we&&this.eat(T.questionDot);R&&Pe&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var Je=this.eat(T.bracketL);if(Je||Pe&&this.type!==T.parenL&&this.type!==T.backQuote||this.eat(T.dot)){var rt=this.startNodeAt(l,C);rt.object=i,Je?(rt.property=this.parseExpression(),this.expect(T.bracketR)):this.type===T.privateId&&i.type!=="Super"?rt.property=this.parsePrivateIdent():rt.property=this.parseIdent(this.options.allowReserved!=="never"),rt.computed=!!Je,we&&(rt.optional=Pe),i=this.finishNode(rt,"MemberExpression")}else if(!R&&this.eat(T.parenL)){var It=new s,ki=this.yieldPos,qi=this.awaitPos,Ai=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var Ji=this.parseExprList(T.parenR,this.options.ecmaVersion>=8,!1,It);if(U&&!Pe&&this.shouldParseAsyncArrow())return this.checkPatternErrors(It,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=ki,this.awaitPos=qi,this.awaitIdentPos=Ai,this.parseSubscriptAsyncArrow(l,C,Ji,ae);this.checkExpressionErrors(It,!0),this.yieldPos=ki||this.yieldPos,this.awaitPos=qi||this.awaitPos,this.awaitIdentPos=Ai||this.awaitIdentPos;var Ei=this.startNodeAt(l,C);Ei.callee=i,Ei.arguments=Ji,we&&(Ei.optional=Pe),i=this.finishNode(Ei,"CallExpression")}else if(this.type===T.backQuote){(Pe||ne)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var Ti=this.startNodeAt(l,C);Ti.tag=i,Ti.quasi=this.parseTemplate({isTagged:!0}),i=this.finishNode(Ti,"TaggedTemplateExpression")}return i},k.parseExprAtom=function(i,l,C){this.type===T.slash&&this.readRegexp();var R,U=this.potentialArrowAt===this.start;switch(this.type){case T._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),R=this.startNode(),this.next(),this.type===T.parenL&&!this.allowDirectSuper&&this.raise(R.start,"super() call outside constructor of a subclass"),this.type!==T.dot&&this.type!==T.bracketL&&this.type!==T.parenL&&this.unexpected(),this.finishNode(R,"Super");case T._this:return R=this.startNode(),this.next(),this.finishNode(R,"ThisExpression");case T.name:var ne=this.start,ae=this.startLoc,we=this.containsEsc,Pe=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!we&&Pe.name==="async"&&!this.canInsertSemicolon()&&this.eat(T._function))return this.overrideContext(E.f_expr),this.parseFunction(this.startNodeAt(ne,ae),0,!1,!0,l);if(U&&!this.canInsertSemicolon()){if(this.eat(T.arrow))return this.parseArrowExpression(this.startNodeAt(ne,ae),[Pe],!1,l);if(this.options.ecmaVersion>=8&&Pe.name==="async"&&this.type===T.name&&!we&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return Pe=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(T.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(ne,ae),[Pe],!0,l)}return Pe;case T.regexp:var Je=this.value;return R=this.parseLiteral(Je.value),R.regex={pattern:Je.pattern,flags:Je.flags},R;case T.num:case T.string:return this.parseLiteral(this.value);case T._null:case T._true:case T._false:return R=this.startNode(),R.value=this.type===T._null?null:this.type===T._true,R.raw=this.type.keyword,this.next(),this.finishNode(R,"Literal");case T.parenL:var rt=this.start,It=this.parseParenAndDistinguishExpression(U,l);return i&&(i.parenthesizedAssign<0&&!this.isSimpleAssignTarget(It)&&(i.parenthesizedAssign=rt),i.parenthesizedBind<0&&(i.parenthesizedBind=rt)),It;case T.bracketL:return R=this.startNode(),this.next(),R.elements=this.parseExprList(T.bracketR,!0,!0,i),this.finishNode(R,"ArrayExpression");case T.braceL:return this.overrideContext(E.b_expr),this.parseObj(!1,i);case T._function:return R=this.startNode(),this.next(),this.parseFunction(R,0);case T._class:return this.parseClass(this.startNode(),!1);case T._new:return this.parseNew();case T.backQuote:return this.parseTemplate();case T._import:return this.options.ecmaVersion>=11?this.parseExprImport(C):this.unexpected();default:return this.parseExprAtomDefault()}},k.parseExprAtomDefault=function(){this.unexpected()},k.parseExprImport=function(i){var l=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var C=this.parseIdent(!0);if(this.type===T.parenL&&!i)return this.parseDynamicImport(l);if(this.type===T.dot)return l.meta=C,this.parseImportMeta(l);this.unexpected()},k.parseDynamicImport=function(i){if(this.next(),i.source=this.parseMaybeAssign(),!this.eat(T.parenR)){var l=this.start;this.eat(T.comma)&&this.eat(T.parenR)?this.raiseRecoverable(l,"Trailing comma is not allowed in import()"):this.unexpected(l)}return this.finishNode(i,"ImportExpression")},k.parseImportMeta=function(i){this.next();var l=this.containsEsc;return i.property=this.parseIdent(!0),i.property.name!=="meta"&&this.raiseRecoverable(i.property.start,"The only valid meta property for import is 'import.meta'"),l&&this.raiseRecoverable(i.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(i.start,"Cannot use 'import.meta' outside a module"),this.finishNode(i,"MetaProperty")},k.parseLiteral=function(i){var l=this.startNode();return l.value=i,l.raw=this.input.slice(this.start,this.end),l.raw.charCodeAt(l.raw.length-1)===110&&(l.bigint=l.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(l,"Literal")},k.parseParenExpression=function(){this.expect(T.parenL);var i=this.parseExpression();return this.expect(T.parenR),i},k.shouldParseArrow=function(i){return!this.canInsertSemicolon()},k.parseParenAndDistinguishExpression=function(i,l){var C=this.start,R=this.startLoc,U,ne=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var ae=this.start,we=this.startLoc,Pe=[],Je=!0,rt=!1,It=new s,ki=this.yieldPos,qi=this.awaitPos,Ai;for(this.yieldPos=0,this.awaitPos=0;this.type!==T.parenR;)if(Je?Je=!1:this.expect(T.comma),ne&&this.afterTrailingComma(T.parenR,!0)){rt=!0;break}else if(this.type===T.ellipsis){Ai=this.start,Pe.push(this.parseParenItem(this.parseRestBinding())),this.type===T.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else Pe.push(this.parseMaybeAssign(!1,It,this.parseParenItem));var Ji=this.lastTokEnd,Ei=this.lastTokEndLoc;if(this.expect(T.parenR),i&&this.shouldParseArrow(Pe)&&this.eat(T.arrow))return this.checkPatternErrors(It,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=ki,this.awaitPos=qi,this.parseParenArrowList(C,R,Pe,l);(!Pe.length||rt)&&this.unexpected(this.lastTokStart),Ai&&this.unexpected(Ai),this.checkExpressionErrors(It,!0),this.yieldPos=ki||this.yieldPos,this.awaitPos=qi||this.awaitPos,Pe.length>1?(U=this.startNodeAt(ae,we),U.expressions=Pe,this.finishNodeAt(U,"SequenceExpression",Ji,Ei)):U=Pe[0]}else U=this.parseParenExpression();if(this.options.preserveParens){var Ti=this.startNodeAt(C,R);return Ti.expression=U,this.finishNode(Ti,"ParenthesizedExpression")}else return U},k.parseParenItem=function(i){return i},k.parseParenArrowList=function(i,l,C,R){return this.parseArrowExpression(this.startNodeAt(i,l),C,!1,R)};var A=[];k.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var i=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===T.dot){var l=this.startNodeAt(i.start,i.startLoc);l.name="new",i.meta=this.finishNode(l,"Identifier"),this.next();var C=this.containsEsc;return i.property=this.parseIdent(!0),i.property.name!=="target"&&this.raiseRecoverable(i.property.start,"The only valid meta property for new is 'new.target'"),C&&this.raiseRecoverable(i.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(i.start,"'new.target' can only be used in functions and class static block"),this.finishNode(i,"MetaProperty")}var R=this.start,U=this.startLoc;return i.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),R,U,!0,!1),this.eat(T.parenL)?i.arguments=this.parseExprList(T.parenR,this.options.ecmaVersion>=8,!1):i.arguments=A,this.finishNode(i,"NewExpression")},k.parseTemplateElement=function(i){var l=i.isTagged,C=this.startNode();return this.type===T.invalidTemplate?(l||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),C.value={raw:this.value,cooked:null}):C.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),C.tail=this.type===T.backQuote,this.finishNode(C,"TemplateElement")},k.parseTemplate=function(i){i===void 0&&(i={});var l=i.isTagged;l===void 0&&(l=!1);var C=this.startNode();this.next(),C.expressions=[];var R=this.parseTemplateElement({isTagged:l});for(C.quasis=[R];!R.tail;)this.type===T.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(T.dollarBraceL),C.expressions.push(this.parseExpression()),this.expect(T.braceR),C.quasis.push(R=this.parseTemplateElement({isTagged:l}));return this.next(),this.finishNode(C,"TemplateLiteral")},k.isAsyncProp=function(i){return!i.computed&&i.key.type==="Identifier"&&i.key.name==="async"&&(this.type===T.name||this.type===T.num||this.type===T.string||this.type===T.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===T.star)&&!xe.test(this.input.slice(this.lastTokEnd,this.start))},k.parseObj=function(i,l){var C=this.startNode(),R=!0,U={};for(C.properties=[],this.next();!this.eat(T.braceR);){if(R)R=!1;else if(this.expect(T.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(T.braceR))break;var ne=this.parseProperty(i,l);i||this.checkPropClash(ne,U,l),C.properties.push(ne)}return this.finishNode(C,i?"ObjectPattern":"ObjectExpression")},k.parseProperty=function(i,l){var C=this.startNode(),R,U,ne,ae;if(this.options.ecmaVersion>=9&&this.eat(T.ellipsis))return i?(C.argument=this.parseIdent(!1),this.type===T.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(C,"RestElement")):(C.argument=this.parseMaybeAssign(!1,l),this.type===T.comma&&l&&l.trailingComma<0&&(l.trailingComma=this.start),this.finishNode(C,"SpreadElement"));this.options.ecmaVersion>=6&&(C.method=!1,C.shorthand=!1,(i||l)&&(ne=this.start,ae=this.startLoc),i||(R=this.eat(T.star)));var we=this.containsEsc;return this.parsePropertyName(C),!i&&!we&&this.options.ecmaVersion>=8&&!R&&this.isAsyncProp(C)?(U=!0,R=this.options.ecmaVersion>=9&&this.eat(T.star),this.parsePropertyName(C)):U=!1,this.parsePropertyValue(C,i,R,U,ne,ae,l,we),this.finishNode(C,"Property")},k.parseGetterSetter=function(i){i.kind=i.key.name,this.parsePropertyName(i),i.value=this.parseMethod(!1);var l=i.kind==="get"?0:1;if(i.value.params.length!==l){var C=i.value.start;i.kind==="get"?this.raiseRecoverable(C,"getter should have no params"):this.raiseRecoverable(C,"setter should have exactly one param")}else i.kind==="set"&&i.value.params[0].type==="RestElement"&&this.raiseRecoverable(i.value.params[0].start,"Setter cannot use rest params")},k.parsePropertyValue=function(i,l,C,R,U,ne,ae,we){(C||R)&&this.type===T.colon&&this.unexpected(),this.eat(T.colon)?(i.value=l?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,ae),i.kind="init"):this.options.ecmaVersion>=6&&this.type===T.parenL?(l&&this.unexpected(),i.kind="init",i.method=!0,i.value=this.parseMethod(C,R)):!l&&!we&&this.options.ecmaVersion>=5&&!i.computed&&i.key.type==="Identifier"&&(i.key.name==="get"||i.key.name==="set")&&this.type!==T.comma&&this.type!==T.braceR&&this.type!==T.eq?((C||R)&&this.unexpected(),this.parseGetterSetter(i)):this.options.ecmaVersion>=6&&!i.computed&&i.key.type==="Identifier"?((C||R)&&this.unexpected(),this.checkUnreserved(i.key),i.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=U),i.kind="init",l?i.value=this.parseMaybeDefault(U,ne,this.copyNode(i.key)):this.type===T.eq&&ae?(ae.shorthandAssign<0&&(ae.shorthandAssign=this.start),i.value=this.parseMaybeDefault(U,ne,this.copyNode(i.key))):i.value=this.copyNode(i.key),i.shorthand=!0):this.unexpected()},k.parsePropertyName=function(i){if(this.options.ecmaVersion>=6){if(this.eat(T.bracketL))return i.computed=!0,i.key=this.parseMaybeAssign(),this.expect(T.bracketR),i.key;i.computed=!1}return i.key=this.type===T.num||this.type===T.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},k.initFunction=function(i){i.id=null,this.options.ecmaVersion>=6&&(i.generator=i.expression=!1),this.options.ecmaVersion>=8&&(i.async=!1)},k.parseMethod=function(i,l,C){var R=this.startNode(),U=this.yieldPos,ne=this.awaitPos,ae=this.awaitIdentPos;return this.initFunction(R),this.options.ecmaVersion>=6&&(R.generator=i),this.options.ecmaVersion>=8&&(R.async=!!l),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(gn(l,R.generator)|Pi|(C?Nn:0)),this.expect(T.parenL),R.params=this.parseBindingList(T.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(R,!1,!0,!1),this.yieldPos=U,this.awaitPos=ne,this.awaitIdentPos=ae,this.finishNode(R,"FunctionExpression")},k.parseArrowExpression=function(i,l,C,R){var U=this.yieldPos,ne=this.awaitPos,ae=this.awaitIdentPos;return this.enterScope(gn(C,!1)|wi),this.initFunction(i),this.options.ecmaVersion>=8&&(i.async=!!C),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,i.params=this.toAssignableList(l,!0),this.parseFunctionBody(i,!0,!1,R),this.yieldPos=U,this.awaitPos=ne,this.awaitIdentPos=ae,this.finishNode(i,"ArrowFunctionExpression")},k.parseFunctionBody=function(i,l,C,R){var U=l&&this.type!==T.braceL,ne=this.strict,ae=!1;if(U)i.body=this.parseMaybeAssign(R),i.expression=!0,this.checkParams(i,!1);else{var we=this.options.ecmaVersion>=7&&!this.isSimpleParamList(i.params);(!ne||we)&&(ae=this.strictDirective(this.end),ae&&we&&this.raiseRecoverable(i.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var Pe=this.labels;this.labels=[],ae&&(this.strict=!0),this.checkParams(i,!ne&&!ae&&!l&&!C&&this.isSimpleParamList(i.params)),this.strict&&i.id&&this.checkLValSimple(i.id,et),i.body=this.parseBlock(!1,void 0,ae&&!ne),i.expression=!1,this.adaptDirectivePrologue(i.body.body),this.labels=Pe}this.exitScope()},k.isSimpleParamList=function(i){for(var l=0,C=i;l<C.length;l+=1){var R=C[l];if(R.type!=="Identifier")return!1}return!0},k.checkParams=function(i,l){for(var C=Object.create(null),R=0,U=i.params;R<U.length;R+=1){var ne=U[R];this.checkLValInnerPattern(ne,St,l?null:C)}},k.parseExprList=function(i,l,C,R){for(var U=[],ne=!0;!this.eat(i);){if(ne)ne=!1;else if(this.expect(T.comma),l&&this.afterTrailingComma(i))break;var ae=void 0;C&&this.type===T.comma?ae=null:this.type===T.ellipsis?(ae=this.parseSpread(R),R&&this.type===T.comma&&R.trailingComma<0&&(R.trailingComma=this.start)):ae=this.parseMaybeAssign(!1,R),U.push(ae)}return U},k.checkUnreserved=function(i){var l=i.start,C=i.end,R=i.name;if(this.inGenerator&&R==="yield"&&this.raiseRecoverable(l,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&R==="await"&&this.raiseRecoverable(l,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&R==="arguments"&&this.raiseRecoverable(l,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(R==="arguments"||R==="await")&&this.raise(l,"Cannot use "+R+" in class static initialization block"),this.keywords.test(R)&&this.raise(l,"Unexpected keyword '"+R+"'"),!(this.options.ecmaVersion<6&&this.input.slice(l,C).indexOf("\\")!==-1)){var U=this.strict?this.reservedWordsStrict:this.reservedWords;U.test(R)&&(!this.inAsync&&R==="await"&&this.raiseRecoverable(l,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(l,"The keyword '"+R+"' is reserved"))}},k.parseIdent=function(i){var l=this.parseIdentNode();return this.next(!!i),this.finishNode(l,"Identifier"),i||(this.checkUnreserved(l),l.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=l.start)),l},k.parseIdentNode=function(){var i=this.startNode();return this.type===T.name?i.name=this.value:this.type.keyword?(i.name=this.type.keyword,(i.name==="class"||i.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=T.name):this.unexpected(),i},k.parsePrivateIdent=function(){var i=this.startNode();return this.type===T.privateId?i.name=this.value:this.unexpected(),this.next(),this.finishNode(i,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(i.start,"Private field '#"+i.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(i)),i},k.parseYield=function(i){this.yieldPos||(this.yieldPos=this.start);var l=this.startNode();return this.next(),this.type===T.semi||this.canInsertSemicolon()||this.type!==T.star&&!this.type.startsExpr?(l.delegate=!1,l.argument=null):(l.delegate=this.eat(T.star),l.argument=this.parseMaybeAssign(i)),this.finishNode(l,"YieldExpression")},k.parseAwait=function(i){this.awaitPos||(this.awaitPos=this.start);var l=this.startNode();return this.next(),l.argument=this.parseMaybeUnary(null,!0,!1,i),this.finishNode(l,"AwaitExpression")};var L=e.prototype;L.raise=function(i,l){var C=Oe(this.input,i);l+=" ("+C.line+":"+C.column+")";var R=new SyntaxError(l);throw R.pos=i,R.loc=C,R.raisedAt=this.pos,R},L.raiseRecoverable=L.raise,L.curPosition=function(){if(this.options.locations)return new ei(this.curLine,this.pos-this.lineStart)};var z=e.prototype,M=function(l){this.flags=l,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};z.enterScope=function(i){this.scopeStack.push(new M(i))},z.exitScope=function(){this.scopeStack.pop()},z.treatFunctionsAsVarInScope=function(i){return i.flags&dt||!this.inModule&&i.flags&ot},z.declareName=function(i,l,C){var R=!1;if(l===ri){var U=this.currentScope();R=U.lexical.indexOf(i)>-1||U.functions.indexOf(i)>-1||U.var.indexOf(i)>-1,U.lexical.push(i),this.inModule&&U.flags&ot&&delete this.undefinedExports[i]}else if(l===_n){var ne=this.currentScope();ne.lexical.push(i)}else if(l===bt){var ae=this.currentScope();this.treatFunctionsAsVar?R=ae.lexical.indexOf(i)>-1:R=ae.lexical.indexOf(i)>-1||ae.var.indexOf(i)>-1,ae.functions.push(i)}else for(var we=this.scopeStack.length-1;we>=0;--we){var Pe=this.scopeStack[we];if(Pe.lexical.indexOf(i)>-1&&!(Pe.flags&Qi&&Pe.lexical[0]===i)||!this.treatFunctionsAsVarInScope(Pe)&&Pe.functions.indexOf(i)>-1){R=!0;break}if(Pe.var.push(i),this.inModule&&Pe.flags&ot&&delete this.undefinedExports[i],Pe.flags&pn)break}R&&this.raiseRecoverable(C,"Identifier '"+i+"' has already been declared")},z.checkLocalExport=function(i){this.scopeStack[0].lexical.indexOf(i.name)===-1&&this.scopeStack[0].var.indexOf(i.name)===-1&&(this.undefinedExports[i.name]=i)},z.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},z.currentVarScope=function(){for(var i=this.scopeStack.length-1;;i--){var l=this.scopeStack[i];if(l.flags&pn)return l}},z.currentThisScope=function(){for(var i=this.scopeStack.length-1;;i--){var l=this.scopeStack[i];if(l.flags&pn&&!(l.flags&wi))return l}};var V=function(l,C,R){this.type="",this.start=C,this.end=0,l.options.locations&&(this.loc=new vt(l,R)),l.options.directSourceFile&&(this.sourceFile=l.options.directSourceFile),l.options.ranges&&(this.range=[C,0])},q=e.prototype;q.startNode=function(){return new V(this,this.start,this.startLoc)},q.startNodeAt=function(i,l){return new V(this,i,l)};function j(i,l,C,R){return i.type=l,i.end=C,this.options.locations&&(i.loc.end=R),this.options.ranges&&(i.range[1]=C),i}q.finishNode=function(i,l){return j.call(this,i,l,this.lastTokEnd,this.lastTokEndLoc)},q.finishNodeAt=function(i,l,C,R){return j.call(this,i,l,C,R)},q.copyNode=function(i){var l=new V(this,i.start,this.startLoc);for(var C in i)l[C]=i[C];return l};var X="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",H=X+" Extended_Pictographic",G=H,Q=G+" EBase EComp EMod EPres ExtPict",J=Q,$=J,se={9:X,10:H,11:G,12:Q,13:J,14:$},_e="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",ye={9:"",10:"",11:"",12:"",13:"",14:_e},Ce="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Ee="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",he=Ee+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",de=he+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",ke=de+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Te=ke+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",Ne=Te+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",He={9:Ee,10:he,11:de,12:ke,13:Te,14:Ne},De={};function Ze(i){var l=De[i]={binary:Ve(se[i]+" "+Ce),binaryOfStrings:Ve(ye[i]),nonBinary:{General_Category:Ve(Ce),Script:Ve(He[i])}};l.nonBinary.Script_Extensions=l.nonBinary.Script,l.nonBinary.gc=l.nonBinary.General_Category,l.nonBinary.sc=l.nonBinary.Script,l.nonBinary.scx=l.nonBinary.Script_Extensions}for(var Ke=0,We=[9,10,11,12,13,14];Ke<We.length;Ke+=1){var Nt=We[Ke];Ze(Nt)}var Ie=e.prototype,gt=function(l){this.parser=l,this.validFlags="gim"+(l.options.ecmaVersion>=6?"uy":"")+(l.options.ecmaVersion>=9?"s":"")+(l.options.ecmaVersion>=13?"d":"")+(l.options.ecmaVersion>=15?"v":""),this.unicodeProperties=De[l.options.ecmaVersion>=14?14:l.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};gt.prototype.reset=function(l,C,R){var U=R.indexOf("v")!==-1,ne=R.indexOf("u")!==-1;this.start=l|0,this.source=C+"",this.flags=R,U&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=ne&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=ne&&this.parser.options.ecmaVersion>=9)},gt.prototype.raise=function(l){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+l)},gt.prototype.at=function(l,C){C===void 0&&(C=!1);var R=this.source,U=R.length;if(l>=U)return-1;var ne=R.charCodeAt(l);if(!(C||this.switchU)||ne<=55295||ne>=57344||l+1>=U)return ne;var ae=R.charCodeAt(l+1);return ae>=56320&&ae<=57343?(ne<<10)+ae-56613888:ne},gt.prototype.nextIndex=function(l,C){C===void 0&&(C=!1);var R=this.source,U=R.length;if(l>=U)return U;var ne=R.charCodeAt(l),ae;return!(C||this.switchU)||ne<=55295||ne>=57344||l+1>=U||(ae=R.charCodeAt(l+1))<56320||ae>57343?l+1:l+2},gt.prototype.current=function(l){return l===void 0&&(l=!1),this.at(this.pos,l)},gt.prototype.lookahead=function(l){return l===void 0&&(l=!1),this.at(this.nextIndex(this.pos,l),l)},gt.prototype.advance=function(l){l===void 0&&(l=!1),this.pos=this.nextIndex(this.pos,l)},gt.prototype.eat=function(l,C){return C===void 0&&(C=!1),this.current(C)===l?(this.advance(C),!0):!1},gt.prototype.eatChars=function(l,C){C===void 0&&(C=!1);for(var R=this.pos,U=0,ne=l;U<ne.length;U+=1){var ae=ne[U],we=this.at(R,C);if(we===-1||we!==ae)return!1;R=this.nextIndex(R,C)}return this.pos=R,!0},Ie.validateRegExpFlags=function(i){for(var l=i.validFlags,C=i.flags,R=!1,U=!1,ne=0;ne<C.length;ne++){var ae=C.charAt(ne);l.indexOf(ae)===-1&&this.raise(i.start,"Invalid regular expression flag"),C.indexOf(ae,ne+1)>-1&&this.raise(i.start,"Duplicate regular expression flag"),ae==="u"&&(R=!0),ae==="v"&&(U=!0)}this.options.ecmaVersion>=15&&R&&U&&this.raise(i.start,"Invalid regular expression flag")},Ie.validateRegExpPattern=function(i){this.regexp_pattern(i),!i.switchN&&this.options.ecmaVersion>=9&&i.groupNames.length>0&&(i.switchN=!0,this.regexp_pattern(i))},Ie.regexp_pattern=function(i){i.pos=0,i.lastIntValue=0,i.lastStringValue="",i.lastAssertionIsQuantifiable=!1,i.numCapturingParens=0,i.maxBackReference=0,i.groupNames.length=0,i.backReferenceNames.length=0,this.regexp_disjunction(i),i.pos!==i.source.length&&(i.eat(41)&&i.raise("Unmatched ')'"),(i.eat(93)||i.eat(125))&&i.raise("Lone quantifier brackets")),i.maxBackReference>i.numCapturingParens&&i.raise("Invalid escape");for(var l=0,C=i.backReferenceNames;l<C.length;l+=1){var R=C[l];i.groupNames.indexOf(R)===-1&&i.raise("Invalid named capture referenced")}},Ie.regexp_disjunction=function(i){for(this.regexp_alternative(i);i.eat(124);)this.regexp_alternative(i);this.regexp_eatQuantifier(i,!0)&&i.raise("Nothing to repeat"),i.eat(123)&&i.raise("Lone quantifier brackets")},Ie.regexp_alternative=function(i){for(;i.pos<i.source.length&&this.regexp_eatTerm(i););},Ie.regexp_eatTerm=function(i){return this.regexp_eatAssertion(i)?(i.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(i)&&i.switchU&&i.raise("Invalid quantifier"),!0):(i.switchU?this.regexp_eatAtom(i):this.regexp_eatExtendedAtom(i))?(this.regexp_eatQuantifier(i),!0):!1},Ie.regexp_eatAssertion=function(i){var l=i.pos;if(i.lastAssertionIsQuantifiable=!1,i.eat(94)||i.eat(36))return!0;if(i.eat(92)){if(i.eat(66)||i.eat(98))return!0;i.pos=l}if(i.eat(40)&&i.eat(63)){var C=!1;if(this.options.ecmaVersion>=9&&(C=i.eat(60)),i.eat(61)||i.eat(33))return this.regexp_disjunction(i),i.eat(41)||i.raise("Unterminated group"),i.lastAssertionIsQuantifiable=!C,!0}return i.pos=l,!1},Ie.regexp_eatQuantifier=function(i,l){return l===void 0&&(l=!1),this.regexp_eatQuantifierPrefix(i,l)?(i.eat(63),!0):!1},Ie.regexp_eatQuantifierPrefix=function(i,l){return i.eat(42)||i.eat(43)||i.eat(63)||this.regexp_eatBracedQuantifier(i,l)},Ie.regexp_eatBracedQuantifier=function(i,l){var C=i.pos;if(i.eat(123)){var R=0,U=-1;if(this.regexp_eatDecimalDigits(i)&&(R=i.lastIntValue,i.eat(44)&&this.regexp_eatDecimalDigits(i)&&(U=i.lastIntValue),i.eat(125)))return U!==-1&&U<R&&!l&&i.raise("numbers out of order in {} quantifier"),!0;i.switchU&&!l&&i.raise("Incomplete quantifier"),i.pos=C}return!1},Ie.regexp_eatAtom=function(i){return this.regexp_eatPatternCharacters(i)||i.eat(46)||this.regexp_eatReverseSolidusAtomEscape(i)||this.regexp_eatCharacterClass(i)||this.regexp_eatUncapturingGroup(i)||this.regexp_eatCapturingGroup(i)},Ie.regexp_eatReverseSolidusAtomEscape=function(i){var l=i.pos;if(i.eat(92)){if(this.regexp_eatAtomEscape(i))return!0;i.pos=l}return!1},Ie.regexp_eatUncapturingGroup=function(i){var l=i.pos;if(i.eat(40)){if(i.eat(63)&&i.eat(58)){if(this.regexp_disjunction(i),i.eat(41))return!0;i.raise("Unterminated group")}i.pos=l}return!1},Ie.regexp_eatCapturingGroup=function(i){if(i.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(i):i.current()===63&&i.raise("Invalid group"),this.regexp_disjunction(i),i.eat(41))return i.numCapturingParens+=1,!0;i.raise("Unterminated group")}return!1},Ie.regexp_eatExtendedAtom=function(i){return i.eat(46)||this.regexp_eatReverseSolidusAtomEscape(i)||this.regexp_eatCharacterClass(i)||this.regexp_eatUncapturingGroup(i)||this.regexp_eatCapturingGroup(i)||this.regexp_eatInvalidBracedQuantifier(i)||this.regexp_eatExtendedPatternCharacter(i)},Ie.regexp_eatInvalidBracedQuantifier=function(i){return this.regexp_eatBracedQuantifier(i,!0)&&i.raise("Nothing to repeat"),!1},Ie.regexp_eatSyntaxCharacter=function(i){var l=i.current();return yt(l)?(i.lastIntValue=l,i.advance(),!0):!1};function yt(i){return i===36||i>=40&&i<=43||i===46||i===63||i>=91&&i<=94||i>=123&&i<=125}Ie.regexp_eatPatternCharacters=function(i){for(var l=i.pos,C=0;(C=i.current())!==-1&&!yt(C);)i.advance();return i.pos!==l},Ie.regexp_eatExtendedPatternCharacter=function(i){var l=i.current();return l!==-1&&l!==36&&!(l>=40&&l<=43)&&l!==46&&l!==63&&l!==91&&l!==94&&l!==124?(i.advance(),!0):!1},Ie.regexp_groupSpecifier=function(i){if(i.eat(63)){if(this.regexp_eatGroupName(i)){i.groupNames.indexOf(i.lastStringValue)!==-1&&i.raise("Duplicate capture group name"),i.groupNames.push(i.lastStringValue);return}i.raise("Invalid group")}},Ie.regexp_eatGroupName=function(i){if(i.lastStringValue="",i.eat(60)){if(this.regexp_eatRegExpIdentifierName(i)&&i.eat(62))return!0;i.raise("Invalid capture group name")}return!1},Ie.regexp_eatRegExpIdentifierName=function(i){if(i.lastStringValue="",this.regexp_eatRegExpIdentifierStart(i)){for(i.lastStringValue+=at(i.lastIntValue);this.regexp_eatRegExpIdentifierPart(i);)i.lastStringValue+=at(i.lastIntValue);return!0}return!1},Ie.regexp_eatRegExpIdentifierStart=function(i){var l=i.pos,C=this.options.ecmaVersion>=11,R=i.current(C);return i.advance(C),R===92&&this.regexp_eatRegExpUnicodeEscapeSequence(i,C)&&(R=i.lastIntValue),lt(R)?(i.lastIntValue=R,!0):(i.pos=l,!1)};function lt(i){return be(i,!0)||i===36||i===95}Ie.regexp_eatRegExpIdentifierPart=function(i){var l=i.pos,C=this.options.ecmaVersion>=11,R=i.current(C);return i.advance(C),R===92&&this.regexp_eatRegExpUnicodeEscapeSequence(i,C)&&(R=i.lastIntValue),Ct(R)?(i.lastIntValue=R,!0):(i.pos=l,!1)};function Ct(i){return te(i,!0)||i===36||i===95||i===8204||i===8205}Ie.regexp_eatAtomEscape=function(i){return this.regexp_eatBackReference(i)||this.regexp_eatCharacterClassEscape(i)||this.regexp_eatCharacterEscape(i)||i.switchN&&this.regexp_eatKGroupName(i)?!0:(i.switchU&&(i.current()===99&&i.raise("Invalid unicode escape"),i.raise("Invalid escape")),!1)},Ie.regexp_eatBackReference=function(i){var l=i.pos;if(this.regexp_eatDecimalEscape(i)){var C=i.lastIntValue;if(i.switchU)return C>i.maxBackReference&&(i.maxBackReference=C),!0;if(C<=i.numCapturingParens)return!0;i.pos=l}return!1},Ie.regexp_eatKGroupName=function(i){if(i.eat(107)){if(this.regexp_eatGroupName(i))return i.backReferenceNames.push(i.lastStringValue),!0;i.raise("Invalid named reference")}return!1},Ie.regexp_eatCharacterEscape=function(i){return this.regexp_eatControlEscape(i)||this.regexp_eatCControlLetter(i)||this.regexp_eatZero(i)||this.regexp_eatHexEscapeSequence(i)||this.regexp_eatRegExpUnicodeEscapeSequence(i,!1)||!i.switchU&&this.regexp_eatLegacyOctalEscapeSequence(i)||this.regexp_eatIdentityEscape(i)},Ie.regexp_eatCControlLetter=function(i){var l=i.pos;if(i.eat(99)){if(this.regexp_eatControlLetter(i))return!0;i.pos=l}return!1},Ie.regexp_eatZero=function(i){return i.current()===48&&!Vi(i.lookahead())?(i.lastIntValue=0,i.advance(),!0):!1},Ie.regexp_eatControlEscape=function(i){var l=i.current();return l===116?(i.lastIntValue=9,i.advance(),!0):l===110?(i.lastIntValue=10,i.advance(),!0):l===118?(i.lastIntValue=11,i.advance(),!0):l===102?(i.lastIntValue=12,i.advance(),!0):l===114?(i.lastIntValue=13,i.advance(),!0):!1},Ie.regexp_eatControlLetter=function(i){var l=i.current();return Ht(l)?(i.lastIntValue=l%32,i.advance(),!0):!1};function Ht(i){return i>=65&&i<=90||i>=97&&i<=122}Ie.regexp_eatRegExpUnicodeEscapeSequence=function(i,l){l===void 0&&(l=!1);var C=i.pos,R=l||i.switchU;if(i.eat(117)){if(this.regexp_eatFixedHexDigits(i,4)){var U=i.lastIntValue;if(R&&U>=55296&&U<=56319){var ne=i.pos;if(i.eat(92)&&i.eat(117)&&this.regexp_eatFixedHexDigits(i,4)){var ae=i.lastIntValue;if(ae>=56320&&ae<=57343)return i.lastIntValue=(U-55296)*1024+(ae-56320)+65536,!0}i.pos=ne,i.lastIntValue=U}return!0}if(R&&i.eat(123)&&this.regexp_eatHexDigits(i)&&i.eat(125)&&Mt(i.lastIntValue))return!0;R&&i.raise("Invalid unicode escape"),i.pos=C}return!1};function Mt(i){return i>=0&&i<=1114111}Ie.regexp_eatIdentityEscape=function(i){if(i.switchU)return this.regexp_eatSyntaxCharacter(i)?!0:i.eat(47)?(i.lastIntValue=47,!0):!1;var l=i.current();return l!==99&&(!i.switchN||l!==107)?(i.lastIntValue=l,i.advance(),!0):!1},Ie.regexp_eatDecimalEscape=function(i){i.lastIntValue=0;var l=i.current();if(l>=49&&l<=57){do i.lastIntValue=10*i.lastIntValue+(l-48),i.advance();while((l=i.current())>=48&&l<=57);return!0}return!1};var Yt=0,Ft=1,xt=2;Ie.regexp_eatCharacterClassEscape=function(i){var l=i.current();if(si(l))return i.lastIntValue=-1,i.advance(),Ft;var C=!1;if(i.switchU&&this.options.ecmaVersion>=9&&((C=l===80)||l===112)){i.lastIntValue=-1,i.advance();var R;if(i.eat(123)&&(R=this.regexp_eatUnicodePropertyValueExpression(i))&&i.eat(125))return C&&R===xt&&i.raise("Invalid property name"),R;i.raise("Invalid property name")}return Yt};function si(i){return i===100||i===68||i===115||i===83||i===119||i===87}Ie.regexp_eatUnicodePropertyValueExpression=function(i){var l=i.pos;if(this.regexp_eatUnicodePropertyName(i)&&i.eat(61)){var C=i.lastStringValue;if(this.regexp_eatUnicodePropertyValue(i)){var R=i.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(i,C,R),Ft}}if(i.pos=l,this.regexp_eatLoneUnicodePropertyNameOrValue(i)){var U=i.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(i,U)}return Yt},Ie.regexp_validateUnicodePropertyNameAndValue=function(i,l,C){ve(i.unicodeProperties.nonBinary,l)||i.raise("Invalid property name"),i.unicodeProperties.nonBinary[l].test(C)||i.raise("Invalid property value")},Ie.regexp_validateUnicodePropertyNameOrValue=function(i,l){if(i.unicodeProperties.binary.test(l))return Ft;if(i.switchV&&i.unicodeProperties.binaryOfStrings.test(l))return xt;i.raise("Invalid property name")},Ie.regexp_eatUnicodePropertyName=function(i){var l=0;for(i.lastStringValue="";Ut(l=i.current());)i.lastStringValue+=at(l),i.advance();return i.lastStringValue!==""};function Ut(i){return Ht(i)||i===95}Ie.regexp_eatUnicodePropertyValue=function(i){var l=0;for(i.lastStringValue="";Jt(l=i.current());)i.lastStringValue+=at(l),i.advance();return i.lastStringValue!==""};function Jt(i){return Ut(i)||Vi(i)}Ie.regexp_eatLoneUnicodePropertyNameOrValue=function(i){return this.regexp_eatUnicodePropertyValue(i)},Ie.regexp_eatCharacterClass=function(i){if(i.eat(91)){var l=i.eat(94),C=this.regexp_classContents(i);return i.eat(93)||i.raise("Unterminated character class"),l&&C===xt&&i.raise("Negated character class may contain strings"),!0}return!1},Ie.regexp_classContents=function(i){return i.current()===93?Ft:i.switchV?this.regexp_classSetExpression(i):(this.regexp_nonEmptyClassRanges(i),Ft)},Ie.regexp_nonEmptyClassRanges=function(i){for(;this.regexp_eatClassAtom(i);){var l=i.lastIntValue;if(i.eat(45)&&this.regexp_eatClassAtom(i)){var C=i.lastIntValue;i.switchU&&(l===-1||C===-1)&&i.raise("Invalid character class"),l!==-1&&C!==-1&&l>C&&i.raise("Range out of order in character class")}}},Ie.regexp_eatClassAtom=function(i){var l=i.pos;if(i.eat(92)){if(this.regexp_eatClassEscape(i))return!0;if(i.switchU){var C=i.current();(C===99||bn(C))&&i.raise("Invalid class escape"),i.raise("Invalid escape")}i.pos=l}var R=i.current();return R!==93?(i.lastIntValue=R,i.advance(),!0):!1},Ie.regexp_eatClassEscape=function(i){var l=i.pos;if(i.eat(98))return i.lastIntValue=8,!0;if(i.switchU&&i.eat(45))return i.lastIntValue=45,!0;if(!i.switchU&&i.eat(99)){if(this.regexp_eatClassControlLetter(i))return!0;i.pos=l}return this.regexp_eatCharacterClassEscape(i)||this.regexp_eatCharacterEscape(i)},Ie.regexp_classSetExpression=function(i){var l=Ft,C;if(!this.regexp_eatClassSetRange(i))if(C=this.regexp_eatClassSetOperand(i)){C===xt&&(l=xt);for(var R=i.pos;i.eatChars([38,38]);){if(i.current()!==38&&(C=this.regexp_eatClassSetOperand(i))){C!==xt&&(l=Ft);continue}i.raise("Invalid character in character class")}if(R!==i.pos)return l;for(;i.eatChars([45,45]);)this.regexp_eatClassSetOperand(i)||i.raise("Invalid character in character class");if(R!==i.pos)return l}else i.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(i)){if(C=this.regexp_eatClassSetOperand(i),!C)return l;C===xt&&(l=xt)}},Ie.regexp_eatClassSetRange=function(i){var l=i.pos;if(this.regexp_eatClassSetCharacter(i)){var C=i.lastIntValue;if(i.eat(45)&&this.regexp_eatClassSetCharacter(i)){var R=i.lastIntValue;return C!==-1&&R!==-1&&C>R&&i.raise("Range out of order in character class"),!0}i.pos=l}return!1},Ie.regexp_eatClassSetOperand=function(i){return this.regexp_eatClassSetCharacter(i)?Ft:this.regexp_eatClassStringDisjunction(i)||this.regexp_eatNestedClass(i)},Ie.regexp_eatNestedClass=function(i){var l=i.pos;if(i.eat(91)){var C=i.eat(94),R=this.regexp_classContents(i);if(i.eat(93))return C&&R===xt&&i.raise("Negated character class may contain strings"),R;i.pos=l}if(i.eat(92)){var U=this.regexp_eatCharacterClassEscape(i);if(U)return U;i.pos=l}return null},Ie.regexp_eatClassStringDisjunction=function(i){var l=i.pos;if(i.eatChars([92,113])){if(i.eat(123)){var C=this.regexp_classStringDisjunctionContents(i);if(i.eat(125))return C}else i.raise("Invalid escape");i.pos=l}return null},Ie.regexp_classStringDisjunctionContents=function(i){for(var l=this.regexp_classString(i);i.eat(124);)this.regexp_classString(i)===xt&&(l=xt);return l},Ie.regexp_classString=function(i){for(var l=0;this.regexp_eatClassSetCharacter(i);)l++;return l===1?Ft:xt},Ie.regexp_eatClassSetCharacter=function(i){var l=i.pos;if(i.eat(92))return this.regexp_eatCharacterEscape(i)||this.regexp_eatClassSetReservedPunctuator(i)?!0:i.eat(98)?(i.lastIntValue=8,!0):(i.pos=l,!1);var C=i.current();return C<0||C===i.lookahead()&&yi(C)||ai(C)?!1:(i.advance(),i.lastIntValue=C,!0)};function yi(i){return i===33||i>=35&&i<=38||i>=42&&i<=44||i===46||i>=58&&i<=64||i===94||i===96||i===126}function ai(i){return i===40||i===41||i===45||i===47||i>=91&&i<=93||i>=123&&i<=125}Ie.regexp_eatClassSetReservedPunctuator=function(i){var l=i.current();return Yi(l)?(i.lastIntValue=l,i.advance(),!0):!1};function Yi(i){return i===33||i===35||i===37||i===38||i===44||i===45||i>=58&&i<=62||i===64||i===96||i===126}Ie.regexp_eatClassControlLetter=function(i){var l=i.current();return Vi(l)||l===95?(i.lastIntValue=l%32,i.advance(),!0):!1},Ie.regexp_eatHexEscapeSequence=function(i){var l=i.pos;if(i.eat(120)){if(this.regexp_eatFixedHexDigits(i,2))return!0;i.switchU&&i.raise("Invalid escape"),i.pos=l}return!1},Ie.regexp_eatDecimalDigits=function(i){var l=i.pos,C=0;for(i.lastIntValue=0;Vi(C=i.current());)i.lastIntValue=10*i.lastIntValue+(C-48),i.advance();return i.pos!==l};function Vi(i){return i>=48&&i<=57}Ie.regexp_eatHexDigits=function(i){var l=i.pos,C=0;for(i.lastIntValue=0;mn(C=i.current());)i.lastIntValue=16*i.lastIntValue+vn(C),i.advance();return i.pos!==l};function mn(i){return i>=48&&i<=57||i>=65&&i<=70||i>=97&&i<=102}function vn(i){return i>=65&&i<=70?10+(i-65):i>=97&&i<=102?10+(i-97):i-48}Ie.regexp_eatLegacyOctalEscapeSequence=function(i){if(this.regexp_eatOctalDigit(i)){var l=i.lastIntValue;if(this.regexp_eatOctalDigit(i)){var C=i.lastIntValue;l<=3&&this.regexp_eatOctalDigit(i)?i.lastIntValue=l*64+C*8+i.lastIntValue:i.lastIntValue=l*8+C}else i.lastIntValue=l;return!0}return!1},Ie.regexp_eatOctalDigit=function(i){var l=i.current();return bn(l)?(i.lastIntValue=l-48,i.advance(),!0):(i.lastIntValue=0,!1)};function bn(i){return i>=48&&i<=55}Ie.regexp_eatFixedHexDigits=function(i,l){var C=i.pos;i.lastIntValue=0;for(var R=0;R<l;++R){var U=i.current();if(!mn(U))return i.pos=C,!1;i.lastIntValue=16*i.lastIntValue+vn(U),i.advance()}return!0};var Bi=function(l){this.type=l.type,this.value=l.value,this.start=l.start,this.end=l.end,l.options.locations&&(this.loc=new vt(l,l.startLoc,l.endLoc)),l.options.ranges&&(this.range=[l.start,l.end])},it=e.prototype;it.next=function(i){!i&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Bi(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},it.getToken=function(){return this.next(),new Bi(this)},typeof Symbol<"u"&&(it[Symbol.iterator]=function(){var i=this;return{next:function(){var l=i.getToken();return{done:l.type===T.eof,value:l}}}}),it.nextToken=function(){var i=this.curContext();if((!i||!i.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(T.eof);if(i.override)return i.override(this);this.readToken(this.fullCharCodeAtPos())},it.readToken=function(i){return be(i,this.options.ecmaVersion>=6)||i===92?this.readWord():this.getTokenFromCode(i)},it.fullCharCodeAtPos=function(){var i=this.input.charCodeAt(this.pos);if(i<=55295||i>=56320)return i;var l=this.input.charCodeAt(this.pos+1);return l<=56319||l>=57344?i:(i<<10)+l-56613888},it.skipBlockComment=function(){var i=this.options.onComment&&this.curPosition(),l=this.pos,C=this.input.indexOf("*/",this.pos+=2);if(C===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=C+2,this.options.locations)for(var R=void 0,U=l;(R=nt(this.input,U,this.pos))>-1;)++this.curLine,U=this.lineStart=R;this.options.onComment&&this.options.onComment(!0,this.input.slice(l+2,C),l,this.pos,i,this.curPosition())},it.skipLineComment=function(i){for(var l=this.pos,C=this.options.onComment&&this.curPosition(),R=this.input.charCodeAt(this.pos+=i);this.pos<this.input.length&&!qe(R);)R=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(l+i,this.pos),l,this.pos,C,this.curPosition())},it.skipSpace=function(){e:for(;this.pos<this.input.length;){var i=this.input.charCodeAt(this.pos);switch(i){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(i>8&&i<14||i>=5760&&Re.test(String.fromCharCode(i)))++this.pos;else break e}}},it.finishToken=function(i,l){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var C=this.type;this.type=i,this.value=l,this.updateContext(C)},it.readToken_dot=function(){var i=this.input.charCodeAt(this.pos+1);if(i>=48&&i<=57)return this.readNumber(!0);var l=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&i===46&&l===46?(this.pos+=3,this.finishToken(T.ellipsis)):(++this.pos,this.finishToken(T.dot))},it.readToken_slash=function(){var i=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):i===61?this.finishOp(T.assign,2):this.finishOp(T.slash,1)},it.readToken_mult_modulo_exp=function(i){var l=this.input.charCodeAt(this.pos+1),C=1,R=i===42?T.star:T.modulo;return this.options.ecmaVersion>=7&&i===42&&l===42&&(++C,R=T.starstar,l=this.input.charCodeAt(this.pos+2)),l===61?this.finishOp(T.assign,C+1):this.finishOp(R,C)},it.readToken_pipe_amp=function(i){var l=this.input.charCodeAt(this.pos+1);if(l===i){if(this.options.ecmaVersion>=12){var C=this.input.charCodeAt(this.pos+2);if(C===61)return this.finishOp(T.assign,3)}return this.finishOp(i===124?T.logicalOR:T.logicalAND,2)}return l===61?this.finishOp(T.assign,2):this.finishOp(i===124?T.bitwiseOR:T.bitwiseAND,1)},it.readToken_caret=function(){var i=this.input.charCodeAt(this.pos+1);return i===61?this.finishOp(T.assign,2):this.finishOp(T.bitwiseXOR,1)},it.readToken_plus_min=function(i){var l=this.input.charCodeAt(this.pos+1);return l===i?l===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||xe.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(T.incDec,2):l===61?this.finishOp(T.assign,2):this.finishOp(T.plusMin,1)},it.readToken_lt_gt=function(i){var l=this.input.charCodeAt(this.pos+1),C=1;return l===i?(C=i===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+C)===61?this.finishOp(T.assign,C+1):this.finishOp(T.bitShift,C)):l===33&&i===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(l===61&&(C=2),this.finishOp(T.relational,C))},it.readToken_eq_excl=function(i){var l=this.input.charCodeAt(this.pos+1);return l===61?this.finishOp(T.equality,this.input.charCodeAt(this.pos+2)===61?3:2):i===61&&l===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(T.arrow)):this.finishOp(i===61?T.eq:T.prefix,1)},it.readToken_question=function(){var i=this.options.ecmaVersion;if(i>=11){var l=this.input.charCodeAt(this.pos+1);if(l===46){var C=this.input.charCodeAt(this.pos+2);if(C<48||C>57)return this.finishOp(T.questionDot,2)}if(l===63){if(i>=12){var R=this.input.charCodeAt(this.pos+2);if(R===61)return this.finishOp(T.assign,3)}return this.finishOp(T.coalesce,2)}}return this.finishOp(T.question,1)},it.readToken_numberSign=function(){var i=this.options.ecmaVersion,l=35;if(i>=13&&(++this.pos,l=this.fullCharCodeAtPos(),be(l,!0)||l===92))return this.finishToken(T.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+at(l)+"'")},it.getTokenFromCode=function(i){switch(i){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(T.parenL);case 41:return++this.pos,this.finishToken(T.parenR);case 59:return++this.pos,this.finishToken(T.semi);case 44:return++this.pos,this.finishToken(T.comma);case 91:return++this.pos,this.finishToken(T.bracketL);case 93:return++this.pos,this.finishToken(T.bracketR);case 123:return++this.pos,this.finishToken(T.braceL);case 125:return++this.pos,this.finishToken(T.braceR);case 58:return++this.pos,this.finishToken(T.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(T.backQuote);case 48:var l=this.input.charCodeAt(this.pos+1);if(l===120||l===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(l===111||l===79)return this.readRadixNumber(8);if(l===98||l===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(i);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(i);case 124:case 38:return this.readToken_pipe_amp(i);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(i);case 60:case 62:return this.readToken_lt_gt(i);case 61:case 33:return this.readToken_eq_excl(i);case 63:return this.readToken_question();case 126:return this.finishOp(T.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+at(i)+"'")},it.finishOp=function(i,l){var C=this.input.slice(this.pos,this.pos+l);return this.pos+=l,this.finishToken(i,C)},it.readRegexp=function(){for(var i,l,C=this.pos;;){this.pos>=this.input.length&&this.raise(C,"Unterminated regular expression");var R=this.input.charAt(this.pos);if(xe.test(R)&&this.raise(C,"Unterminated regular expression"),i)i=!1;else{if(R==="[")l=!0;else if(R==="]"&&l)l=!1;else if(R==="/"&&!l)break;i=R==="\\"}++this.pos}var U=this.input.slice(C,this.pos);++this.pos;var ne=this.pos,ae=this.readWord1();this.containsEsc&&this.unexpected(ne);var we=this.regexpState||(this.regexpState=new gt(this));we.reset(C,U,ae),this.validateRegExpFlags(we),this.validateRegExpPattern(we);var Pe=null;try{Pe=new RegExp(U,ae)}catch{}return this.finishToken(T.regexp,{pattern:U,flags:ae,value:Pe})},it.readInt=function(i,l,C){for(var R=this.options.ecmaVersion>=12&&l===void 0,U=C&&this.input.charCodeAt(this.pos)===48,ne=this.pos,ae=0,we=0,Pe=0,Je=l??1/0;Pe<Je;++Pe,++this.pos){var rt=this.input.charCodeAt(this.pos),It=void 0;if(R&&rt===95){U&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),we===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),Pe===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),we=rt;continue}if(rt>=97?It=rt-97+10:rt>=65?It=rt-65+10:rt>=48&&rt<=57?It=rt-48:It=1/0,It>=i)break;we=rt,ae=ae*i+It}return R&&we===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===ne||l!=null&&this.pos-ne!==l?null:ae};function yn(i,l){return l?parseInt(i,8):parseFloat(i.replace(/_/g,""))}function Fi(i){return typeof BigInt!="function"?null:BigInt(i.replace(/_/g,""))}it.readRadixNumber=function(i){var l=this.pos;this.pos+=2;var C=this.readInt(i);return C==null&&this.raise(this.start+2,"Expected number in radix "+i),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(C=Fi(this.input.slice(l,this.pos)),++this.pos):be(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(T.num,C)},it.readNumber=function(i){var l=this.pos;!i&&this.readInt(10,void 0,!0)===null&&this.raise(l,"Invalid number");var C=this.pos-l>=2&&this.input.charCodeAt(l)===48;C&&this.strict&&this.raise(l,"Invalid number");var R=this.input.charCodeAt(this.pos);if(!C&&!i&&this.options.ecmaVersion>=11&&R===110){var U=Fi(this.input.slice(l,this.pos));return++this.pos,be(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(T.num,U)}C&&/[89]/.test(this.input.slice(l,this.pos))&&(C=!1),R===46&&!C&&(++this.pos,this.readInt(10),R=this.input.charCodeAt(this.pos)),(R===69||R===101)&&!C&&(R=this.input.charCodeAt(++this.pos),(R===43||R===45)&&++this.pos,this.readInt(10)===null&&this.raise(l,"Invalid number")),be(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var ne=yn(this.input.slice(l,this.pos),C);return this.finishToken(T.num,ne)},it.readCodePoint=function(){var i=this.input.charCodeAt(this.pos),l;if(i===123){this.options.ecmaVersion<6&&this.unexpected();var C=++this.pos;l=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,l>1114111&&this.invalidStringToken(C,"Code point out of bounds")}else l=this.readHexChar(4);return l},it.readString=function(i){for(var l="",C=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var R=this.input.charCodeAt(this.pos);if(R===i)break;R===92?(l+=this.input.slice(C,this.pos),l+=this.readEscapedChar(!1),C=this.pos):R===8232||R===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(qe(R)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return l+=this.input.slice(C,this.pos++),this.finishToken(T.string,l)};var Di={};it.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(i){if(i===Di)this.readInvalidTemplateToken();else throw i}this.inTemplateElement=!1},it.invalidStringToken=function(i,l){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Di;this.raise(i,l)},it.readTmplToken=function(){for(var i="",l=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var C=this.input.charCodeAt(this.pos);if(C===96||C===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===T.template||this.type===T.invalidTemplate)?C===36?(this.pos+=2,this.finishToken(T.dollarBraceL)):(++this.pos,this.finishToken(T.backQuote)):(i+=this.input.slice(l,this.pos),this.finishToken(T.template,i));if(C===92)i+=this.input.slice(l,this.pos),i+=this.readEscapedChar(!0),l=this.pos;else if(qe(C)){switch(i+=this.input.slice(l,this.pos),++this.pos,C){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:i+=`
`;break;default:i+=String.fromCharCode(C);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),l=this.pos}else++this.pos}},it.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(T.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},it.readEscapedChar=function(i){var l=this.input.charCodeAt(++this.pos);switch(++this.pos,l){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return at(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),i){var C=this.pos-1;this.invalidStringToken(C,"Invalid escape sequence in template string")}default:if(l>=48&&l<=55){var R=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],U=parseInt(R,8);return U>255&&(R=R.slice(0,-1),U=parseInt(R,8)),this.pos+=R.length-1,l=this.input.charCodeAt(this.pos),(R!=="0"||l===56||l===57)&&(this.strict||i)&&this.invalidStringToken(this.pos-1-R.length,i?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(U)}return qe(l)?"":String.fromCharCode(l)}},it.readHexChar=function(i){var l=this.pos,C=this.readInt(16,i);return C===null&&this.invalidStringToken(l,"Bad character escape sequence"),C},it.readWord1=function(){this.containsEsc=!1;for(var i="",l=!0,C=this.pos,R=this.options.ecmaVersion>=6;this.pos<this.input.length;){var U=this.fullCharCodeAtPos();if(te(U,R))this.pos+=U<=65535?1:2;else if(U===92){this.containsEsc=!0,i+=this.input.slice(C,this.pos);var ne=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var ae=this.readCodePoint();(l?be:te)(ae,R)||this.invalidStringToken(ne,"Invalid Unicode escape"),i+=at(ae),C=this.pos}else break;l=!1}return i+this.input.slice(C,this.pos)},it.readWord=function(){var i=this.readWord1(),l=T.name;return this.keywords.test(i)&&(l=Me[i]),this.finishToken(l,i)};var Si="8.11.2";e.acorn={Parser:e,version:Si,defaultOptions:ct,Position:ei,SourceLocation:vt,getLineInfo:Oe,Node:V,TokenType:ie,tokTypes:T,keywordTypes:Me,TokContext:I,tokContexts:E,isIdentifierChar:te,isIdentifierStart:be,Token:Bi,isNewLine:qe,lineBreak:xe,lineBreakG:Le,nonASCIIwhitespace:Re};function Ci(i,l){return e.parse(i,l)}function li(i,l,C){return e.parseExpressionAt(i,l,C)}function ui(i,l){return e.tokenizer(i,l)}h.Node=V,h.Parser=e,h.Position=ei,h.SourceLocation=vt,h.TokContext=I,h.Token=Bi,h.TokenType=ie,h.defaultOptions=ct,h.getLineInfo=Oe,h.isIdentifierChar=te,h.isIdentifierStart=be,h.isNewLine=qe,h.keywordTypes=Me,h.lineBreak=xe,h.lineBreakG=Le,h.nonASCIIwhitespace=Re,h.parse=Ci,h.parseExpressionAt=li,h.tokContexts=E,h.tokTypes=T,h.tokenizer=ui,h.version=Si})}(Hn,Hn.exports)),Hn.exports}/*!
 * Paper.js v0.12.17 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Thu Nov 3 21:15:36 2022 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jürg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(o){(function(a,h){a=a||os;var p=a.window,g=a.document,c=new function(){var e=/^(statics|enumerable|beans|preserve)$/,t=[],n=t.slice,r=Object.create,s=Object.getOwnPropertyDescriptor,u=Object.defineProperty,d=t.forEach||function(y,b){for(var N=0,I=this.length;N<I;N++)y.call(b,this[N],N,this)},f=function(y,b){for(var N in this)this.hasOwnProperty(N)&&y.call(b,this[N],N,this)},_=Object.assign||function(y){for(var b=1,N=arguments.length;b<N;b++){var I=arguments[b];for(var E in I)I.hasOwnProperty(E)&&(y[E]=I[E])}return y},m=function(y,b,N){if(y){var I=s(y,"length");(I&&typeof I.value=="number"?d:f).call(y,b,N=N||y)}return N};function x(y,b,N,I,E){var w={};function k(M,V){V=V||(V=s(b,M))&&(V.get?V:V.value),typeof V=="string"&&V[0]==="#"&&(V=y[V.substring(1)]||V);var q=typeof V=="function",j=V,X=E||q&&!V.base?V&&V.get?M in y:y[M]:null,H;(!E||!X)&&(q&&X&&(V.base=X),q&&I!==!1&&(H=M.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(w[H[3].toLowerCase()+H[4]]=H[2]),(!j||q||!j.get||typeof j.get!="function"||!S.isPlainObject(j))&&(j={value:j,writable:!0}),(s(y,M)||{configurable:!0}).configurable&&(j.configurable=!0,j.enumerable=N??!H),u(y,M,j))}if(b){for(var v in b)b.hasOwnProperty(v)&&!e.test(v)&&k(v);for(var v in w){var A=w[v],L=y["set"+A],z=y["get"+A]||L&&y["is"+A];z&&(I===!0||z.length===0)&&k(v,{get:z,set:L})}}return y}function S(){for(var y=0,b=arguments.length;y<b;y++){var N=arguments[y];N&&_(this,N)}return this}return x(S,{inject:function(y){if(y){var b=y.statics===!0?y:y.statics,N=y.beans,I=y.preserve;b!==y&&x(this.prototype,y,y.enumerable,N,I),x(this,b,null,N,I)}for(var E=1,w=arguments.length;E<w;E++)this.inject(arguments[E]);return this},extend:function(){for(var y=this,b,N,I=0,E,w=arguments.length;I<w&&!(b&&N);I++)E=arguments[I],b=b||E.initialize,N=N||E.prototype;return b=b||function(){y.apply(this,arguments)},N=b.prototype=N||r(this.prototype),u(N,"constructor",{value:b,writable:!0,configurable:!0}),x(b,this),arguments.length&&this.inject.apply(b,arguments),b.base=y,b}}).inject({enumerable:!1,initialize:S,set:S,inject:function(){for(var y=0,b=arguments.length;y<b;y++){var N=arguments[y];N&&x(this,N,N.enumerable,N.beans,N.preserve)}return this},extend:function(){var y=r(this);return y.inject.apply(y,arguments)},each:function(y,b){return m(this,y,b)},clone:function(){return new this.constructor(this)},statics:{set:_,each:m,create:r,define:u,describe:s,clone:function(y){return _(new y.constructor,y)},isPlainObject:function(y){var b=y!=null&&y.constructor;return b&&(b===Object||b===S||b.name==="Object")},pick:function(y,b){return y!==h?y:b},slice:function(y,b,N){return n.call(y,b,N)}}})};o.exports=c,c.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+c.each(this,function(e,t){if(!/^_/.test(t)){var n=typeof e;this.push(t+": "+(n==="number"?Z.instance.number(e):n==="string"?"'"+e+"'":e))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(e){return c.importJSON(e,this)},exportJSON:function(e){return c.exportJSON(this,e)},toJSON:function(){return c.serialize(this)},set:function(e,t){return e&&c.filter(this,e,t,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function e(){var t=e.base.apply(this,arguments),n=t.prototype._class;return n&&!c.exports[n]&&(c.exports[n]=t),t},equals:function(e,t){if(e===t)return!0;if(e&&e.equals)return e.equals(t);if(t&&t.equals)return t.equals(e);if(e&&t&&typeof e=="object"&&typeof t=="object"){if(Array.isArray(e)&&Array.isArray(t)){var n=e.length;if(n!==t.length)return!1;for(;n--;)if(!c.equals(e[n],t[n]))return!1}else{var r=Object.keys(e),n=r.length;if(n!==Object.keys(t).length)return!1;for(;n--;){var s=r[n];if(!(t.hasOwnProperty(s)&&c.equals(e[s],t[s])))return!1}}return!0}return!1},read:function(e,t,n,r){if(this===c){var s=this.peek(e,t);return e.__index++,s}var u=this.prototype,d=u._readIndex,f=t||d&&e.__index||0,_=e.length,m=e[f];if(r=r||_-f,m instanceof this||n&&n.readNull&&m==null&&r<=1)return d&&(e.__index=f+1),m&&n&&n.clone?m.clone():m;if(m=c.create(u),d&&(m.__read=!0),m=m.initialize.apply(m,f>0||f+r<_?c.slice(e,f,f+r):e)||m,d){e.__index=f+m.__read;var x=m.__filtered;x&&(e.__filtered=x,m.__filtered=h),m.__read=h}return m},peek:function(e,t){return e[e.__index=t||e.__index||0]},remain:function(e){return e.length-(e.__index||0)},readList:function(e,t,n,r){for(var s=[],u,d=t||0,f=r?d+r:e.length,_=d;_<f;_++)s.push(Array.isArray(u=e[_])?this.read(u,0,n):this.read(e,_,n,1));return s},readNamed:function(e,t,n,r,s){var u=this.getNamed(e,t),d=u!==h;if(d){var f=e.__filtered;if(!f){var _=this.getSource(e);f=e.__filtered=c.create(_),f.__unfiltered=_}f[t]=h}return this.read(d?[u]:e,n,r,s)},readSupported:function(e,t){var n=this.getSource(e),r=this,s=!1;return n&&Object.keys(n).forEach(function(u){if(u in t){var d=r.readNamed(e,u);d!==h&&(t[u]=d),s=!0}}),s},getSource:function(e){var t=e.__source;if(t===h){var n=e.length===1&&e[0];t=e.__source=n&&c.isPlainObject(n)?n:null}return t},getNamed:function(e,t){var n=this.getSource(e);if(n)return t?n[t]:e.__filtered||n},hasNamed:function(e,t){return!!this.getNamed(e,t)},filter:function(e,t,n,r){var s;function u(x){if(!(n&&x in n)&&!(s&&x in s)){var S=t[x];S!==h&&(e[x]=S)}}if(r){for(var d={},f=0,_,m=r.length;f<m;f++)(_=r[f])in t&&(u(_),d[_]=!0);s=d}return Object.keys(t.__unfiltered||t).forEach(u),e},isPlainValue:function(e,t){return c.isPlainObject(e)||Array.isArray(e)||t&&typeof e=="string"},serialize:function(e,t,n,r){t=t||{};var s=!r,u;if(s&&(t.formatter=new Z(t.precision),r={length:0,definitions:{},references:{},add:function(S,y){var b="#"+S._id,N=this.references[b];if(!N){this.length++;var I=y.call(S),E=S._class;E&&I[0]!==E&&I.unshift(E),this.definitions[b]=I,N=this.references[b]=[b]}return N}}),e&&e._serialize){u=e._serialize(t,r);var d=e._class;d&&!e._compactSerialize&&(s||!n)&&u[0]!==d&&u.unshift(d)}else if(Array.isArray(e)){u=[];for(var f=0,_=e.length;f<_;f++)u[f]=c.serialize(e[f],t,n,r)}else if(c.isPlainObject(e)){u={};for(var m=Object.keys(e),f=0,_=m.length;f<_;f++){var x=m[f];u[x]=c.serialize(e[x],t,n,r)}}else typeof e=="number"?u=t.formatter.number(e,t.precision):u=e;return s&&r.length>0?[["dictionary",r.definitions],u]:u},deserialize:function(e,t,n,r,s){var u=e,d=!n,f=d&&e&&e.length&&e[0][0]==="dictionary";if(n=n||{},Array.isArray(e)){var _=e[0],m=_==="dictionary";if(e.length==1&&/^#/.test(_))return n.dictionary[_];_=c.exports[_],u=[];for(var x=_?1:0,S=e.length;x<S;x++)u.push(c.deserialize(e[x],t,n,m,f));if(_){var y=u;t?u=t(_,y,d||s):u=new _(y)}}else if(c.isPlainObject(e)){u={},r&&(n.dictionary=u);for(var b in e)u[b]=c.deserialize(e[b],t,n)}return f?u[1]:u},exportJSON:function(e,t){var n=c.serialize(e,t);return t&&t.asString==!1?n:JSON.stringify(n)},importJSON:function(e,t){return c.deserialize(typeof e=="string"?JSON.parse(e):e,function(n,r,s){var u=s&&t&&t.constructor===n,d=u?t:c.create(n.prototype);if(r.length===1&&d instanceof T&&(u||!(d instanceof Le))){var f=r[0];c.isPlainObject(f)&&(f.insert=!1,u&&(r=r.concat([T.INSERT])))}return(u?d.set:n).apply(d,r),u&&(t=null),d})},push:function(e,t){var n=t.length;if(n<4096)e.push.apply(e,t);else{var r=e.length;e.length+=n;for(var s=0;s<n;s++)e[r+s]=t[s]}return e},splice:function(e,t,n,r){var s=t&&t.length,u=n===h;n=u?e.length:n,n>e.length&&(n=e.length);for(var d=0;d<s;d++)t[d]._index=n+d;if(u)return c.push(e,t),[];var f=[n,r];t&&c.push(f,t);for(var _=e.splice.apply(e,f),d=0,m=_.length;d<m;d++)_[d]._index=h;for(var d=n+s,m=e.length;d<m;d++)e[d]._index=d;return _},capitalize:function(e){return e.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(e){return e.replace(/-(.)/g,function(t,n){return n.toUpperCase()})},hyphenate:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var P={on:function(e,t){if(typeof e!="string")c.each(e,function(u,d){this.on(d,u)},this);else{var n=this._eventTypes,r=n&&n[e],s=this._callbacks=this._callbacks||{};s=s[e]=s[e]||[],s.indexOf(t)===-1&&(s.push(t),r&&r.install&&s.length===1&&r.install.call(this,e))}return this},off:function(e,t){if(typeof e!="string"){c.each(e,function(d,f){this.off(f,d)},this);return}var n=this._eventTypes,r=n&&n[e],s=this._callbacks&&this._callbacks[e],u;return s&&(!t||(u=s.indexOf(t))!==-1&&s.length===1?(r&&r.uninstall&&r.uninstall.call(this,e),delete this._callbacks[e]):u!==-1&&s.splice(u,1)),this},once:function(e,t){return this.on(e,function n(){t.apply(this,arguments),this.off(e,n)})},emit:function(e,t){var n=this._callbacks&&this._callbacks[e];if(!n)return!1;var r=c.slice(arguments,1),s=t&&t.target&&!t.currentTarget;n=n.slice(),s&&(t.currentTarget=this);for(var u=0,d=n.length;u<d;u++)if(n[u].apply(this,r)==!1){t&&t.stop&&t.stop();break}return s&&delete t.currentTarget,!0},responds:function(e){return!!(this._callbacks&&this._callbacks[e])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(e){var t=this._eventTypes,n=this._callbacks,r=e?"install":"uninstall";if(t){for(var s in n)if(n[s].length>0){var u=t[s],d=u&&u[r];d&&d.call(this,s)}}},statics:{inject:function e(t){var n=t._events;if(n){var r={};c.each(n,function(s,u){var d=typeof s=="string",f=d?s:u,_=c.capitalize(f),m=f.substring(2).toLowerCase();r[m]=d?{}:s,f="_"+f,t["get"+_]=function(){return this[f]},t["set"+_]=function(x){var S=this[f];S&&this.off(m,S),x&&this.on(m,x),this[f]=x}}),t._eventTypes=r}return e.base.apply(this,arguments)}}},O=c.extend({_class:"PaperScope",initialize:function e(){et=this,this.settings=new c({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=e._id++,e._scopes[this._id]=this;var t=e.prototype;if(!this.support){var n=St.getContext(1,1)||{};t.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:ri.nativeModes},St.release(n)}if(!this.agent){var r=a.navigator.userAgent.toLowerCase(),s=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(r)||[])[0],u=s==="darwin"?"mac":s,d=t.agent=t.browser={platform:u};u&&(d[u]=!0),r.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(f,_,m,x,S){if(!d.chrome){var y=_==="opera"?x:/^(node|trident)$/.test(_)?S:m;d.version=y,d.versionNumber=parseFloat(y),_={trident:"msie",jsdom:"node"}[_]||_,d.name=_,d[_]=!0}}),d.chrome&&delete d.webkit,d.atom&&delete d.chrome}},version:"0.12.17",getView:function(){var e=this.project;return e&&e._view},getPaper:function(){return this},execute:function(e,t){var n=et.PaperScript.execute(e,this,t);return pt.updateFocus(),n},install:function(e){var t=this;c.each(["project","view","tool"],function(r){c.define(e,r,{configurable:!0,get:function(){return t[r]}})});for(var n in this)!/^_/.test(n)&&this[n]&&(e[n]=this[n])},setup:function(e){return et=this,this.project=new ce(e),this},createCanvas:function(e,t){return St.getCanvas(e,t)},activate:function(){et=this},clear:function(){for(var e=this.projects,t=this.tools,n=e.length-1;n>=0;n--)e[n].remove();for(var n=t.length-1;n>=0;n--)t[n].remove()},remove:function(){this.clear(),delete O._scopes[this._id]},statics:new function(){function e(t){return t+="Attribute",function(n,r){return n[t](r)||n[t]("data-paper-"+r)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:e("get"),hasAttribute:e("has")}}}),B=c.extend(P,{initialize:function(e){this._scope=et,this._index=this._scope[this._list].push(this)-1,(e||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var e=this._scope[this._reference];return e&&e!==this&&e.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",e),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(c.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),D={findItemBoundsCollisions:function(e,t,n){function r(d){for(var f=new Array(d.length),_=0;_<d.length;_++){var m=d[_].getBounds();f[_]=[m.left,m.top,m.right,m.bottom]}return f}var s=r(e),u=!t||t===e?s:r(t);return this.findBoundsCollisions(s,u,n||0)},findCurveBoundsCollisions:function(e,t,n,r){function s(y){for(var b=Math.min,N=Math.max,I=new Array(y.length),E=0;E<y.length;E++){var w=y[E];I[E]=[b(w[0],w[2],w[4],w[6]),b(w[1],w[3],w[5],w[7]),N(w[0],w[2],w[4],w[6]),N(w[1],w[3],w[5],w[7])]}return I}var u=s(e),d=!t||t===e?u:s(t);if(r){for(var f=this.findBoundsCollisions(u,d,n||0,!1,!0),_=this.findBoundsCollisions(u,d,n||0,!0,!0),m=[],x=0,S=f.length;x<S;x++)m[x]={hor:f[x],ver:_[x]};return m}return this.findBoundsCollisions(u,d,n||0)},findBoundsCollisions:function(e,t,n,r,s){var u=!t||e===t,d=u?e:e.concat(t),f=e.length,_=d.length;function m(ye,Ce,Ee){for(var he=0,de=ye.length;he<de;){var ke=de+he>>>1;d[ye[ke]][Ce]<Ee?he=ke+1:de=ke}return he-1}for(var x=r?1:0,S=x+2,y=r?0:1,b=y+2,N=new Array(_),I=0;I<_;I++)N[I]=I;N.sort(function(ye,Ce){return d[ye][x]-d[Ce][x]});for(var E=[],w=new Array(f),I=0;I<_;I++){var k=N[I],v=d[k],A=u?k:k-f,L=k<f,z=u||!L,M=L?[]:null;if(E.length){var V=m(E,S,v[x]-n)+1;if(E.splice(0,V),u&&s){M=M.concat(E);for(var q=0;q<E.length;q++){var j=E[q];w[j].push(A)}}else for(var X=v[b],H=v[y],q=0;q<E.length;q++){var j=E[q],G=d[j],Q=j<f,J=u||j>=f;(s||(L&&J||z&&Q)&&X>=G[y]-n&&H<=G[b]+n)&&(L&&J&&M.push(u?j:j-f),z&&Q&&w[j].push(A))}}if(L&&(e===t&&M.push(k),w[k]=M),E.length){var $=v[S],se=m(E,S,$);E.splice(se+1,0,k)}else E.push(k)}for(var I=0;I<w.length;I++){var _e=w[I];_e&&_e.sort(function(Ce,Ee){return Ce-Ee})}return w}},Z=c.extend({initialize:function(e){this.precision=c.pick(e,5),this.multiplier=Math.pow(10,this.precision)},number:function(e){return this.precision<16?Math.round(e*this.multiplier)/this.multiplier:e},pair:function(e,t,n){return this.number(e)+(n||",")+this.number(t)},point:function(e,t){return this.number(e.x)+(t||",")+this.number(e.y)},size:function(e,t){return this.number(e.width)+(t||",")+this.number(e.height)},rectangle:function(e,t){return this.point(e,t)+(t||",")+this.size(e,t)}});Z.instance=new Z;var K=new function(){var e=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],t=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,r=Math.sqrt,s=Math.pow,u=Math.log2||function(S){return Math.log(S)*Math.LOG2E},d=1e-12,f=112e-18;function _(S,y,b){return S<y?y:S>b?b:S}function m(S,y,b){function N(V){var q=V*134217729,j=V-q,X=j+q,H=V-X;return[X,H]}var I=y*y-S*b,E=y*y+S*b;if(n(I)*3<E){var w=N(S),k=N(y),v=N(b),A=y*y,L=k[0]*k[0]-A+2*k[0]*k[1]+k[1]*k[1],z=S*b,M=w[0]*v[0]-z+w[0]*v[1]+w[1]*v[0]+w[1]*v[1];I=A-z+(L-M)}return I}function x(){var S=Math.max.apply(Math,arguments);return S&&(S<1e-8||S>1e8)?s(2,-Math.round(u(S))):0}return{EPSILON:d,MACHINE_EPSILON:f,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(r(2)-1)/3,isZero:function(S){return S>=-d&&S<=d},isMachineZero:function(S){return S>=-f&&S<=f},clamp:_,integrate:function(S,y,b,N){for(var I=e[N-2],E=t[N-2],w=(b-y)*.5,k=w+y,v=0,A=N+1>>1,L=N&1?E[v++]*S(k):0;v<A;){var z=w*I[v];L+=E[v++]*(S(k+z)+S(k-z))}return w*L},findRoot:function(S,y,b,N,I,E,w){for(var k=0;k<E;k++){var v=S(b),A=v/y(b),L=b-A;if(n(A)<w){b=L;break}v>0?(I=b,b=L<=N?(N+I)*.5:L):(N=b,b=L>=I?(N+I)*.5:L)}return _(b,N,I)},solveQuadratic:function(S,y,b,N,I,E){var w,k=1/0;if(n(S)<d){if(n(y)<d)return n(b)<d?-1:0;w=-b/y}else{y*=-.5;var v=m(S,y,b);if(v&&n(v)<f){var A=x(n(S),n(y),n(b));A&&(S*=A,y*=A,b*=A,v=m(S,y,b))}if(v>=-f){var L=v<0?0:r(v),z=y+(y<0?-L:L);z===0?(w=b/S,k=-w):(w=z/S,k=b/z)}}var M=0,V=I==null,q=I-d,j=E+d;return isFinite(w)&&(V||w>q&&w<j)&&(N[M++]=V?w:_(w,I,E)),k!==w&&isFinite(k)&&(V||k>q&&k<j)&&(N[M++]=V?k:_(k,I,E)),M},solveCubic:function(S,y,b,N,I,E,w){var k=x(n(S),n(y),n(b),n(N)),v,A,L,z,M;k&&(S*=k,y*=k,b*=k,N*=k);function V(se){v=se;var _e=S*v;A=_e+y,L=A*v+b,z=(_e+A)*v+L,M=L*v+N}if(n(S)<d)S=y,A=b,L=N,v=1/0;else if(n(N)<d)A=y,L=b,v=0;else{V(-(y/S)/3);var q=M/S,j=s(n(q),1/3),X=q<0?-1:1,H=-z/S,G=H>0?1.324717957244746*Math.max(j,r(H)):j,Q=v-X*G;if(Q!==v){do V(Q),Q=z===0?v:v-M/z/(1+f);while(X*Q>X*v);n(S)*v*v>n(N/v)&&(L=-N/v,A=(L-b)/v)}}var J=K.solveQuadratic(S,A,L,I,E,w),$=E==null;return isFinite(v)&&(J===0||J>0&&v!==I[0]&&v!==I[1])&&($||v>E-d&&v<w+d)&&(I[J++]=$?v:_(v,E,w)),J}}},oe={_id:1,_pools:{},get:function(e){if(e){var t=this._pools[e];return t||(t=this._pools[e]={_id:1}),t._id++}else return this._id++}},F=c.extend({_class:"Point",_readIndex:!0,initialize:function(t,n){var r=typeof t,s=this.__read,u=0;if(r==="number"){var d=typeof n=="number";this._set(t,d?n:t),s&&(u=d?2:1)}else if(r==="undefined"||t===null)this._set(0,0),s&&(u=t===null?1:0);else{var f=r==="string"?t.split(/[\s,]+/)||[]:t;u=1,Array.isArray(f)?this._set(+f[0],+(f.length>1?f[1]:f[0])):"x"in f?this._set(f.x||0,f.y||0):"width"in f?this._set(f.width||0,f.height||0):"angle"in f?(this._set(f.length||0,0),this.setAngle(f.angle||0)):(this._set(0,0),u=0)}return s&&(this.__read=u),this},set:"#initialize",_set:function(e,t){return this.x=e,this.y=t,this},equals:function(e){return this===e||e&&(this.x===e.x&&this.y===e.y||Array.isArray(e)&&this.x===e[0]&&this.y===e[1])||!1},clone:function(){return new F(this.x,this.y)},toString:function(){var e=Z.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(e){if(this.isZero()){var t=this._angle||0;this._set(Math.cos(t)*e,Math.sin(t)*e)}else{var n=e/this.getLength();K.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(e){this.setAngleInRadians.call(this,e*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var e=F.read(arguments),t=this.getLength()*e.getLength();if(K.isZero(t))return NaN;var n=this.dot(e)/t;return Math.acos(n<-1?-1:n>1?1:n)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(e){if(this._angle=e,!this.isZero()){var t=this.getLength();this._set(Math.cos(e)*t,Math.sin(e)*t)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var e=F.read(arguments);return Math.atan2(this.cross(e),this.dot(e))*180/Math.PI},getDistance:function(){var e=arguments,t=F.read(e),n=t.x-this.x,r=t.y-this.y,s=n*n+r*r,u=c.read(e);return u?s:Math.sqrt(s)},normalize:function(e){e===h&&(e=1);var t=this.getLength(),n=t!==0?e/t:0,r=new F(this.x*n,this.y*n);return n>=0&&(r._angle=this._angle),r},rotate:function(e,t){if(e===0)return this.clone();e=e*Math.PI/180;var n=t?this.subtract(t):this,r=Math.sin(e),s=Math.cos(e);return n=new F(n.x*s-n.y*r,n.x*r+n.y*s),t?n.add(t):n},transform:function(e){return e?e._transformPoint(this):this},add:function(){var e=F.read(arguments);return new F(this.x+e.x,this.y+e.y)},subtract:function(){var e=F.read(arguments);return new F(this.x-e.x,this.y-e.y)},multiply:function(){var e=F.read(arguments);return new F(this.x*e.x,this.y*e.y)},divide:function(){var e=F.read(arguments);return new F(this.x/e.x,this.y/e.y)},modulo:function(){var e=F.read(arguments);return new F(this.x%e.x,this.y%e.y)},negate:function(){return new F(-this.x,-this.y)},isInside:function(){return ee.read(arguments).contains(this)},isClose:function(){var e=arguments,t=F.read(e),n=c.read(e);return this.getDistance(t)<=n},isCollinear:function(){var e=F.read(arguments);return F.isCollinear(this.x,this.y,e.x,e.y)},isColinear:"#isCollinear",isOrthogonal:function(){var e=F.read(arguments);return F.isOrthogonal(this.x,this.y,e.x,e.y)},isZero:function(){var e=K.isZero;return e(this.x)&&e(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(e){return this.x*(e>1&&e<4?-1:1)>=0&&this.y*(e>2?-1:1)>=0},dot:function(){var e=F.read(arguments);return this.x*e.x+this.y*e.y},cross:function(){var e=F.read(arguments);return this.x*e.y-this.y*e.x},project:function(){var e=F.read(arguments),t=e.isZero()?0:this.dot(e)/e.dot(e);return new F(e.x*t,e.y*t)},statics:{min:function(){var e=arguments,t=F.read(e),n=F.read(e);return new F(Math.min(t.x,n.x),Math.min(t.y,n.y))},max:function(){var e=arguments,t=F.read(e),n=F.read(e);return new F(Math.max(t.x,n.x),Math.max(t.y,n.y))},random:function(){return new F(Math.random(),Math.random())},isCollinear:function(e,t,n,r){return Math.abs(e*r-t*n)<=Math.sqrt((e*e+t*t)*(n*n+r*r))*1e-8},isOrthogonal:function(e,t,n,r){return Math.abs(e*n+t*r)<=Math.sqrt((e*e+t*t)*(n*n+r*r))*1e-8}}},c.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new F(t(this.x),t(this.y))}},{})),be=F.extend({initialize:function(t,n,r,s){this._x=t,this._y=n,this._owner=r,this._setter=s},_set:function(e,t,n){return this._x=e,this._y=t,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),te=c.extend({_class:"Size",_readIndex:!0,initialize:function(t,n){var r=typeof t,s=this.__read,u=0;if(r==="number"){var d=typeof n=="number";this._set(t,d?n:t),s&&(u=d?2:1)}else if(r==="undefined"||t===null)this._set(0,0),s&&(u=t===null?1:0);else{var f=r==="string"?t.split(/[\s,]+/)||[]:t;u=1,Array.isArray(f)?this._set(+f[0],+(f.length>1?f[1]:f[0])):"width"in f?this._set(f.width||0,f.height||0):"x"in f?this._set(f.x||0,f.y||0):(this._set(0,0),u=0)}return s&&(this.__read=u),this},set:"#initialize",_set:function(e,t){return this.width=e,this.height=t,this},equals:function(e){return e===this||e&&(this.width===e.width&&this.height===e.height||Array.isArray(e)&&this.width===e[0]&&this.height===e[1])||!1},clone:function(){return new te(this.width,this.height)},toString:function(){var e=Z.instance;return"{ width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.width),t.number(this.height)]},add:function(){var e=te.read(arguments);return new te(this.width+e.width,this.height+e.height)},subtract:function(){var e=te.read(arguments);return new te(this.width-e.width,this.height-e.height)},multiply:function(){var e=te.read(arguments);return new te(this.width*e.width,this.height*e.height)},divide:function(){var e=te.read(arguments);return new te(this.width/e.width,this.height/e.height)},modulo:function(){var e=te.read(arguments);return new te(this.width%e.width,this.height%e.height)},negate:function(){return new te(-this.width,-this.height)},isZero:function(){var e=K.isZero;return e(this.width)&&e(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(e,t){return new te(Math.min(e.width,t.width),Math.min(e.height,t.height))},max:function(e,t){return new te(Math.max(e.width,t.width),Math.max(e.height,t.height))},random:function(){return new te(Math.random(),Math.random())}}},c.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new te(t(this.width),t(this.height))}},{})),ie=te.extend({initialize:function(t,n,r,s){this._width=t,this._height=n,this._owner=r,this._setter=s},_set:function(e,t,n){return this._width=e,this._height=t,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(e){this._width=e,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(e){this._height=e,this._owner[this._setter](this)}}),ee=c.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,n,r,s){var u=arguments,d=typeof t,f;if(d==="number"?(this._set(t,n,r,s),f=4):d==="undefined"||t===null?(this._set(0,0,0,0),f=t===null?1:0):u.length===1&&(Array.isArray(t)?(this._set.apply(this,t),f=1):t.x!==h||t.width!==h?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),f=1):t.from===h&&t.to===h&&(this._set(0,0,0,0),c.readSupported(u,this)&&(f=1))),f===h){var _=F.readNamed(u,"from"),m=c.peek(u),x=_.x,S=_.y,y,b;if(m&&m.x!==h||c.hasNamed(u,"to")){var N=F.readNamed(u,"to");y=N.x-x,b=N.y-S,y<0&&(x=N.x,y=-y),b<0&&(S=N.y,b=-b)}else{var I=te.read(u);y=I.width,b=I.height}this._set(x,S,y,b),f=u.__index}var E=u.__filtered;return E&&(this.__filtered=E),this.__read&&(this.__read=f),this},set:"#initialize",_set:function(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this},clone:function(){return new ee(this.x,this.y,this.width,this.height)},equals:function(e){var t=c.isPlainValue(e)?ee.read(arguments):e;return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height||!1},toString:function(){var e=Z.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+", width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)]},getPoint:function(e){var t=e?F:be;return new t(this.x,this.y,this,"setPoint")},setPoint:function(){var e=F.read(arguments);this.x=e.x,this.y=e.y},getSize:function(e){var t=e?te:ie;return new t(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var e=te.read(arguments),t=this._sx,n=this._sy,r=e.width,s=e.height;t&&(this.x+=(this.width-r)*t),n&&(this.y+=(this.height-s)*n),this.width=r,this.height=s,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(e){if(!this._fw){var t=e-this.x;this.width-=this._sx===.5?t*2:t}this.x=e,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(e){if(!this._fh){var t=e-this.y;this.height-=this._sy===.5?t*2:t}this.y=e,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(e){if(!this._fw){var t=e-this.x;this.width=this._sx===.5?t*2:t}this.x=e-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(e){if(!this._fh){var t=e-this.y;this.height=this._sy===.5?t*2:t}this.y=e-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(e){this._fw||this._sx===.5?this.x=e-this.width/2:(this._sx&&(this.x+=(e-this.x)*2*this._sx),this.width=(e-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(e){this._fh||this._sy===.5?this.y=e-this.height/2:(this._sy&&(this.y+=(e-this.y)*2*this._sy),this.height=(e-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(e){var t=e?F:be;return new t(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var e=F.read(arguments);return this.setCenterX(e.x),this.setCenterY(e.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(e){return e&&e.width!==h||(Array.isArray(e)?e:arguments).length===4?this._containsRectangle(ee.read(arguments)):this._containsPoint(F.read(arguments))},_containsPoint:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t+e.width<=this.x+this.width&&n+e.height<=this.y+this.height},intersects:function(){var e=ee.read(arguments),t=c.read(arguments)||0;return e.x+e.width>this.x-t&&e.y+e.height>this.y-t&&e.x<this.x+this.width+t&&e.y<this.y+this.height+t},intersect:function(){var e=ee.read(arguments),t=Math.max(this.x,e.x),n=Math.max(this.y,e.y),r=Math.min(this.x+this.width,e.x+e.width),s=Math.min(this.y+this.height,e.y+e.height);return new ee(t,n,r-t,s-n)},unite:function(){var e=ee.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x+e.width),s=Math.max(this.y+this.height,e.y+e.height);return new ee(t,n,r-t,s-n)},include:function(){var e=F.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x),s=Math.max(this.y+this.height,e.y);return new ee(t,n,r-t,s-n)},expand:function(){var e=te.read(arguments),t=e.width,n=e.height;return new ee(this.x-t/2,this.y-n/2,this.width+t,this.height+n)},scale:function(e,t){return this.expand(this.width*e-this.width,this.height*(t===h?e:t)-this.height)}},c.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(e,t){var n=e.join(""),r=/^[RL]/.test(n);t>=4&&(e[1]+=r?"Y":"X");var s=e[r?0:1],u=e[r?1:0],d="get"+s,f="get"+u,_="set"+s,m="set"+u,x="get"+n,S="set"+n;this[x]=function(y){var b=y?F:be;return new b(this[d](),this[f](),this,S)},this[S]=function(){var y=F.read(arguments);this[_](y.x),this[m](y.y)}},{beans:!0})),fe=ee.extend({initialize:function(t,n,r,s,u,d){this._set(t,n,r,s,!0),this._owner=u,this._setter=d},_set:function(e,t,n,r,s){return this._x=e,this._y=t,this._width=n,this._height=r,s||this._owner[this._setter](this),this}},new function(){var e=ee.prototype;return c.each(["x","y","width","height"],function(t){var n=c.capitalize(t),r="_"+t;this["get"+n]=function(){return this[r]},this["set"+n]=function(s){this[r]=s,this._dontNotify||this._owner[this._setter](this)}},c.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(t){var n="set"+t;this[n]=function(){this._dontNotify=!0,e[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(t){var n=this._owner;n._changeSelection&&n._changeSelection(2,t)}}))}),le=c.extend({_class:"Matrix",initialize:function e(t,n){var r=arguments,s=r.length,u=!0;if(s>=6?this._set.apply(this,r):s===1||s===2?t instanceof e?this._set(t._a,t._b,t._c,t._d,t._tx,t._ty,n):Array.isArray(t)?this._set.apply(this,n?t.concat([n]):t):u=!1:s?u=!1:this.reset(),!u)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(e,t,n,r,s,u,d){return this._a=e,this._b=t,this._c=n,this._d=r,this._tx=s,this._ty=u,d||this._changed(),this},_serialize:function(e,t){return c.serialize(this.getValues(),e,!0,t)},_changed:function(){var e=this._owner;e&&(e._applyMatrix?e.transform(null,!0):e._changed(25))},clone:function(){return new le(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(e){return e===this||e&&this._a===e._a&&this._b===e._b&&this._c===e._c&&this._d===e._d&&this._tx===e._tx&&this._ty===e._ty},toString:function(){var e=Z.instance;return"[["+[e.number(this._a),e.number(this._c),e.number(this._tx)].join(", ")+"], ["+[e.number(this._b),e.number(this._d),e.number(this._ty)].join(", ")+"]]"},reset:function(e){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,e||this._changed(),this},apply:function(e,t){var n=this._owner;return n?(n.transform(null,c.pick(e,!0),t),this.isIdentity()):!1},translate:function(){var e=F.read(arguments),t=e.x,n=e.y;return this._tx+=t*this._a+n*this._c,this._ty+=t*this._b+n*this._d,this._changed(),this},scale:function(){var e=arguments,t=F.read(e),n=F.read(e,0,{readNull:!0});return n&&this.translate(n),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,n&&this.translate(n.negate()),this._changed(),this},rotate:function(e){e*=Math.PI/180;var t=F.read(arguments,1),n=t.x,r=t.y,s=Math.cos(e),u=Math.sin(e),d=n-n*s+r*u,f=r-n*u-r*s,_=this._a,m=this._b,x=this._c,S=this._d;return this._a=s*_+u*x,this._b=s*m+u*S,this._c=-u*_+s*x,this._d=-u*m+s*S,this._tx+=d*_+f*x,this._ty+=d*m+f*S,this._changed(),this},shear:function(){var e=arguments,t=F.read(e),n=F.read(e,0,{readNull:!0});n&&this.translate(n);var r=this._a,s=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*r,this._d+=t.x*s,n&&this.translate(n.negate()),this._changed(),this},skew:function(){var e=arguments,t=F.read(e),n=F.read(e,0,{readNull:!0}),r=Math.PI/180,s=new F(Math.tan(t.x*r),Math.tan(t.y*r));return this.shear(s,n)},append:function(e,t){if(e){var n=this._a,r=this._b,s=this._c,u=this._d,d=e._a,f=e._c,_=e._b,m=e._d,x=e._tx,S=e._ty;this._a=d*n+_*s,this._c=f*n+m*s,this._b=d*r+_*u,this._d=f*r+m*u,this._tx+=x*n+S*s,this._ty+=x*r+S*u,t||this._changed()}return this},prepend:function(e,t){if(e){var n=this._a,r=this._b,s=this._c,u=this._d,d=this._tx,f=this._ty,_=e._a,m=e._c,x=e._b,S=e._d,y=e._tx,b=e._ty;this._a=_*n+m*r,this._c=_*s+m*u,this._b=x*n+S*r,this._d=x*s+S*u,this._tx=_*d+m*f+y,this._ty=x*d+S*f+b,t||this._changed()}return this},appended:function(e){return this.clone().append(e)},prepended:function(e){return this.clone().prepend(e)},invert:function(){var e=this._a,t=this._b,n=this._c,r=this._d,s=this._tx,u=this._ty,d=e*r-t*n,f=null;return d&&!isNaN(d)&&isFinite(s)&&isFinite(u)&&(this._a=r/d,this._b=-t/d,this._c=-n/d,this._d=e/d,this._tx=(n*u-r*s)/d,this._ty=(t*s-e*u)/d,f=this),f},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new le(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var e=this._a*this._d-this._c*this._b;return e&&!isNaN(e)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(e,t,n){return arguments.length<3?this._transformPoint(F.read(arguments)):this._transformCoordinates(e,t,n)},_transformPoint:function(e,t,n){var r=e.x,s=e.y;return t||(t=new F),t._set(r*this._a+s*this._c+this._tx,r*this._b+s*this._d+this._ty,n)},_transformCoordinates:function(e,t,n){for(var r=0,s=2*n;r<s;r+=2){var u=e[r],d=e[r+1];t[r]=u*this._a+d*this._c+this._tx,t[r+1]=u*this._b+d*this._d+this._ty}return t},_transformCorners:function(e){var t=e.x,n=e.y,r=t+e.width,s=n+e.height,u=[t,n,r,n,r,s,t,s];return this._transformCoordinates(u,u,4)},_transformBounds:function(e,t,n){for(var r=this._transformCorners(e),s=r.slice(0,2),u=s.slice(),d=2;d<8;d++){var f=r[d],_=d&1;f<s[_]?s[_]=f:f>u[_]&&(u[_]=f)}return t||(t=new ee),t._set(s[0],s[1],u[0]-s[0],u[1]-s[1],n)},inverseTransform:function(){return this._inverseTransform(F.read(arguments))},_inverseTransform:function(e,t,n){var r=this._a,s=this._b,u=this._c,d=this._d,f=this._tx,_=this._ty,m=r*d-s*u,x=null;if(m&&!isNaN(m)&&isFinite(f)&&isFinite(_)){var S=e.x-this._tx,y=e.y-this._ty;t||(t=new F),x=t._set((S*d-y*u)/m,(y*r-S*s)/m,n)}return x},decompose:function(){var e=this._a,t=this._b,n=this._c,r=this._d,s=e*r-t*n,u=Math.sqrt,d=Math.atan2,f=180/Math.PI,_,m,x;if(e!==0||t!==0){var S=u(e*e+t*t);_=Math.acos(e/S)*(t>0?1:-1),m=[S,s/S],x=[d(e*n+t*r,S*S),0]}else if(n!==0||r!==0){var y=u(n*n+r*r);_=Math.asin(n/y)*(r>0?1:-1),m=[s/y,y],x=[0,d(e*n+t*r,y*y)]}else _=0,x=m=[0,0];return{translation:this.getTranslation(),rotation:_*f,scaling:new F(m),skewing:new F(x[0]*f,x[1]*f)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new F(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(e){this.isIdentity()||e.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},c.each(["a","b","c","d","tx","ty"],function(e){var t=c.capitalize(e),n="_"+e;this["get"+t]=function(){return this[n]},this["set"+t]=function(r){this[n]=r,this._changed()}},{})),Me=c.extend({_class:"Line",initialize:function(t,n,r,s,u){var d=!1;arguments.length>=4?(this._px=t,this._py=n,this._vx=r,this._vy=s,d=u):(this._px=t.x,this._py=t.y,this._vx=n.x,this._vy=n.y,d=r),d||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new F(this._px,this._py)},getVector:function(){return new F(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(e,t){return Me.intersect(this._px,this._py,this._vx,this._vy,e._px,e._py,e._vx,e._vy,!0,t)},getSide:function(e,t){return Me.getSide(this._px,this._py,this._vx,this._vy,e.x,e.y,!0,t)},getDistance:function(e){return Math.abs(this.getSignedDistance(e))},getSignedDistance:function(e){return Me.getSignedDistance(this._px,this._py,this._vx,this._vy,e.x,e.y,!0)},isCollinear:function(e){return F.isCollinear(this._vx,this._vy,e._vx,e._vy)},isOrthogonal:function(e){return F.isOrthogonal(this._vx,this._vy,e._vx,e._vy)},statics:{intersect:function(e,t,n,r,s,u,d,f,_,m){_||(n-=e,r-=t,d-=s,f-=u);var x=n*f-r*d;if(!K.isMachineZero(x)){var S=e-s,y=t-u,b=(d*y-f*S)/x,N=(n*y-r*S)/x,I=1e-12,E=-I,w=1+I;if(m||E<b&&b<w&&E<N&&N<w)return m||(b=b<=0?0:b>=1?1:b),new F(e+b*n,t+b*r)}},getSide:function(e,t,n,r,s,u,d,f){d||(n-=e,r-=t);var _=s-e,m=u-t,x=_*r-m*n;return!f&&K.isMachineZero(x)&&(x=(_*n+_*n)/(n*n+r*r),x>=0&&x<=1&&(x=0)),x<0?-1:x>0?1:0},getSignedDistance:function(e,t,n,r,s,u,d){return d||(n-=e,r-=t),n===0?r>0?s-e:e-s:r===0?n<0?u-t:t-u:((s-e)*r-(u-t)*n)/(r>n?r*Math.sqrt(1+n*n/(r*r)):n*Math.sqrt(1+r*r/(n*n)))},getDistance:function(e,t,n,r,s,u,d){return Math.abs(Me.getSignedDistance(e,t,n,r,s,u,d))}}}),ce=B.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){B.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new oi(null,null,this),this._view=pt.create(this,t||St.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(e,t){return c.serialize(this._children,e,!0,t)},_changed:function(e,t){if(e&1){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var r=this._changes;if(r&&t){var s=this._changesById,u=t._id,d=s[u];d?d.flags|=e:r.push(s[u]={item:t,flags:e})}},clear:function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t].remove()},isEmpty:function(){return!this._children.length},remove:function e(){return e.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(e){this._currentStyle.set(e)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new Le({project:this,insert:!0})},getSymbolDefinitions:function(){var e=[],t={};return this.getItems({class:Re,match:function(n){var r=n._definition,s=r._id;return t[s]||(t[s]=!0,e.push(r)),!1}}),e},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var e=this._selectionItems,t=[];for(var n in e){var r=e[n],s=r._selection;s&1&&r.isInserted()?t.push(r):s||this._updateSelection(r)}return t},_updateSelection:function(e){var t=e._id,n=this._selectionItems;e._selection?n[t]!==e&&(this._selectionCount++,n[t]=e):n[t]===e&&(this._selectionCount--,delete n[t])},selectAll:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)e[t].setFullySelected(!0)},deselectAll:function(){var e=this._selectionItems;for(var t in e)e[t].setFullySelected(!1)},addLayer:function(e){return this.insertLayer(h,e)},insertLayer:function(e,t){if(t instanceof Le){t._remove(!1,!0),c.splice(this._children,[t],e,0),t._setProject(this,!0);var n=t._name;n&&t.setName(n),this._changes&&t._changed(5),this._activeLayer||(this._activeLayer=t)}else t=null;return t},_insertItem:function(e,t,n){return t=this.insertLayer(e,t)||(this._activeLayer||this._insertItem(h,new Le(T.NO_INSERT),!0)).insertChild(e,t),n&&t.activate&&t.activate(),t},getItems:function(e){return T._getItems(this,e)},getItem:function(e){return T._getItems(this,e,null,null,!0)[0]||null},importJSON:function(e){this.activate();var t=this._activeLayer;return c.importJSON(e,t&&t.isEmpty()&&t)},removeOn:function(e){var t=this._removeSets;if(t){e==="mouseup"&&(t.mousedrag=null);var n=t[e];if(n){for(var r in n){var s=n[r];for(var u in t){var d=t[u];d&&d!=n&&delete d[s._id]}s.remove()}t[e]=null}}},draw:function(e,t,n){this._updateVersion++,e.save(),t.applyToContext(e);for(var r=this._children,s=new c({offset:new F(0,0),pixelRatio:n,viewMatrix:t.isIdentity()?null:t,matrices:[new le],updateMatrix:!0}),u=0,d=r.length;u<d;u++)r[u].draw(e,s);if(e.restore(),this._selectionCount>0){e.save(),e.strokeWidth=1;var f=this._selectionItems,_=this._scope.settings.handleSize,m=this._updateVersion;for(var x in f)f[x]._drawSelection(e,t,_,f,m);e.restore()}}}),T=c.extend(P,{statics:{extend:function e(t){return t._serializeFields&&(t._serializeFields=c.set({},this.prototype._serializeFields,t._serializeFields)),e.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new le,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var e=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return c.each(e,function(t){this._events[t]={install:function(n){this.getView()._countItemEvent(n,1)},uninstall:function(n){this.getView()._countItemEvent(n,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:e}})},{initialize:function(){},_initialize:function(e,t){var n=e&&c.isPlainObject(e),r=n&&e.internal===!0,s=this._matrix=new le,u=n&&e.project||et.project,d=et.settings;return this._id=r?null:oe.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&d.applyMatrix,t&&s.translate(t),s._owner=this,this._style=new oi(u._currentStyle,this,u),r||n&&e.insert==!1||!d.insertItems&&!(n&&e.insert==!0)?this._setProject(u):(n&&e.parent||u)._insertItem(h,this,!0),n&&e!==T.NO_INSERT&&e!==T.INSERT&&this.set(e,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(e,t){var n={},r=this;function s(u){for(var d in u){var f=r[d];c.equals(f,d==="leading"?u.fontSize*1.2:u[d])||(n[d]=c.serialize(f,e,d!=="data",t))}}return s(this._serializeFields),this instanceof xe||s(this._style._defaults),[this._class,n]},_changed:function(e){var t=this._symbol,n=this._parent||t,r=this._project;e&8&&(this._bounds=this._position=this._decomposed=h),e&16&&(this._globalMatrix=h),n&&e&72&&T._clearBoundsCache(n),e&2&&T._clearBoundsCache(this),r&&r._changed(e,this),t&&t._changed(e)},getId:function(){return this._id},getName:function(){return this._name},setName:function(e){if(this._name&&this._removeNamed(),e===+e+"")throw new Error("Names consisting only of numbers are not supported.");var t=this._getOwner();if(e&&t){var n=t._children,r=t._namedChildren;(r[e]=r[e]||[]).push(this),e in n||(n[e]=this)}this._name=e||h,this._changed(256)},getStyle:function(){return this._style},setStyle:function(e){this.getStyle().set(e)}},c.each(["locked","visible","blendMode","opacity","guide"],function(e){var t=c.capitalize(e),n="_"+e,r={locked:256,visible:265};this["get"+t]=function(){return this[n]},this["set"+t]=function(s){s!=this[n]&&(this[n]=s,this._changed(r[e]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(e){if(e!==this._selection){this._selection=e;var t=this._project;t&&(t._updateSelection(this),this._changed(257))}},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){if(this._selectChildren){for(var e=this._children,t=0,n=e.length;t<n;t++)if(e[t].isSelected())return!0}return!!(this._selection&1)},setSelected:function(e){if(this._selectChildren)for(var t=this._children,n=0,r=t.length;n<r;n++)t[n].setSelected(e);this._changeSelection(1,e)},isFullySelected:function(){var e=this._children,t=!!(this._selection&1);if(e&&t){for(var n=0,r=e.length;n<r;n++)if(!e[n].isFullySelected())return!1;return!0}return t},setFullySelected:function(e){var t=this._children;if(t)for(var n=0,r=t.length;n<r;n++)t[n].setFullySelected(e);this._changeSelection(1,e)},isClipMask:function(){return this._clipMask},setClipMask:function(e){this._clipMask!=(e=!!e)&&(this._clipMask=e,e&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(e){this._data=e},getPosition:function(e){var t=e?F:be,n=this._position||(this._position=this._getPositionFromBounds());return new t(n.x,n.y,this,"setPosition")},setPosition:function(){this.translate(F.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(e){return this._pivot?this._matrix._transformPoint(this._pivot):(e||this.getBounds()).getCenter(!0)},getPivot:function(){var e=this._pivot;return e?new be(e.x,e.y,this,"setPivot"):null},setPivot:function(){this._pivot=F.read(arguments,0,{clone:!0,readNull:!0}),this._position=h}},c.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(e,t){this[t]=function(n){return this.getBounds(n,e)}},{beans:!0,getBounds:function(e,t){var n=t||e instanceof le,r=c.set({},n?t:e,this._boundsOptions);(!r.stroke||this.getStrokeScaling())&&(r.cacheItem=this);var s=this._getCachedBounds(n&&e,r).rect;return arguments.length?s:new fe(s.x,s.y,s.width,s.height,this,"setBounds")},setBounds:function(){var e=ee.read(arguments),t=this.getBounds(),n=this._matrix,r=new le,s=e.getCenter();r.translate(s),(e.width!=t.width||e.height!=t.height)&&(n.isInvertible()||(n.set(n._backup||new le().translate(n.getTranslation())),t=this.getBounds()),r.scale(t.width!==0?e.width/t.width:0,t.height!==0?e.height/t.height:0)),s=t.getCenter(),r.translate(-s.x,-s.y),this.transform(r)},_getBounds:function(e,t){var n=this._children;return!n||!n.length?new ee:(T._updateBoundsCache(this,t.cacheItem),T._getBounds(n,e,t))},_getBoundsCacheKey:function(e,t){return[e.stroke?1:0,e.handle?1:0,t?1:0].join("")},_getCachedBounds:function(e,t,n){e=e&&e._orNullIfIdentity();var r=t.internal&&!n,s=t.cacheItem,u=r?null:this._matrix._orNullIfIdentity(),d=s&&(!e||e.equals(u))&&this._getBoundsCacheKey(t,r),f=this._bounds;if(T._updateBoundsCache(this._parent||this._symbol,s),d&&f&&d in f){var _=f[d];return{rect:_.rect.clone(),nonscaling:_.nonscaling}}var m=this._getBounds(e||u,t),x=m.rect||m,S=this._style,y=m.nonscaling||S.hasStroke()&&!S.getStrokeScaling();if(d){f||(this._bounds=f={});var _=f[d]={rect:x.clone(),nonscaling:y,internal:r}}return{rect:x,nonscaling:y}},_getStrokeMatrix:function(e,t){var n=this.getStrokeScaling()?null:t&&t.internal?this:this._parent||this._symbol&&this._symbol._item,r=n?n.getViewMatrix().invert():e;return r&&r._shiftless()},statics:{_updateBoundsCache:function(e,t){if(e&&t){var n=t._id,r=e._boundsCache=e._boundsCache||{ids:{},list:[]};r.ids[n]||(r.list.push(t),r.ids[n]=t)}},_clearBoundsCache:function(e){var t=e._boundsCache;if(t){e._bounds=e._position=e._boundsCache=h;for(var n=0,r=t.list,s=r.length;n<s;n++){var u=r[n];u!==e&&(u._bounds=u._position=h,u._boundsCache&&T._clearBoundsCache(u))}}},_getBounds:function(e,t,n){var r=1/0,s=-r,u=r,d=s,f=!1;n=n||{};for(var _=0,m=e.length;_<m;_++){var x=e[_];if(x._visible&&!x.isEmpty(!0)){var S=x._getCachedBounds(t&&t.appended(x._matrix),n,!0),y=S.rect;r=Math.min(y.x,r),u=Math.min(y.y,u),s=Math.max(y.x+y.width,s),d=Math.max(y.y+y.height,d),S.nonscaling&&(f=!0)}}return{rect:isFinite(r)?new ee(r,u,s-r,d-u):new ee,nonscaling:f}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var e=this._decompose();return e?e.rotation:0},setRotation:function(e){var t=this.getRotation();if(t!=null&&e!=null){var n=this._decomposed;this.rotate(e-t),n&&(n.rotation=e,this._decomposed=n)}},getScaling:function(){var e=this._decompose(),t=e&&e.scaling;return new be(t?t.x:1,t?t.y:1,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=F.read(arguments,0,{clone:!0,readNull:!0});if(e&&t&&!e.equals(t)){var n=this.getRotation(),r=this._decomposed,s=new le,u=K.isZero;if(u(e.x)||u(e.y))s.translate(r.translation),n&&s.rotate(n),s.scale(t.x,t.y),this._matrix.set(s);else{var d=this.getPosition(!0);s.translate(d),n&&s.rotate(n),s.scale(t.x/e.x,t.y/e.y),n&&s.rotate(-n),s.translate(d.negate()),this.transform(s)}r&&(r.scaling=t,this._decomposed=r)}},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},getGlobalMatrix:function(e){var t=this._globalMatrix;if(t)for(var n=this._parent,r=[];n;){if(!n._globalMatrix){t=null;for(var s=0,u=r.length;s<u;s++)r[s]._globalMatrix=null;break}r.push(n),n=n._parent}if(!t){t=this._globalMatrix=this._matrix.clone();var n=this._parent;n&&t.prepend(n.getGlobalMatrix(!0))}return e?t:t.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(e){(this._applyMatrix=this._canApplyMatrix&&!!e)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(e,t){if(this._project!==e){this._project&&this._installEvents(!1),this._project=e;for(var n=this._children,r=0,s=n&&n.length;r<s;r++)n[r]._setProject(e);t=!0}t&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function e(t){e.base.call(this,t);for(var n=this._children,r=0,s=n&&n.length;r<s;r++)n[r]._installEvents(t)},getLayer:function(){for(var e=this;e=e._parent;)if(e instanceof Le)return e;return null},getParent:function(){return this._parent},setParent:function(e){return e.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(e){this.removeChildren(),this.addChildren(e)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var e=this._getOwner();return e&&e._children[this._index+1]||null},getPreviousSibling:function(){var e=this._getOwner();return e&&e._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(e){return e===this||e&&this._class===e._class&&this._style.equals(e._style)&&this._matrix.equals(e._matrix)&&this._locked===e._locked&&this._visible===e._visible&&this._blendMode===e._blendMode&&this._opacity===e._opacity&&this._clipMask===e._clipMask&&this._guide===e._guide&&this._equals(e)||!1},_equals:function(e){return c.equals(this._children,e._children)},clone:function(e){var t=new this.constructor(T.NO_INSERT),n=this._children,r=c.pick(e?e.insert:h,e===h||e===!0),s=c.pick(e?e.deep:h,!0);n&&t.copyAttributes(this),(!n||s)&&t.copyContent(this),n||t.copyAttributes(this),r&&t.insertAbove(this);var u=this._name,d=this._parent;if(u&&d){for(var n=d._children,f=u,_=1;n[u];)u=f+" "+_++;u!==f&&t.setName(u)}return t},copyContent:function(e){for(var t=e._children,n=0,r=t&&t.length;n<r;n++)this.addChild(t[n].clone(!1),!0)},copyAttributes:function(e,t){this.setStyle(e._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],r=0,s=n.length;r<s;r++){var u=n[r];e.hasOwnProperty(u)&&(this[u]=e[u])}t||this._matrix.set(e._matrix,!0),this.setApplyMatrix(e._applyMatrix),this.setPivot(e._pivot),this.setSelection(e._selection);var d=e._data,f=e._name;this._data=d?c.clone(d):null,f&&this.setName(f)},rasterize:function(e,t){var n,r,s;c.isPlainObject(e)?(n=e.resolution,r=e.insert,s=e.raster):(n=e,r=t),s||(s=new nt(T.NO_INSERT));var u=this.getStrokeBounds(),d=(n||this.getView().getResolution())/72,f=u.getTopLeft().floor(),_=u.getBottomRight().ceil(),m=new te(_.subtract(f)),x=m.multiply(d);if(s.setSize(x,!0),!x.isZero()){var S=s.getContext(!0),y=new le().scale(d).translate(f.negate());S.save(),y.applyToContext(S),this.draw(S,new c({matrices:[y]})),S.restore()}return s._matrix.set(new le().translate(f.add(m.divide(2))).scale(1/d)),(r===h||r)&&s.insertAbove(this),s},contains:function(){var e=this._matrix;return e.isInvertible()&&!!this._contains(e._inverseTransform(F.read(arguments)))},_contains:function(e){var t=this._children;if(t){for(var n=t.length-1;n>=0;n--)if(t[n].contains(e))return!0;return!1}return e.isInside(this.getInternalBounds())},isInside:function(){return ee.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new Ve.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(e,t){return e instanceof T?this._asPathItem().getIntersections(e._asPathItem(),null,t,!0).length>0:!1}},new function(){function e(){var r=arguments;return this._hitTest(F.read(r),Se.getOptions(r))}function t(){var r=arguments,s=F.read(r),u=Se.getOptions(r),d=[];return this._hitTest(s,new c({all:d},u)),d}function n(r,s,u,d){var f=this._children;if(f)for(var _=f.length-1;_>=0;_--){var m=f[_],x=m!==d&&m._hitTest(r,s,u);if(x&&!s.all)return x}return null}return ce.inject({hitTest:e,hitTestAll:t,_hitTest:n}),{hitTest:e,hitTestAll:t,_hitTestChildren:n}},{_hitTest:function(e,t,n){if(this._locked||!this._visible||this._guide&&!t.guides||this.isEmpty())return null;var r=this._matrix,s=n?n.appended(r):this.getGlobalMatrix().prepend(this.getView()._matrix),u=Math.max(t.tolerance,1e-12),d=t._tolerancePadding=new te(Ve._getStrokePadding(u,r._shiftless().invert()));if(e=r._inverseTransform(e),!e||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(d.multiply(2))._containsPoint(e))return null;var f=!(t.guides&&!this._guide||t.selected&&!this.isSelected()||t.type&&t.type!==c.hyphenate(this._class)||t.class&&!(this instanceof t.class)),_=t.match,m=this,x,S;function y(v){return v&&_&&!_(v)&&(v=null),v&&t.all&&t.all.push(v),v}function b(v,A){var L=A?x["get"+A]():m.getPosition();if(e.subtract(L).divide(d).length<=1)return new Se(v,m,{name:A?c.hyphenate(A):v,point:L})}var N=t.position,I=t.center,E=t.bounds;if(f&&this._parent&&(N||I||E)){if((I||E)&&(x=this.getInternalBounds()),S=N&&b("position")||I&&b("center","Center"),!S&&E)for(var w=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],k=0;k<8&&!S;k++)S=b("bounds",w[k]);S=y(S)}return S||(S=this._hitTestChildren(e,t,s)||f&&y(this._hitTestSelf(e,t,s,this.getStrokeScaling()?null:s._shiftless().invert()))||null),S&&S.point&&(S.point=r.transform(S.point)),S},_hitTestSelf:function(e,t){if(t.fill&&this.hasFill()&&this._contains(e))return new Se("fill",this)},matches:function(e,t){function n(d,f){for(var _ in d)if(d.hasOwnProperty(_)){var m=d[_],x=f[_];if(c.isPlainObject(m)&&c.isPlainObject(x)){if(!n(m,x))return!1}else if(!c.equals(m,x))return!1}return!0}var r=typeof e;if(r==="object"){for(var s in e)if(e.hasOwnProperty(s)&&!this.matches(s,e[s]))return!1;return!0}else{if(r==="function")return e(this);if(e==="match")return t(this);var u=/^(empty|editable)$/.test(e)?this["is"+c.capitalize(e)]():e==="type"?c.hyphenate(this._class):this[e];if(e==="class"){if(typeof t=="function")return this instanceof t;u=this._class}if(typeof t=="function")return!!t(u);if(t){if(t.test)return t.test(u);if(c.isPlainObject(t))return n(t,u)}return c.equals(u,t)}},getItems:function(e){return T._getItems(this,e,this._matrix)},getItem:function(e){return T._getItems(this,e,this._matrix,null,!0)[0]||null},statics:{_getItems:function e(t,n,r,s,u){if(!s){var d=typeof n=="object"&&n,f=d&&d.overlapping,_=d&&d.inside,m=f||_,y=m&&ee.read([m]);s={items:[],recursive:d&&d.recursive!==!1,inside:!!_,overlapping:!!f,rect:y,path:f&&new Ve.Rectangle({rectangle:y,insert:!1})},d&&(n=c.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var x=t._children,S=s.items,y=s.rect;r=y&&(r||new le);for(var b=0,N=x&&x.length;b<N;b++){var I=x[b],E=r&&r.appended(I._matrix),w=!0;if(y){var m=I.getBounds(E);if(!y.intersects(m))continue;y.contains(m)||s.overlapping&&(m.contains(y)||s.path.intersects(I,E))||(w=!1)}if(w&&I.matches(n)&&(S.push(I),u)||(s.recursive!==!1&&e(I,n,E,s,u),u&&S.length>0))break}return S}}},{importJSON:function(e){var t=c.importJSON(e,this);return t!==this?this.addChild(t):t},addChild:function(e){return this.insertChild(h,e)},insertChild:function(e,t){var n=t?this.insertChildren(e,[t]):null;return n&&n[0]},addChildren:function(e){return this.insertChildren(this._children.length,e)},insertChildren:function(e,t){var n=this._children;if(n&&t&&t.length>0){t=c.slice(t);for(var r={},s=t.length-1;s>=0;s--){var u=t[s],d=u&&u._id;!u||r[d]?t.splice(s,1):(u._remove(!1,!0),r[d]=!0)}c.splice(n,t,e,0);for(var f=this._project,_=f._changes,s=0,m=t.length;s<m;s++){var u=t[s],x=u._name;u._parent=this,u._setProject(f,!0),x&&u.setName(x),_&&u._changed(5)}this._changed(11)}else t=null;return t},_insertItem:"#insertChild",_insertAt:function(e,t){var n=e&&e._getOwner(),r=e!==this&&n?this:null;return r&&(r._remove(!1,!0),n._insertItem(e._index+t,r)),r},insertAbove:function(e){return this._insertAt(e,1)},insertBelow:function(e){return this._insertAt(e,0)},sendToBack:function(){var e=this._getOwner();return e?e._insertItem(0,this):null},bringToFront:function(){var e=this._getOwner();return e?e._insertItem(h,this):null},appendTop:"#addChild",appendBottom:function(e){return this.insertChild(0,e)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(e){return e._insertItem(h,this)},copyTo:function(e){return this.clone(!1).addTo(e)},reduce:function(e){var t=this._children;if(t&&t.length===1){var n=t[0].reduce(e);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var e=this._getOwner();if(e){var t=e._children,n=e._namedChildren,r=this._name,s=n[r],u=s?s.indexOf(this):-1;u!==-1&&(t[r]==this&&delete t[r],s.splice(u,1),s.length?t[r]=s[0]:delete n[r])}},_remove:function(e,t){var n=this._getOwner(),r=this._project,s=this._index;return this._style&&this._style._dispose(),n?(this._name&&this._removeNamed(),s!=null&&(r._activeLayer===this&&(r._activeLayer=this.getNextSibling()||this.getPreviousSibling()),c.splice(n._children,null,s,1)),this._installEvents(!1),e&&r._changes&&this._changed(5),t&&n._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(e){var t=e&&e.insertBelow(this);return t&&this.remove(),t},removeChildren:function(e,t){if(!this._children)return null;e=e||0,t=c.pick(t,this._children.length);for(var n=c.splice(this._children,null,e,t-e),r=n.length-1;r>=0;r--)n[r]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var e=0,t=this._children.length;e<t;e++)this._children[e]._index=e;this._changed(11)}},isEmpty:function(e){var t=this._children,n=t?t.length:0;if(e){for(var r=0;r<n;r++)if(!t[r].isEmpty(e))return!1;return!0}return!n},isEditable:function(){for(var e=this;e;){if(!e._visible||e._locked)return!1;e=e._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(e){function t(d){var f=[];do f.unshift(d);while(d=d._parent);return f}for(var n=t(this),r=t(e),s=0,u=Math.min(n.length,r.length);s<u;s++)if(n[s]!=r[s])return n[s]._index<r[s]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(e){return this._getOrder(e)===-1},isBelow:function(e){return this._getOrder(e)===1},isParent:function(e){return this._parent===e},isChild:function(e){return e&&e._parent===this},isDescendant:function(e){for(var t=this;t=t._parent;)if(t===e)return!0;return!1},isAncestor:function(e){return e?e.isDescendant(this):!1},isSibling:function(e){return this._parent===e._parent},isGroupedWith:function(e){for(var t=this._parent;t;){if(t._parent&&/^(Group|Layer|CompoundPath)$/.test(t._class)&&e.isDescendant(t))return!0;t=t._parent}return!1}},c.each(["rotate","scale","shear","skew"],function(e){var t=e==="rotate";this[e]=function(){var n=arguments,r=(t?c:F).read(n),s=F.read(n,0,{readNull:!0});return this.transform(new le()[e](r,s||this.getPosition(!0)))}},{translate:function(){var e=new le;return this.transform(e.translate.apply(e,arguments))},transform:function(e,t,n){var r=this._matrix,s=e&&!e.isIdentity(),u=n&&this._canApplyMatrix||this._applyMatrix&&(s||!r.isIdentity()||t&&this._children);if(!s&&!u)return this;if(s){!e.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(e,!0);var d=this._style,f=d.getFillColor(!0),_=d.getStrokeColor(!0);f&&f.transform(e),_&&_.transform(e)}if(u&&(u=this._transformContent(r,t,n))){var m=this._pivot;m&&r._transformPoint(m,m,!0),r.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var x=this._bounds,S=this._position;(s||u)&&this._changed(25);var y=s&&x&&e.decompose();if(y&&y.skewing.isZero()&&y.rotation%90===0){for(var b in x){var N=x[b];if(N.nonscaling)delete x[b];else if(u||!N.internal){var I=N.rect;e._transformBounds(I,I)}}this._bounds=x;var E=x[this._getBoundsCacheKey(this._boundsOptions||{})];E&&(this._position=this._getPositionFromBounds(E.rect))}else s&&S&&this._pivot&&(this._position=e._transformPoint(S,S));return this},_transformContent:function(e,t,n){var r=this._children;if(r){for(var s=0,u=r.length;s<u;s++)r[s].transform(e,t,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(F.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(F.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(F.read(arguments))},localToParent:function(){return this._matrix._transformPoint(F.read(arguments))},fitBounds:function(e,t){e=ee.read(arguments);var n=this.getBounds(),r=n.height/n.width,s=e.height/e.width,u=(t?r>s:r<s)?e.width/n.width:e.height/n.height,d=new ee(new F,new te(n.width*u,n.height*u));d.setCenter(e.getCenter()),this.setBounds(d)}}),{_setStyles:function(e,t,n){var r=this._style,s=this._matrix;if(r.hasFill()&&(e.fillStyle=r.getFillColor().toCanvasStyle(e,s)),r.hasStroke()){e.strokeStyle=r.getStrokeColor().toCanvasStyle(e,s),e.lineWidth=r.getStrokeWidth();var u=r.getStrokeJoin(),d=r.getStrokeCap(),f=r.getMiterLimit();if(u&&(e.lineJoin=u),d&&(e.lineCap=d),f&&(e.miterLimit=f),et.support.nativeDash){var _=r.getDashArray(),m=r.getDashOffset();_&&_.length&&("setLineDash"in e?(e.setLineDash(_),e.lineDashOffset=m):(e.mozDash=_,e.mozDashOffset=m))}}if(r.hasShadow()){var x=t.pixelRatio||1,S=n._shiftless().prepend(new le().scale(x,x)),y=S.transform(new F(r.getShadowBlur(),0)),b=S.transform(this.getShadowOffset());e.shadowColor=r.getShadowColor().toCanvasStyle(e),e.shadowBlur=y.getLength(),e.shadowOffsetX=b.x,e.shadowOffsetY=b.y}},draw:function(e,t,n){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var r=t.matrices,s=t.viewMatrix,u=this._matrix,d=r[r.length-1].appended(u);if(d.isInvertible()){s=s?s.appended(d):d,r.push(d),t.updateMatrix&&(this._globalMatrix=d);var f=this._blendMode,_=K.clamp(this._opacity,0,1),m=f==="normal",x=ri.nativeModes[f],S=m&&_===1||t.dontStart||t.clip||(x||m&&_<1)&&this._canComposite(),y=t.pixelRatio||1,b,N,I;if(!S){var E=this.getStrokeBounds(s);if(!E.width||!E.height){r.pop();return}I=t.offset,N=t.offset=E.getTopLeft().floor(),b=e,e=St.getContext(E.getSize().ceil().add(1).multiply(y)),y!==1&&e.scale(y,y)}e.save();var w=n?n.appended(u):this._canScaleStroke&&!this.getStrokeScaling(!0)&&s,k=!S&&t.clipItem,v=!w||k;if(S?(e.globalAlpha=_,x&&(e.globalCompositeOperation=f)):v&&e.translate(-N.x,-N.y),v&&(S?u:s).applyToContext(e),k&&t.clipItem.draw(e,t.extend({clip:!0})),w){e.setTransform(y,0,0,y,0,0);var A=t.offset;A&&e.translate(-A.x,-A.y)}this._draw(e,t,s,w),e.restore(),r.pop(),t.clip&&!t.dontFinish&&e.clip(this.getFillRule()),S||(ri.process(f,e,b,_,N.subtract(I).multiply(y)),St.release(e),t.offset=I)}}},_isUpdated:function(e){var t=this._parent;if(t instanceof at)return t._isUpdated(e);var n=this._updateVersion===e;return!n&&t&&t._visible&&t._isUpdated(e)&&(this._updateVersion=e,n=!0),n},_drawSelection:function(e,t,n,r,s){var u=this._selection,d=u&1,f=u&2||d&&this._selectBounds,_=u&4;if(this._drawSelected||(d=!1),(d||f||_)&&this._isUpdated(s)){var m,x=this.getSelectedColor(!0)||(m=this.getLayer())&&m.getSelectedColor(!0),S=t.appended(this.getGlobalMatrix(!0)),y=n/2;if(e.strokeStyle=e.fillStyle=x?x.toCanvasStyle(e):"#009dec",d&&this._drawSelected(e,S,r),_){var b=this.getPosition(!0),N=this._parent,I=N?N.localToGlobal(b):b,E=I.x,w=I.y;e.beginPath(),e.arc(E,w,y,0,Math.PI*2,!0),e.stroke();for(var k=[[0,-1],[1,0],[0,1],[-1,0]],v=y,A=n+1,L=0;L<4;L++){var z=k[L],M=z[0],V=z[1];e.moveTo(E+M*v,w+V*v),e.lineTo(E+M*A,w+V*A),e.stroke()}}if(f){var q=S._transformCorners(this.getInternalBounds());e.beginPath();for(var L=0;L<8;L++)e[L?"lineTo":"moveTo"](q[L],q[++L]);e.closePath(),e.stroke();for(var L=0;L<8;L++)e.fillRect(q[L]-y,q[++L]-y,n,n)}}},_canComposite:function(){return!1}},c.each(["down","drag","up","move"],function(e){this["removeOn"+c.capitalize(e)]=function(){var t={};return t[e]=!0,this.removeOn(t)}},{removeOn:function(e){for(var t in e)if(e[t]){var n="mouse"+t,r=this._project,s=r._removeSets=r._removeSets||{};s[n]=s[n]||{},s[n][this._id]=this}return this}}),{tween:function(e,t,n){n||(n=t,t=e,e=null,n||(n=t,t=null));var r=n&&n.easing,s=n&&n.start,u=n!=null&&(typeof n=="number"?n:n.duration),d=new gn(this,e,t,u,r,s);function f(_){d._handleFrame(_.time*1e3),d.running||this.off("frame",f)}return u&&this.on("frame",f),d},tweenTo:function(e,t){return this.tween(null,e,t)},tweenFrom:function(e,t){return this.tween(e,null,t)}}),xe=T.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function e(t){e.base.call(this,t),t&2050&&(this._clipItem=h)},_getClipItem:function(){var e=this._clipItem;if(e===h){e=null;for(var t=this._children,n=0,r=t.length;n<r;n++)if(t[n]._clipMask){e=t[n];break}this._clipItem=e}return e},isClipped:function(){return!!this._getClipItem()},setClipped:function(e){var t=this.getFirstChild();t&&t.setClipMask(e)},_getBounds:function e(t,n){var r=this._getClipItem();return r?r._getCachedBounds(r._matrix.prepended(t),c.set({},n,{stroke:!1})):e.base.call(this,t,n)},_hitTestChildren:function e(t,n,r){var s=this._getClipItem();return(!s||s.contains(t))&&e.base.call(this,t,n,r,s)},_draw:function(e,t){var n=t.clip,r=!n&&this._getClipItem();t=t.extend({clipItem:r,clip:!1}),n?(e.beginPath(),t.dontStart=t.dontFinish=!0):r&&r.draw(e,t.extend({clip:!0}));for(var s=this._children,u=0,d=s.length;u<d;u++){var f=s[u];f!==r&&f.draw(e,t)}}}),Le=xe.extend({_class:"Layer",initialize:function(){xe.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function e(){return this._parent?e.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),qe=T.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,n){this._initialize(t,n)},_equals:function(e){return this._type===e._type&&this._size.equals(e._size)&&c.equals(this._radius,e._radius)},copyContent:function(e){this.setType(e._type),this.setSize(e._size),this.setRadius(e._radius)},getType:function(){return this._type},setType:function(e){this._type=e},getShape:"#getType",setShape:"#setType",getSize:function(){var e=this._size;return new ie(e.width,e.height,this,"setSize")},setSize:function(){var e=te.read(arguments);if(!this._size)this._size=e.clone();else if(!this._size.equals(e)){var t=this._type,n=e.width,r=e.height;t==="rectangle"?this._radius.set(te.min(this._radius,e.divide(2).abs())):t==="circle"?(n=r=(n+r)/2,this._radius=n/2):t==="ellipse"&&this._radius._set(n/2,r/2),this._size._set(n,r),this._changed(9)}},getRadius:function(){var e=this._radius;return this._type==="circle"?e:new ie(e.width,e.height,this,"setRadius")},setRadius:function(e){var t=this._type;if(t==="circle"){if(e===this._radius)return;var n=e*2;this._radius=e,this._size._set(n,n)}else if(e=te.read(arguments),!this._radius)this._radius=e.clone();else{if(this._radius.equals(e))return;if(this._radius.set(e),t==="rectangle"){var n=te.max(this._size,e.multiply(2));this._size.set(n)}else t==="ellipse"&&this._size._set(e.width*2,e.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(e){var t=new Ve[c.capitalize(this._type)]({center:new F,size:this._size,radius:this._radius,insert:!1});return t.copyAttributes(this),et.settings.applyMatrix&&t.setApplyMatrix(!0),(e===h||e)&&t.insertAbove(this),t},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(e,t,n,r){var s=this._style,u=s.hasFill(),d=s.hasStroke(),f=t.dontFinish||t.clip,_=!r;if(u||d||f){var m=this._type,x=this._radius,S=m==="circle";if(t.dontStart||e.beginPath(),_&&S)e.arc(0,0,x,0,Math.PI*2,!0);else{var y=S?x:x.width,b=S?x:x.height,N=this._size,I=N.width,E=N.height;if(_&&m==="rectangle"&&y===0&&b===0)e.rect(-I/2,-E/2,I,E);else{var w=I/2,k=E/2,v=1-.5522847498307936,A=y*v,L=b*v,z=[-w,-k+b,-w,-k+L,-w+A,-k,-w+y,-k,w-y,-k,w-A,-k,w,-k+L,w,-k+b,w,k-b,w,k-L,w-A,k,w-y,k,-w+y,k,-w+A,k,-w,k-L,-w,k-b];r&&r.transform(z,z,32),e.moveTo(z[0],z[1]),e.bezierCurveTo(z[2],z[3],z[4],z[5],z[6],z[7]),w!==y&&e.lineTo(z[8],z[9]),e.bezierCurveTo(z[10],z[11],z[12],z[13],z[14],z[15]),k!==b&&e.lineTo(z[16],z[17]),e.bezierCurveTo(z[18],z[19],z[20],z[21],z[22],z[23]),w!==y&&e.lineTo(z[24],z[25]),e.bezierCurveTo(z[26],z[27],z[28],z[29],z[30],z[31])}}e.closePath()}!f&&(u||d)&&(this._setStyles(e,t,n),u&&(e.fill(s.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),d&&e.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(e,t){var n=new ee(this._size).setCenter(0,0),r=this._style,s=t.stroke&&r.hasStroke()&&r.getStrokeWidth();return e&&(n=e._transformBounds(n)),s?n.expand(Ve._getStrokePadding(s,this._getStrokeMatrix(e,t))):n}},new function(){function e(n,r,s){var u=n._radius;if(!u.isZero())for(var d=n._size.divide(2),f=1;f<=4;f++){var _=new F(f>1&&f<4?-1:1,f>2?-1:1),m=_.multiply(d),x=m.subtract(_.multiply(u)),S=new ee(s?m.add(_.multiply(s)):m,x);if(S.contains(r))return{point:x,quadrant:f}}}function t(n,r,s,u){var d=n.divide(r);return(!u||d.isInQuadrant(u))&&d.subtract(d.normalize()).multiply(r).divide(s).length<=1}return{_contains:function n(r){if(this._type==="rectangle"){var s=e(this,r);return s?r.subtract(s.point).divide(this._radius).getLength()<=1:n.base.call(this,r)}else return r.divide(this.size).getLength()<=.5},_hitTestSelf:function n(r,s,u,d){var f=!1,_=this._style,m=s.stroke&&_.hasStroke(),x=s.fill&&_.hasFill();if(m||x){var S=this._type,y=this._radius,b=m?_.getStrokeWidth()/2:0,N=s._tolerancePadding.add(Ve._getStrokePadding(b,!_.getStrokeScaling()&&d));if(S==="rectangle"){var I=N.multiply(2),E=e(this,r,I);if(E)f=t(r.subtract(E.point),y,N,E.quadrant);else{var w=new ee(this._size).setCenter(0,0),k=w.expand(I),v=w.expand(I.negate());f=k._containsPoint(r)&&!v._containsPoint(r)}}else f=t(r,y,N)}return f?new Se(m?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function e(t,n,r,s,u){var d=c.create(qe.prototype);return d._type=t,d._size=r,d._radius=s,d._initialize(c.getNamed(u),n),d}return{Circle:function(){var t=arguments,n=F.readNamed(t,"center"),r=c.readNamed(t,"radius");return e("circle",n,new te(r*2),r,t)},Rectangle:function(){var t=arguments,n=ee.readNamed(t,"rectangle"),r=te.min(te.readNamed(t,"radius"),n.getSize(!0).divide(2));return e("rectangle",n.getCenter(!0),n.getSize(!0),r,t)},Ellipse:function(){var t=arguments,n=qe._readEllipse(t),r=n.radius;return e("ellipse",n.center,r.multiply(2),r,t)},_readEllipse:function(t){var n,r;if(c.hasNamed(t,"radius"))n=F.readNamed(t,"center"),r=te.readNamed(t,"radius");else{var s=ee.readNamed(t,"rectangle");n=s.getCenter(!0),r=s.getSize(!0).divide(2)}return{center:n,radius:r}}}}}),nt=T.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(t,n){if(!this._initialize(t,n!==h&&F.read(arguments))){var r,s=typeof t,u=s==="string"?g.getElementById(t):s==="object"?t:null;if(u&&u!==T.NO_INSERT){if(u.getContext||u.naturalHeight!=null)r=u;else if(u){var d=te.read(arguments);d.isZero()||(r=St.getCanvas(d))}}r?this.setImage(r):this.setSource(t)}this._size||(this._size=new te,this._loaded=!1)},_equals:function(e){return this.getSource()===e.getSource()},copyContent:function(e){var t=e._image,n=e._canvas;if(t)this._setImage(t);else if(n){var r=St.getCanvas(e._size);r.getContext("2d").drawImage(n,0,0),this._setImage(r)}this._crossOrigin=e._crossOrigin},getSize:function(){var e=this._size;return new ie(e?e.width:0,e?e.height:0,this,"setSize")},setSize:function(e,t){var n=te.read(arguments);if(n.equals(this._size))t&&this.clear();else if(n.width>0&&n.height>0){var r=!t&&this.getElement();this._setImage(St.getCanvas(n)),r&&this.getContext(!0).drawImage(r,0,0,n.width,n.height)}else this._canvas&&St.release(this._canvas),this._size=n.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(e){this.setSize(e,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(e){this.setSize(this.getWidth(),e)},getLoaded:function(){return this._loaded},isEmpty:function(){var e=this._size;return!e||e.width===0&&e.height===0},getResolution:function(){var e=this._matrix,t=new F(0,0).transform(e),n=new F(1,0).transform(e).subtract(t),r=new F(0,1).transform(e).subtract(t);return new te(72/n.getLength(),72/r.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(e){var t=this;function n(r){var s=t.getView(),u=r&&r.type||"load";s&&t.responds(u)&&(et=s._scope,t.emit(u,new wi(r)))}this._setImage(e),this._loaded?setTimeout(n,0):e&&dt.add(e,{load:function(r){t._setImage(e),n(r)},error:n})},_setImage:function(e){this._canvas&&St.release(this._canvas),e&&e.getContext?(this._image=null,this._canvas=e,this._loaded=!0):(this._image=e,this._canvas=null,this._loaded=!!(e&&e.src&&e.complete)),this._size=new te(e?e.naturalWidth||e.width:0,e?e.naturalHeight||e.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var e=St.getContext(this._size);try{this._image&&e.drawImage(this._image,0,0),this._canvas=e.canvas}catch{St.release(e)}}return this._canvas},setCanvas:"#setImage",getContext:function(e){return this._context||(this._context=this.getCanvas().getContext("2d")),e&&(this._image=null,this._changed(1025)),this._context},setContext:function(e){this._context=e},getSource:function(){var e=this._image;return e&&e.src||this.toDataURL()},setSource:function(e){var t=new a.Image,n=this._crossOrigin;n&&(t.crossOrigin=n),e&&(t.src=e),this.setImage(t)},getCrossOrigin:function(){var e=this._image;return e&&e.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(e){this._crossOrigin=e;var t=this._image;t&&(t.crossOrigin=e)},getSmoothing:function(){return this._smoothing},setSmoothing:function(e){this._smoothing=typeof e=="string"?e:e?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var e=ee.read(arguments),t=St.getContext(e.getSize());return t.drawImage(this.getCanvas(),e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.canvas},getSubRaster:function(){var e=ee.read(arguments),t=new nt(T.NO_INSERT);return t._setImage(this.getSubCanvas(e)),t.translate(e.getCenter().subtract(this.getSize().divide(2))),t._matrix.prepend(this._matrix),t.insertAbove(this),t},toDataURL:function(){var e=this._image,t=e&&e.src;if(/^data:/.test(t))return t;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(e){var t=F.read(arguments,1);this.getContext(!0).drawImage(e,t.x,t.y)},getAverageColor:function(e){var t,n;if(e?e instanceof Bt?(n=e,t=e.getBounds()):typeof e=="object"&&("width"in e?t=new ee(e):"x"in e&&(t=new ee(e.x-.5,e.y-.5,1,1))):t=this.getBounds(),!t)return null;var r=32,s=Math.min(t.width,r),u=Math.min(t.height,r),d=nt._sampleContext;d?d.clearRect(0,0,r+1,r+1):d=nt._sampleContext=St.getContext(new te(r)),d.save();var f=new le().scale(s/t.width,u/t.height).translate(-t.x,-t.y);f.applyToContext(d),n&&n.draw(d,new c({clip:!0,matrices:[f]})),this._matrix.applyToContext(d);var _=this.getElement(),m=this._size;_&&d.drawImage(_,-m.width/2,-m.height/2),d.restore();for(var x=d.getImageData(.5,.5,Math.ceil(s),Math.ceil(u)).data,S=[0,0,0],y=0,b=0,N=x.length;b<N;b+=4){var I=x[b+3];y+=I,I/=255,S[0]+=x[b]*I,S[1]+=x[b+1]*I,S[2]+=x[b+2]*I}for(var b=0;b<3;b++)S[b]/=y;return y?ct.read(S):null},getPixel:function(){var e=F.read(arguments),t=this.getContext().getImageData(e.x,e.y,1,1).data;return new ct("rgb",[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var e=arguments,t=F.read(e),n=ct.read(e),r=n._convert("rgb"),s=n._alpha,u=this.getContext(!0),d=u.createImageData(1,1),f=d.data;f[0]=r[0]*255,f[1]=r[1]*255,f[2]=r[2]*255,f[3]=s!=null?s*255:255,u.putImageData(d,t.x,t.y)},clear:function(){var e=this._size;this.getContext(!0).clearRect(0,0,e.width+1,e.height+1)},createImageData:function(){var e=te.read(arguments);return this.getContext().createImageData(e.width,e.height)},getImageData:function(){var e=ee.read(arguments);return e.isEmpty()&&(e=new ee(this._size)),this.getContext().getImageData(e.x,e.y,e.width,e.height)},putImageData:function(e){var t=F.read(arguments,1);this.getContext(!0).putImageData(e,t.x,t.y)},setImageData:function(e){this.setSize(e),this.getContext(!0).putImageData(e,0,0)},_getBounds:function(e,t){var n=new ee(this._size).setCenter(0,0);return e?e._transformBounds(n):n},_hitTestSelf:function(e){if(this._contains(e)){var t=this;return new Se("pixel",t,{offset:e.add(t._size.divide(2)).round(),color:{get:function(){return t.getPixel(this.offset)}}})}},_draw:function(e,t,n){var r=this.getElement();if(r&&r.width>0&&r.height>0){e.globalAlpha=K.clamp(this._opacity,0,1),this._setStyles(e,t,n);var s=this._smoothing,u=s==="off";ot.setPrefixed(e,u?"imageSmoothingEnabled":"imageSmoothingQuality",u?!1:s),e.drawImage(r,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),Re=T.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,n){this._initialize(t,n!==h&&F.read(arguments,1))||this.setDefinition(t instanceof ze?t:new ze(t))},_equals:function(e){return this._definition===e._definition},copyContent:function(e){this.setDefinition(e._definition)},getDefinition:function(){return this._definition},setDefinition:function(e){this._definition=e,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(e,t){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(e),t)},_hitTestSelf:function(e,t,n){var r=t.extend({all:!1}),s=this._definition._item._hitTest(e,r,n);return s&&(s.item=this),s},_draw:function(e,t){this._definition._item.draw(e,t)}}),ze=c.extend({_class:"SymbolDefinition",initialize:function(t,n){this._id=oe.get(),this.project=et.project,t&&this.setItem(t,n)},_serialize:function(e,t){return t.add(this,function(){return c.serialize([this._class,this._item],e,!1,t)})},_changed:function(e){e&8&&T._clearBoundsCache(this),e&1&&this.project._changed(e)},getItem:function(){return this._item},setItem:function(e,t){e._symbol&&(e=e.clone()),this._item&&(this._item._symbol=null),this._item=e,e.remove(),e.setSelected(!1),t||e.setPosition(new F),e._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(e){return new Re(this,e)},clone:function(){return new ze(this._item.clone(!1))},equals:function(e){return e===this||e&&this._item.equals(e._item)||!1}}),Se=c.extend({_class:"HitResult",initialize:function(t,n,r){this.type=t,this.item=n,r&&this.inject(r)},statics:{getOptions:function(e){var t=e&&c.read(e);return new c({type:null,tolerance:et.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),me=c.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,n,r,s,u,d){var f=arguments.length,_,m,x,S;f>0&&(t==null||typeof t=="object"?f===1&&t&&"point"in t?(_=t.point,m=t.handleIn,x=t.handleOut,S=t.selection):(_=t,m=n,x=r,S=s):(_=[t,n],m=r!==h?[r,s]:null,x=u!==h?[u,d]:null)),new tt(_,this,"_point"),new tt(m,this,"_handleIn"),new tt(x,this,"_handleOut"),S&&this.setSelection(S)},_serialize:function(e,t){var n=this._point,r=this._selection,s=r||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return r&&s.push(r),c.serialize(s,e,!0,t)},_changed:function(e){var t=this._path;if(t){var n=t._curves,r=this._index,s;n&&((!e||e===this._point||e===this._handleIn)&&(s=r>0?n[r-1]:t._closed?n[n.length-1]:null)&&s._changed(),(!e||e===this._point||e===this._handleOut)&&(s=n[r])&&s._changed()),t._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(F.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(F.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(F.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var e=this._handleIn,t=this._handleOut;return!e.isZero()&&!t.isZero()&&e.isCollinear(t)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(e){var t=this._selection,n=this._path;this._selection=e=e||0,n&&e!==t&&(n._updateSelection(this,t,e),n._changed(257))},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){return!!(this._selection&7)},setSelected:function(e){this._changeSelection(7,e)},getIndex:function(){return this._index!==h?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var e=this._path,t=this._index;return e?(t>0&&!e._closed&&t===e._segments.length-1&&t--,e.getCurves()[t]||null):null},getLocation:function(){var e=this.getCurve();return e?new wt(e,this===e._segment1?0:1):null},getNext:function(){var e=this._path&&this._path._segments;return e&&(e[this._index+1]||this._path._closed&&e[0])||null},smooth:function(e,t,n){var r=e||{},s=r.type,u=r.factor,d=this.getPrevious(),f=this.getNext(),_=(d||this)._point,m=this._point,x=(f||this)._point,S=_.getDistance(m),y=m.getDistance(x);if(!s||s==="catmull-rom"){var b=u===h?.5:u,N=Math.pow(S,b),I=N*N,E=Math.pow(y,b),w=E*E;if(!t&&d){var k=2*w+3*E*N+I,v=3*E*(E+N);this.setHandleIn(v!==0?new F((w*_._x+k*m._x-I*x._x)/v-m._x,(w*_._y+k*m._y-I*x._y)/v-m._y):new F)}if(!n&&f){var k=2*I+3*N*E+w,v=3*N*(N+E);this.setHandleOut(v!==0?new F((I*x._x+k*m._x-w*_._x)/v-m._x,(I*x._y+k*m._y-w*_._y)/v-m._y):new F)}}else if(s==="geometric"){if(d&&f){var A=_.subtract(x),L=u===h?.4:u,z=L*S/(S+y);t||this.setHandleIn(A.multiply(z)),n||this.setHandleOut(A.multiply(z-L))}}else throw new Error("Smoothing method '"+s+"' not supported.")},getPrevious:function(){var e=this._path&&this._path._segments;return e&&(e[this._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var e=this._path;return e&&this._index===e._segments.length-1||!1},reverse:function(){var e=this._handleIn,t=this._handleOut,n=e.clone();e.set(t),t.set(n)},reversed:function(){return new me(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new me(this._point,this._handleIn,this._handleOut)},equals:function(e){return e===this||e&&this._class===e._class&&this._point.equals(e._point)&&this._handleIn.equals(e._handleIn)&&this._handleOut.equals(e._handleOut)||!1},toString:function(){var e=["point: "+this._point];return this._handleIn.isZero()||e.push("handleIn: "+this._handleIn),this._handleOut.isZero()||e.push("handleOut: "+this._handleOut),"{ "+e.join(", ")+" }"},transform:function(e){this._transformCoordinates(e,new Array(6),!0),this._changed()},interpolate:function(e,t,n){var r=1-n,s=n,u=e._point,d=t._point,f=e._handleIn,_=t._handleIn,m=t._handleOut,x=e._handleOut;this._point._set(r*u._x+s*d._x,r*u._y+s*d._y,!0),this._handleIn._set(r*f._x+s*_._x,r*f._y+s*_._y,!0),this._handleOut._set(r*x._x+s*m._x,r*x._y+s*m._y,!0),this._changed()},_transformCoordinates:function(e,t,n){var r=this._point,s=!n||!this._handleIn.isZero()?this._handleIn:null,u=!n||!this._handleOut.isZero()?this._handleOut:null,d=r._x,f=r._y,_=2;return t[0]=d,t[1]=f,s&&(t[_++]=s._x+d,t[_++]=s._y+f),u&&(t[_++]=u._x+d,t[_++]=u._y+f),e&&(e._transformCoordinates(t,t,_/2),d=t[0],f=t[1],n?(r._x=d,r._y=f,_=2,s&&(s._x=t[_++]-d,s._y=t[_++]-f),u&&(u._x=t[_++]-d,u._y=t[_++]-f)):(s||(t[_++]=d,t[_++]=f),u||(t[_++]=d,t[_++]=f))),t}}),tt=F.extend({initialize:function(t,n,r){var s,u,d;if(!t)s=u=0;else if((s=t[0])!==h)u=t[1];else{var f=t;(s=f.x)===h&&(f=F.read(arguments),s=f.x),u=f.y,d=f.selected}this._x=s,this._y=u,this._owner=n,n[r]=this,d&&this.setSelected(!0)},_set:function(e,t){return this._x=e,this._y=t,this._owner._changed(this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner._changed(this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner._changed(this)},isZero:function(){var e=K.isZero;return e(this._x)&&e(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){var e=this._owner;return this===e._point?1:this===e._handleIn?2:this===e._handleOut?4:0}}),ve=c.extend({_class:"Curve",beans:!0,initialize:function(t,n,r,s,u,d,f,_){var m=arguments.length,x,S,y,b,N,I;m===3?(this._path=t,x=n,S=r):m?m===1?"segment1"in t?(x=new me(t.segment1),S=new me(t.segment2)):"point1"in t?(y=t.point1,N=t.handle1,I=t.handle2,b=t.point2):Array.isArray(t)&&(y=[t[0],t[1]],b=[t[6],t[7]],N=[t[2]-t[0],t[3]-t[1]],I=[t[4]-t[6],t[5]-t[7]]):m===2?(x=new me(t),S=new me(n)):m===4?(y=t,N=n,I=r,b=s):m===8&&(y=[t,n],b=[f,_],N=[r-t,s-n],I=[u-f,d-_]):(x=new me,S=new me),this._segment1=x||new me(y,null,N),this._segment2=S||new me(b,I,null)},_serialize:function(e,t){return c.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],e,!0,t)},_changed:function(){this._length=this._bounds=h},clone:function(){return new ve(this._segment1,this._segment2)},toString:function(){var e=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||e.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||e.push("handle2: "+this._segment2._handleIn),e.push("point2: "+this._segment2._point),"{ "+e.join(", ")+" }"},classify:function(){return ve.classify(this.getValues())},remove:function(){var e=!1;if(this._path){var t=this._segment2,n=t._handleOut;e=t.remove(),e&&this._segment1._handleOut.set(n)}return e},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(F.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(F.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(F.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(F.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var e=this._path;return e&&this._segment1._index===e._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(e){this.getPoint1().setSelected(e),this.getHandle1().setSelected(e),this.getHandle2().setSelected(e),this.getPoint2().setSelected(e)},getValues:function(e){return ve.getValues(this._segment1,this._segment2,e)},getPoints:function(){for(var e=this.getValues(),t=[],n=0;n<8;n+=2)t.push(new F(e[n],e[n+1]));return t}},{getLength:function(){return this._length==null&&(this._length=ve.getLength(this.getValues(),0,1)),this._length},getArea:function(){return ve.getArea(this.getValues())},getLine:function(){return new Me(this._segment1._point,this._segment2._point)},getPart:function(e,t){return new ve(ve.getPart(this.getValues(),e,t))},getPartLength:function(e,t){return ve.getLength(this.getValues(),e,t)},divideAt:function(e){return this.divideAtTime(e&&e.curve===this?e.time:this.getTimeAt(e))},divideAtTime:function(e,t){var n=1e-8,r=1-n,s=null;if(e>=n&&e<=r){var u=ve.subdivide(this.getValues(),e),d=u[0],f=u[1],_=t||this.hasHandles(),m=this._segment1,x=this._segment2,S=this._path;_&&(m._handleOut._set(d[2]-d[0],d[3]-d[1]),x._handleIn._set(f[4]-f[6],f[5]-f[7]));var y=d[6],b=d[7],N=new me(new F(y,b),_&&new F(d[4]-y,d[5]-b),_&&new F(f[2]-y,f[3]-b));S?(S.insert(m._index+1,N),s=this.getNext()):(this._segment2=N,this._changed(),s=new ve(N,x))}return s},splitAt:function(e){var t=this._path;return t?t.splitAt(e):null},splitAtTime:function(e){return this.splitAt(this.getLocationAtTime(e))},divide:function(e,t){return this.divideAtTime(e===h?.5:t?e:this.getTimeAt(e))},split:function(e,t){return this.splitAtTime(e===h?.5:t?e:this.getTimeAt(e))},reversed:function(){return new ve(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(e,t,n,r){var s=e._point,u=e._handleOut,d=t._handleIn,f=t._point,_=s.x,m=s.y,x=f.x,S=f.y,y=r?[_,m,_,m,x,S,x,S]:[_,m,_+u._x,m+u._y,x+d._x,S+d._y,x,S];return n&&n._transformCoordinates(y,y,4),y},subdivide:function(e,t){var n=e[0],r=e[1],s=e[2],u=e[3],d=e[4],f=e[5],_=e[6],m=e[7];t===h&&(t=.5);var x=1-t,S=x*n+t*s,y=x*r+t*u,b=x*s+t*d,N=x*u+t*f,I=x*d+t*_,E=x*f+t*m,w=x*S+t*b,k=x*y+t*N,v=x*b+t*I,A=x*N+t*E,L=x*w+t*v,z=x*k+t*A;return[[n,r,S,y,w,k,L,z],[L,z,v,A,I,E,_,m]]},getMonoCurves:function(e,t){var n=[],r=t?0:1,s=e[r+0],u=e[r+2],d=e[r+4],f=e[r+6];if(s>=u==u>=d&&u>=d==d>=f||ve.isStraight(e))n.push(e);else{var _=3*(u-d)-s+f,m=2*(s+d)-4*u,x=u-s,S=1e-8,y=1-S,b=[],N=K.solveQuadratic(_,m,x,b,S,y);if(!N)n.push(e);else{b.sort();var I=b[0],E=ve.subdivide(e,I);n.push(E[0]),N>1&&(I=(b[1]-I)/(1-I),E=ve.subdivide(E[1],I),n.push(E[0])),n.push(E[1])}}return n},solveCubic:function(e,t,n,r,s,u){var d=e[t],f=e[t+2],_=e[t+4],m=e[t+6],x=0;if(!(d<n&&m<n&&f<n&&_<n||d>n&&m>n&&f>n&&_>n)){var S=3*(f-d),y=3*(_-f)-S,b=m-d-S-y;x=K.solveCubic(b,y,S,d-n,r,s,u)}return x},getTimeOf:function(e,t){var n=new F(e[0],e[1]),r=new F(e[6],e[7]),s=1e-12,u=1e-7,d=t.isClose(n,s)?0:t.isClose(r,s)?1:null;if(d===null)for(var f=[t.x,t.y],_=[],m=0;m<2;m++)for(var x=ve.solveCubic(e,m,f[m],_,0,1),S=0;S<x;S++){var y=_[S];if(t.isClose(ve.getPoint(e,y),u))return y}return t.isClose(n,u)?0:t.isClose(r,u)?1:null},getNearestTime:function(e,t){if(ve.isStraight(e)){var n=e[0],r=e[1],s=e[6],u=e[7],d=s-n,f=u-r,_=d*d+f*f;if(_===0)return 0;var m=((t.x-n)*d+(t.y-r)*f)/_;return m<1e-12?0:m>.999999999999?1:ve.getTimeOf(e,new F(n+m*d,r+m*f))}var x=100,S=1/0,y=0;function b(E){if(E>=0&&E<=1){var w=t.getDistance(ve.getPoint(e,E),!0);if(w<S)return S=w,y=E,!0}}for(var N=0;N<=x;N++)b(N/x);for(var I=1/(x*2);I>1e-8;)!b(y-I)&&!b(y+I)&&(I/=2);return y},getPart:function(e,t,n){var r=t>n;if(r){var s=t;t=n,n=s}return t>0&&(e=ve.subdivide(e,t)[1]),n<1&&(e=ve.subdivide(e,(n-t)/(1-t))[0]),r?[e[6],e[7],e[4],e[5],e[2],e[3],e[0],e[1]]:e},isFlatEnough:function(e,t){var n=e[0],r=e[1],s=e[2],u=e[3],d=e[4],f=e[5],_=e[6],m=e[7],x=3*s-2*n-_,S=3*u-2*r-m,y=3*d-2*_-n,b=3*f-2*m-r;return Math.max(x*x,y*y)+Math.max(S*S,b*b)<=16*t*t},getArea:function(e){var t=e[0],n=e[1],r=e[2],s=e[3],u=e[4],d=e[5],f=e[6],_=e[7];return 3*((_-n)*(r+u)-(f-t)*(s+d)+s*(t-u)-r*(n-d)+_*(u+t/3)-f*(d+n/3))/20},getBounds:function(e){for(var t=e.slice(0,2),n=t.slice(),r=[0,0],s=0;s<2;s++)ve._addBounds(e[s],e[s+2],e[s+4],e[s+6],s,0,t,n,r);return new ee(t[0],t[1],n[0]-t[0],n[1]-t[1])},_addBounds:function(e,t,n,r,s,u,d,f,_){function m(L,z){var M=L-z,V=L+z;M<d[s]&&(d[s]=M),V>f[s]&&(f[s]=V)}u/=2;var x=d[s]+u,S=f[s]-u;if(e<x||t<x||n<x||r<x||e>S||t>S||n>S||r>S)if(t<e!=t<r&&n<e!=n<r)m(e,0),m(r,0);else{var y=3*(t-n)-e+r,b=2*(e+n)-4*t,N=t-e,I=K.solveQuadratic(y,b,N,_),E=1e-8,w=1-E;m(r,0);for(var k=0;k<I;k++){var v=_[k],A=1-v;E<=v&&v<=w&&m(A*A*A*e+3*A*A*v*t+3*A*v*v*n+v*v*v*r,u)}}}}},c.each(["getBounds","getStrokeBounds","getHandleBounds"],function(e){this[e]=function(){this._bounds||(this._bounds={});var t=this._bounds[e];return t||(t=this._bounds[e]=Ve[e]([this._segment1,this._segment2],!1,this._path)),t.clone()}},{}),c.each({isStraight:function(e,t,n,r){if(t.isZero()&&n.isZero())return!0;var s=r.subtract(e);if(s.isZero())return!1;if(s.isCollinear(t)&&s.isCollinear(n)){var u=new Me(e,r),d=1e-7;if(u.getDistance(e.add(t))<d&&u.getDistance(r.add(n))<d){var f=s.dot(s),_=s.dot(t)/f,m=s.dot(n)/f;return _>=0&&_<=1&&m<=0&&m>=-1}}return!1},isLinear:function(e,t,n,r){var s=r.subtract(e).divide(3);return t.equals(s)&&n.negate().equals(s)}},function(e,t){this[t]=function(n){var r=this._segment1,s=this._segment2;return e(r._point,r._handleOut,s._handleIn,s._point,n)},this.statics[t]=function(n,r){var s=n[0],u=n[1],d=n[6],f=n[7];return e(new F(s,u),new F(n[2]-s,n[3]-u),new F(n[4]-d,n[5]-f),new F(d,f),r)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(e){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(e||0)},isCollinear:function(e){return e&&this.isStraight()&&e.isStraight()&&this.getLine().isCollinear(e.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(e,t){return this.getLocationAtTime(t?e:this.getTimeAt(e))},getLocationAtTime:function(e){return e!=null&&e>=0&&e<=1?new wt(this,e):null},getTimeAt:function(e,t){return ve.getTimeAt(this.getValues(),e,t)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var e=F.read(arguments);return e.isZero()?[]:ve.getTimesWithTangent(this.getValues(),e)},getOffsetAtTime:function(e){return this.getPartLength(0,e)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(F.read(arguments)))},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getTimeOf:function(){return ve.getTimeOf(this.getValues(),F.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var e=F.read(arguments),t=this.getValues(),n=ve.getNearestTime(t,e),r=ve.getPoint(t,n);return new wt(this,n,r,null,e.getDistance(r))},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()}},new function(){var e=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return c.each(e,function(t){this[t+"At"]=function(n,r){var s=this.getValues();return ve[t](s,r?n:ve.getTimeAt(s,n))},this[t+"AtTime"]=function(n){return ve[t](this.getValues(),n)}},{statics:{_evaluateMethods:e}})},new function(){function e(r){var s=r[0],u=r[1],d=r[2],f=r[3],_=r[4],m=r[5],x=r[6],S=r[7],y=9*(d-_)+3*(x-s),b=6*(s+_)-12*d,N=3*(d-s),I=9*(f-m)+3*(S-u),E=6*(u+m)-12*f,w=3*(f-u);return function(k){var v=(y*k+b)*k+N,A=(I*k+E)*k+w;return Math.sqrt(v*v+A*A)}}function t(r,s){return Math.max(2,Math.min(16,Math.ceil(Math.abs(s-r)*32)))}function n(r,s,u,d){if(s==null||s<0||s>1)return null;var f=r[0],_=r[1],m=r[2],x=r[3],S=r[4],y=r[5],b=r[6],N=r[7],I=K.isZero;I(m-f)&&I(x-_)&&(m=f,x=_),I(S-b)&&I(y-N)&&(S=b,y=N);var E=3*(m-f),w=3*(S-m)-E,k=b-f-E-w,v=3*(x-_),A=3*(y-x)-v,L=N-_-v-A,z,M;if(u===0)z=s===0?f:s===1?b:((k*s+w)*s+E)*s+f,M=s===0?_:s===1?N:((L*s+A)*s+v)*s+_;else{var V=1e-8,q=1-V;if(s<V?(z=E,M=v):s>q?(z=3*(b-S),M=3*(N-y)):(z=(3*k*s+2*w)*s+E,M=(3*L*s+2*A)*s+v),d){z===0&&M===0&&(s<V||s>q)&&(z=S-m,M=y-x);var j=Math.sqrt(z*z+M*M);j&&(z/=j,M/=j)}if(u===3){var S=6*k*s+2*w,y=6*L*s+2*A,X=Math.pow(z*z+M*M,3/2);z=X!==0?(z*y-M*S)/X:0,M=0}}return u===2?new F(M,-z):new F(z,M)}return{statics:{classify:function(r){var s=r[0],u=r[1],d=r[2],f=r[3],_=r[4],m=r[5],x=r[6],S=r[7],y=s*(S-m)+u*(_-x)+x*m-S*_,b=d*(u-S)+f*(x-s)+s*S-u*x,N=_*(f-u)+m*(s-d)+d*u-f*s,I=3*N,E=I-b,w=E-b+y,k=Math.sqrt(w*w+E*E+I*I),v=k!==0?1/k:0,A=K.isZero,L="serpentine";w*=v,E*=v,I*=v;function z(j,X,H){var G=X!==h,Q=G&&X>0&&X<1,J=G&&H>0&&H<1;return G&&(!(Q||J)||j==="loop"&&!(Q&&J))&&(j="arch",Q=J=!1),{type:j,roots:Q||J?Q&&J?X<H?[X,H]:[H,X]:[Q?X:H]:null}}if(A(w))return A(E)?z(A(I)?"line":"quadratic"):z(L,I/(3*E));var M=3*E*E-4*w*I;if(A(M))return z("cusp",E/(2*w));var V=M>0?Math.sqrt(M/3):Math.sqrt(-M),q=2*w;return z(M>0?L:"loop",(E+V)/q,(E-V)/q)},getLength:function(r,s,u,d){if(s===h&&(s=0),u===h&&(u=1),ve.isStraight(r)){var f=r;u<1&&(f=ve.subdivide(f,u)[0],s/=u),s>0&&(f=ve.subdivide(f,s)[1]);var _=f[6]-f[0],m=f[7]-f[1];return Math.sqrt(_*_+m*m)}return K.integrate(d||e(r),s,u,t(s,u))},getTimeAt:function(r,s,u){if(u===h&&(u=s<0?1:0),s===0)return u;var d=Math.abs,f=1e-12,_=s>0,m=_?u:0,x=_?1:u,S=e(r),y=ve.getLength(r,m,x,S),b=d(s)-y;if(d(b)<f)return _?x:m;if(b>f)return null;var N=s/y,I=0;function E(w){return I+=K.integrate(S,u,w,t(u,w)),u=w,I-s}return K.findRoot(E,S,u+N,m,x,32,1e-12)},getPoint:function(r,s){return n(r,s,0,!1)},getTangent:function(r,s){return n(r,s,1,!0)},getWeightedTangent:function(r,s){return n(r,s,1,!1)},getNormal:function(r,s){return n(r,s,2,!0)},getWeightedNormal:function(r,s){return n(r,s,2,!1)},getCurvature:function(r,s){return n(r,s,3,!1).x},getPeaks:function(r){var s=r[0],u=r[1],d=r[2],f=r[3],_=r[4],m=r[5],x=r[6],S=r[7],y=-s+3*d-3*_+x,b=3*s-6*d+3*_,N=-3*s+3*d,I=-u+3*f-3*m+S,E=3*u-6*f+3*m,w=-3*u+3*f,k=1e-8,v=1-k,A=[];return K.solveCubic(9*(y*y+I*I),9*(y*b+E*I),2*(b*b+E*E)+3*(N*y+w*I),N*b+E*w,A,k,v),A.sort()}}}},new function(){function e(b,N,I,E,w,k,v){var A=!v&&I.getPrevious()===w,L=!v&&I!==w&&I.getNext()===w,z=1e-8,M=1-z;if(E!==null&&E>=(A?z:0)&&E<=(L?M:1)&&k!==null&&k>=(L?z:0)&&k<=(A?M:1)){var V=new wt(I,E,null,v),q=new wt(w,k,null,v);V._intersection=q,q._intersection=V,(!N||N(V))&&wt.insert(b,V,!0)}}function t(b,N,I,E,w,k,v,A,L,z,M,V,q){if(++L>=4096||++A>=40)return L;var j=1e-9,X=N[0],H=N[1],G=N[6],Q=N[7],J=Me.getSignedDistance,$=J(X,H,G,Q,N[2],N[3]),se=J(X,H,G,Q,N[4],N[5]),_e=$*se>0?3/4:4/9,ye=_e*Math.min(0,$,se),Ce=_e*Math.max(0,$,se),Ee=J(X,H,G,Q,b[0],b[1]),he=J(X,H,G,Q,b[2],b[3]),de=J(X,H,G,Q,b[4],b[5]),ke=J(X,H,G,Q,b[6],b[7]),Te=n(Ee,he,de,ke),Ne=Te[0],He=Te[1],De,Ze;if($===0&&se===0&&Ee===0&&he===0&&de===0&&ke===0||(De=r(Ne,He,ye,Ce))==null||(Ze=r(Ne.reverse(),He.reverse(),ye,Ce))==null)return L;var Ke=z+(M-z)*De,We=z+(M-z)*Ze;if(Math.max(q-V,We-Ke)<j){var Nt=(Ke+We)/2,Ie=(V+q)/2;e(w,k,v?E:I,v?Ie:Nt,v?I:E,v?Nt:Ie)}else{b=ve.getPart(b,De,Ze);var gt=q-V;if(Ze-De>.8)if(We-Ke>gt){var yt=ve.subdivide(b,.5),Nt=(Ke+We)/2;L=t(N,yt[0],E,I,w,k,!v,A,L,V,q,Ke,Nt),L=t(N,yt[1],E,I,w,k,!v,A,L,V,q,Nt,We)}else{var yt=ve.subdivide(N,.5),Ie=(V+q)/2;L=t(yt[0],b,E,I,w,k,!v,A,L,V,Ie,Ke,We),L=t(yt[1],b,E,I,w,k,!v,A,L,Ie,q,Ke,We)}else gt===0||gt>=j?L=t(N,b,E,I,w,k,!v,A,L,V,q,Ke,We):L=t(b,N,I,E,w,k,v,A,L,Ke,We,V,q)}return L}function n(b,N,I,E){var w=[0,b],k=[1/3,N],v=[2/3,I],A=[1,E],L=N-(2*b+E)/3,z=I-(b+2*E)/3,M;if(L*z<0)M=[[w,k,A],[w,v,A]];else{var V=L/z;M=[V>=2?[w,k,A]:V<=.5?[w,v,A]:[w,k,v,A],[w,A]]}return(L||z)<0?M.reverse():M}function r(b,N,I,E){return b[0][1]<I?s(b,!0,I):N[0][1]>E?s(N,!1,E):b[0][0]}function s(b,N,I){for(var E=b[0][0],w=b[0][1],k=1,v=b.length;k<v;k++){var A=b[k][0],L=b[k][1];if(N?L>=I:L<=I)return L===I?A:E+(I-w)*(A-E)/(L-w);E=A,w=L}return null}function u(b,N,I,E,w){var k=K.isZero;if(k(E)&&k(w)){var v=ve.getTimeOf(b,new F(N,I));return v===null?[]:[v]}for(var A=Math.atan2(-w,E),L=Math.sin(A),z=Math.cos(A),M=[],V=[],q=0;q<8;q+=2){var j=b[q]-N,X=b[q+1]-I;M.push(j*z-X*L,j*L+X*z)}return ve.solveCubic(M,1,0,V,0,1),V}function d(b,N,I,E,w,k,v){for(var A=N[0],L=N[1],z=N[6],M=N[7],V=u(b,A,L,z-A,M-L),q=0,j=V.length;q<j;q++){var X=V[q],H=ve.getPoint(b,X),G=ve.getTimeOf(N,H);G!==null&&e(w,k,v?E:I,v?G:X,v?I:E,v?X:G)}}function f(b,N,I,E,w,k){var v=Me.intersect(b[0],b[1],b[6],b[7],N[0],N[1],N[6],N[7]);v&&e(w,k,I,ve.getTimeOf(b,v),E,ve.getTimeOf(N,v))}function _(b,N,I,E,w,k){var v=1e-12,A=Math.min,L=Math.max;if(L(b[0],b[2],b[4],b[6])+v>A(N[0],N[2],N[4],N[6])&&A(b[0],b[2],b[4],b[6])-v<L(N[0],N[2],N[4],N[6])&&L(b[1],b[3],b[5],b[7])+v>A(N[1],N[3],N[5],N[7])&&A(b[1],b[3],b[5],b[7])-v<L(N[1],N[3],N[5],N[7])){var z=S(b,N);if(z)for(var M=0;M<2;M++){var V=z[M];e(w,k,I,V[0],E,V[1],!0)}else{var q=ve.isStraight(b),j=ve.isStraight(N),X=q&&j,H=q&&!j,G=w.length;if((X?f:q||j?d:t)(H?N:b,H?b:N,H?E:I,H?I:E,w,k,H,0,0,0,1,0,1),!X||w.length===G)for(var M=0;M<4;M++){var Q=M>>1,J=M&1,$=Q*6,se=J*6,_e=new F(b[$],b[$+1]),ye=new F(N[se],N[se+1]);_e.isClose(ye,v)&&e(w,k,I,Q,E,J)}}}return w}function m(b,N,I,E){var w=ve.classify(b);if(w.type==="loop"){var k=w.roots;e(I,E,N,k[0],N,k[1])}return I}function x(b,N,I,E,w,k){var v=1e-7,A=!N;A&&(N=b);for(var L=b.length,z=N.length,M=new Array(L),V=A?M:new Array(z),q=[],j=0;j<L;j++)M[j]=b[j].getValues(E);if(!A)for(var j=0;j<z;j++)V[j]=N[j].getValues(w);for(var X=D.findCurveBoundsCollisions(M,V,v),H=0;H<L;H++){var G=b[H],Q=M[H];A&&m(Q,G,q,I);var J=X[H];if(J)for(var $=0;$<J.length;$++){if(k&&q.length)return q;var se=J[$];if(!A||se>H){var _e=N[se],ye=V[se];_(Q,ye,G,_e,q,I)}}}return q}function S(b,N){function I(ke){var Te=ke[6]-ke[0],Ne=ke[7]-ke[1];return Te*Te+Ne*Ne}var E=Math.abs,w=Me.getDistance,k=1e-8,v=1e-7,A=ve.isStraight(b),L=ve.isStraight(N),z=A&&L,M=I(b)<I(N),V=M?N:b,q=M?b:N,j=V[0],X=V[1],H=V[6]-j,G=V[7]-X;if(w(j,X,H,G,q[0],q[1],!0)<v&&w(j,X,H,G,q[6],q[7],!0)<v)!z&&w(j,X,H,G,V[2],V[3],!0)<v&&w(j,X,H,G,V[4],V[5],!0)<v&&w(j,X,H,G,q[2],q[3],!0)<v&&w(j,X,H,G,q[4],q[5],!0)<v&&(A=L=z=!0);else if(z)return null;if(A^L)return null;for(var Q=[b,N],J=[],$=0;$<4&&J.length<2;$++){var se=$&1,_e=se^1,ye=$>>1,Ce=ve.getTimeOf(Q[se],new F(Q[_e][ye?6:0],Q[_e][ye?7:1]));if(Ce!=null){var Ee=se?[ye,Ce]:[Ce,ye];(!J.length||E(Ee[0]-J[0][0])>k&&E(Ee[1]-J[0][1])>k)&&J.push(Ee)}if($>2&&!J.length)break}if(J.length!==2)J=null;else if(!z){var he=ve.getPart(b,J[0][0],J[1][0]),de=ve.getPart(N,J[0][1],J[1][1]);(E(de[2]-he[2])>v||E(de[3]-he[3])>v||E(de[4]-he[4])>v||E(de[5]-he[5])>v)&&(J=null)}return J}function y(b,N){var I=b[0],E=b[1],w=b[2],k=b[3],v=b[4],A=b[5],L=b[6],z=b[7],M=N.normalize(),V=M.x,q=M.y,j=3*L-9*v+9*w-3*I,X=3*z-9*A+9*k-3*E,H=6*v-12*w+6*I,G=6*A-12*k+6*E,Q=3*w-3*I,J=3*k-3*E,$=2*j*q-2*X*V,se=[];if(Math.abs($)<K.CURVETIME_EPSILON){var _e=j*J-X*Q,$=j*G-X*H;if($!=0){var ye=-_e/$;ye>=0&&ye<=1&&se.push(ye)}}else{var Ce=(H*H-4*j*Q)*q*q+(-2*H*G+4*X*Q+4*j*J)*V*q+(G*G-4*X*J)*V*V,Ee=H*q-G*V;if(Ce>=0&&$!=0){var he=Math.sqrt(Ce),de=-(Ee+he)/$,ke=(-Ee+he)/$;de>=0&&de<=1&&se.push(de),ke>=0&&ke<=1&&se.push(ke)}}return se}return{getIntersections:function(b){var N=this.getValues(),I=b&&b!==this&&b.getValues();return I?_(N,I,this,b,[]):m(N,this,[])},statics:{getOverlaps:S,getIntersections:x,getCurveLineIntersections:u,getTimesWithTangent:y}}}),wt=c.extend({_class:"CurveLocation",initialize:function(t,n,r,s,u){if(n>=.99999999){var d=t.getNext();d&&(n=0,t=d)}this._setCurve(t),this._time=n,this._point=r||t.getPointAtTime(n),this._overlap=s,this._distance=u,this._intersection=this._next=this._previous=null},_setPath:function(e){this._path=e,this._version=e?e._version:0},_setCurve:function(e){this._setPath(e._path),this._curve=e,this._segment=null,this._segment1=e._segment1,this._segment2=e._segment2},_setSegment:function(e){var t=e.getCurve();t?this._setCurve(t):(this._setPath(e._path),this._segment1=e,this._segment2=null),this._segment=e,this._time=e===this._segment1?0:1,this._point=e._point.clone()},getSegment:function(){var e=this._segment;if(!e){var t=this.getCurve(),n=this.getTime();n===0?e=t._segment1:n===1?e=t._segment2:n!=null&&(e=t.getPartLength(0,n)<t.getPartLength(n,1)?t._segment1:t._segment2),this._segment=e}return e},getCurve:function(){var e=this._path,t=this;e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function n(r){var s=r&&r.getCurve();if(s&&(t._time=s.getTimeOf(t._point))!=null)return t._setCurve(s),s}return this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var e=this.getCurve();return e&&e._path},getIndex:function(){var e=this.getCurve();return e&&e.getIndex()},getTime:function(){var e=this.getCurve(),t=this._time;return e&&t==null?this._time=e.getTimeOf(this._point):t},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var e=this._offset;if(e==null){e=0;var t=this.getPath(),n=this.getIndex();if(t&&n!=null)for(var r=t.getCurves(),s=0;s<n;s++)e+=r[s].getLength();this._offset=e+=this.getCurveOffset()}return e},getCurveOffset:function(){var e=this._curveOffset;if(e==null){var t=this.getCurve(),n=this.getTime();this._curveOffset=e=n!=null&&t&&t.getPartLength(0,n)}return e},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var e=this.getCurve(),t=e&&e.divideAtTime(this.getTime());return t&&this._setSegment(t._segment1),t},split:function(){var e=this.getCurve(),t=e._path,n=e&&e.splitAtTime(this.getTime());return n&&this._setSegment(t.getLastSegment()),n},equals:function(e,t){var n=this===e;if(!n&&e instanceof wt){var r=this.getCurve(),s=e.getCurve(),u=r._path,d=s._path;if(u===d){var f=Math.abs,_=1e-7,m=f(this.getOffset()-e.getOffset()),x=!t&&this._intersection,S=!t&&e._intersection;n=(m<_||u&&f(u.getLength()-m)<_)&&(!x&&!S||x&&S&&x.equals(S,!0))}}return n},toString:function(){var e=[],t=this.getPoint(),n=Z.instance;t&&e.push("point: "+t);var r=this.getIndex();r!=null&&e.push("index: "+r);var s=this.getTime();return s!=null&&e.push("time: "+n.number(s)),this._distance!=null&&e.push("distance: "+n.number(this._distance)),"{ "+e.join(", ")+" }"},isTouching:function(){var e=this._intersection;if(e&&this.getTangent().isCollinear(e.getTangent())){var t=this.getCurve(),n=e.getCurve();return!(t.isStraight()&&n.isStraight()&&t.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var e=this._intersection;if(!e)return!1;var t=this.getTime(),n=e.getTime(),r=1e-8,s=1-r,u=t>=r&&t<=s,d=n>=r&&n<=s;if(u&&d)return!this.isTouching();var f=this.getCurve(),_=f&&t<r?f.getPrevious():f,m=e.getCurve(),x=m&&n<r?m.getPrevious():m;if(t>s&&(f=f.getNext()),n>s&&(m=m.getNext()),!_||!f||!x||!m)return!1;var S=[];function y(V,q){var j=V.getValues(),X=ve.classify(j).roots||ve.getPeaks(j),H=X.length,G=ve.getLength(j,q&&H?X[H-1]:0,!q&&H?X[0]:1);S.push(H?G:G/32)}function b(V,q,j){return q<j?V>q&&V<j:V>q||V<j}u||(y(_,!0),y(f,!1)),d||(y(x,!0),y(m,!1));var N=this.getPoint(),I=Math.min.apply(Math,S),E=u?f.getTangentAtTime(t):f.getPointAt(I).subtract(N),w=u?E.negate():_.getPointAt(-I).subtract(N),k=d?m.getTangentAtTime(n):m.getPointAt(I).subtract(N),v=d?k.negate():x.getPointAt(-I).subtract(N),A=w.getAngle(),L=E.getAngle(),z=v.getAngle(),M=k.getAngle();return!!(u?b(A,z,M)^b(L,z,M)&&b(A,M,z)^b(L,M,z):b(z,A,L)^b(M,A,L)&&b(z,L,A)^b(M,L,A))},hasOverlap:function(){return!!this._overlap}},c.each(ve._evaluateMethods,function(e){var t=e+"At";this[e]=function(){var n=this.getCurve(),r=this.getTime();return r!=null&&n&&n[t](r,!0)}},{preserve:!0}),new function(){function e(t,n,r){var s=t.length,u=0,d=s-1;function f(N,I){for(var E=N+I;E>=-1&&E<=s;E+=I){var w=t[(E%s+s)%s];if(!n.getPoint().isClose(w.getPoint(),1e-7))break;if(n.equals(w))return w}return null}for(;u<=d;){var _=u+d>>>1,m=t[_],x;if(r&&(x=n.equals(m)?m:f(_,-1)||f(_,1)))return n._overlap&&(x._overlap=x._intersection._overlap=!0),x;var S=n.getPath(),y=m.getPath(),b=S!==y?S._id-y._id:n.getIndex()+n.getTime()-(m.getIndex()+m.getTime());b<0?d=_-1:u=_+1}return t.splice(u,0,n),n}return{statics:{insert:e,expand:function(t){for(var n=t.slice(),r=t.length-1;r>=0;r--)e(n,t[r]._intersection,!1);return n}}}}),Bt=T.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(e){var t,n,r;if(c.isPlainObject(e)?(n=e.segments,t=e.pathData):Array.isArray(e)?n=e:typeof e=="string"&&(t=e),n){var s=n[0];r=s&&Array.isArray(s[0])}else t&&(r=(t.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(t));var u=r?at:Ve;return new u(e)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(e){this.isClockwise()!=(e=!!e)&&this.reverse()},setPathData:function(e){var t=e&&e.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),n,r=!1,s,u,d=new F,f=new F;function _(v,A){var L=+n[v];return r&&(L+=d[A]),L}function m(v){return new F(_(v,"x"),_(v+1,"y"))}this.clear();for(var x=0,S=t&&t.length;x<S;x++){var y=t[x],b=y[0],N=b.toLowerCase();n=y.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var I=n&&n.length;switch(r=b===N,s==="z"&&!/[mz]/.test(N)&&this.moveTo(d),N){case"m":case"l":for(var E=N==="m",w=0;w<I;w+=2)this[E?"moveTo":"lineTo"](d=m(w)),E&&(f=d,E=!1);u=d;break;case"h":case"v":var k=N==="h"?"x":"y";d=d.clone();for(var w=0;w<I;w++)d[k]=_(w,k),this.lineTo(d);u=d;break;case"c":for(var w=0;w<I;w+=6)this.cubicCurveTo(m(w),u=m(w+2),d=m(w+4));break;case"s":for(var w=0;w<I;w+=4)this.cubicCurveTo(/[cs]/.test(s)?d.multiply(2).subtract(u):d,u=m(w),d=m(w+2)),s=N;break;case"q":for(var w=0;w<I;w+=4)this.quadraticCurveTo(u=m(w),d=m(w+2));break;case"t":for(var w=0;w<I;w+=2)this.quadraticCurveTo(u=/[qt]/.test(s)?d.multiply(2).subtract(u):d,d=m(w)),s=N;break;case"a":for(var w=0;w<I;w+=7)this.arcTo(d=m(w+5),new te(+n[w],+n[w+1]),+n[w+2],+n[w+4],+n[w+3]);break;case"z":this.closePath(1e-12),d=f;break}s=N}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(e){var t=e.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(e):{};return t.onPath||!!(this.getFillRule()==="evenodd"?t.windingL&1||t.windingR&1:t.winding)},getIntersections:function(e,t,n,r){var s=this===e||!e,u=this._matrix._orNullIfIdentity(),d=s?u:(n||e._matrix)._orNullIfIdentity();return s||this.getBounds(u).intersects(e.getBounds(d),1e-12)?ve.getIntersections(this.getCurves(),!s&&e.getCurves(),t,u,d,r):[]},getCrossings:function(e){return this.getIntersections(e,function(t){return t.isCrossing()})},getNearestLocation:function(){for(var e=F.read(arguments),t=this.getCurves(),n=1/0,r=null,s=0,u=t.length;s<u;s++){var d=t[s].getNearestLocation(e);d._distance<n&&(n=d._distance,r=d)}return r},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()},interpolate:function(e,t,n){var r=!this._children,s=r?"_segments":"_children",u=e[s],d=t[s],f=this[s];if(!u||!d||u.length!==d.length)throw new Error("Invalid operands in interpolate() call: "+e+", "+t);var _=f.length,m=d.length;if(_<m)for(var x=r?me:Ve,S=_;S<m;S++)this.add(new x);else _>m&&this[r?"removeSegments":"removeChildren"](m,_);for(var S=0;S<m;S++)f[S].interpolate(u[S],d[S],n);r&&(this.setClosed(e._closed),this._changed(9))},compare:function(e){var t=!1;if(e){var n=this._children||[this],r=e._children?e._children.slice():[e],s=n.length,u=r.length,d=[],f=0;t=!0;for(var _=D.findItemBoundsCollisions(n,r,K.GEOMETRIC_EPSILON),m=s-1;m>=0&&t;m--){var x=n[m];t=!1;var S=_[m];if(S)for(var y=S.length-1;y>=0&&!t;y--)x.compare(r[S[y]])&&(d[S[y]]||(d[S[y]]=!0,f++),t=!0)}t=t&&f===u}return t}}),Ve=Bt.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var n=arguments,r=Array.isArray(t)?typeof t[0]=="object"?t:n:t&&t.size===h&&(t.x!==h||t.point!==h)?n:null;r&&r.length>0?this.setSegments(r):(this._curves=h,this._segmentSelection=0,!r&&typeof t=="string"&&(this.setPathData(t),t=null)),this._initialize(!r&&t)},_equals:function(e){return this._closed===e._closed&&c.equals(this._segments,e._segments)},copyContent:function(e){this.setSegments(e._segments),this._closed=e._closed},_changed:function e(t){if(e.base.call(this,t),t&8){if(this._length=this._area=h,t&32)this._version++;else if(this._curves)for(var n=0,r=this._curves.length;n<r;n++)this._curves[n]._changed()}else t&64&&(this._bounds=h)},getStyle:function(){var e=this._parent;return(e instanceof at?e:this)._style},getSegments:function(){return this._segments},setSegments:function(e){var t=this.isFullySelected(),n=e&&e.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=h,n){var r=e[n-1];typeof r=="boolean"&&(this.setClosed(r),n--),this._add(me.readList(e,0,{},n))}t&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var e=this._curves,t=this._segments;if(!e){var n=this._countCurves();e=this._curves=new Array(n);for(var r=0;r<n;r++)e[r]=new ve(this,t[r],t[r+1]||t[0])}return e},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var e=this.getCurves();return e[e.length-1]},isClosed:function(){return this._closed},setClosed:function(e){if(this._closed!=(e=!!e)){if(this._closed=e,this._curves){var t=this._curves.length=this._countCurves();e&&(this._curves[t-1]=new ve(this,this._segments[t-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(e,t){var n=this._segments,r=n.length,s=new Z(t),u=new Array(6),d=!0,f,_,m,x,S,y,b,N,I=[];function E(k,v){if(k._transformCoordinates(e,u),f=u[0],_=u[1],d)I.push("M"+s.pair(f,_)),d=!1;else if(S=u[2],y=u[3],S===f&&y===_&&b===m&&N===x){if(!v){var A=f-m,L=_-x;I.push(A===0?"v"+s.number(L):L===0?"h"+s.number(A):"l"+s.pair(A,L))}}else I.push("c"+s.pair(b-m,N-x)+" "+s.pair(S-m,y-x)+" "+s.pair(f-m,_-x));m=f,x=_,b=u[4],N=u[5]}if(!r)return"";for(var w=0;w<r;w++)E(n[w]);return this._closed&&r>0&&(E(n[0],!0),I.push("z")),I.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(e){for(var t=this._segments,n=new Array(6),r=0,s=t.length;r<s;r++)t[r]._transformCoordinates(e,n,!0);return!0},_add:function(e,d){for(var n=this._segments,r=this._curves,s=e.length,u=d==null,d=u?n.length:d,f=0;f<s;f++){var _=e[f];_._path&&(_=e[f]=_.clone()),_._path=this,_._index=d+f,_._selection&&this._updateSelection(_,0,_._selection)}if(u)c.push(n,e);else{n.splice.apply(n,[d,0].concat(e));for(var f=d+s,m=n.length;f<m;f++)n[f]._index=f}if(r){var x=this._countCurves(),S=d>0&&d+s-1===x?d-1:d,y=S,b=Math.min(S+s,x);e._curves&&(r.splice.apply(r,[S,0].concat(e._curves)),y+=e._curves.length);for(var f=y;f<b;f++)r.splice(f,0,new ve(this,null,null));this._adjustCurves(S,b)}return this._changed(41),e},_adjustCurves:function(e,t){for(var n=this._segments,r=this._curves,s,u=e;u<t;u++)s=r[u],s._path=this,s._segment1=n[u],s._segment2=n[u+1]||n[0],s._changed();(s=r[this._closed&&!e?n.length-1:e-1])&&(s._segment2=n[e]||n[0],s._changed()),(s=r[t])&&(s._segment1=n[t],s._changed())},_countCurves:function(){var e=this._segments.length;return!this._closed&&e>0?e-1:e},add:function(e){var t=arguments;return t.length>1&&typeof e!="number"?this._add(me.readList(t)):this._add([me.read(t)])[0]},insert:function(e,t){var n=arguments;return n.length>2&&typeof t!="number"?this._add(me.readList(n,1),e):this._add([me.read(n,1)],e)[0]},addSegment:function(){return this._add([me.read(arguments)])[0]},insertSegment:function(e){return this._add([me.read(arguments,1)],e)[0]},addSegments:function(e){return this._add(me.readList(e))},insertSegments:function(e,t){return this._add(me.readList(t),e)},removeSegment:function(e){return this.removeSegments(e,e+1)[0]||null},removeSegments:function(e,t,n){e=e||0,t=c.pick(t,this._segments.length);var r=this._segments,s=this._curves,u=r.length,d=r.splice(e,t-e),f=d.length;if(!f)return d;for(var _=0;_<f;_++){var m=d[_];m._selection&&this._updateSelection(m,m._selection,0),m._index=m._path=null}for(var _=e,x=r.length;_<x;_++)r[_]._index=_;if(s){for(var S=e>0&&t===u+(this._closed?1:0)?e-1:e,s=s.splice(S,f),_=s.length-1;_>=0;_--)s[_]._path=null;n&&(d._curves=s.slice(1)),this._adjustCurves(S,S)}return this._changed(41),d},clear:"#removeSegments",hasHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)if(e[t].hasHandles())return!0;return!1},clearHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)e[t].clearHandles()},getLength:function(){if(this._length==null){for(var e=this.getCurves(),t=0,n=0,r=e.length;n<r;n++)t+=e[n].getLength();this._length=t}return this._length},getArea:function(){var e=this._area;if(e==null){var t=this._segments,n=this._closed;e=0;for(var r=0,s=t.length;r<s;r++){var u=r+1===s;e+=ve.getArea(ve.getValues(t[r],t[u?0:r+1],null,u&&!n))}this._area=e}return e},isFullySelected:function(){var e=this._segments.length;return this.isSelected()&&e>0&&this._segmentSelection===e*7},setFullySelected:function(e){e&&this._selectSegments(!0),this.setSelected(e)},setSelection:function e(t){t&1||this._selectSegments(!1),e.base.call(this,t)},_selectSegments:function(e){var t=this._segments,n=t.length,r=e?7:0;this._segmentSelection=r*n;for(var s=0;s<n;s++)t[s]._selection=r},_updateSelection:function(e,t,n){e._selection=n;var r=this._segmentSelection+=n-t;r>0&&this.setSelected(!0)},divideAt:function(e){var t=this.getLocationAt(e),n;return t&&(n=t.getCurve().divideAt(t.getCurveOffset()))?n._segment1:null},splitAt:function(e){var t=this.getLocationAt(e),n=t&&t.index,r=t&&t.time,s=1e-8,u=1-s;r>u&&(n++,r=0);var d=this.getCurves();if(n>=0&&n<d.length){r>=s&&d[n++].divideAtTime(r);var f=this.removeSegments(n,this._segments.length,!0),_;return this._closed?(this.setClosed(!1),_=this):(_=new Ve(T.NO_INSERT),_.insertAbove(this),_.copyAttributes(this)),_._add(f,0),this.addSegment(f[0]),_}return null},split:function(e,t){var n,r=t===h?e:(n=this.getCurves()[e])&&n.getLocationAtTime(t);return r!=null?this.splitAt(r):null},join:function(e,t){var n=t||0;if(e&&e!==this){var r=e._segments,s=this.getLastSegment(),u=e.getLastSegment();if(!u)return this;s&&s._point.isClose(u._point,n)&&e.reverse();var d=e.getFirstSegment();if(s&&s._point.isClose(d._point,n))s.setHandleOut(d._handleOut),this._add(r.slice(1));else{var f=this.getFirstSegment();f&&f._point.isClose(d._point,n)&&e.reverse(),u=e.getLastSegment(),f&&f._point.isClose(u._point,n)?(f.setHandleIn(u._handleIn),this._add(r.slice(0,r.length-1),0)):this._add(r.slice())}e._closed&&this._add([r[0]]),e.remove()}var _=this.getFirstSegment(),m=this.getLastSegment();return _!==m&&_._point.isClose(m._point,n)&&(_.setHandleIn(m._handleIn),m.remove(),this.setClosed(!0)),this},reduce:function(e){for(var t=this.getCurves(),n=e&&e.simplify,r=n?1e-7:0,s=t.length-1;s>=0;s--){var u=t[s];!u.hasHandles()&&(!u.hasLength(r)||n&&u.isCollinear(u.getNext()))&&u.remove()}return this},reverse:function(){this._segments.reverse();for(var e=0,t=this._segments.length;e<t;e++){var n=this._segments[e],r=n._handleIn;n._handleIn=n._handleOut,n._handleOut=r,n._index=e}this._curves=null,this._changed(9)},flatten:function(e){for(var t=new Wt(this,e||.25,256,!0),n=t.parts,r=n.length,s=[],u=0;u<r;u++)s.push(new me(n[u].curve.slice(0,2)));!this._closed&&r>0&&s.push(new me(n[r-1].curve.slice(6))),this.setSegments(s)},simplify:function(e){var t=new ei(this).fit(e||2.5);return t&&this.setSegments(t),!!t},smooth:function(e){var t=this,n=e||{},r=n.type||"asymmetric",s=this._segments,u=s.length,d=this._closed;function f(Ne,He){var De=Ne&&Ne.index;if(De!=null){var Ze=Ne.path;if(Ze&&Ze!==t)throw new Error(Ne._class+" "+De+" of "+Ze+" is not part of "+t);He&&Ne instanceof ve&&De++}else De=typeof Ne=="number"?Ne:He;return Math.min(De<0&&d?De%u:De<0?De+u:De,u-1)}var _=d&&n.from===h&&n.to===h,m=f(n.from,0),x=f(n.to,u-1);if(m>x)if(d)m-=u;else{var S=m;m=x,x=S}if(/^(?:asymmetric|continuous)$/.test(r)){var y=r==="asymmetric",b=Math.min,N=x-m+1,I=N-1,E=_?b(N,4):1,w=E,k=E,v=[];if(d||(w=b(1,m),k=b(1,u-x-1)),I+=w+k,I<=1)return;for(var A=0,L=m-w;A<=I;A++,L++)v[A]=s[(L<0?L+u:L)%u]._point;for(var z=v[0]._x+2*v[1]._x,M=v[0]._y+2*v[1]._y,V=2,q=I-1,j=[z],X=[M],H=[V],G=[],Q=[],A=1;A<I;A++){var J=A<q,$=J||y?1:2,se=J?4:y?2:7,_e=J?4:y?3:8,ye=J?2:y?0:1,Ce=$/V;V=H[A]=se-Ce,z=j[A]=_e*v[A]._x+ye*v[A+1]._x-Ce*z,M=X[A]=_e*v[A]._y+ye*v[A+1]._y-Ce*M}G[q]=j[q]/H[q],Q[q]=X[q]/H[q];for(var A=I-2;A>=0;A--)G[A]=(j[A]-G[A+1])/H[A],Q[A]=(X[A]-Q[A+1])/H[A];G[I]=(3*v[I]._x-G[q])/2,Q[I]=(3*v[I]._y-Q[q])/2;for(var A=w,Ee=I-k,L=m;A<=Ee;A++,L++){var he=s[L<0?L+u:L],de=he._point,ke=G[A]-de._x,Te=Q[A]-de._y;(_||A<Ee)&&he.setHandleOut(ke,Te),(_||A>w)&&he.setHandleIn(-ke,-Te)}}else for(var A=m;A<=x;A++)s[A<0?A+u:A].smooth(n,!_&&A===m,!_&&A===x)},toShape:function(e){if(!this._closed)return null;var t=this._segments,n,r,s,u;function d(y,b){var N=t[y],I=N.getNext(),E=t[b],w=E.getNext();return N._handleOut.isZero()&&I._handleIn.isZero()&&E._handleOut.isZero()&&w._handleIn.isZero()&&I._point.subtract(N._point).isCollinear(w._point.subtract(E._point))}function f(y){var b=t[y],N=b.getPrevious(),I=b.getNext();return N._handleOut.isZero()&&b._handleIn.isZero()&&b._handleOut.isZero()&&I._handleIn.isZero()&&b._point.subtract(N._point).isOrthogonal(I._point.subtract(b._point))}function _(y){var b=t[y],N=b.getNext(),I=b._handleOut,E=N._handleIn,w=.5522847498307936;if(I.isOrthogonal(E)){var k=b._point,v=N._point,A=new Me(k,I,!0).intersect(new Me(v,E,!0),!0);return A&&K.isZero(I.getLength()/A.subtract(k).getLength()-w)&&K.isZero(E.getLength()/A.subtract(v).getLength()-w)}return!1}function m(y,b){return t[y]._point.getDistance(t[b]._point)}if(!this.hasHandles()&&t.length===4&&d(0,2)&&d(1,3)&&f(1)?(n=qe.Rectangle,r=new te(m(0,3),m(0,1)),u=t[1]._point.add(t[2]._point).divide(2)):t.length===8&&_(0)&&_(2)&&_(4)&&_(6)&&d(1,5)&&d(3,7)?(n=qe.Rectangle,r=new te(m(1,6),m(0,3)),s=r.subtract(new te(m(0,7),m(1,2))).divide(2),u=t[3]._point.add(t[4]._point).divide(2)):t.length===4&&_(0)&&_(1)&&_(2)&&_(3)&&(K.isZero(m(0,2)-m(1,3))?(n=qe.Circle,s=m(0,2)/2):(n=qe.Ellipse,s=new te(m(2,0)/2,m(3,1)/2)),u=t[1]._point),n){var x=this.getPosition(!0),S=new n({center:x,size:r,radius:s,insert:!1});return S.copyAttributes(this,!0),S._matrix.prepend(this._matrix),S.rotate(u.subtract(x).getAngle()+90),(e===h||e)&&S.insertAbove(this),S}return null},toPath:"#clone",compare:function e(t){if(!t||t instanceof at)return e.base.call(this,t);var n=this.getCurves(),r=t.getCurves(),s=n.length,u=r.length;if(!s||!u)return s==u;for(var d=n[0].getValues(),f=[],_=0,m,x=0,S,y=0;y<u;y++){var E=r[y].getValues();f.push(E);var b=ve.getOverlaps(d,E);if(b){m=!y&&b[0][0]>0?u-1:y,S=b[0][1];break}}for(var N=Math.abs,I=1e-8,E=f[m],w;d&&E;){var b=ve.getOverlaps(d,E);if(b){var k=b[0][0];if(N(k-x)<I){x=b[1][0],x===1&&(d=++_<s?n[_].getValues():null,x=0);var v=b[0][1];if(N(v-S)<I){if(w||(w=[m,v]),S=b[1][1],S===1&&(++m>=u&&(m=0),E=f[m]||r[m].getValues(),S=0),!d)return w[0]===m&&w[1]===S;continue}}}break}return!1},_hitTestSelf:function(e,t,n,r){var s=this,u=this.getStyle(),d=this._segments,f=d.length,_=this._closed,m=t._tolerancePadding,x=m,S,y,b,N,I,E,w=t.stroke&&u.hasStroke(),k=t.fill&&u.hasFill(),v=t.curves,A=w?u.getStrokeWidth()/2:k&&t.tolerance>0||v?0:null;A!==null&&(A>0?(S=u.getStrokeJoin(),y=u.getStrokeCap(),b=u.getMiterLimit(),x=x.add(Ve._getStrokePadding(A,r))):S=y="round");function L(G,Q){return e.subtract(G).divide(Q).length<=1}function z(G,Q,J){if(!t.selected||Q.isSelected()){var $=G._point;if(Q!==$&&(Q=Q.add($)),L(Q,x))return new Se(J,s,{segment:G,point:Q})}}function M(G,Q){return(Q||t.segments)&&z(G,G._point,"segment")||!Q&&t.handles&&(z(G,G._handleIn,"handle-in")||z(G,G._handleOut,"handle-out"))}function V(G){N.add(G)}function q(G){var Q=_||G._index>0&&G._index<f-1;if((Q?S:y)==="round")return L(G._point,x);if(N=new Ve({internal:!0,closed:!0}),Q?G.isSmooth()||Ve._addBevelJoin(G,S,A,b,null,r,V,!0):y==="square"&&Ve._addSquareCap(G,y,A,null,r,V,!0),!N.isEmpty()){var J;return N.contains(e)||(J=N.getNearestLocation(e))&&L(J.getPoint(),m)}}if(t.ends&&!t.segments&&!_){if(E=M(d[0],!0)||M(d[f-1],!0))return E}else if(t.segments||t.handles){for(var j=0;j<f;j++)if(E=M(d[j]))return E}if(A!==null){if(I=this.getNearestLocation(e),I){var X=I.getTime();X===0||X===1&&f>1?q(I.getSegment())||(I=null):L(I.getPoint(),x)||(I=null)}if(!I&&S==="miter"&&f>1)for(var j=0;j<f;j++){var H=d[j];if(e.getDistance(H._point)<=b*A&&q(H)){I=H.getLocation();break}}}return!I&&k&&this._contains(e)||I&&!w&&!v?new Se("fill",this):I?new Se(w?"stroke":"curve",this,{location:I,point:I.getPoint()}):null}},c.each(ve._evaluateMethods,function(e){this[e+"At"]=function(t){var n=this.getLocationAt(t);return n&&n[e]()}},{beans:!1,getLocationOf:function(){for(var e=F.read(arguments),t=this.getCurves(),n=0,r=t.length;n<r;n++){var s=t[n].getLocationOf(e);if(s)return s}return null},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getLocationAt:function(e){if(typeof e=="number"){for(var t=this.getCurves(),n=0,r=0,s=t.length;r<s;r++){var u=n,d=t[r];if(n+=d.getLength(),n>e)return d.getLocationAt(e-u)}if(t.length>0&&e<=this.getLength())return new wt(t[t.length-1],1)}else if(e&&e.getPath&&e.getPath()===this)return e;return null},getOffsetsWithTangent:function(){var e=F.read(arguments);if(e.isZero())return[];for(var t=[],n=0,r=this.getCurves(),s=0,u=r.length;s<u;s++){for(var d=r[s],f=d.getTimesWithTangent(e),_=0,m=f.length;_<m;_++){var x=n+d.getOffsetAtTime(f[_]);t.indexOf(x)<0&&t.push(x)}n+=d.length}return t}}),new function(){function e(n,r,s,u){if(u<=0)return;var d=u/2,f=u-2,_=d-1,m=new Array(6),x,S;function y(k){var v=m[k],A=m[k+1];(x!=v||S!=A)&&(n.beginPath(),n.moveTo(x,S),n.lineTo(v,A),n.stroke(),n.beginPath(),n.arc(v,A,d,0,Math.PI*2,!0),n.fill())}for(var b=0,N=r.length;b<N;b++){var I=r[b],E=I._selection;if(I._transformCoordinates(s,m),x=m[0],S=m[1],E&2&&y(2),E&4&&y(4),n.fillRect(x-d,S-d,u,u),f>0&&!(E&1)){var w=n.fillStyle;n.fillStyle="#ffffff",n.fillRect(x-_,S-_,f,f),n.fillStyle=w}}}function t(n,r,s){var u=r._segments,d=u.length,f=new Array(6),_=!0,m,x,S,y,b,N,I,E;function w(v){if(s)v._transformCoordinates(s,f),m=f[0],x=f[1];else{var A=v._point;m=A._x,x=A._y}if(_)n.moveTo(m,x),_=!1;else{if(s)b=f[2],N=f[3];else{var L=v._handleIn;b=m+L._x,N=x+L._y}b===m&&N===x&&I===S&&E===y?n.lineTo(m,x):n.bezierCurveTo(I,E,b,N,m,x)}if(S=m,y=x,s)I=f[4],E=f[5];else{var L=v._handleOut;I=S+L._x,E=y+L._y}}for(var k=0;k<d;k++)w(u[k]);r._closed&&d>0&&w(u[0])}return{_draw:function(n,r,s,u){var d=r.dontStart,f=r.dontFinish||r.clip,_=this.getStyle(),m=_.hasFill(),x=_.hasStroke(),S=_.getDashArray(),y=!et.support.nativeDash&&x&&S&&S.length;d||n.beginPath(),(m||x&&!y||f)&&(t(n,this,u),this._closed&&n.closePath());function b(v){return S[(v%y+y)%y]}if(!f&&(m||x)&&(this._setStyles(n,r,s),m&&(n.fill(_.getFillRule()),n.shadowColor="rgba(0,0,0,0)"),x)){if(y){d||n.beginPath();for(var N=new Wt(this,.25,32,!1,u),I=N.length,E=-_.getDashOffset(),w,k=0;E>0;)E-=b(k--)+b(k--);for(;E<I;)w=E+b(k++),(E>0||w>0)&&N.drawPart(n,Math.max(E,0),Math.max(w,0)),E=w+b(k++)}n.stroke()}},_drawSelected:function(n,r){n.beginPath(),t(n,this,r),n.stroke(),e(n,this._segments,r,et.settings.handleSize)}}},new function(){function e(t){var n=t._segments;if(!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return{moveTo:function(){var t=this._segments;t.length===1&&this.removeSegment(0),t.length||this._add([new me(F.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new me(F.read(arguments))])},cubicCurveTo:function(){var t=arguments,n=F.read(t),r=F.read(t),s=F.read(t),u=e(this);u.setHandleOut(n.subtract(u._point)),this._add([new me(s,r.subtract(s))])},quadraticCurveTo:function(){var t=arguments,n=F.read(t),r=F.read(t),s=e(this)._point;this.cubicCurveTo(n.add(s.subtract(n).multiply(1/3)),n.add(r.subtract(n).multiply(1/3)),r)},curveTo:function(){var t=arguments,n=F.read(t),r=F.read(t),s=c.pick(c.read(t),.5),u=1-s,d=e(this)._point,f=n.subtract(d.multiply(u*u)).subtract(r.multiply(s*s)).divide(2*s*u);if(f.isNaN())throw new Error("Cannot put a curve through points with parameter = "+s);this.quadraticCurveTo(f,r)},arcTo:function(){var t=arguments,n=Math.abs,r=Math.sqrt,s=e(this),u=s._point,d=F.read(t),f,_=c.peek(t),m=c.pick(_,!0),x,S,y,b;if(typeof m=="boolean")var N=u.add(d).divide(2),f=N.add(N.subtract(u).rotate(m?-90:90));else if(c.remain(t)<=2)f=d,d=F.read(t);else if(!u.equals(d)){var I=te.read(t),E=K.isZero;if(E(I.width)||E(I.height))return this.lineTo(d);var w=c.read(t),m=!!c.read(t),k=!!c.read(t),N=u.add(d).divide(2),v=u.subtract(N).rotate(-w),A=v.x,L=v.y,z=n(I.width),M=n(I.height),V=z*z,q=M*M,j=A*A,X=L*L,H=r(j/V+X/q);if(H>1&&(z*=H,M*=H,V=z*z,q=M*M),H=(V*q-V*X-q*j)/(V*X+q*j),n(H)<1e-12&&(H=0),H<0)throw new Error("Cannot create an arc with the given arguments");x=new F(z*L/M,-M*A/z).multiply((k===m?-1:1)*r(H)).rotate(w).add(N),b=new le().translate(x).rotate(w).scale(z,M),y=b._inverseTransform(u),S=y.getDirectedAngle(b._inverseTransform(d)),!m&&S>0?S-=360:m&&S<0&&(S+=360)}if(f){var G=new Me(u.add(f).divide(2),f.subtract(u).rotate(90),!0),Q=new Me(f.add(d).divide(2),d.subtract(f).rotate(90),!0),J=new Me(u,d),$=J.getSide(f);if(x=G.intersect(Q,!0),!x){if(!$)return this.lineTo(d);throw new Error("Cannot create an arc with the given arguments")}y=u.subtract(x),S=y.getDirectedAngle(d.subtract(x));var se=J.getSide(x,!0);se===0?S=$*n(S):$===se&&(S+=S<0?360:-360)}if(S){for(var _e=1e-5,ye=n(S),Ce=ye>=360?4:Math.ceil((ye-_e)/90),Ee=S/Ce,he=Ee*Math.PI/360,de=4/3*Math.sin(he)/(1+Math.cos(he)),ke=[],Te=0;Te<=Ce;Te++){var v=d,Ne=null;if(Te<Ce&&(Ne=y.rotate(90).multiply(de),b?(v=b._transformPoint(y),Ne=b._transformPoint(y.add(Ne)).subtract(v)):v=x.add(y)),!Te)s.setHandleOut(Ne);else{var He=y.rotate(-90).multiply(de);b&&(He=b._transformPoint(y.add(He)).subtract(v)),ke.push(new me(v,He,Ne))}y=y.rotate(Ee)}this._add(ke)}},lineBy:function(){var t=F.read(arguments),n=e(this)._point;this.lineTo(n.add(t))},curveBy:function(){var t=arguments,n=F.read(t),r=F.read(t),s=c.read(t),u=e(this)._point;this.curveTo(u.add(n),u.add(r),s)},cubicCurveBy:function(){var t=arguments,n=F.read(t),r=F.read(t),s=F.read(t),u=e(this)._point;this.cubicCurveTo(u.add(n),u.add(r),u.add(s))},quadraticCurveBy:function(){var t=arguments,n=F.read(t),r=F.read(t),s=e(this)._point;this.quadraticCurveTo(s.add(n),s.add(r))},arcBy:function(){var t=arguments,n=e(this)._point,r=n.add(F.read(t)),s=c.pick(c.peek(t),!0);typeof s=="boolean"?this.arcTo(r,s):this.arcTo(r,n.add(F.read(t)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(e,t){var n=t.handle?"getHandleBounds":t.stroke?"getStrokeBounds":"getBounds";return Ve[n](this._segments,this._closed,this,e,t)},statics:{getBounds:function(e,t,n,r,s,u){var d=e[0];if(!d)return new ee;var f=new Array(6),_=d._transformCoordinates(r,new Array(6)),m=_.slice(0,2),x=m.slice(),S=new Array(2);function y(I){I._transformCoordinates(r,f);for(var E=0;E<2;E++)ve._addBounds(_[E],_[E+4],f[E+2],f[E],E,u?u[E]:0,m,x,S);var w=_;_=f,f=w}for(var b=1,N=e.length;b<N;b++)y(e[b]);return t&&y(d),new ee(m[0],m[1],x[0]-m[0],x[1]-m[1])},getStrokeBounds:function(e,t,n,r,s){var u=n.getStyle(),d=u.hasStroke(),f=u.getStrokeWidth(),_=d&&n._getStrokeMatrix(r,s),m=d&&Ve._getStrokePadding(f,_),x=Ve.getBounds(e,t,n,r,s,m);if(!d)return x;var S=f/2,y=u.getStrokeJoin(),b=u.getStrokeCap(),N=u.getMiterLimit(),I=new ee(new te(m));function E(z){x=x.include(z)}function w(z){x=x.unite(I.setCenter(z._point.transform(r)))}function k(z,M){M==="round"||z.isSmooth()?w(z):Ve._addBevelJoin(z,M,S,N,r,_,E)}function v(z,M){M==="round"?w(z):Ve._addSquareCap(z,M,S,r,_,E)}var A=e.length-(t?0:1);if(A>0){for(var L=1;L<A;L++)k(e[L],y);t?k(e[0],y):(v(e[0],b),v(e[e.length-1],b))}return x},_getStrokePadding:function(e,t){if(!t)return[e,e];var n=new F(e,0).transform(t),r=new F(0,e).transform(t),s=n.getAngleInRadians(),u=n.getLength(),d=r.getLength(),f=Math.sin(s),_=Math.cos(s),m=Math.tan(s),x=Math.atan2(d*m,u),S=Math.atan2(d,m*u);return[Math.abs(u*Math.cos(x)*_+d*Math.sin(x)*f),Math.abs(d*Math.sin(S)*_+u*Math.cos(S)*f)]},_addBevelJoin:function(e,t,n,r,s,u,d,f){var _=e.getCurve(),m=_.getPrevious(),x=_.getPoint1().transform(s),S=m.getNormalAtTime(1).multiply(n).transform(u),y=_.getNormalAtTime(0).multiply(n).transform(u),b=S.getDirectedAngle(y);if((b<0||b>=180)&&(S=S.negate(),y=y.negate()),f&&d(x),d(x.add(S)),t==="miter"){var N=new Me(x.add(S),new F(-S.y,S.x),!0).intersect(new Me(x.add(y),new F(-y.y,y.x),!0),!0);N&&x.getDistance(N)<=r*n&&d(N)}d(x.add(y))},_addSquareCap:function(e,t,n,r,s,u,d){var f=e._point.transform(r),_=e.getLocation(),m=_.getNormal().multiply(_.getTime()===0?n:-n).transform(s);t==="square"&&(d&&(u(f.subtract(m)),u(f.add(m))),f=f.add(m.rotate(-90))),u(f.add(m)),u(f.subtract(m))},getHandleBounds:function(e,t,n,r,s){var u=n.getStyle(),d=s.stroke&&u.hasStroke(),f,_;if(d){var m=n._getStrokeMatrix(r,s),x=u.getStrokeWidth()/2,S=x;u.getStrokeJoin()==="miter"&&(S=x*u.getMiterLimit()),u.getStrokeCap()==="square"&&(S=Math.max(S,x*Math.SQRT2)),f=Ve._getStrokePadding(x,m),_=Ve._getStrokePadding(S,m)}for(var y=new Array(6),b=1/0,N=-b,I=b,E=N,w=0,k=e.length;w<k;w++){var v=e[w];v._transformCoordinates(r,y);for(var A=0;A<6;A+=2){var L=A?f:_,z=L?L[0]:0,M=L?L[1]:0,V=y[A],q=y[A+1],j=V-z,X=V+z,H=q-M,G=q+M;j<b&&(b=j),X>N&&(N=X),H<I&&(I=H),G>E&&(E=G)}}return new ee(b,I,N-b,E-I)}}});Ve.inject({statics:new function(){var e=.5522847498307936,t=[new me([-1,0],[0,e],[0,-e]),new me([0,-1],[-e,0],[e,0]),new me([1,0],[0,-e],[0,e]),new me([0,1],[e,0],[-e,0])];function n(s,u,d){var f=c.getNamed(d),_=new Ve(f&&(f.insert==!0?T.INSERT:f.insert==!1?T.NO_INSERT:null));return _._add(s),_._closed=u,_.set(f,T.INSERT)}function r(s,u,d){for(var f=new Array(4),_=0;_<4;_++){var m=t[_];f[_]=new me(m._point.multiply(u).add(s),m._handleIn.multiply(u),m._handleOut.multiply(u))}return n(f,!0,d)}return{Line:function(){var s=arguments;return n([new me(F.readNamed(s,"from")),new me(F.readNamed(s,"to"))],!1,s)},Circle:function(){var s=arguments,u=F.readNamed(s,"center"),d=c.readNamed(s,"radius");return r(u,new te(d),s)},Rectangle:function(){var s=arguments,u=ee.readNamed(s,"rectangle"),d=te.readNamed(s,"radius",0,{readNull:!0}),f=u.getBottomLeft(!0),_=u.getTopLeft(!0),m=u.getTopRight(!0),x=u.getBottomRight(!0),S;if(!d||d.isZero())S=[new me(f),new me(_),new me(m),new me(x)];else{d=te.min(d,u.getSize(!0).divide(2));var y=d.width,b=d.height,N=y*e,I=b*e;S=[new me(f.add(y,0),null,[-N,0]),new me(f.subtract(0,b),[0,I]),new me(_.add(0,b),null,[0,-I]),new me(_.add(y,0),[-N,0],null),new me(m.subtract(y,0),null,[N,0]),new me(m.add(0,b),[0,-I],null),new me(x.subtract(0,b),null,[0,I]),new me(x.subtract(y,0),[N,0])]}return n(S,!0,s)},RoundRectangle:"#Rectangle",Ellipse:function(){var s=arguments,u=qe._readEllipse(s);return r(u.center,u.radius,s)},Oval:"#Ellipse",Arc:function(){var s=arguments,u=F.readNamed(s,"from"),d=F.readNamed(s,"through"),f=F.readNamed(s,"to"),_=c.getNamed(s),m=new Ve(_&&_.insert==!1&&T.NO_INSERT);return m.moveTo(u),m.arcTo(d,f),m.set(_)},RegularPolygon:function(){for(var s=arguments,u=F.readNamed(s,"center"),d=c.readNamed(s,"sides"),f=c.readNamed(s,"radius"),_=360/d,m=d%3===0,x=new F(0,m?-f:f),S=m?-1:.5,y=new Array(d),b=0;b<d;b++)y[b]=new me(u.add(x.rotate((b+S)*_)));return n(y,!0,s)},Star:function(){for(var s=arguments,u=F.readNamed(s,"center"),d=c.readNamed(s,"points")*2,f=c.readNamed(s,"radius1"),_=c.readNamed(s,"radius2"),m=360/d,x=new F(0,-1),S=new Array(d),y=0;y<d;y++)S[y]=new me(u.add(x.rotate(m*y).multiply(y%2?_:f)));return n(S,!0,s)}}}});var at=Bt.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||(typeof t=="string"?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function e(t,n){var r=n,s=r[0];s&&typeof s[0]=="number"&&(r=[r]);for(var u=n.length-1;u>=0;u--){var d=r[u];r===n&&!(d instanceof Ve)&&(r=c.slice(r)),Array.isArray(d)?r[u]=new Ve({segments:d,insert:!1}):d instanceof at&&(r.splice.apply(r,[u,1].concat(d.removeChildren())),d.remove())}return e.base.call(this,t,r)},reduce:function e(t){for(var n=this._children,r=n.length-1;r>=0;r--){var s=n[r].reduce(t);s.isEmpty()&&s.remove()}if(!n.length){var s=new Ve(T.NO_INSERT);return s.copyAttributes(this),s.insertAbove(this),this.remove(),s}return e.base.call(this)},isClosed:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)if(!e[t]._closed)return!1;return!0},setClosed:function(e){for(var t=this._children,n=0,r=t.length;n<r;n++)t[n].setClosed(e)},getFirstSegment:function(){var e=this.getFirstChild();return e&&e.getFirstSegment()},getLastSegment:function(){var e=this.getLastChild();return e&&e.getLastSegment()},getCurves:function(){for(var e=this._children,t=[],n=0,r=e.length;n<r;n++)c.push(t,e[n].getCurves());return t},getFirstCurve:function(){var e=this.getFirstChild();return e&&e.getFirstCurve()},getLastCurve:function(){var e=this.getLastChild();return e&&e.getLastCurve()},getArea:function(){for(var e=this._children,t=0,n=0,r=e.length;n<r;n++)t+=e[n].getArea();return t},getLength:function(){for(var e=this._children,t=0,n=0,r=e.length;n<r;n++)t+=e[n].getLength();return t},getPathData:function(e,t){for(var n=this._children,r=[],s=0,u=n.length;s<u;s++){var d=n[s],f=d._matrix;r.push(d.getPathData(e&&!f.isIdentity()?e.appended(f):e,t))}return r.join("")},_hitTestChildren:function e(t,n,r){return e.base.call(this,t,n.class===Ve||n.type==="path"?n:c.set({},n,{fill:!1}),r)},_draw:function(e,t,n,r){var s=this._children;if(s.length){t=t.extend({dontStart:!0,dontFinish:!0}),e.beginPath();for(var u=0,d=s.length;u<d;u++)s[u].draw(e,t,r);if(!t.clip){this._setStyles(e,t,n);var f=this._style;f.hasFill()&&(e.fill(f.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),f.hasStroke()&&e.stroke()}}},_drawSelected:function(e,t,n){for(var r=this._children,s=0,u=r.length;s<u;s++){var d=r[s],f=d._matrix;n[d._id]||d._drawSelected(e,f.isIdentity()?t:t.appended(f))}}},new function(){function e(t,n){var r=t._children;if(n&&!r.length)throw new Error("Use a moveTo() command first");return r[r.length-1]}return c.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(t){this[t]=function(){var n=e(this,!0);n[t].apply(n,arguments)}},{moveTo:function(){var t=e(this),n=t&&t.isEmpty()?t:new Ve(T.NO_INSERT);n!==t&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var t=e(this,!0),n=t&&t.getLastSegment(),r=F.read(arguments);this.moveTo(n?r.add(n._point):r)},closePath:function(t){e(this,!0).closePath(t)}})},c.each(["reverse","flatten","simplify","smooth"],function(e){this[e]=function(t){for(var n=this._children,r,s=0,u=n.length;s<u;s++)r=n[s][e](t)||r;return r}},{}));Bt.inject(new function(){var e=Math.min,t=Math.max,n=Math.abs,r={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function s(w){return w._children||[w]}function u(w,k){var v=w.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(k){for(var A=s(v),L=0,z=A.length;L<z;L++){var w=A[L];!w._closed&&!w.isEmpty()&&(w.closePath(1e-12),w.getFirstSegment().setHandleIn(0,0),w.getLastSegment().setHandleOut(0,0))}v=v.resolveCrossings().reorient(v.getFillRule()==="nonzero",!0)}return v}function d(w,k,v,A,L){var z=new at(T.NO_INSERT);return z.addChildren(w,!0),z=z.reduce({simplify:k}),L&&L.insert==!1||z.insertAbove(A&&v.isSibling(A)&&v.getIndex()<A.getIndex()?A:v),z.copyAttributes(v,!0),z}function f(w){return w.hasOverlap()||w.isCrossing()}function _(w,k,v,A){if(A&&(A.trace==!1||A.stroke)&&/^(subtract|intersect)$/.test(v))return m(w,k,v);var L=u(w,!0),z=k&&w!==k&&u(k,!0),M=r[v];M[v]=!0,z&&(M.subtract||M.exclude)^(z.isClockwise()^L.isClockwise())&&z.reverse();var V=b(wt.expand(L.getIntersections(z,f))),q=s(L),j=z&&s(z),X=[],H=[],G;function Q(Ne){for(var He=0,De=Ne.length;He<De;He++){var Ze=Ne[He];c.push(X,Ze._segments),c.push(H,Ze.getCurves()),Ze._overlapsOnly=!0}}function J(Ne){for(var He=[],De=0,Ze=Ne&&Ne.length;De<Ze;De++)He.push(H[Ne[De]]);return He}if(V.length){Q(q),j&&Q(j);for(var $=new Array(H.length),se=0,_e=H.length;se<_e;se++)$[se]=H[se].getValues();for(var ye=D.findCurveBoundsCollisions($,$,0,!0),Ce={},se=0;se<H.length;se++){var Ee=H[se],he=Ee._path._id,de=Ce[he]=Ce[he]||{};de[Ee.getIndex()]={hor:J(ye[se].hor),ver:J(ye[se].ver)}}for(var se=0,_e=V.length;se<_e;se++)I(V[se]._segment,L,z,Ce,M);for(var se=0,_e=X.length;se<_e;se++){var ke=X[se],Te=ke._intersection;ke._winding||I(ke,L,z,Ce,M),Te&&Te._overlap||(ke._path._overlapsOnly=!1)}G=E(X,M)}else G=y(j?q.concat(j):q.slice(),function(Ne){return!!M[Ne]});return d(G,!0,w,k,A)}function m(w,k,v){var A=u(w),L=u(k),z=A.getIntersections(L,f),M=v==="subtract",V=v==="divide",q={},j=[];function X(Q){if(!q[Q._id]&&(V||L.contains(Q.getPointAt(Q.getLength()/2))^M))return j.unshift(Q),q[Q._id]=!0}for(var H=z.length-1;H>=0;H--){var G=z[H].split();G&&(X(G)&&G.getFirstSegment().setHandleIn(0,0),A.getLastSegment().setHandleOut(0,0))}return X(A),d(j,!1,w,k)}function x(w,k){for(var v=w;v;){if(v===k)return;v=v._previous}for(;w._next&&w._next!==k;)w=w._next;if(!w._next){for(;k._previous;)k=k._previous;w._next=k,k._previous=w}}function S(w){for(var k=w.length-1;k>=0;k--)w[k].clearHandles()}function y(w,k,v){var A=w&&w.length;if(A){var L=c.each(w,function(ye,Ce){this[ye._id]={container:null,winding:ye.isClockwise()?1:-1,index:Ce}},{}),z=w.slice().sort(function(ye,Ce){return n(Ce.getArea())-n(ye.getArea())}),M=z[0],V=D.findItemBoundsCollisions(z,null,K.GEOMETRIC_EPSILON);v==null&&(v=M.isClockwise());for(var q=0;q<A;q++){var j=z[q],X=L[j._id],H=0,G=V[q];if(G){for(var Q=null,J=G.length-1;J>=0;J--)if(G[J]<q){Q=Q||j.getInteriorPoint();var $=z[G[J]];if($.contains(Q)){var se=L[$._id];H=se.winding,X.winding+=H,X.container=se.exclude?se.container:$;break}}}if(k(X.winding)===k(H))X.exclude=!0,w[X.index]=null;else{var _e=X.container;j.setClockwise(_e?!_e.isClockwise():v)}}}return w}function b(w,k,v){var A=k&&[],L=1e-8,z=1-L,M=!1,V=v||[],q=v&&{},j,X,H;function G(He){return He._path._id+"."+He._segment1._index}for(var Q=(v&&v.length)-1;Q>=0;Q--){var J=v[Q];J._path&&(q[G(J)]=!0)}for(var Q=w.length-1;Q>=0;Q--){var $=w[Q],se=$._time,_e=se,ye=k&&!k($),J=$._curve,Ce;if(J&&(J!==X?(M=!J.hasHandles()||q&&q[G(J)],j=[],H=null,X=J):H>=L&&(se/=H)),ye){j&&j.push($);continue}else k&&A.unshift($);if(H=_e,se<L)Ce=J._segment1;else if(se>z)Ce=J._segment2;else{var Ee=J.divideAtTime(se,!0);M&&V.push(J,Ee),Ce=Ee._segment1;for(var he=j.length-1;he>=0;he--){var de=j[he];de._time=(de._time-se)/(1-se)}}$._setSegment(Ce);var ke=Ce._intersection,Te=$._intersection;if(ke){x(ke,Te);for(var Ne=ke;Ne;)x(Ne._intersection,ke),Ne=Ne._next}else Ce._intersection=Te}return v||S(V),A||w}function N(w,k,v,A,L){var z=Array.isArray(k)?k:k[v?"hor":"ver"],M=v?1:0,V=M^1,q=[w.x,w.y],j=q[M],X=q[V],H=1e-9,G=1e-6,Q=j-H,J=j+H,$=0,se=0,_e=0,ye=0,Ce=!1,Ee=!1,he=1,de=[],ke,Te;function Ne(lt){var Ct=lt[V+0],Ht=lt[V+6];if(!(X<e(Ct,Ht)||X>t(Ct,Ht))){var Mt=lt[M+0],Yt=lt[M+2],Ft=lt[M+4],xt=lt[M+6];if(Ct===Ht){(Mt<J&&xt>Q||xt<J&&Mt>Q)&&(Ce=!0);return}var si=X===Ct?0:X===Ht||Q>t(Mt,Yt,Ft,xt)||J<e(Mt,Yt,Ft,xt)?1:ve.solveCubic(lt,V,X,de,0,1)>0?de[0]:1,Ut=si===0?Mt:si===1?xt:ve.getPoint(lt,si)[v?"y":"x"],Jt=Ct>Ht?1:-1,yi=ke[V]>ke[V+6]?1:-1,ai=ke[M+6];return X!==Ct?(Ut<Q?_e+=Jt:Ut>J?ye+=Jt:Ce=!0,Ut>j-G&&Ut<j+G&&(he/=2)):(Jt!==yi?Mt<Q?_e+=Jt:Mt>J&&(ye+=Jt):Mt!=ai&&(ai<J&&Ut>J?(ye+=Jt,Ce=!0):ai>Q&&Ut<Q&&(_e+=Jt,Ce=!0)),he/=4),ke=lt,!L&&Ut>Q&&Ut<J&&ve.getTangent(lt,si)[v?"x":"y"]===0&&N(w,k,!v,A,!0)}}function He(lt){var Ct=lt[V+0],Ht=lt[V+2],Mt=lt[V+4],Yt=lt[V+6];if(X<=t(Ct,Ht,Mt,Yt)&&X>=e(Ct,Ht,Mt,Yt)){for(var Ft=lt[M+0],xt=lt[M+2],si=lt[M+4],Ut=lt[M+6],Jt=Q>t(Ft,xt,si,Ut)||J<e(Ft,xt,si,Ut)?[lt]:ve.getMonoCurves(lt,v),yi,ai=0,Yi=Jt.length;ai<Yi;ai++)if(yi=Ne(Jt[ai]))return yi}}for(var De=0,Ze=z.length;De<Ze;De++){var Ke=z[De],We=Ke._path,Nt=Ke.getValues(),Ie;if((!De||z[De-1]._path!==We)&&(ke=null,We._closed||(Te=ve.getValues(We.getLastCurve().getSegment2(),Ke.getSegment1(),null,!A),Te[V]!==Te[V+6]&&(ke=Te)),!ke)){ke=Nt;for(var gt=We.getLastCurve();gt&&gt!==Ke;){var yt=gt.getValues();if(yt[V]!==yt[V+6]){ke=yt;break}gt=gt.getPrevious()}}if(Ie=He(Nt))return Ie;if(De+1===Ze||z[De+1]._path!==We){if(Te&&(Ie=He(Te)))return Ie;Ce&&!_e&&!ye&&(_e=ye=We.isClockwise(A)^v?1:-1),$+=_e,se+=ye,_e=ye=0,Ce&&(Ee=!0,Ce=!1),Te=null}}return $=n($),se=n(se),{winding:t($,se),windingL:$,windingR:se,quality:he,onPath:Ee}}function I(w,k,v,A,L){var z=[],M=w,V=0,H;do{var q=w.getCurve();if(q){var j=q.getLength();z.push({segment:w,curve:q,length:j}),V+=j}w=w.getNext()}while(w&&!w._intersection&&w!==M);for(var X=[.5,.25,.75],H={winding:0,quality:-1},G=.001,Q=1-G,J=0;J<X.length&&H.quality<.5;J++)for(var j=V*X[J],$=0,se=z.length;$<se;$++){var _e=z[$],ye=_e.length;if(j<=ye){var q=_e.curve,Ce=q._path,Ee=Ce._parent,he=Ee instanceof at?Ee:Ce,de=K.clamp(q.getTimeAt(j),G,Q),ke=q.getPointAtTime(de),Te=n(q.getTangentAtTime(de).y)<Math.SQRT1_2,Ne=null;if(L.subtract&&v){var He=he===k?v:k,De=He._getWinding(ke,Te,!0);if(he===k&&De.winding||he===v&&!De.winding){if(De.quality<1)continue;Ne={winding:0,quality:1}}}Ne=Ne||N(ke,A[Ce._id][q.getIndex()],Te,!0),Ne.quality>H.quality&&(H=Ne);break}j-=ye}for(var $=z.length-1;$>=0;$--)z[$].segment._winding=H}function E(w,k){var v=[],A;function L(Ze){var Ke;return!!(Ze&&!Ze._visited&&(!k||k[(Ke=Ze._winding||{}).winding]&&!(k.unite&&Ke.winding===2&&Ke.windingL&&Ke.windingR)))}function z(Ze){if(Ze){for(var Ke=0,We=A.length;Ke<We;Ke++)if(Ze===A[Ke])return!0}return!1}function M(Ze){for(var Ke=Ze._segments,We=0,Nt=Ke.length;We<Nt;We++)Ke[We]._visited=!0}function V(Ze,Ke){var We=Ze._intersection,Nt=We,Ie=[];Ke&&(A=[Ze]);function gt(yt,lt){for(;yt&&yt!==lt;){var Ct=yt._segment,Ht=Ct&&Ct._path;if(Ht){var Mt=Ct.getNext()||Ht.getFirstSegment(),Yt=Mt._intersection;Ct!==Ze&&(z(Ct)||z(Mt)||Mt&&L(Ct)&&(L(Mt)||Yt&&L(Yt._segment)))&&Ie.push(Ct),Ke&&A.push(Ct)}yt=yt._next}}if(We){for(gt(We);We&&We._previous;)We=We._previous;gt(We,Nt)}return Ie}w.sort(function(Ze,Ke){var We=Ze._intersection,Nt=Ke._intersection,Ie=!!(We&&We._overlap),gt=!!(Nt&&Nt._overlap),yt=Ze._path,lt=Ke._path;return Ie^gt?Ie?1:-1:!We^!Nt?We?1:-1:yt!==lt?yt._id-lt._id:Ze._index-Ke._index});for(var q=0,j=w.length;q<j;q++){var X=w[q],H=L(X),G=null,Q=!1,J=!0,$=[],se,_e,ye;if(H&&X._path._overlapsOnly){var Ce=X._path,Ee=X._intersection._segment._path;Ce.compare(Ee)&&(Ce.getArea()&&v.push(Ce.clone(!1)),M(Ce),M(Ee),H=!1)}for(;H;){var he=!G,de=V(X,he),ke=de.shift(),Q=!he&&(z(X)||z(ke)),Te=!Q&&ke;if(he&&(G=new Ve(T.NO_INSERT),se=null),Q){(X.isFirst()||X.isLast())&&(J=X._path._closed),X._visited=!0;break}if(Te&&se&&($.push(se),se=null),se||(Te&&de.push(X),se={start:G._segments.length,crossings:de,visited:_e=[],handleIn:ye}),Te&&(X=ke),!L(X)){G.removeSegments(se.start);for(var Ne=0,He=_e.length;Ne<He;Ne++)_e[Ne]._visited=!1;_e.length=0;do X=se&&se.crossings.shift(),(!X||!X._path)&&(X=null,se=$.pop(),se&&(_e=se.visited,ye=se.handleIn));while(se&&!L(X));if(!X)break}var De=X.getNext();G.add(new me(X._point,ye,De&&X._handleOut)),X._visited=!0,_e.push(X),X=De||X._path.getFirstSegment(),ye=De&&De._handleIn}Q&&(J&&(G.getFirstSegment().setHandleIn(ye),G.setClosed(J)),G.getArea()!==0&&v.push(G))}return v}return{_getWinding:function(w,k,v){return N(w,this.getCurves(),k,v)},unite:function(w,k){return _(this,w,"unite",k)},intersect:function(w,k){return _(this,w,"intersect",k)},subtract:function(w,k){return _(this,w,"subtract",k)},exclude:function(w,k){return _(this,w,"exclude",k)},divide:function(w,k){return k&&(k.trace==!1||k.stroke)?m(this,w,"divide"):d([this.subtract(w,k),this.intersect(w,k)],!0,this,w,k)},resolveCrossings:function(){var w=this._children,k=w||[this];function v(se,_e){var ye=se&&se._intersection;return ye&&ye._overlap&&ye._path===_e}var A=!1,L=!1,z=this.getIntersections(null,function(se){return se.hasOverlap()&&(A=!0)||se.isCrossing()&&(L=!0)}),M=A&&L&&[];if(z=wt.expand(z),A)for(var V=b(z,function(se){return se.hasOverlap()},M),q=V.length-1;q>=0;q--){var j=V[q],X=j._path,H=j._segment,G=H.getPrevious(),Q=H.getNext();v(G,X)&&v(Q,X)&&(H.remove(),G._handleOut._set(0,0),Q._handleIn._set(0,0),G!==H&&!G.getCurve().hasLength()&&(Q._handleIn.set(G._handleIn),G.remove()))}L&&(b(z,A&&function(se){var _e=se.getCurve(),ye=se.getSegment(),Ce=se._intersection,Ee=Ce._curve,he=Ce._segment;if(_e&&Ee&&_e._path&&Ee._path)return!0;ye&&(ye._intersection=null),he&&(he._intersection=null)},M),M&&S(M),k=E(c.each(k,function(se){c.push(this,se._segments)},[])));var J=k.length,$;return J>1&&w?(k!==w&&this.setChildren(k),$=this):J===1&&!w&&(k[0]!==this&&this.setSegments(k[0].removeSegments()),$=this),$||($=new at(T.NO_INSERT),$.addChildren(k),$=$.reduce(),$.copyAttributes(this),this.replaceWith($)),$},reorient:function(w,k){var v=this._children;return v&&v.length?this.setChildren(y(this.removeChildren(),function(A){return!!(w?A:A&1)},k)):k!==h&&this.setClockwise(k),this},getInteriorPoint:function(){var w=this.getBounds(),k=w.getCenter(!0);if(!this.contains(k)){for(var v=this.getCurves(),A=k.y,L=[],z=[],M=0,V=v.length;M<V;M++){var q=v[M].getValues(),j=q[1],X=q[3],H=q[5],G=q[7];if(A>=e(j,X,H,G)&&A<=t(j,X,H,G))for(var Q=ve.getMonoCurves(q),J=0,$=Q.length;J<$;J++){var se=Q[J],_e=se[1],ye=se[7];if(_e!==ye&&(A>=_e&&A<=ye||A>=ye&&A<=_e)){var Ce=A===_e?se[0]:A===ye?se[6]:ve.solveCubic(se,1,A,z,0,1)===1?ve.getPoint(se,z[0]).x:(se[0]+se[6])/2;L.push(Ce)}}}L.length>1&&(L.sort(function(Ee,he){return Ee-he}),k.x=(L[0]+L[1])/2)}return k}}});var Wt=c.extend({_class:"PathFlattener",initialize:function(e,t,n,r,s){var u=[],d=[],f=0,_=1/(n||32),m=e._segments,x=m[0],S;function y(E,w){var k=ve.getValues(E,w,s);u.push(k),b(k,E._index,0,1)}function b(E,w,k,v){if(v-k>_&&!(r&&ve.isStraight(E))&&!ve.isFlatEnough(E,t||.25)){var A=ve.subdivide(E,.5),L=(k+v)/2;b(A[0],w,k,L),b(A[1],w,L,v)}else{var z=E[6]-E[0],M=E[7]-E[1],V=Math.sqrt(z*z+M*M);V>0&&(f+=V,d.push({offset:f,curve:E,index:w,time:v}))}}for(var N=1,I=m.length;N<I;N++)S=m[N],y(x,S),x=S;e._closed&&y(S||x,m[0]),this.curves=u,this.parts=d,this.length=f,this.index=0},_get:function(e){for(var t=this.parts,n=t.length,r,s=this.index;r=s,!(!s||t[--s].offset<e););for(;r<n;r++){var u=t[r];if(u.offset>=e){this.index=r;var d=t[r-1],f=d&&d.index===u.index?d.time:0,_=d?d.offset:0;return{index:u.index,time:f+(u.time-f)*(e-_)/(u.offset-_)}}}return{index:t[n-1].index,time:1}},drawPart:function(e,t,n){for(var r=this._get(t),s=this._get(n),u=r.index,d=s.index;u<=d;u++){var f=ve.getPart(this.curves[u],u===r.index?r.time:0,u===s.index?s.time:1);u===r.index&&e.moveTo(f[0],f[1]),e.bezierCurveTo.apply(e,f.slice(2))}}},c.each(ve._evaluateMethods,function(e){this[e+"At"]=function(t){var n=this._get(t);return ve[e](this.curves[n.index],n.time)}},{})),ei=c.extend({initialize:function(e){for(var t=this.points=[],n=e._segments,r=e._closed,s=0,u,d=n.length;s<d;s++){var f=n[s].point;(!u||!u.equals(f))&&t.push(u=f.clone())}r&&(t.unshift(t[t.length-1]),t.push(t[1])),this.closed=r},fit:function(e){var t=this.points,n=t.length,r=null;return n>0&&(r=[new me(t[0])],n>1&&(this.fitCubic(r,e,0,n-1,t[1].subtract(t[0]),t[n-2].subtract(t[n-1])),this.closed&&(r.shift(),r.pop()))),r},fitCubic:function(e,t,n,r,s,u){var d=this.points;if(r-n===1){var f=d[n],_=d[r],m=f.getDistance(_)/3;this.addCurve(e,[f,f.add(s.normalize(m)),_.add(u.normalize(m)),_]);return}for(var x=this.chordLengthParameterize(n,r),S=Math.max(t,t*t),y,b=!0,N=0;N<=4;N++){var I=this.generateBezier(n,r,x,s,u),E=this.findMaxError(n,r,I,x);if(E.error<t&&b){this.addCurve(e,I);return}if(y=E.index,E.error>=S)break;b=this.reparameterize(n,r,x,I),S=E.error}var w=d[y-1].subtract(d[y+1]);this.fitCubic(e,t,n,y,s,w),this.fitCubic(e,t,y,r,w.negate(),u)},addCurve:function(e,t){var n=e[e.length-1];n.setHandleOut(t[1].subtract(t[0])),e.push(new me(t[3],t[2].subtract(t[3])))},generateBezier:function(e,t,n,r,s){for(var u=1e-12,d=Math.abs,f=this.points,_=f[e],m=f[t],x=[[0,0],[0,0]],S=[0,0],y=0,b=t-e+1;y<b;y++){var N=n[y],I=1-N,E=3*N*I,w=I*I*I,k=E*I,v=E*N,A=N*N*N,L=r.normalize(k),z=s.normalize(v),M=f[e+y].subtract(_.multiply(w+k)).subtract(m.multiply(v+A));x[0][0]+=L.dot(L),x[0][1]+=L.dot(z),x[1][0]=x[0][1],x[1][1]+=z.dot(z),S[0]+=L.dot(M),S[1]+=z.dot(M)}var V=x[0][0]*x[1][1]-x[1][0]*x[0][1],q,j;if(d(V)>u){var X=x[0][0]*S[1]-x[1][0]*S[0],H=S[0]*x[1][1]-S[1]*x[0][1];q=H/V,j=X/V}else{var G=x[0][0]+x[0][1],Q=x[1][0]+x[1][1];q=j=d(G)>u?S[0]/G:d(Q)>u?S[1]/Q:0}var J=m.getDistance(_),$=u*J,se,_e;if(q<$||j<$)q=j=J/3;else{var ye=m.subtract(_);se=r.normalize(q),_e=s.normalize(j),se.dot(ye)-_e.dot(ye)>J*J&&(q=j=J/3,se=_e=null)}return[_,_.add(se||r.normalize(q)),m.add(_e||s.normalize(j)),m]},reparameterize:function(e,t,n,r){for(var s=e;s<=t;s++)n[s-e]=this.findRoot(r,this.points[s],n[s-e]);for(var s=1,u=n.length;s<u;s++)if(n[s]<=n[s-1])return!1;return!0},findRoot:function(e,t,n){for(var r=[],s=[],u=0;u<=2;u++)r[u]=e[u+1].subtract(e[u]).multiply(3);for(var u=0;u<=1;u++)s[u]=r[u+1].subtract(r[u]).multiply(2);var d=this.evaluate(3,e,n),f=this.evaluate(2,r,n),_=this.evaluate(1,s,n),m=d.subtract(t),x=f.dot(f)+m.dot(_);return K.isMachineZero(x)?n:n-m.dot(f)/x},evaluate:function(e,t,n){for(var r=t.slice(),s=1;s<=e;s++)for(var u=0;u<=e-s;u++)r[u]=r[u].multiply(1-n).add(r[u+1].multiply(n));return r[0]},chordLengthParameterize:function(e,t){for(var n=[0],r=e+1;r<=t;r++)n[r-e]=n[r-e-1]+this.points[r].getDistance(this.points[r-1]);for(var r=1,s=t-e;r<=s;r++)n[r]/=n[s];return n},findMaxError:function(e,t,n,r){for(var s=Math.floor((t-e+1)/2),u=0,d=e+1;d<t;d++){var f=this.evaluate(3,n,r[d-e]),_=f.subtract(this.points[d]),m=_.x*_.x+_.y*_.y;m>=u&&(u=m,s=d)}return{error:u,index:s}}}),vt=T.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var n=t&&c.isPlainObject(t)&&t.x===h&&t.y===h;this._initialize(n&&t,!n&&F.read(arguments))},_equals:function(e){return this._content===e._content},copyContent:function(e){this.setContent(e._content)},getContent:function(){return this._content},setContent:function(e){this._content=""+e,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),Oe=vt.extend({_class:"PointText",initialize:function(){vt.apply(this,arguments)},getPoint:function(){var e=this._matrix.getTranslation();return new be(e.x,e.y,this,"setPoint")},setPoint:function(){var e=F.read(arguments);this.translate(e.subtract(this._matrix.getTranslation()))},_draw:function(e,t,n){if(this._content){this._setStyles(e,t,n);var r=this._lines,s=this._style,u=s.hasFill(),d=s.hasStroke(),f=s.getLeading(),_=e.shadowColor;e.font=s.getFontStyle(),e.textAlign=s.getJustification();for(var m=0,x=r.length;m<x;m++){e.shadowColor=_;var S=r[m];u&&(e.fillText(S,0,0),e.shadowColor="rgba(0,0,0,0)"),d&&e.strokeText(S,0,0),e.translate(0,f)}}},_getBounds:function(e,t){var n=this._style,r=this._lines,s=r.length,u=n.getJustification(),d=n.getLeading(),f=this.getView().getTextWidth(n.getFontStyle(),r),_=0;u!=="left"&&(_-=f/(u==="center"?2:1));var m=new ee(_,s?-.75*d:0,f,s*d);return e?e._transformBounds(m,m):m}}),ct=c.extend(new function(){var e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},t={},n={transparent:[0,0,0,0]},r;function s(f){var _=f.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||f.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),m="rgb",x;if(_){var S=_[4]?4:3;x=new Array(S);for(var y=0;y<S;y++){var b=_[y+1];x[y]=parseInt(b.length==1?b+b:b,16)/255}}else if(_=f.match(/^(rgb|hsl)a?\((.*)\)$/)){m=_[1],x=_[2].trim().split(/[,\s]+/g);for(var N=m==="hsl",y=0,I=Math.min(x.length,4);y<I;y++){var E=x[y],b=parseFloat(E);if(N)if(y===0){var w=E.match(/([a-z]*)$/)[1];b*={turn:360,rad:180/Math.PI,grad:.9}[w]||1}else y<3&&(b/=100);else y<3&&(b/=/%$/.test(E)?100:255);x[y]=b}}else{var k=n[f];if(!k)if(p){r||(r=St.getContext(1,1,{willReadFrequently:!0}),r.globalCompositeOperation="copy"),r.fillStyle="rgba(0,0,0,0)",r.fillStyle=f,r.fillRect(0,0,1,1);var v=r.getImageData(0,0,1,1).data;k=n[f]=[v[0]/255,v[1]/255,v[2]/255]}else k=[0,0,0];x=k.slice()}return[m,x]}var u=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],d={"rgb-hsb":function(f,_,m){var x=Math.max(f,_,m),S=Math.min(f,_,m),y=x-S,b=y===0?0:(x==f?(_-m)/y+(_<m?6:0):x==_?(m-f)/y+2:(f-_)/y+4)*60;return[b,x===0?0:y/x,x]},"hsb-rgb":function(f,_,m){f=(f/60%6+6)%6;var S=Math.floor(f),x=f-S,S=u[S],y=[m,m*(1-_),m*(1-_*x),m*(1-_*(1-x))];return[y[S[0]],y[S[1]],y[S[2]]]},"rgb-hsl":function(f,_,m){var x=Math.max(f,_,m),S=Math.min(f,_,m),y=x-S,b=y===0,N=b?0:(x==f?(_-m)/y+(_<m?6:0):x==_?(m-f)/y+2:(f-_)/y+4)*60,I=(x+S)/2,E=b?0:I<.5?y/(x+S):y/(2-x-S);return[N,E,I]},"hsl-rgb":function(f,_,m){if(f=(f/360%1+1)%1,_===0)return[m,m,m];for(var x=[f+1/3,f,f-1/3],S=m<.5?m*(1+_):m+_-m*_,y=2*m-S,b=[],N=0;N<3;N++){var I=x[N];I<0&&(I+=1),I>1&&(I-=1),b[N]=6*I<1?y+(S-y)*6*I:2*I<1?S:3*I<2?y+(S-y)*(2/3-I)*6:y}return b},"rgb-gray":function(f,_,m){return[f*.2989+_*.587+m*.114]},"gray-rgb":function(f){return[f,f,f]},"gray-hsb":function(f){return[0,0,f]},"gray-hsl":function(f){return[0,0,f]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return c.each(e,function(f,_){t[_]=[],c.each(f,function(m,x){var S=c.capitalize(m),y=/^(hue|saturation)$/.test(m),b=t[_][x]=_==="gradient"?m==="gradient"?function(N){var I=this._components[0];return N=Gt.read(Array.isArray(N)?N:arguments,0,{readNull:!0}),I!==N&&(I&&I._removeOwner(this),N&&N._addOwner(this)),N}:function(){return F.read(arguments,0,{readNull:m==="highlight",clone:!0})}:function(N){return N==null||isNaN(N)?0:+N};this["get"+S]=function(){return this._type===_||y&&/^hs[bl]$/.test(this._type)?this._components[x]:this._convert(_)[x]},this["set"+S]=function(N){this._type!==_&&!(y&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(_),this._properties=e[_],this._type=_),this._components[x]=b.call(this,N),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function f(_){var m=arguments,x=this.__read,S=0,y,b,N,I;Array.isArray(_)&&(m=_,_=m[0]);var E=_!=null&&typeof _;if(E==="string"&&_ in e&&(y=_,_=m[1],Array.isArray(_)?(b=_,N=m[2]):(x&&(S=1),m=c.slice(m,1),E=typeof _)),!b){if(I=E==="number"?m:E==="object"&&_.length!=null?_:null,I){y||(y=I.length>=3?"rgb":"gray");var w=e[y].length;N=I[w],x&&(S+=I===arguments?w+(N!=null?1:0):1),I.length>w&&(I=c.slice(I,0,w))}else if(E==="string"){var k=s(_);y=k[0],b=k[1],b.length===4&&(N=b[3],b.length--)}else if(E==="object")if(_.constructor===f){if(y=_._type,b=_._components.slice(),N=_._alpha,y==="gradient")for(var v=1,A=b.length;v<A;v++){var L=b[v];L&&(b[v]=L.clone())}}else if(_.constructor===Gt)y="gradient",I=m;else{y="hue"in _?"lightness"in _?"hsl":"hsb":"gradient"in _||"stops"in _||"radial"in _?"gradient":"gray"in _?"gray":"rgb";var z=e[y],M=t[y];this._components=b=[];for(var v=0,A=z.length;v<A;v++){var V=_[z[v]];V==null&&!v&&y==="gradient"&&"stops"in _&&(V={stops:_.stops,radial:_.radial}),V=M[v].call(this,V),V!=null&&(b[v]=V)}N=_.alpha}x&&y&&(S=1)}if(this._type=y||"rgb",!b){this._components=b=[];for(var M=t[this._type],v=0,A=M.length;v<A;v++){var V=M[v].call(this,I&&I[v]);V!=null&&(b[v]=V)}}return this._components=b,this._properties=e[this._type],this._alpha=N,x&&(this.__read=S),this},set:"#initialize",_serialize:function(f,_){var m=this.getComponents();return c.serialize(/^(gray|rgb)$/.test(this._type)?m:[this._type].concat(m),f,!0,_)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(f){var _;return this._type===f?this._components.slice():(_=d[this._type+"-"+f])?_.apply(this,this._components):d["rgb-"+f].apply(this,d[this._type+"-rgb"].apply(this,this._components))},convert:function(f){return new ct(f,this._convert(f),this._alpha)},getType:function(){return this._type},setType:function(f){this._components=this._convert(f),this._properties=e[f],this._type=f},getComponents:function(){var f=this._components.slice();return this._alpha!=null&&f.push(this._alpha),f},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(f){this._alpha=f==null?null:Math.min(Math.max(f,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(f){var _=c.isPlainValue(f,!0)?ct.read(arguments):f;return _===this||_&&this._class===_._class&&this._type===_._type&&this.getAlpha()===_.getAlpha()&&c.equals(this._components,_._components)||!1},toString:function(){for(var f=this._properties,_=[],m=this._type==="gradient",x=Z.instance,S=0,y=f.length;S<y;S++){var b=this._components[S];b!=null&&_.push(f[S]+": "+(m?b:x.number(b)))}return this._alpha!=null&&_.push("alpha: "+x.number(this._alpha)),"{ "+_.join(", ")+" }"},toCSS:function(f){var _=this._convert("rgb"),m=f||this._alpha==null?1:this._alpha;function x(S){return Math.round((S<0?0:S>1?1:S)*255)}return _=[x(_[0]),x(_[1]),x(_[2])],m<1&&_.push(m<0?0:m),f?"#"+((1<<24)+(_[0]<<16)+(_[1]<<8)+_[2]).toString(16).slice(1):(_.length==4?"rgba(":"rgb(")+_.join(",")+")"},toCanvasStyle:function(f,_){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var m=this._components,x=m[0],S=x._stops,y=m[1],b=m[2],N=m[3],I=_&&_.inverted(),E;if(I&&(y=I._transformPoint(y),b=I._transformPoint(b),N&&(N=I._transformPoint(N))),x._radial){var w=b.getDistance(y);if(N){var k=N.subtract(y);k.getLength()>w&&(N=y.add(k.normalize(w-.1)))}var v=N||y;E=f.createRadialGradient(v.x,v.y,0,y.x,y.y,w)}else E=f.createLinearGradient(y.x,y.y,b.x,b.y);for(var A=0,L=S.length;A<L;A++){var z=S[A],M=z._offset;E.addColorStop(M??A/(L-1),z._color.toCanvasStyle())}return this._canvasStyle=E},transform:function(f){if(this._type==="gradient"){for(var _=this._components,m=1,x=_.length;m<x;m++){var S=_[m];f._transformPoint(S,S,!0)}this._changed()}},statics:{_types:e,random:function(){var f=Math.random;return new ct(f(),f(),f())},_setOwner:function(f,_,m){return f&&(f._owner&&_&&f._owner!==_&&(f=f.clone()),!f._owner^!_&&(f._owner=_||null,f._setter=m||null)),f}}})},new function(){var e={add:function(t,n){return t+n},subtract:function(t,n){return t-n},multiply:function(t,n){return t*n},divide:function(t,n){return t/n}};return c.each(e,function(t,n){this[n]=function(r){r=ct.read(arguments);for(var s=this._type,u=this._components,d=r._convert(s),f=0,_=u.length;f<_;f++)d[f]=t(u[f],d[f]);return new ct(s,d,this._alpha!=null?t(this._alpha,r.getAlpha()):null)}},{})}),Gt=c.extend({_class:"Gradient",initialize:function(t,n){this._id=oe.get(),t&&c.isPlainObject(t)&&(this.set(t),t=n=null),this._stops==null&&this.setStops(t||["white","black"]),this._radial==null&&this.setRadial(typeof n=="string"&&n==="radial"||n||!1)},_serialize:function(e,t){return t.add(this,function(){return c.serialize([this._stops,this._radial],e,!0,t)})},_changed:function(){for(var e=0,t=this._owners&&this._owners.length;e<t;e++)this._owners[e]._changed()},_addOwner:function(e){this._owners||(this._owners=[]),this._owners.push(e)},_removeOwner:function(e){var t=this._owners?this._owners.indexOf(e):-1;t!=-1&&(this._owners.splice(t,1),this._owners.length||(this._owners=h))},clone:function(){for(var e=[],t=0,n=this._stops.length;t<n;t++)e[t]=this._stops[t].clone();return new Gt(e,this._radial)},getStops:function(){return this._stops},setStops:function(e){if(e.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var t=this._stops;if(t)for(var n=0,r=t.length;n<r;n++)t[n]._owner=h;t=this._stops=ti.readList(e,0,{clone:!0});for(var n=0,r=t.length;n<r;n++)t[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(e){this._radial=e,this._changed()},equals:function(e){if(e===this)return!0;if(e&&this._class===e._class){var t=this._stops,n=e._stops,r=t.length;if(r===n.length){for(var s=0;s<r;s++)if(!t[s].equals(n[s]))return!1;return!0}}return!1}}),ti=c.extend({_class:"GradientStop",initialize:function(t,n){var r=t,s=n;typeof t=="object"&&n===h&&(Array.isArray(t)&&typeof t[0]!="number"?(r=t[0],s=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(r=t.color,s=t.offset||t.rampPoint||0)),this.setColor(r),this.setOffset(s)},clone:function(){return new ti(this._color.clone(),this._offset)},_serialize:function(e,t){var n=this._color,r=this._offset;return c.serialize(r==null?[n]:[n,r],e,!0,t)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(e){this._offset=e,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){ct._setOwner(this._color,null),this._color=ct._setOwner(ct.read(arguments,0),this,"setColor"),this._changed()},equals:function(e){return e===this||e&&this._class===e._class&&this._color.equals(e._color)&&this._offset==e._offset||!1}}),oi=c.extend(new function(){var e={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new F,selectedColor:null},t=c.set({},e,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=c.set({},t,{fillColor:new ct}),r={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},s={beans:!0},u={_class:"Style",beans:!0,initialize:function(f,_,m){this._values={},this._owner=_,this._project=_&&_._project||m||et.project,this._defaults=!_||_ instanceof xe?t:_ instanceof vt?n:e,f&&this.set(f)}};return c.each(t,function(d,f){var _=/Color$/.test(f),m=f==="shadowOffset",x=c.capitalize(f),S=r[f],y="set"+x,b="get"+x;u[y]=function(N){var I=this._owner,E=I&&I._children,w=E&&E.length>0&&!(I instanceof at);if(w)for(var k=0,v=E.length;k<v;k++)E[k]._style[y](N);if((f==="selectedColor"||!w)&&f in this._defaults){var A=this._values[f];A!==N&&(_&&(A&&(ct._setOwner(A,null),A._canvasStyle=null),N&&N.constructor===ct&&(N=ct._setOwner(N,I,w&&y))),this._values[f]=N,I&&I._changed(S||129))}},u[b]=function(N){var I=this._owner,E=I&&I._children,w=E&&E.length>0&&!(I instanceof at),k;if(w&&!N)for(var v=0,A=E.length;v<A;v++){var L=E[v]._style[b]();if(!v)k=L;else if(!c.equals(k,L))return h}else if(f in this._defaults){var k=this._values[f];if(k===h)k=this._defaults[f],k&&k.clone&&(k=k.clone());else{var z=_?ct:m?F:null;z&&!(k&&k.constructor===z)&&(this._values[f]=k=z.read([k],0,{readNull:!0,clone:!0}))}}return k&&_&&(k=ct._setOwner(k,I,w&&y)),k},s[b]=function(N){return this._style[b](N)},s[y]=function(N){this._style[y](N)}}),c.each({Font:"FontFamily",WindingRule:"FillRule"},function(d,f){var _="get"+f,m="set"+f;u[_]=s[_]="#get"+d,u[m]=s[m]="#set"+d}),T.inject(s),u},{set:function(e){var t=e instanceof oi,n=t?e._values:e;if(n){for(var r in n)if(r in this._defaults){var s=n[r];this[r]=s&&t&&s.clone?s.clone():s}}},equals:function(e){function t(n,r,s){var u=n._values,d=r._values,f=r._defaults;for(var _ in u){var m=u[_],x=d[_];if(!(s&&_ in d)&&!c.equals(m,x===h?f[_]:x))return!1}return!0}return e===this||e&&this._class===e._class&&t(this,e)&&t(e,this,!0)||!1},_dispose:function(){var e;e=this.getFillColor(),e&&(e._canvasStyle=null),e=this.getStrokeColor(),e&&(e._canvasStyle=null),e=this.getShadowColor(),e&&(e._canvasStyle=null)},hasFill:function(){var e=this.getFillColor();return!!e&&e.alpha>0},hasStroke:function(){var e=this.getStrokeColor();return!!e&&e.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var e=this.getShadowColor();return!!e&&e.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var e=this.getFontSize();return this.getFontWeight()+" "+e+(/[a-z]/i.test(e+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function e(){var t=e.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),t??n*1.2}}),ot=new function(){function e(t,n,r,s){for(var u=["","webkit","moz","Moz","ms","o"],d=n[0].toUpperCase()+n.substring(1),f=0;f<6;f++){var _=u[f],m=_?_+d:n;if(m in t){if(r)t[m]=s;else return t[m];break}}}return{getStyles:function(t){var n=t&&t.nodeType!==9?t.ownerDocument:t,r=n&&n.defaultView;return r&&r.getComputedStyle(t,"")},getBounds:function(t,n){var r=t.ownerDocument,s=r.body,u=r.documentElement,d;try{d=t.getBoundingClientRect()}catch{d={left:0,top:0,width:0,height:0}}var f=d.left-(u.clientLeft||s.clientLeft||0),_=d.top-(u.clientTop||s.clientTop||0);if(!n){var m=r.defaultView;f+=m.pageXOffset||u.scrollLeft||s.scrollLeft,_+=m.pageYOffset||u.scrollTop||s.scrollTop}return new ee(f,_,d.width,d.height)},getViewportBounds:function(t){var n=t.ownerDocument,r=n.defaultView,s=n.documentElement;return new ee(0,0,r.innerWidth||s.clientWidth,r.innerHeight||s.clientHeight)},getOffset:function(t,n){return ot.getBounds(t,n).getPoint()},getSize:function(t){return ot.getBounds(t,!0).getSize()},isInvisible:function(t){return ot.getSize(t).equals(new te(0,0))},isInView:function(t){return!ot.isInvisible(t)&&ot.getViewportBounds(t).intersects(ot.getBounds(t,!0))},isInserted:function(t){return g.body.contains(t)},getPrefixed:function(t,n){return t&&e(t,n)},setPrefixed:function(t,n,r){if(typeof n=="object")for(var s in n)e(t,s,!0,n[s]);else e(t,n,!0,r)}}},dt={add:function(e,t){if(e)for(var n in t)for(var r=t[n],s=n.split(/[\s,]+/g),u=0,d=s.length;u<d;u++){var f=s[u],_=e===g&&(f==="touchstart"||f==="touchmove")?{passive:!1}:!1;e.addEventListener(f,r,_)}},remove:function(e,t){if(e)for(var n in t)for(var r=t[n],s=n.split(/[\s,]+/g),u=0,d=s.length;u<d;u++)e.removeEventListener(s[u],r,!1)},getPoint:function(e){var t=e.targetTouches?e.targetTouches.length?e.targetTouches[0]:e.changedTouches[0]:e;return new F(t.pageX||t.clientX+g.documentElement.scrollLeft,t.pageY||t.clientY+g.documentElement.scrollTop)},getTarget:function(e){return e.target||e.srcElement},getRelatedTarget:function(e){return e.relatedTarget||e.toElement},getOffset:function(e,t){return dt.getPoint(e).subtract(ot.getOffset(t||dt.getTarget(e)))}};dt.requestAnimationFrame=new function(){var e=ot.getPrefixed(p,"requestAnimationFrame"),t=!1,n=[],r;function s(){var u=n;n=[];for(var d=0,f=u.length;d<f;d++)u[d]();t=e&&n.length,t&&e(s)}return function(u){n.push(u),e?t||(e(s),t=!0):r||(r=setInterval(s,1e3/60))}};var pt=c.extend(P,{_class:"View",initialize:function e(t,n){function r(S){return n[S]||parseInt(n.getAttribute(S),10)}function s(){var S=ot.getSize(n);return S.isNaN()||S.isZero()?new te(r("width"),r("height")):S}var u;if(p&&n){this._id=n.getAttribute("id"),this._id==null&&n.setAttribute("id",this._id="paper-view-"+e._id++),dt.add(n,this._viewEvents);var d="none";if(ot.setPrefixed(n.style,{userDrag:d,userSelect:d,touchCallout:d,contentZooming:d,tapHighlightColor:"rgba(0,0,0,0)"}),O.hasAttribute(n,"resize")){var f=this;dt.add(p,this._windowEvents={resize:function(){f.setViewSize(s())}})}if(u=s(),O.hasAttribute(n,"stats")&&typeof Stats<"u"){this._stats=new Stats;var _=this._stats.domElement,m=_.style,x=ot.getOffset(n);m.position="absolute",m.left=x.x+"px",m.top=x.y+"px",g.body.appendChild(_)}}else u=new te(n),n=null;this._project=t,this._scope=t._scope,this._element=n,this._pixelRatio||(this._pixelRatio=p&&p.devicePixelRatio||1),this._setElementSize(u.width,u.height),this._viewSize=u,e._views.push(this),e._viewsById[this._id]=this,(this._matrix=new le)._owner=this,e._focused||(e._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!et.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;pt._focused===this&&(pt._focused=null),pt._views.splice(pt._views.indexOf(this),1),delete pt._viewsById[this._id];var e=this._project;return e._view===this&&(e._view=null),dt.remove(this._element,this._viewEvents),dt.remove(p,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:c.each(T._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(e){this[e]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(e){this._autoUpdate=e,e&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var e=this;dt.requestAnimationFrame(function(){if(e._requested=!1,e._animate){e.requestUpdate();var t=e._element;(!ot.getPrefixed(g,"hidden")||O.getAttribute(t,"keepalive")==="true")&&ot.isInView(t)&&e._handleFrame()}e._autoUpdate&&e.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){et=this._scope;var e=Date.now()/1e3,t=this._last?e-this._last:0;this._last=e,this.emit("frame",new c({delta:t,time:this._time+=t,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(e,t){var n=this._frameItems;t?(n[e._id]={item:e,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete n[e._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(e){for(var t in this._frameItems){var n=this._frameItems[t];n.item.emit("frame",new c(e,{time:n.time+=e.delta,count:n.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=h},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var e=this._viewSize;return new ie(e.width,e.height,this,"setViewSize")},setViewSize:function(){var e=te.read(arguments),t=e.subtract(this._viewSize);t.isZero()||(this._setElementSize(e.width,e.height),this._viewSize.set(e),this._changed(),this.emit("resize",{size:e,delta:t}),this._autoUpdate&&this.update())},_setElementSize:function(e,t){var n=this._element;n&&(n.width!==e&&(n.width=e),n.height!==t&&(n.height=t))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new ee(new F,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return ot.isInView(this._element)},isInserted:function(){return ot.isInserted(this._element)},getPixelSize:function(e){var t=this._element,n;if(t){var r=t.parentNode,s=g.createElement("div");s.style.fontSize=e,r.appendChild(s),n=parseFloat(ot.getStyles(s).fontSize),r.removeChild(s)}else n=parseFloat(n);return n},getTextWidth:function(e,t){return 0}},c.each(["rotate","scale","shear","skew"],function(e){var t=e==="rotate";this[e]=function(){var n=arguments,r=(t?c:F).read(n),s=F.read(n,0,{readNull:!0});return this.transform(new le()[e](r,s||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var e=new le;return this.transform(e.translate.apply(e,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var e=F.read(arguments);this.translate(this.getCenter().subtract(e))},getZoom:function(){var e=this._decompose().scaling;return(e.x+e.y)/2},setZoom:function(e){this.transform(new le().scale(e/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(e){var t=this.getRotation();t!=null&&e!=null&&this.rotate(e-t)},getScaling:function(){var e=this._decompose().scaling;return new be(e.x,e.y,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=F.read(arguments,0,{clone:!0,readNull:!0});e&&t&&this.scale(t.x/e.x,t.y/e.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},transform:function(e){this._matrix.append(e)},scrollBy:function(){this.translate(F.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(F.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(F.read(arguments))},getEventPoint:function(e){return this.viewToProject(dt.getOffset(e,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(e,t){g&&typeof t=="string"&&(t=g.getElementById(t));var n=p?Ki:pt;return new n(e,t)}}},new function(){if(!p)return;var e,t,n=!1,r=!1;function s(H){var G=dt.getTarget(H);return G.getAttribute&&pt._viewsById[G.getAttribute("id")]}function u(){var H=pt._focused;if(!H||!H.isVisible()){for(var G=0,Q=pt._views.length;G<Q;G++)if((H=pt._views[G]).isVisible()){pt._focused=t=H;break}}}function d(H,G,Q){H._handleMouseEvent("mousemove",G,Q)}var f=p.navigator,_,m,x;f.pointerEnabled||f.msPointerEnabled?(_="pointerdown MSPointerDown",m="pointermove MSPointerMove",x="pointerup pointercancel MSPointerUp MSPointerCancel"):(_="touchstart",m="touchmove",x="touchend touchcancel","ontouchstart"in p&&f.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(_+=" mousedown",m+=" mousemove",x+=" mouseup"));var S={},y={mouseout:function(H){var G=pt._focused,Q=dt.getRelatedTarget(H);if(G&&(!Q||Q.nodeName==="HTML")){var J=dt.getOffset(H,G._element),$=J.x,se=Math.abs,_e=se($),ye=1<<25,Ce=_e-ye;J.x=se(Ce)<_e?Ce*($<0?-1:1):$,d(G,H,G.viewToProject(J))}},scroll:u};S[_]=function(H){var G=pt._focused=s(H);n||(n=!0,G._handleMouseEvent("mousedown",H))},y[m]=function(H){var G=pt._focused;if(!r){var Q=s(H);Q?G!==Q&&(G&&d(G,H),e||(e=G),G=pt._focused=t=Q):t&&t===G&&(e&&!e.isInserted()&&(e=null),G=pt._focused=e,e=null,u())}G&&d(G,H)},y[_]=function(){r=!0},y[x]=function(H){var G=pt._focused;G&&n&&G._handleMouseEvent("mouseup",H),r=n=!1},dt.add(g,y),dt.add(p,{load:u});var b=!1,N=!1,I={doubleclick:"click",mousedrag:"mousemove"},E=!1,w,k,v,A,L,z,M,V;function q(H,G,Q,J,$,se,_e){var ye=!1,Ce;function Ee(he,de){if(he.responds(de)){if(Ce||(Ce=new Nn(de,J,$,G||he,se?$.subtract(se):null)),he.emit(de,Ce)&&(b=!0,Ce.prevented&&(N=!0),Ce.stopped))return ye=!0}else{var ke=I[de];if(ke)return Ee(he,ke)}}for(;H&&H!==_e&&!Ee(H,Q);)H=H._parent;return ye}function j(H,G,Q,J,$,se){return H._project.removeOn(Q),N=b=!1,L&&q(L,null,Q,J,$,se)||G&&G!==L&&!G.isDescendant(L)&&q(G,null,Q==="mousedrag"?"mousemove":Q,J,$,se,L)||q(H,L||G||H,Q,J,$,se)}var X={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:S,_handleMouseEvent:function(H,G,Q){var J=this._itemEvents,$=J.native[H],se=H==="mousemove",_e=this._scope.tool,ye=this;function Ce(He){return J.virtual[He]||ye.responds(He)||_e&&_e.responds(He)}se&&n&&Ce("mousedrag")&&(H="mousedrag"),Q||(Q=this.getEventPoint(G));var Ee=this.getBounds().contains(Q),he=$&&Ee&&ye._project.hitTest(Q,{tolerance:0,fill:!0,stroke:!0}),de=he&&he.item||null,ke=!1,Te={};if(Te[H.substr(5)]=!0,$&&de!==A&&(A&&q(A,null,"mouseleave",G,Q),de&&q(de,null,"mouseenter",G,Q),A=de),E^Ee&&(q(this,null,Ee?"mouseenter":"mouseleave",G,Q),ke=!0),(Ee||Te.drag)&&!Q.equals(k)&&(j(this,de,se?H:"mousemove",G,Q,k),ke=!0),E=Ee,Te.down&&Ee||Te.up&&w){if(j(this,de,H,G,Q,w),Te.down){if(V=de===z&&Date.now()-M<300,v=z=de,!N&&de){for(var Ne=de;Ne&&!Ne.responds("mousedrag");)Ne=Ne._parent;Ne&&(L=de)}w=Q}else Te.up&&(!N&&de===v&&(M=Date.now(),j(this,de,V?"doubleclick":"click",G,Q,w),V=!1),v=L=null);E=!1,ke=!0}k=Q,ke&&_e&&(b=_e._handleMouseEvent(H,G,Q,Te)||b),G.cancelable!==!1&&(b&&!Te.move||Te.down&&Ce("mouseup"))&&G.preventDefault()},_handleKeyEvent:function(H,G,Q,J){var $=this._scope,se=$.tool,_e;function ye(Ce){Ce.responds(H)&&(et=$,Ce.emit(H,_e=_e||new Qi(H,G,Q,J)))}this.isVisible()&&(ye(this),se&&se.responds(H)&&ye(se))},_countItemEvent:function(H,G){var Q=this._itemEvents,J=Q.native,$=Q.virtual;for(var se in X)J[se]=(J[se]||0)+(X[se][H]||0)*G;$[H]=($[H]||0)+G},statics:{updateFocus:u,_resetState:function(){n=r=b=E=!1,e=t=w=k=v=A=L=z=M=V=null}}}}),Ki=pt.extend({_class:"CanvasView",initialize:function(t,n){if(!(n instanceof p.HTMLCanvasElement)){var r=te.read(arguments,1);if(r.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+c.slice(arguments,1));n=St.getCanvas(r)}var s=this._context=n.getContext("2d");if(s.save(),this._pixelRatio=1,!/^off|false$/.test(O.getAttribute(n,"hidpi"))){var u=p.devicePixelRatio||1,d=ot.getPrefixed(s,"backingStorePixelRatio")||1;this._pixelRatio=u/d}pt.call(this,t,n),this._needsUpdate=!0},remove:function e(){return this._context.restore(),e.base.call(this)},_setElementSize:function e(t,n){var r=this._pixelRatio;if(e.base.call(this,t*r,n*r),r!==1){var s=this._element,u=this._context;if(!O.hasAttribute(s,"resize")){var d=s.style;d.width=t+"px",d.height=n+"px"}u.restore(),u.save(),u.scale(r,r)}},getContext:function(){return this._context},getPixelSize:function e(t){var n=et.agent,r;if(n&&n.firefox)r=e.base.call(this,t);else{var s=this._context,u=s.font;s.font=t+" serif",r=parseFloat(s.font),s.font=u}return r},getTextWidth:function(e,t){var n=this._context,r=n.font,s=0;n.font=e;for(var u=0,d=t.length;u<d;u++)s=Math.max(s,n.measureText(t[u]).width);return n.font=r,s},update:function(){if(!this._needsUpdate)return!1;var e=this._project,t=this._context,n=this._viewSize;return t.clearRect(0,0,n.width+1,n.height+1),e&&e.draw(t,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),wi=c.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return Pi.modifiers}}),Qi=wi.extend({_class:"KeyEvent",initialize:function(t,n,r,s){this.type=t,this.event=n,this.key=r,this.character=s},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Pi=new function(){var e={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},t={tab:"	",space:" ",enter:"\r"},n={},r={},s,u,d=new c({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var m=et&&et.agent;return m&&m.mac?this.meta:this.control}}});function f(m){var x=m.key||m.keyIdentifier;return x=/^U\+/.test(x)?String.fromCharCode(parseInt(x.substr(2),16)):/^Arrow[A-Z]/.test(x)?x.substr(5):x==="Unidentified"||x===h?String.fromCharCode(m.keyCode):x,e[x]||(x.length>1?c.hyphenate(x):x.toLowerCase())}function _(m,x,S,y){var b=pt._focused,N;if(n[x]=m,m?r[x]=S:delete r[x],x.length>1&&(N=c.camelize(x))in d){d[N]=m;var I=et&&et.agent;if(N==="meta"&&I&&I.mac)if(m)s={};else{for(var E in s)E in r&&_(!1,E,s[E],y);s=null}}else m&&s&&(s[x]=S);b&&b._handleKeyEvent(m?"keydown":"keyup",y,x,S)}return dt.add(g,{keydown:function(m){var x=f(m),S=et&&et.agent;x.length>1||S&&S.chrome&&(m.altKey||S.mac&&m.metaKey||!S.mac&&m.ctrlKey)?_(!0,x,t[x]||(x.length>1?"":x),m):u=x},keypress:function(m){if(u){var x=f(m),S=m.charCode,y=S>=32?String.fromCharCode(S):x.length>1?"":x;x!==u&&(x=y.toLowerCase()),_(!0,x,y,m),u=null}},keyup:function(m){var x=f(m);x in r&&_(!1,x,r[x],m)}}),dt.add(p,{blur:function(m){for(var x in r)_(!1,x,r[x],m)}}),{modifiers:d,isDown:function(m){return!!n[m]}}},Nn=wi.extend({_class:"MouseEvent",initialize:function(t,n,r,s,u){this.type=t,this.event=n,this.point=r,this.target=s,this.delta=u},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Ri=wi.extend({_class:"ToolEvent",_item:null,initialize:function(t,n,r){this.tool=t,this.type=n,this.event=r},_choosePoint:function(e,t){return e||(t?t.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(e){this._point=e},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(e){this._lastPoint=e},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(e){this._downPoint=e},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(e){this._middlePoint=e},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(e){this._delta=e},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(e){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=e},getItem:function(){if(!this._item){var e=this.tool._scope.project.hitTest(this.getPoint());if(e){for(var t=e.item,n=t._parent;/^(Group|CompoundPath)$/.test(n._class);)t=n,n=n._parent;this._item=t}}return this._item},setItem:function(e){this._item=e},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),pn=B.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){B.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(e){this._minDistance=e,e!=null&&this._maxDistance!=null&&e>this._maxDistance&&(this._maxDistance=e)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(e){this._maxDistance=e,this._minDistance!=null&&e!=null&&e<this._minDistance&&(this._minDistance=e)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(e){this._minDistance=this._maxDistance=e},_handleMouseEvent:function(e,t,n,r){et=this._scope,r.drag&&!this.responds(e)&&(e="mousemove");var s=r.move||r.drag,u=this.responds(e),d=this.minDistance,f=this.maxDistance,_=!1,m=this;function x(y,b){var N=n,I=s?m._point:m._downPoint||N;if(s){if(m._moveCount>=0&&N.equals(I))return!1;if(I&&(y!=null||b!=null)){var E=N.subtract(I),w=E.getLength();if(w<(y||0))return!1;b&&(N=I.add(E.normalize(Math.min(w,b))))}m._moveCount++}return m._point=N,m._lastPoint=I||N,r.down&&(m._moveCount=-1,m._downPoint=N,m._downCount++),!0}function S(){u&&(_=m.emit(e,new Ri(m,e,t))||_)}if(r.down)x(),S();else if(r.up)x(null,f),S();else if(u)for(;x(d,f);)S();return _}}),gn=c.extend(P,{_class:"Tween",statics:{easings:new c({linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:-1+2*(2-e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}})},initialize:function e(t,n,r,s,u,d){this.object=t;var f=typeof u,_=f==="function";this.type=_?f:f==="string"?u:"linear",this.easing=_?u:e.easings[this.type],this.duration=s,this.running=!1,this._then=null,this._startTime=null;var m=n||r;this._keys=m?Object.keys(m):[],this._parsedKeys=this._parseKeys(this._keys),this._from=m&&this._getState(n),this._to=m&&this._getState(r),d!==!1&&this.start()},then:function(e){return this._then=e,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(e){if(this.running){e>=1&&(e=1,this.running=!1);for(var t=this.easing(e),n=this._keys,r=function(x){return typeof x=="function"?x(t,e):x},s=0,u=n&&n.length;s<u;s++){var d=n[s],f=r(this._from[d]),_=r(this._to[d]),m=f&&_&&f.__add&&_.__add?_.__subtract(f).__multiply(t).__add(f):(_-f)*t+f;this._setProperty(this._parsedKeys[d],m)}this.responds("update")&&this.emit("update",new c({progress:e,factor:t})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(e){var t=this._startTime,n=t?(e-t)/this.duration:0;t||(this._startTime=e),this.update(n)},_getState:function(e){for(var t=this._keys,n={},r=0,s=t.length;r<s;r++){var u=t[r],d=this._parsedKeys[u],f=this._getProperty(d),_;if(e){var m=this._resolveValue(f,e[u]);this._setProperty(d,m),_=this._getProperty(d),_=_&&_.clone?_.clone():_,this._setProperty(d,f)}else _=f&&f.clone?f.clone():f;n[u]=_}return n},_resolveValue:function(e,t){if(t){if(Array.isArray(t)&&t.length===2){var n=t[0];return n&&n.match&&n.match(/^[+\-\*\/]=/)?this._calculate(e,n[0],t[1]):t}else if(typeof t=="string"){var r=t.match(/^[+\-*/]=(.*)/);if(r){var s=JSON.parse(r[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(e,t[0],s)}}}return t},_calculate:function(e,t,n){return et.PaperScript.calculateBinary(e,t,n)},_parseKeys:function(e){for(var t={},n=0,r=e.length;n<r;n++){var s=e[n],u=s.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");t[s]=u.split("/")}return t},_getProperty:function(e,t){for(var n=this.object,r=0,s=e.length-(t||0);r<s&&n;r++)n=n[e[r]];return n},_setProperty:function(e,t){var n=this._getProperty(e,1);n&&(n[e[e.length-1]]=t)}}),zi={request:function(e){var t=new a.XMLHttpRequest;return t.open((e.method||"get").toUpperCase(),e.url,c.pick(e.async,!0)),e.mimeType&&t.overrideMimeType(e.mimeType),t.onload=function(){var n=t.status;n===0||n===200?e.onLoad&&e.onLoad.call(t,t.responseText):t.onerror()},t.onerror=function(){var n=t.status,r='Could not load "'+e.url+'" (Status: '+n+")";if(e.onError)e.onError(r,n);else throw new Error(r)},t.send(null)}},St=c.exports.CanvasProvider={canvases:[],getCanvas:function(e,t,n){if(!p)return null;var r,s=!0;typeof e=="object"&&(t=e.height,e=e.width),this.canvases.length?r=this.canvases.pop():(r=g.createElement("canvas"),s=!1);var u=r.getContext("2d",n||{});if(!u)throw new Error("Canvas "+r+" is unable to provide a 2D context.");return r.width===e&&r.height===t?s&&u.clearRect(0,0,e+1,t+1):(r.width=e,r.height=t),u.save(),r},getContext:function(e,t,n){var r=this.getCanvas(e,t,n);return r?r.getContext("2d",n||{}):null},release:function(e){var t=e&&e.canvas?e.canvas:e;t&&t.getContext&&(t.getContext("2d").restore(),this.canvases.push(t))}},ri=new function(){var e=Math.min,t=Math.max,n=Math.abs,r,s,u,d,f,_,m,x,S,y,b;function N(L,z,M){return .2989*L+.587*z+.114*M}function I(L,z,M,j){var q=j-N(L,z,M);S=L+q,y=z+q,b=M+q;var j=N(S,y,b),X=e(S,y,b),H=t(S,y,b);if(X<0){var G=j-X;S=j+(S-j)*j/G,y=j+(y-j)*j/G,b=j+(b-j)*j/G}if(H>255){var Q=255-j,J=H-j;S=j+(S-j)*Q/J,y=j+(y-j)*Q/J,b=j+(b-j)*Q/J}}function E(L,z,M){return t(L,z,M)-e(L,z,M)}function w(L,z,M,V){var q=[L,z,M],j=t(L,z,M),X=e(L,z,M),H;X=X===L?0:X===z?1:2,j=j===L?0:j===z?1:2,H=e(X,j)===0?t(X,j)===1?2:1:0,q[j]>q[X]?(q[H]=(q[H]-q[X])*V/(q[j]-q[X]),q[j]=V):q[H]=q[j]=0,q[X]=0,S=q[0],y=q[1],b=q[2]}var k={multiply:function(){S=f*r/255,y=_*s/255,b=m*u/255},screen:function(){S=f+r-f*r/255,y=_+s-_*s/255,b=m+u-m*u/255},overlay:function(){S=f<128?2*f*r/255:255-2*(255-f)*(255-r)/255,y=_<128?2*_*s/255:255-2*(255-_)*(255-s)/255,b=m<128?2*m*u/255:255-2*(255-m)*(255-u)/255},"soft-light":function(){var L=r*f/255;S=L+f*(255-(255-f)*(255-r)/255-L)/255,L=s*_/255,y=L+_*(255-(255-_)*(255-s)/255-L)/255,L=u*m/255,b=L+m*(255-(255-m)*(255-u)/255-L)/255},"hard-light":function(){S=r<128?2*r*f/255:255-2*(255-r)*(255-f)/255,y=s<128?2*s*_/255:255-2*(255-s)*(255-_)/255,b=u<128?2*u*m/255:255-2*(255-u)*(255-m)/255},"color-dodge":function(){S=f===0?0:r===255?255:e(255,255*f/(255-r)),y=_===0?0:s===255?255:e(255,255*_/(255-s)),b=m===0?0:u===255?255:e(255,255*m/(255-u))},"color-burn":function(){S=f===255?255:r===0?0:t(0,255-(255-f)*255/r),y=_===255?255:s===0?0:t(0,255-(255-_)*255/s),b=m===255?255:u===0?0:t(0,255-(255-m)*255/u)},darken:function(){S=f<r?f:r,y=_<s?_:s,b=m<u?m:u},lighten:function(){S=f>r?f:r,y=_>s?_:s,b=m>u?m:u},difference:function(){S=f-r,S<0&&(S=-S),y=_-s,y<0&&(y=-y),b=m-u,b<0&&(b=-b)},exclusion:function(){S=f+r*(255-f-f)/255,y=_+s*(255-_-_)/255,b=m+u*(255-m-m)/255},hue:function(){w(r,s,u,E(f,_,m)),I(S,y,b,N(f,_,m))},saturation:function(){w(f,_,m,E(r,s,u)),I(S,y,b,N(f,_,m))},luminosity:function(){I(f,_,m,N(r,s,u))},color:function(){I(r,s,u,N(f,_,m))},add:function(){S=e(f+r,255),y=e(_+s,255),b=e(m+u,255)},subtract:function(){S=t(f-r,0),y=t(_-s,0),b=t(m-u,0)},average:function(){S=(f+r)/2,y=(_+s)/2,b=(m+u)/2},negation:function(){S=255-n(255-r-f),y=255-n(255-s-_),b=255-n(255-u-m)}},v=this.nativeModes=c.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(L){this[L]=!0},{}),A=St.getContext(1,1,{willReadFrequently:!0});A&&(c.each(k,function(L,z){var M=z==="darken",V=!1;A.save();try{A.fillStyle=M?"#300":"#a00",A.fillRect(0,0,1,1),A.globalCompositeOperation=z,A.globalCompositeOperation===z&&(A.fillStyle=M?"#a00":"#300",A.fillRect(0,0,1,1),V=A.getImageData(0,0,1,1).data[0]!==M?170:51)}catch{}A.restore(),v[z]=V}),St.release(A)),this.process=function(L,z,M,V,q){var j=z.canvas,X=L==="normal";if(X||v[L])M.save(),M.setTransform(1,0,0,1,0,0),M.globalAlpha=V,X||(M.globalCompositeOperation=L),M.drawImage(j,q.x,q.y),M.restore();else{var H=k[L];if(!H)return;for(var G=M.getImageData(q.x,q.y,j.width,j.height),Q=G.data,J=z.getImageData(0,0,j.width,j.height).data,$=0,se=Q.length;$<se;$+=4){r=J[$],f=Q[$],s=J[$+1],_=Q[$+1],u=J[$+2],m=Q[$+2],d=J[$+3],x=Q[$+3],H();var _e=d*V/255,ye=1-_e;Q[$]=_e*S+ye*f,Q[$+1]=_e*y+ye*_,Q[$+2]=_e*b+ye*m,Q[$+3]=d*V+ye*x}M.putImageData(G,q.x,q.y)}}},bt=new function(){var e="http://www.w3.org/2000/svg",t="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",r={href:n,xlink:t,xmlns:t+"/","xmlns:xlink":t+"/"};function s(f,_,m){return d(g.createElementNS(e,f),_,m)}function u(f,_){var m=r[_],x=m?f.getAttributeNS(m,_):f.getAttribute(_);return x==="null"?null:x}function d(f,_,m){for(var x in _){var S=_[x],y=r[x];typeof S=="number"&&m&&(S=m.number(S)),y?f.setAttributeNS(y,x,S):f.setAttribute(x,S)}return f}return{svg:e,xmlns:t,xlink:n,create:s,get:u,set:d}},_n=c.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(e,t){return!t&&(e instanceof Bt||e instanceof qe||e instanceof vt)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(e,t){var n=c.capitalize(t),r=e[2];this[t]={type:e[1],property:t,attribute:e[0],toSVG:r,fromSVG:r&&c.each(r,function(s,u){this[s]=u},{}),exportFilter:e[3],get:"get"+n,set:"set"+n}},{});new function(){var e;function t(k,v,A){var L=new c,z=k.getTranslation();if(v){var M;k.isInvertible()?(k=k._shiftless(),M=k._inverseTransform(z),z=null):M=new F,L[A?"cx":"x"]=M.x,L[A?"cy":"y"]=M.y}if(!k.isIdentity()){var V=k.decompose();if(V){var q=[],j=V.rotation,X=V.scaling,H=V.skewing;z&&!z.isZero()&&q.push("translate("+e.point(z)+")"),j&&q.push("rotate("+e.number(j)+")"),(!K.isZero(X.x-1)||!K.isZero(X.y-1))&&q.push("scale("+e.point(X)+")"),H.x&&q.push("skewX("+e.number(H.x)+")"),H.y&&q.push("skewY("+e.number(H.y)+")"),L.transform=q.join(" ")}else L.transform="matrix("+k.getValues().join(",")+")"}return L}function n(k,v){for(var A=t(k._matrix),L=k._children,z=bt.create("g",A,e),M=0,V=L.length;M<V;M++){var q=L[M],j=E(q,v);if(j)if(q.isClipMask()){var X=bt.create("clipPath");X.appendChild(j),N(q,X,"clip"),bt.set(z,{"clip-path":"url(#"+X.id+")"})}else z.appendChild(j)}return z}function r(k,v){var A=t(k._matrix,!0),L=k.getSize(),z=k.getImage();return A.x-=L.width/2,A.y-=L.height/2,A.width=L.width,A.height=L.height,A.href=v.embedImages==!1&&z&&z.src||k.toDataURL(),bt.create("image",A,e)}function s(k,v){var A=v.matchShapes;if(A){var L=k.toShape(!1);if(L)return u(L)}var z=k._segments,M=z.length,V,q=t(k._matrix);if(A&&M>=2&&!k.hasHandles())if(M>2){V=k._closed?"polygon":"polyline";for(var j=[],X=0;X<M;X++)j.push(e.point(z[X]._point));q.points=j.join(" ")}else{V="line";var H=z[0]._point,G=z[1]._point;q.set({x1:H.x,y1:H.y,x2:G.x,y2:G.y})}else V="path",q.d=k.getPathData(null,v.precision);return bt.create(V,q,e)}function u(k){var v=k._type,A=k._radius,L=t(k._matrix,!0,v!=="rectangle");if(v==="rectangle"){v="rect";var z=k._size,M=z.width,V=z.height;L.x-=M/2,L.y-=V/2,L.width=M,L.height=V,A.isZero()&&(A=null)}return A&&(v==="circle"?L.r=A:(L.rx=A.width,L.ry=A.height)),bt.create(v,L,e)}function d(k,v){var A=t(k._matrix),L=k.getPathData(null,v.precision);return L&&(A.d=L),bt.create("path",A,e)}function f(k,v){var A=t(k._matrix,!0),L=k._definition,z=b(L,"symbol"),M=L._item,V=M.getStrokeBounds();return z||(z=bt.create("symbol",{viewBox:e.rectangle(V)}),z.appendChild(E(M,v)),N(L,z,"symbol")),A.href="#"+z.id,A.x+=V.x,A.y+=V.y,A.width=V.width,A.height=V.height,A.overflow="visible",bt.create("use",A,e)}function _(k){var v=b(k,"color");if(!v){var A=k.getGradient(),L=A._radial,z=k.getOrigin(),M=k.getDestination(),V;if(L){V={cx:z.x,cy:z.y,r:z.getDistance(M)};var q=k.getHighlight();q&&(V.fx=q.x,V.fy=q.y)}else V={x1:z.x,y1:z.y,x2:M.x,y2:M.y};V.gradientUnits="userSpaceOnUse",v=bt.create((L?"radial":"linear")+"Gradient",V,e);for(var j=A._stops,X=0,H=j.length;X<H;X++){var G=j[X],Q=G._color,J=Q.getAlpha(),$=G._offset;V={offset:$??X/(H-1)},Q&&(V["stop-color"]=Q.toCSS(!0)),J<1&&(V["stop-opacity"]=J),v.appendChild(bt.create("stop",V,e))}N(k,v,"color")}return"url(#"+v.id+")"}function m(k){var v=bt.create("text",t(k._matrix,!0),e);return v.textContent=k._content,v}var x={Group:n,Layer:n,Raster:r,Path:s,Shape:u,CompoundPath:d,SymbolItem:f,PointText:m};function S(k,v,A){var L={},z=!A&&k.getParent(),M=[];return k._name!=null&&(L.id=k._name),c.each(_n,function(V){var q=V.get,j=V.type,X=k[q]();if(V.exportFilter?V.exportFilter(k,X):!z||!c.equals(z[q](),X)){if(j==="color"&&X!=null){var H=X.getAlpha();H<1&&(L[V.attribute+"-opacity"]=H)}j==="style"?M.push(V.attribute+": "+X):L[V.attribute]=X==null?"none":j==="color"?X.gradient?_(X):X.toCSS(!0):j==="array"?X.join(","):j==="lookup"?V.toSVG[X]:X}}),M.length&&(L.style=M.join(";")),L.opacity===1&&delete L.opacity,k._visible||(L.visibility="hidden"),bt.set(v,L,e)}var y;function b(k,v){return y||(y={ids:{},svgs:{}}),k&&y.svgs[v+"-"+(k._id||k.__id||(k.__id=oe.get("svg")))]}function N(k,v,A){y||b();var L=y.ids[A]=(y.ids[A]||0)+1;v.id=A+"-"+L,y.svgs[A+"-"+(k._id||k.__id)]=v}function I(k,v){var A=k,L=null;if(y){A=k.nodeName.toLowerCase()==="svg"&&k;for(var z in y.svgs)L||(A||(A=bt.create("svg"),A.appendChild(k)),L=A.insertBefore(bt.create("defs"),A.firstChild)),L.appendChild(y.svgs[z]);y=null}return v.asString?new a.XMLSerializer().serializeToString(A):A}function E(k,v,A){var L=x[k._class],z=L&&L(k,v);if(z){var M=v.onExport;M&&(z=M(k,z,v)||z);var V=JSON.stringify(k._data);V&&V!=="{}"&&V!=="null"&&z.setAttribute("data-paper-data",V)}return z&&S(k,z,A)}function w(k){return k||(k={}),e=new Z(k.precision),k}T.inject({exportSVG:function(k){return k=w(k),I(E(this,k,!0),k)}}),ce.inject({exportSVG:function(k){k=w(k);var v=this._children,A=this.getView(),L=c.pick(k.bounds,"view"),z=k.matrix||L==="view"&&A._matrix,M=z&&le.read([z]),V=L==="view"?new ee([0,0],A.getViewSize()):L==="content"?T._getBounds(v,M,{stroke:!0}).rect:ee.read([L],0,{readNull:!0}),q={version:"1.1",xmlns:bt.svg,"xmlns:xlink":bt.xlink};V&&(q.width=V.width,q.height=V.height,(V.x||V.x===0||V.y||V.y===0)&&(q.viewBox=e.rectangle(V)));var j=bt.create("svg",q,e),X=j;M&&!M.isIdentity()&&(X=j.appendChild(bt.create("g",t(M),e)));for(var H=0,G=v.length;H<G;H++)X.appendChild(E(v[H],k,!0));return I(j,k)}})},new function(){var e={},t;function n(v,A,L,z,M,V){var q=bt.get(v,A)||V,j=q==null?z?null:L?"":0:L?q:parseFloat(q);return/%\s*$/.test(q)?j/100*(M?1:t[/x|^width/.test(A)?"width":"height"]):j}function r(v,A,L,z,M,V,q){return A=n(v,A||"x",!1,z,M,V),L=n(v,L||"y",!1,z,M,q),z&&(A==null||L==null)?null:new F(A,L)}function s(v,A,L,z,M){return A=n(v,A||"width",!1,z,M),L=n(v,L||"height",!1,z,M),z&&(A==null||L==null)?null:new te(A,L)}function u(v,A,L){return v==="none"?null:A==="number"?parseFloat(v):A==="array"?v?v.split(/[\s,]+/g).map(parseFloat):[]:A==="color"?E(v)||v:A==="lookup"?L[v]:v}function d(v,A,L,z){var M=v.childNodes,V=A==="clippath",q=A==="defs",j=new xe,X=j._project,H=X._currentStyle,G=[];if(!V&&!q&&(j=I(j,v,z),X._currentStyle=j._style.clone()),z)for(var Q=v.querySelectorAll("defs"),J=0,$=Q.length;J<$;J++)w(Q[J],L,!1);for(var J=0,$=M.length;J<$;J++){var se=M[J],_e;se.nodeType===1&&!/^defs$/i.test(se.nodeName)&&(_e=w(se,L,!1))&&!(_e instanceof ze)&&G.push(_e)}return j.addChildren(G),V&&(j=I(j.reduce(),v,z)),X._currentStyle=H,(V||q)&&(j.remove(),j=null),j}function f(v,A){for(var L=v.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),z=[],M=0,V=L.length;M<V;M+=2)z.push(new F(parseFloat(L[M]),parseFloat(L[M+1])));var q=new Ve(z);return A==="polygon"&&q.closePath(),q}function _(v){return Bt.create(v.getAttribute("d"))}function m(v,A){var L=(n(v,"href",!0)||"").substring(1),z=A==="radialgradient",M;if(L)M=e[L].getGradient(),M._radial^z&&(M=M.clone(),M._radial=z);else{for(var V=v.childNodes,q=[],j=0,X=V.length;j<X;j++){var H=V[j];H.nodeType===1&&q.push(I(new ti,H))}M=new Gt(q,z)}var G,Q,J,$=n(v,"gradientUnits",!0)!=="userSpaceOnUse";z?(G=r(v,"cx","cy",!1,$,"50%","50%"),Q=G.add(n(v,"r",!1,!1,$,"50%"),0),J=r(v,"fx","fy",!0,$)):(G=r(v,"x1","y1",!1,$,"0%","0%"),Q=r(v,"x2","y2",!1,$,"100%","0%"));var se=I(new ct(M,G,Q,J),v);return se._scaleToBounds=$,null}var x={"#document":function(v,A,L,z){for(var M=v.childNodes,V=0,q=M.length;V<q;V++){var j=M[V];if(j.nodeType===1)return w(j,L,z)}},g:d,svg:d,clippath:d,polygon:f,polyline:f,path:_,lineargradient:m,radialgradient:m,image:function(v){var A=new nt(n(v,"href",!0));return A.on("load",function(){var L=s(v);this.setSize(L);var z=r(v).add(L.divide(2));this._matrix.append(new le().translate(z))}),A},symbol:function(v,A,L,z){return new ze(d(v,A,L,z),!0)},defs:d,use:function(v){var A=(n(v,"href",!0)||"").substring(1),L=e[A],z=r(v);return L?L instanceof ze?L.place(z):L.clone().translate(z):null},circle:function(v){return new qe.Circle(r(v,"cx","cy"),n(v,"r"))},ellipse:function(v){return new qe.Ellipse({center:r(v,"cx","cy"),radius:s(v,"rx","ry")})},rect:function(v){return new qe.Rectangle(new ee(r(v),s(v)),s(v,"rx","ry"))},line:function(v){return new Ve.Line(r(v,"x1","y1"),r(v,"x2","y2"))},text:function(v){var A=new Oe(r(v).add(r(v,"dx","dy")));return A.setContent(v.textContent.trim()||""),A},switch:d};function S(v,A,L,z){if(v.transform){for(var M=(z.getAttribute(L)||"").split(/\)\s*/g),V=new le,q=0,j=M.length;q<j;q++){var X=M[q];if(!X)break;for(var H=X.split(/\(\s*/),G=H[0],Q=H[1].split(/[\s,]+/g),J=0,$=Q.length;J<$;J++)Q[J]=parseFloat(Q[J]);switch(G){case"matrix":V.append(new le(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5]));break;case"rotate":V.rotate(Q[0],Q[1]||0,Q[2]||0);break;case"translate":V.translate(Q[0],Q[1]||0);break;case"scale":V.scale(Q);break;case"skewX":V.skew(Q[0],0);break;case"skewY":V.skew(0,Q[0]);break}}v.transform(V)}}function y(v,A,L){var z=L==="fill-opacity"?"getFillColor":"getStrokeColor",M=v[z]&&v[z]();M&&M.setAlpha(parseFloat(A))}var b=c.set(c.each(_n,function(v){this[v.attribute]=function(A,L){if(A[v.set]&&(A[v.set](u(L,v.type,v.fromSVG)),v.type==="color")){var z=A[v.get]();if(z&&z._scaleToBounds){var M=A.getBounds();z.transform(new le().translate(M.getPoint()).scale(M.getSize()))}}}},{}),{id:function(v,A){e[A]=v,v.setName&&v.setName(A)},"clip-path":function(v,A){var L=E(A);if(L)if(L=L.clone(),L.setClipMask(!0),v instanceof xe)v.insertChild(0,L);else return new xe(L,v)},gradientTransform:S,transform:S,"fill-opacity":y,"stroke-opacity":y,visibility:function(v,A){v.setVisible&&v.setVisible(A==="visible")},display:function(v,A){v.setVisible&&v.setVisible(A!==null)},"stop-color":function(v,A){v.setColor&&v.setColor(A)},"stop-opacity":function(v,A){v._color&&v._color.setAlpha(parseFloat(A))},offset:function(v,A){if(v.setOffset){var L=A.match(/(.*)%$/);v.setOffset(L?L[1]/100:parseFloat(A))}},viewBox:function(v,A,L,z,M){var V=new ee(u(A,"array")),q=s(z,null,null,!0),j,X;if(v instanceof xe){var H=q?q.divide(V.getSize()):1,X=new le().scale(H).translate(V.getPoint().negate());j=v}else v instanceof ze&&(q&&V.setSize(q),j=v._item);if(j){if(N(z,"overflow",M)!=="visible"){var G=new qe.Rectangle(V);G.setClipMask(!0),j.addChild(G)}X&&j.transform(X)}}});function N(v,A,L){var z=v.attributes[A],M=z&&z.value;if(!M&&v.style){var V=c.camelize(A);M=v.style[V],!M&&L.node[V]!==L.parent[V]&&(M=L.node[V])}return M?M==="none"?null:M:h}function I(v,A,L){var z=A.parentNode,M={node:ot.getStyles(A)||{},parent:!L&&!/^defs$/i.test(z.tagName)&&ot.getStyles(z)||{}};return c.each(b,function(V,q){var j=N(A,q,M);v=j!==h&&V(v,j,q,A,M)||v}),v}function E(v){var A=v&&v.match(/\((?:["'#]*)([^"')]+)/),L=A&&A[1],z=L&&e[p?L.replace(p.location.href.split("#")[0]+"#",""):L];return z&&z._scaleToBounds&&(z=z.clone(),z._scaleToBounds=!0),z}function w(v,A,L){var z=v.nodeName.toLowerCase(),M=z!=="#document",V=g.body,q,j,X;L&&M&&(t=et.getView().getSize(),t=s(v,null,null,!0)||t,q=bt.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),j=v.parentNode,X=v.nextSibling,q.appendChild(v),V.appendChild(q));var H=et.settings,G=H.applyMatrix,Q=H.insertItems;H.applyMatrix=!1,H.insertItems=!1;var J=x[z],$=J&&J(v,z,A,L)||null;if(H.insertItems=Q,H.applyMatrix=G,$){M&&!($ instanceof xe)&&($=I($,v,L));var se=A.onImport,_e=M&&v.getAttribute("data-paper-data");se&&($=se(v,$,A)||$),A.expandShapes&&$ instanceof qe&&($.remove(),$=$.toPath()),_e&&($._data=JSON.parse(_e))}return q&&(V.removeChild(q),j&&(X?j.insertBefore(v,X):j.appendChild(v))),L&&(e={},$&&c.pick(A.applyMatrix,G)&&$.matrix.apply(!0,!0)),$}function k(v,A,L){if(!v)return null;A=typeof A=="function"?{onLoad:A}:A||{};var z=et,M=null;function V(H){try{var G=typeof H=="object"?H:new a.DOMParser().parseFromString(H.trim(),"image/svg+xml");if(!G.nodeName)throw G=null,new Error("Unsupported SVG source: "+v);et=z,M=w(G,A,!0),(!A||A.insert!==!1)&&L._insertItem(h,M);var Q=A.onLoad;Q&&Q(M,H)}catch(J){q(J)}}function q(H,G){var Q=A.onError;if(Q)Q(H,G);else throw new Error(H)}if(typeof v=="string"&&!/^[\s\S]*</.test(v)){var j=g.getElementById(v);j?V(j):zi.request({url:v,async:!0,onLoad:V,onError:q})}else if(typeof File<"u"&&v instanceof File){var X=new FileReader;return X.onload=function(){V(X.result)},X.onerror=function(){q(X.error)},X.readAsText(v)}else V(v);return M}T.inject({importSVG:function(v,A){return k(v,A,this)}}),ce.inject({importSVG:function(v,A){return this.activate(),k(v,A,this)}})},c.exports.PaperScript=(function(){var e=this,t=e.acorn;if(!t&&typeof io<"u")try{t=so()}catch{}if(!t){var n,r;t=n=r={},function(I,E){if(typeof n=="object"&&typeof r=="object")return E(n);if(typeof h=="function"&&h.amd)return h(["exports"],E);E(I.acorn||(I.acorn={}))}(this,function(I){I.version="0.5.0";var E,w,k,v;I.parse=function(W,Y){return w=String(W),k=w.length,L(Y),Mr(),xa(E.program)};var A=I.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function L(W){E=W||{};for(var Y in A)Object.prototype.hasOwnProperty.call(E,Y)||(E[Y]=A[Y]);v=E.sourceFile||null}var z=I.getLineInfo=function(W,Y){for(var ue=1,ge=0;;){$i.lastIndex=ge;var Ge=$i.exec(W);if(Ge&&Ge.index<Y)++ue,ge=Ge.index+Ge[0].length;else break}return{line:ue,column:Y-ge}};I.tokenize=function(W,Y){w=String(W),k=w.length,L(Y),Mr();var ue={};function ge(Ge){return _e=q,Ui(Ge),ue.start=V,ue.end=q,ue.startLoc=j,ue.endLoc=X,ue.type=H,ue.value=G,ue}return ge.jumpTo=function(Ge,Xe){if(M=Ge,E.locations){J=1,$=$i.lastIndex=0;for(var Qe;(Qe=$i.exec(w))&&Qe.index<Ge;)++J,$=Qe.index+Qe[0].length}Q=Xe,en()},ge};var M,V,q,j,X,H,G,Q,J,$,se,_e,ye,Ce,Ee,he;function de(W,Y){var ue=z(w,W);Y+=" ("+ue.line+":"+ue.column+")";var ge=new SyntaxError(Y);throw ge.pos=W,ge.loc=ue,ge.raisedAt=M,ge}var ke=[],Te={type:"num"},Ne={type:"regexp"},He={type:"string"},De={type:"name"},Ze={type:"eof"},Ke={keyword:"break"},We={keyword:"case",beforeExpr:!0},Nt={keyword:"catch"},Ie={keyword:"continue"},gt={keyword:"debugger"},yt={keyword:"default"},lt={keyword:"do",isLoop:!0},Ct={keyword:"else",beforeExpr:!0},Ht={keyword:"finally"},Mt={keyword:"for",isLoop:!0},Yt={keyword:"function"},Ft={keyword:"if"},xt={keyword:"return",beforeExpr:!0},si={keyword:"switch"},Ut={keyword:"throw",beforeExpr:!0},Jt={keyword:"try"},yi={keyword:"var"},ai={keyword:"while",isLoop:!0},Yi={keyword:"with"},Vi={keyword:"new",beforeExpr:!0},mn={keyword:"this"},vn={keyword:"null",atomValue:null},bn={keyword:"true",atomValue:!0},Bi={keyword:"false",atomValue:!1},it={keyword:"in",binop:7,beforeExpr:!0},yn={break:Ke,case:We,catch:Nt,continue:Ie,debugger:gt,default:yt,do:lt,else:Ct,finally:Ht,for:Mt,function:Yt,if:Ft,return:xt,switch:si,throw:Ut,try:Jt,var:yi,while:ai,with:Yi,null:vn,true:bn,false:Bi,new:Vi,in:it,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:mn,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},Fi={type:"[",beforeExpr:!0},Di={type:"]"},Si={type:"{",beforeExpr:!0},Ci={type:"}"},li={type:"(",beforeExpr:!0},ui={type:")"},i={type:",",beforeExpr:!0},l={type:";",beforeExpr:!0},C={type:":",beforeExpr:!0},R={type:"."},U={type:"?",beforeExpr:!0},ne={binop:10,beforeExpr:!0},ae={isAssign:!0,beforeExpr:!0},we={isAssign:!0,beforeExpr:!0},Pe={postfix:!0,prefix:!0,isUpdate:!0},Je={prefix:!0,beforeExpr:!0},rt={binop:1,beforeExpr:!0},It={binop:2,beforeExpr:!0},ki={binop:3,beforeExpr:!0},qi={binop:4,beforeExpr:!0},Ai={binop:5,beforeExpr:!0},Ji={binop:6,beforeExpr:!0},Ei={binop:7,beforeExpr:!0},Ti={binop:8,beforeExpr:!0},ta={binop:9,prefix:!0,beforeExpr:!0},ia={binop:10,beforeExpr:!0};I.tokTypes={bracketL:Fi,bracketR:Di,braceL:Si,braceR:Ci,parenL:li,parenR:ui,comma:i,semi:l,colon:C,dot:R,question:U,slash:ne,eq:ae,name:De,eof:Ze,num:Te,regexp:Ne,string:He};for(var Pr in yn)I.tokTypes["_"+Pr]=yn[Pr];function xn(W){W=W.split(" ");var Y="",ue=[];e:for(var ge=0;ge<W.length;++ge){for(var Ge=0;Ge<ue.length;++Ge)if(ue[Ge][0].length==W[ge].length){ue[Ge].push(W[ge]);continue e}ue.push([W[ge]])}function Xe(ht){if(ht.length==1)return Y+="return str === "+JSON.stringify(ht[0])+";";Y+="switch(str){";for(var ci=0;ci<ht.length;++ci)Y+="case "+JSON.stringify(ht[ci])+":";Y+="return true}return false;"}if(ue.length>3){ue.sort(function(ht,ci){return ci.length-ht.length}),Y+="switch(str.length){";for(var ge=0;ge<ue.length;++ge){var Qe=ue[ge];Y+="case "+Qe[0].length+":",Xe(Qe)}Y+="}"}else Xe(W);return new Function("str",Y)}var na=xn("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),ra=xn("class enum extends super const export import"),Ar=xn("implements interface let package private protected public static yield"),Mn=xn("eval arguments"),sa=xn("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),aa=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Er="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",ua="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",Tr=new RegExp("["+Er+"]"),oa=new RegExp("["+Er+ua+"]"),Ln=/[\n\r\u2028\u2029]/,$i=/\r\n|[\n\r\u2028\u2029]/g,On=I.isIdentifierStart=function(W){return W<65?W===36:W<91?!0:W<97?W===95:W<123?!0:W>=170&&Tr.test(String.fromCharCode(W))},Nr=I.isIdentifierChar=function(W){return W<48?W===36:W<58?!0:W<65?!1:W<91?!0:W<97?W===95:W<123?!0:W>=170&&oa.test(String.fromCharCode(W))};function Hi(){this.line=J,this.column=M-$}function Mr(){J=1,M=$=0,Q=!0,en()}function Dt(W,Y){q=M,E.locations&&(X=new Hi),H=W,en(),G=Y,Q=W.beforeExpr}function la(){var W=E.onComment&&E.locations&&new Hi,Y=M,ue=w.indexOf("*/",M+=2);if(ue===-1&&de(M-2,"Unterminated comment"),M=ue+2,E.locations){$i.lastIndex=Y;for(var ge;(ge=$i.exec(w))&&ge.index<M;)++J,$=ge.index+ge[0].length}E.onComment&&E.onComment(!0,w.slice(Y+2,ue),Y,M,W,E.locations&&new Hi)}function ir(){for(var W=M,Y=E.onComment&&E.locations&&new Hi,ue=w.charCodeAt(M+=2);M<k&&ue!==10&&ue!==13&&ue!==8232&&ue!==8233;)++M,ue=w.charCodeAt(M);E.onComment&&E.onComment(!1,w.slice(W+2,M),W,M,Y,E.locations&&new Hi)}function en(){for(;M<k;){var W=w.charCodeAt(M);if(W===32)++M;else if(W===13){++M;var Y=w.charCodeAt(M);Y===10&&++M,E.locations&&(++J,$=M)}else if(W===10||W===8232||W===8233)++M,E.locations&&(++J,$=M);else if(W>8&&W<14)++M;else if(W===47){var Y=w.charCodeAt(M+1);if(Y===42)la();else if(Y===47)ir();else break}else if(W===160)++M;else if(W>=5760&&aa.test(String.fromCharCode(W)))++M;else break}}function ha(){var W=w.charCodeAt(M+1);return W>=48&&W<=57?Or(!0):(++M,Dt(R))}function fa(){var W=w.charCodeAt(M+1);return Q?(++M,Lr()):W===61?qt(we,2):qt(ne,1)}function ca(){var W=w.charCodeAt(M+1);return W===61?qt(we,2):qt(ia,1)}function da(W){var Y=w.charCodeAt(M+1);return Y===W?qt(W===124?rt:It,2):Y===61?qt(we,2):qt(W===124?ki:Ai,1)}function pa(){var W=w.charCodeAt(M+1);return W===61?qt(we,2):qt(qi,1)}function ga(W){var Y=w.charCodeAt(M+1);return Y===W?Y==45&&w.charCodeAt(M+2)==62&&Ln.test(w.slice(_e,M))?(M+=3,ir(),en(),Ui()):qt(Pe,2):Y===61?qt(we,2):qt(ta,1)}function _a(W){var Y=w.charCodeAt(M+1),ue=1;return Y===W?(ue=W===62&&w.charCodeAt(M+2)===62?3:2,w.charCodeAt(M+ue)===61?qt(we,ue+1):qt(Ti,ue)):Y==33&&W==60&&w.charCodeAt(M+2)==45&&w.charCodeAt(M+3)==45?(M+=4,ir(),en(),Ui()):(Y===61&&(ue=w.charCodeAt(M+2)===61?3:2),qt(Ei,ue))}function ma(W){var Y=w.charCodeAt(M+1);return Y===61?qt(Ji,w.charCodeAt(M+2)===61?3:2):qt(W===61?ae:Je,1)}function va(W){switch(W){case 46:return ha();case 40:return++M,Dt(li);case 41:return++M,Dt(ui);case 59:return++M,Dt(l);case 44:return++M,Dt(i);case 91:return++M,Dt(Fi);case 93:return++M,Dt(Di);case 123:return++M,Dt(Si);case 125:return++M,Dt(Ci);case 58:return++M,Dt(C);case 63:return++M,Dt(U);case 48:var Y=w.charCodeAt(M+1);if(Y===120||Y===88)return ba();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Or(!1);case 34:case 39:return ya(W);case 47:return fa();case 37:case 42:return ca();case 124:case 38:return da(W);case 94:return pa();case 43:case 45:return ga(W);case 60:case 62:return _a(W);case 61:case 33:return ma(W);case 126:return qt(Je,1)}return!1}function Ui(W){if(W?M=V+1:V=M,E.locations&&(j=new Hi),W)return Lr();if(M>=k)return Dt(Ze);var Y=w.charCodeAt(M);if(On(Y)||Y===92)return zr();var ue=va(Y);if(ue===!1){var ge=String.fromCharCode(Y);if(ge==="\\"||Tr.test(ge))return zr();de(M,"Unexpected character '"+ge+"'")}return ue}function qt(W,Y){var ue=w.slice(M,M+Y);M+=Y,Dt(W,ue)}function Lr(){for(var Ge="",W,Y,ue=M;;){M>=k&&de(ue,"Unterminated regular expression");var ge=w.charAt(M);if(Ln.test(ge)&&de(ue,"Unterminated regular expression"),W)W=!1;else{if(ge==="[")Y=!0;else if(ge==="]"&&Y)Y=!1;else if(ge==="/"&&!Y)break;W=ge==="\\"}++M}var Ge=w.slice(ue,M);++M;var Xe=Rr();Xe&&!/^[gmsiy]*$/.test(Xe)&&de(ue,"Invalid regexp flag");try{var Qe=new RegExp(Ge,Xe)}catch(ht){ht instanceof SyntaxError&&de(ue,ht.message),de(ht)}return Dt(Ne,Qe)}function wn(W,Y){for(var ue=M,ge=0,Ge=0,Xe=Y??1/0;Ge<Xe;++Ge){var Qe=w.charCodeAt(M),ht;if(Qe>=97?ht=Qe-97+10:Qe>=65?ht=Qe-65+10:Qe>=48&&Qe<=57?ht=Qe-48:ht=1/0,ht>=W)break;++M,ge=ge*W+ht}return M===ue||Y!=null&&M-ue!==Y?null:ge}function ba(){M+=2;var W=wn(16);return W==null&&de(V+2,"Expected hexadecimal number"),On(w.charCodeAt(M))&&de(M,"Identifier directly after number"),Dt(Te,W)}function Or(W){var Y=M,ue=!1,ge=w.charCodeAt(M)===48;!W&&wn(10)===null&&de(Y,"Invalid number"),w.charCodeAt(M)===46&&(++M,wn(10),ue=!0);var Ge=w.charCodeAt(M);(Ge===69||Ge===101)&&(Ge=w.charCodeAt(++M),(Ge===43||Ge===45)&&++M,wn(10)===null&&de(Y,"Invalid number"),ue=!0),On(w.charCodeAt(M))&&de(M,"Identifier directly after number");var Xe=w.slice(Y,M),Qe;return ue?Qe=parseFloat(Xe):!ge||Xe.length===1?Qe=parseInt(Xe,10):/[89]/.test(Xe)||he?de(Y,"Invalid number"):Qe=parseInt(Xe,8),Dt(Te,Qe)}function ya(W){M++;for(var Y="";;){M>=k&&de(V,"Unterminated string constant");var ue=w.charCodeAt(M);if(ue===W)return++M,Dt(He,Y);if(ue===92){ue=w.charCodeAt(++M);var ge=/^[0-7]+/.exec(w.slice(M,M+3));for(ge&&(ge=ge[0]);ge&&parseInt(ge,8)>255;)ge=ge.slice(0,-1);if(ge==="0"&&(ge=null),++M,ge)he&&de(M-2,"Octal literal in strict mode"),Y+=String.fromCharCode(parseInt(ge,8)),M+=ge.length-1;else switch(ue){case 110:Y+=`
`;break;case 114:Y+="\r";break;case 120:Y+=String.fromCharCode(Rn(2));break;case 117:Y+=String.fromCharCode(Rn(4));break;case 85:Y+=String.fromCharCode(Rn(8));break;case 116:Y+="	";break;case 98:Y+="\b";break;case 118:Y+="\v";break;case 102:Y+="\f";break;case 48:Y+="\0";break;case 13:w.charCodeAt(M)===10&&++M;case 10:E.locations&&($=M,++J);break;default:Y+=String.fromCharCode(ue);break}}else(ue===13||ue===10||ue===8232||ue===8233)&&de(V,"Unterminated string constant"),Y+=String.fromCharCode(ue),++M}}function Rn(W){var Y=wn(16,W);return Y===null&&de(V,"Bad character escape sequence"),Y}var tn;function Rr(){tn=!1;for(var W,Y=!0,ue=M;;){var ge=w.charCodeAt(M);if(Nr(ge))tn&&(W+=w.charAt(M)),++M;else if(ge===92){tn||(W=w.slice(ue,M)),tn=!0,w.charCodeAt(++M)!=117&&de(M,"Expecting Unicode escape sequence \\uXXXX"),++M;var Ge=Rn(4),Xe=String.fromCharCode(Ge);Xe||de(M-1,"Invalid Unicode escape"),(Y?On(Ge):Nr(Ge))||de(M-4,"Invalid Unicode escape"),W+=Xe}else break;Y=!1}return tn?W:w.slice(ue,M)}function zr(){var W=Rr(),Y=De;return!tn&&sa(W)&&(Y=yn[W]),Dt(Y,W)}function ut(){se=V,_e=q,ye=X,Ui()}function nr(W){if(he=W,M=V,E.locations)for(;M<$;)$=w.lastIndexOf(`
`,$-2)+1,--J;en(),Ui()}function Vr(){this.type=null,this.start=V,this.end=null}function Br(){this.start=j,this.end=null,v!==null&&(this.source=v)}function jt(){var W=new Vr;return E.locations&&(W.loc=new Br),E.directSourceFile&&(W.sourceFile=E.directSourceFile),E.ranges&&(W.range=[V,0]),W}function Ni(W){var Y=new Vr;return Y.start=W.start,E.locations&&(Y.loc=new Br,Y.loc.start=W.loc.start),E.ranges&&(Y.range=[W.range[0],0]),Y}function st(W,Y){return W.type=Y,W.end=_e,E.locations&&(W.loc.end=ye),E.ranges&&(W.range[1]=_e),W}function rr(W){return E.ecmaVersion>=5&&W.type==="ExpressionStatement"&&W.expression.type==="Literal"&&W.expression.value==="use strict"}function kt(W){if(H===W)return ut(),!0}function zn(){return!E.strictSemicolons&&(H===Ze||H===Ci||Ln.test(w.slice(_e,V)))}function ji(){!kt(l)&&!zn()&&Ii()}function Lt(W){H===W?ut():Ii()}function Ii(){de(V,"Unexpected token")}function Vn(W){W.type!=="Identifier"&&W.type!=="MemberExpression"&&de(W.start,"Assigning to rvalue"),he&&W.type==="Identifier"&&Mn(W.name)&&de(W.start,"Assigning to "+W.name+" in strict mode")}function xa(W){se=_e=M,E.locations&&(ye=new Hi),Ce=he=null,Ee=[],Ui();var Y=W||jt(),ue=!0;for(W||(Y.body=[]);H!==Ze;){var ge=fi();Y.body.push(ge),ue&&rr(ge)&&nr(!0),ue=!1}return st(Y,"Program")}var sr={kind:"loop"},wa={kind:"switch"};function fi(){(H===ne||H===we&&G=="/=")&&Ui(!0);var W=H,Y=jt();switch(W){case Ke:case Ie:ut();var ue=W===Ke;kt(l)||zn()?Y.label=null:H!==De?Ii():(Y.label=Mi(),ji());for(var ge=0;ge<Ee.length;++ge){var Ge=Ee[ge];if((Y.label==null||Ge.name===Y.label.name)&&(Ge.kind!=null&&(ue||Ge.kind==="loop")||Y.label&&ue))break}return ge===Ee.length&&de(Y.start,"Unsyntactic "+W.keyword),st(Y,ue?"BreakStatement":"ContinueStatement");case gt:return ut(),ji(),st(Y,"DebuggerStatement");case lt:return ut(),Ee.push(sr),Y.body=fi(),Ee.pop(),Lt(ai),Y.test=Sn(),ji(),st(Y,"DoWhileStatement");case Mt:if(ut(),Ee.push(sr),Lt(li),H===l)return ar(Y,null);if(H===yi){var Xe=jt();return ut(),Dr(Xe,!0),st(Xe,"VariableDeclaration"),Xe.declarations.length===1&&kt(it)?Fr(Y,Xe):ar(Y,Xe)}var Xe=Zt(!1,!0);return kt(it)?(Vn(Xe),Fr(Y,Xe)):ar(Y,Xe);case Yt:return ut(),fr(Y,!0);case Ft:return ut(),Y.test=Sn(),Y.consequent=fi(),Y.alternate=kt(Ct)?fi():null,st(Y,"IfStatement");case xt:return!Ce&&!E.allowReturnOutsideFunction&&de(V,"'return' outside of function"),ut(),kt(l)||zn()?Y.argument=null:(Y.argument=Zt(),ji()),st(Y,"ReturnStatement");case si:ut(),Y.discriminant=Sn(),Y.cases=[],Lt(Si),Ee.push(wa);for(var Qe,ht;H!=Ci;)if(H===We||H===yt){var ci=H===We;Qe&&st(Qe,"SwitchCase"),Y.cases.push(Qe=jt()),Qe.consequent=[],ut(),ci?Qe.test=Zt():(ht&&de(se,"Multiple default clauses"),ht=!0,Qe.test=null),Lt(C)}else Qe||Ii(),Qe.consequent.push(fi());return Qe&&st(Qe,"SwitchCase"),ut(),Ee.pop(),st(Y,"SwitchStatement");case Ut:return ut(),Ln.test(w.slice(_e,V))&&de(_e,"Illegal newline after throw"),Y.argument=Zt(),ji(),st(Y,"ThrowStatement");case Jt:if(ut(),Y.block=Cn(),Y.handler=null,H===Nt){var Wi=jt();ut(),Lt(li),Wi.param=Mi(),he&&Mn(Wi.param.name)&&de(Wi.param.start,"Binding "+Wi.param.name+" in strict mode"),Lt(ui),Wi.guard=null,Wi.body=Cn(),Y.handler=st(Wi,"CatchClause")}return Y.guardedHandlers=ke,Y.finalizer=kt(Ht)?Cn():null,!Y.handler&&!Y.finalizer&&de(Y.start,"Missing catch or finally clause"),st(Y,"TryStatement");case yi:return ut(),Dr(Y),ji(),st(Y,"VariableDeclaration");case ai:return ut(),Y.test=Sn(),Ee.push(sr),Y.body=fi(),Ee.pop(),st(Y,"WhileStatement");case Yi:return he&&de(V,"'with' in strict mode"),ut(),Y.object=Sn(),Y.body=fi(),st(Y,"WithStatement");case Si:return Cn();case l:return ut(),st(Y,"EmptyStatement");default:var dr=G,Bn=Zt();if(W===De&&Bn.type==="Identifier"&&kt(C)){for(var ge=0;ge<Ee.length;++ge)Ee[ge].name===dr&&de(Bn.start,"Label '"+dr+"' is already declared");var Aa=H.isLoop?"loop":H===si?"switch":null;return Ee.push({name:dr,kind:Aa}),Y.body=fi(),Ee.pop(),Y.label=Bn,st(Y,"LabeledStatement")}else return Y.expression=Bn,ji(),st(Y,"ExpressionStatement")}}function Sn(){Lt(li);var W=Zt();return Lt(ui),W}function Cn(W){var Y=jt(),ue=!0,ge=!1,Ge;for(Y.body=[],Lt(Si);!kt(Ci);){var Xe=fi();Y.body.push(Xe),ue&&W&&rr(Xe)&&(Ge=ge,nr(ge=!0)),ue=!1}return ge&&!Ge&&nr(!1),st(Y,"BlockStatement")}function ar(W,Y){return W.init=Y,Lt(l),W.test=H===l?null:Zt(),Lt(l),W.update=H===ui?null:Zt(),Lt(ui),W.body=fi(),Ee.pop(),st(W,"ForStatement")}function Fr(W,Y){return W.left=Y,W.right=Zt(),Lt(ui),W.body=fi(),Ee.pop(),st(W,"ForInStatement")}function Dr(W,Y){for(W.declarations=[],W.kind="var";;){var ue=jt();if(ue.id=Mi(),he&&Mn(ue.id.name)&&de(ue.id.start,"Binding "+ue.id.name+" in strict mode"),ue.init=kt(ae)?Zt(!0,Y):null,W.declarations.push(st(ue,"VariableDeclarator")),!kt(i))break}return W}function Zt(W,Y){var ue=ur(Y);if(!W&&H===i){var ge=Ni(ue);for(ge.expressions=[ue];kt(i);)ge.expressions.push(ur(Y));return st(ge,"SequenceExpression")}return ue}function ur(W){var Y=Sa(W);if(H.isAssign){var ue=Ni(Y);return ue.operator=G,ue.left=Y,ut(),ue.right=ur(W),Vn(Y),st(ue,"AssignmentExpression")}return Y}function Sa(W){var Y=Ca(W);if(kt(U)){var ue=Ni(Y);return ue.test=Y,ue.consequent=Zt(!0),Lt(C),ue.alternate=Zt(!0,W),st(ue,"ConditionalExpression")}return Y}function Ca(W){return or(lr(),-1,W)}function or(W,Y,ue){var ge=H.binop;if(ge!=null&&(!ue||H!==it)&&ge>Y){var Ge=Ni(W);Ge.left=W,Ge.operator=G;var Xe=H;ut(),Ge.right=or(lr(),ge,ue);var Qe=st(Ge,Xe===rt||Xe===It?"LogicalExpression":"BinaryExpression");return or(Qe,Y,ue)}return W}function lr(){if(H.prefix){var W=jt(),Y=H.isUpdate;return W.operator=G,W.prefix=!0,Q=!0,ut(),W.argument=lr(),Y?Vn(W.argument):he&&W.operator==="delete"&&W.argument.type==="Identifier"&&de(W.start,"Deleting local variable in strict mode"),st(W,Y?"UpdateExpression":"UnaryExpression")}for(var ue=ka();H.postfix&&!zn();){var W=Ni(ue);W.operator=G,W.prefix=!1,W.argument=ue,Vn(ue),ut(),ue=st(W,"UpdateExpression")}return ue}function ka(){return kn(hr())}function kn(W,Y){if(kt(R)){var ue=Ni(W);return ue.object=W,ue.property=Mi(!0),ue.computed=!1,kn(st(ue,"MemberExpression"),Y)}else if(kt(Fi)){var ue=Ni(W);return ue.object=W,ue.property=Zt(),ue.computed=!0,Lt(Di),kn(st(ue,"MemberExpression"),Y)}else if(!Y&&kt(li)){var ue=Ni(W);return ue.callee=W,ue.arguments=cr(ui,!1),kn(st(ue,"CallExpression"),Y)}else return W}function hr(){switch(H){case mn:var ge=jt();return ut(),st(ge,"ThisExpression");case De:return Mi();case Te:case He:case Ne:var ge=jt();return ge.value=G,ge.raw=w.slice(V,q),ut(),st(ge,"Literal");case vn:case bn:case Bi:var ge=jt();return ge.value=H.atomValue,ge.raw=H.keyword,ut(),st(ge,"Literal");case li:var W=j,Y=V;ut();var ue=Zt();return ue.start=Y,ue.end=q,E.locations&&(ue.loc.start=W,ue.loc.end=X),E.ranges&&(ue.range=[Y,q]),Lt(ui),ue;case Fi:var ge=jt();return ut(),ge.elements=cr(Di,!0,!0),st(ge,"ArrayExpression");case Si:return Pa();case Yt:var ge=jt();return ut(),fr(ge,!1);case Vi:return Ia();default:Ii()}}function Ia(){var W=jt();return ut(),W.callee=kn(hr(),!0),kt(li)?W.arguments=cr(ui,!1):W.arguments=ke,st(W,"NewExpression")}function Pa(){var W=jt(),Y=!0,ue=!1;for(W.properties=[],ut();!kt(Ci);){if(Y)Y=!1;else if(Lt(i),E.allowTrailingCommas&&kt(Ci))break;var ge={key:qr()},Ge=!1,Xe;if(kt(C)?(ge.value=Zt(!0),Xe=ge.kind="init"):E.ecmaVersion>=5&&ge.key.type==="Identifier"&&(ge.key.name==="get"||ge.key.name==="set")?(Ge=ue=!0,Xe=ge.kind=ge.key.name,ge.key=qr(),H!==li&&Ii(),ge.value=fr(jt(),!1)):Ii(),ge.key.type==="Identifier"&&(he||ue))for(var Qe=0;Qe<W.properties.length;++Qe){var ht=W.properties[Qe];if(ht.key.name===ge.key.name){var ci=Xe==ht.kind||Ge&&ht.kind==="init"||Xe==="init"&&(ht.kind==="get"||ht.kind==="set");ci&&!he&&Xe==="init"&&ht.kind==="init"&&(ci=!1),ci&&de(ge.key.start,"Redefinition of property")}}W.properties.push(ge)}return st(W,"ObjectExpression")}function qr(){return H===Te||H===He?hr():Mi(!0)}function fr(W,Y){H===De?W.id=Mi():Y?Ii():W.id=null,W.params=[];var ue=!0;for(Lt(li);!kt(ui);)ue?ue=!1:Lt(i),W.params.push(Mi());var ge=Ce,Ge=Ee;if(Ce=!0,Ee=[],W.body=Cn(!0),Ce=ge,Ee=Ge,he||W.body.body.length&&rr(W.body.body[0]))for(var Xe=W.id?-1:0;Xe<W.params.length;++Xe){var Qe=Xe<0?W.id:W.params[Xe];if((Ar(Qe.name)||Mn(Qe.name))&&de(Qe.start,"Defining '"+Qe.name+"' in strict mode"),Xe>=0)for(var ht=0;ht<Xe;++ht)Qe.name===W.params[ht].name&&de(Qe.start,"Argument name clash in strict mode")}return st(W,Y?"FunctionDeclaration":"FunctionExpression")}function cr(W,Y,ue){for(var ge=[],Ge=!0;!kt(W);){if(Ge)Ge=!1;else if(Lt(i),Y&&E.allowTrailingCommas&&kt(W))break;ue&&H===i?ge.push(null):ge.push(Zt(!0))}return ge}function Mi(W){var Y=jt();return W&&E.forbidReserved=="everywhere"&&(W=!1),H===De?(!W&&(E.forbidReserved&&(E.ecmaVersion===3?na:ra)(G)||he&&Ar(G))&&w.slice(V,q).indexOf("\\")==-1&&de(V,"The keyword '"+G+"' is reserved"),Y.name=G):W&&H.keyword?Y.name=H.keyword:Ii(),Q=!1,ut(),st(Y,"Identifier")}}),t.version||(t=null)}function s(I,E){return(e.acorn||t).parse(I,E)}var u={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},d={"-":"__negate","+":"__self"},f=c.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(I){this["__"+I]="#"+I},{__self:function(){return this}});F.inject(f),te.inject(f),ct.inject(f);function _(I,E,w){var k=u[E];if(I&&I[k]){var v=I[k](w);return E==="!="?!v:v}switch(E){case"+":return I+w;case"-":return I-w;case"*":return I*w;case"/":return I/w;case"%":return I%w;case"==":return I==w;case"!=":return I!=w}}function m(I,E){var w=d[I];if(E&&E[w])return E[w]();switch(I){case"+":return+E;case"-":return-E}}function x(I,E){if(!I)return"";E=E||{};var w=[];function k(he){for(var de=0,ke=w.length;de<ke;de++){var Te=w[de];if(Te[0]>=he)break;he+=Te[1]}return he}function v(he){return I.substring(k(he.range[0]),k(he.range[1]))}function A(he,de){return I.substring(k(he.range[1]),k(de.range[0]))}function L(he,de){for(var ke=k(he.range[0]),Te=k(he.range[1]),Ne=0,He=w.length-1;He>=0;He--)if(ke>w[He][0]){Ne=He+1;break}w.splice(Ne,0,[ke,de.length-Te+ke]),I=I.substring(0,ke)+de+I.substring(Te)}function z(he,de){switch(he.type){case"UnaryExpression":if(he.operator in d&&he.argument.type!=="Literal"){var ke=v(he.argument);L(he,'$__("'+he.operator+'", '+ke+")")}break;case"BinaryExpression":if(he.operator in u&&he.left.type!=="Literal"){var Te=v(he.left),Ne=v(he.right),He=A(he.left,he.right),De=he.operator;L(he,"__$__("+Te+","+He.replace(new RegExp("\\"+De),'"'+De+'"')+", "+Ne+")")}break;case"UpdateExpression":case"AssignmentExpression":var Ze=de&&de.type;if(!(Ze==="ForStatement"||Ze==="BinaryExpression"&&/^[=!<>]/.test(de.operator)||Ze==="MemberExpression"&&de.computed)){if(he.type==="UpdateExpression"){var ke=v(he.argument),Ke="__$__("+ke+', "'+he.operator[0]+'", 1)',We=ke+" = "+Ke;he.prefix?We="("+We+")":(Ze==="AssignmentExpression"||Ze==="VariableDeclarator"||Ze==="BinaryExpression")&&(v(de.left||de.id)===ke&&(We=Ke),We=ke+"; "+We),L(he,We)}else if(/^.=$/.test(he.operator)&&he.left.type!=="Literal"){var Te=v(he.left),Ne=v(he.right),Ke=Te+" = __$__("+Te+', "'+he.operator[0]+'", '+Ne+")";L(he,/^\(.*\)$/.test(v(he))?"("+Ke+")":Ke)}}break}}function M(he){switch(he.type){case"ExportDefaultDeclaration":L({range:[he.start,he.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var de=he.declaration,ke=he.specifiers;if(de){var Te=de.declarations;Te&&(Te.forEach(function(He){L(He,"module.exports."+v(He))}),L({range:[he.start,de.start+de.kind.length]},""))}else if(ke){var Ne=ke.map(function(He){var De=v(He);return"module.exports."+De+" = "+De+"; "}).join("");Ne&&L(he,Ne)}break}}function V(he,de,ke){if(he){for(var Te in he)if(Te!=="range"&&Te!=="loc"){var Ne=he[Te];if(Array.isArray(Ne))for(var He=0,De=Ne.length;He<De;He++)V(Ne[He],he,ke);else Ne&&typeof Ne=="object"&&V(Ne,he,ke)}ke.operatorOverloading!==!1&&z(he,de),ke.moduleExports!==!1&&M(he)}}function q(he){var de="",ke="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(he=(Math.abs(he)<<1)+(he<0?1:0);he||!de;){var Te=he&31;he>>=5,he&&(Te|=32),de+=ke[Te]}return de}var j=E.url||"",X=E.sourceMaps,H=E.paperFeatures||{},G=E.source||I,Q=E.offset||0,J=et.agent,$=J.versionNumber,se=!1,_e=/\r\n|\n|\r/mg,ye;if(X&&(J.chrome&&$>=30||J.webkit&&$>=537.76||J.firefox&&$>=23||J.node)){if(J.node)Q-=2;else if(p&&j&&!p.location.href.indexOf(j)){var Ce=g.getElementsByTagName("html")[0].innerHTML;Q=Ce.substr(0,Ce.indexOf(I)+1).match(_e).length+1}se=Q>0&&!(J.chrome&&$>=36||J.safari&&$>=600||J.firefox&&$>=40||J.node);var Ee=["AA"+q(se?0:Q)+"A"];Ee.length=(I.match(_e)||[]).length+1+(se?Q:0),ye={version:3,file:j,names:[],mappings:Ee.join(";AACA"),sourceRoot:"",sources:[j],sourcesContent:[G]}}return(H.operatorOverloading!==!1||H.moduleExports!==!1)&&V(s(I,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,H),ye&&(se&&(I=new Array(Q+1).join(`
`)+I),/^(inline|both)$/.test(X)&&(I+=`
//# sourceMappingURL=data:application/json;base64,`+a.btoa(unescape(encodeURIComponent(JSON.stringify(ye))))),I+=`
//# sourceURL=`+(j||"paperscript")),{url:j,source:G,code:I,map:ye}}function S(I,E,w){et=E;var k=E.getView(),v=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(I)&&!/\bnew\s+Tool\b/.test(I)?new pn:null,A=v?v._events:[],L=["onFrame","onResize"].concat(A),z=[],M=[],V,q=typeof I=="object"?I:x(I,w);I=q.code;function j($,se){for(var _e in $)(se||!/^_/.test(_e))&&new RegExp("([\\b\\s\\W]|^)"+_e.replace(/\$/g,"\\$")+"\\b").test(I)&&(z.push(_e),M.push($[_e]))}j({__$__:_,$__:m,paper:E,tool:v},!0),j(E),I="var module = { exports: {} }; "+I;var Q=c.each(L,function($){new RegExp("\\s+"+$+"\\b").test(I)&&(z.push($),this.push("module.exports."+$+" = "+$+";"))},[]).join(`
`);Q&&(I+=`
`+Q),I+=`
return module.exports;`;var X=et.agent;if(g&&(X.chrome||X.firefox&&X.versionNumber<40)){var H=g.createElement("script"),G=g.head||g.getElementsByTagName("head")[0];X.firefox&&(I=`
`+I),H.appendChild(g.createTextNode("document.__paperscript__ = function("+z+") {"+I+`
}`)),G.appendChild(H),V=g.__paperscript__,delete g.__paperscript__,G.removeChild(H)}else V=Function(z,I);var Q=V&&V.apply(E,M),J=Q||{};return c.each(A,function($){var se=J[$];se&&(v[$]=se)}),k&&(J.onResize&&k.setOnResize(J.onResize),k.emit("resize",{size:k.size,delta:new F}),J.onFrame&&k.setOnFrame(J.onFrame),k.requestUpdate()),Q}function y(I){if(/^text\/(?:x-|)paperscript$/.test(I.type)&&O.getAttribute(I,"ignore")!=="true"){var E=O.getAttribute(I,"canvas"),w=g.getElementById(E),k=I.src||I.getAttribute("data-src"),v=O.hasAttribute(I,"async"),A="data-paper-scope";if(!w)throw new Error('Unable to find canvas with id "'+E+'"');var L=O.get(w.getAttribute(A))||new O().setup(w);return w.setAttribute(A,L._id),k?zi.request({url:k,async:v,mimeType:"text/plain",onLoad:function(z){S(z,L,k)}}):S(I.innerHTML,L,I.baseURI),I.setAttribute("data-paper-ignore","true"),L}}function b(){c.each(g&&g.getElementsByTagName("script"),y)}function N(I){return I?y(I):b()}return p&&(g.readyState==="complete"?setTimeout(b):dt.add(p,{load:b})),{compile:x,execute:S,load:N,parse:s,calculateBinary:_,calculateUnary:m}}).call(this);var et=new(O.inject(c.exports,{Base:c,Numerical:K,Key:Pi,DomEvent:dt,DomElement:ot,document:g,window:p,Symbol:ze,PlacedSymbol:Re}));return et.agent.node&&os(et),typeof h=="function"&&h.amd?h("paper",et):o&&(o.exports=et),et}).call(Gs,typeof self=="object"?self:null)})($s);var ao=$s.exports;const Li=za(ao);function yr(o){return dn(".0%")(o)}function xr(o,a){return[o*Math.sin(a),o*Math.cos(a)]}function Gn(o,a,h){h=Math.min(h,o);function p(c){return Math.acos(c/o)}function g(c){return-1/2*o**2*(c-Math.sin(c)*Math.cos(c))}return g(p(h))-g(p(a))}function Un({layerRadius:o,cutY:a,cutX:h,nextCutX:p}){const g=Math.sqrt(o**2-a**2),c=Math.min(g,p);return Gn(o,h,c)-(c-h)*a}function uo({slope:o,yIntercept:a,radius:h}){const p=a**2*o**2-(o**2+1)*(a**2-h**2);return{discriminant:p,doesIntersect:p>0}}function jn({slope:o,yIntercept:a,x1:h,x2:p}){return 1/2*o*(p**2-h**2)+a*(p-h)}function hs(o,a,h){return o>a&&o-a>3e-14&&o<h&&h-o>3e-14}function oo(o){return o.map(({pieceColumn:a})=>a.map(({pieceArea:h,subPieces:p})=>p.length?p:h)).flat(2)}function lo(o){return o.map(({pieces:a})=>a.map(({area:h,subPieces:p})=>p.length?p:h)).flat(2)}class fs{constructor({radius:a,numLayers:h,numCuts:p,cutType:g,cutTargetDepthPercentage:c,numHorizontalCuts:P}){this.radius=a,this.numLayers=h,this.numCuts=p,this.cutType=g,this.cutTargetDepthPercentage=c,this.numHorizontalCuts=P}get rScale(){return Zi().domain([0,this.numLayers]).range([0,this.radius])}get layerRadii(){return Array.from({length:this.numLayers}).map((a,h)=>this.rScale(h+1))}get layerThickness(){return this.rScale(1)}get layerArcs(){return this.layerRadii.map(a=>h=>Math.sqrt(a**2-h**2))}get cutNumbers(){return Array.from({length:this.numCuts}).map((a,h)=>h)}get cutWidthScale(){return Zi().domain([0,this.numCuts]).range([0,this.radius])}get cutThickness(){return this.cutWidthScale(1)}get cutAngleScale(){return Zi().domain([0,this.numCuts]).range([Math.PI/2,0])}get cutTargetDepth(){return this.radius*this.cutTargetDepthPercentage}get horizontalCutNumbers(){return Array.from({length:this.numHorizontalCuts}).map((a,h)=>h).reverse()}get horizontalCutScale(){return Zi().domain([0,this.numHorizontalCuts]).range([1/(this.numHorizontalCuts+1),1])}get storageKey(){return[`${this.numLayers}l`,`${this.numCuts}c`,this.cutType==="radial"?"r":"v",...this.cutType==="radial"?[`${yr(this.cutTargetDepthPercentage)}d`]:[],`${this.numHorizontalCuts}h`].join(":")}get verticalAreas(){const a=this.cutNumbers,h=this.cutWidthScale,p=this.radius,g=this.layerRadii,c=this.horizontalCutNumbers,P=this.horizontalCutScale,O=a.map(B=>({cutX:h(B),pieceColumn:[]}));return a.forEach(B=>{const{cutX:D,pieceColumn:Z}=O[B];g.forEach((K,oe)=>{const F=oe===0,be=g[oe-1];if(K>D){const te=h(B+1),ie=Gn(K,D,te),ee=Z.length?ie-Z.at(-1).verticalCutArea:ie,fe=[F?0:Math.sqrt(be**2-te**2)||0,Math.sqrt(K**2-D**2)];let le=[];c.forEach(Me=>{const ce=P(Me)*p;if(hs(ce,fe[0],fe[1])){let T=Un({layerRadius:K,cutY:ce,cutX:D,nextCutX:te});const xe=Math.sqrt(be**2-D**2);if(ce<xe&&(T-=Un({layerRadius:be,cutY:ce,cutX:D,nextCutX:te})),le.length){const Le=le[0];le=[Le,T-Le,ee-T]}else le=[T,ee-T]}}),Z.push({layerRadius:K,verticalCutArea:ie,pieceArea:ee,yRange:fe,subPieces:le})}})}),O}get radialAreas(){const a=this.layerRadii,h=this.cutAngleScale,p=this.radius,g=this.cutNumbers,c=this.cutTargetDepth,P=this.horizontalCutNumbers,O=this.horizontalCutScale;function B(K){return oe=>K*oe-c}function D(K){const oe=h(K);return(c+p*Math.sin(oe))/(p*Math.cos(oe))}const Z=a.map(K=>{const oe=[];return g.forEach(F=>{const be=D(F),te=B(be),{discriminant:ie,doesIntersect:ee}=uo({slope:be,yIntercept:-c,radius:K});if(ee){const fe=(c*be+Math.sqrt(ie))/(be**2+1);fe>0&&te(fe)>0&&oe.push({xOfLeftCutIntersection:fe,leftCutLineSlope:be,cutNum:F})}}),{layerRadius:K,pieces:oe}});return Z.forEach(({pieces:K,layerRadius:oe},F,be)=>{const te=F===0,ie=be[F-1];K.forEach((ee,fe,le)=>{var ve,wt,Bt;const Me=fe===0,ce=fe===le.length-1,{leftCutLineSlope:T,xOfLeftCutIntersection:xe}=ee,Le=[void 0,void 0],qe=[void 0,void 0],nt=le[fe+1];function Re(Ve){var ei,vt;const at=(ei=ie==null?void 0:ie.pieces[Ve])==null?void 0:ei.xOfLeftCutIntersection,Wt=c/((vt=le[Ve])==null?void 0:vt.leftCutLineSlope);return at??Wt}Le[0]=xe,Le[1]=ce?oe:nt.xOfLeftCutIntersection,Me||(Le[0]=Re(fe)),ee.xRange=Le,qe[0]=ce||te?0:Math.sqrt(ie.layerRadius**2-((ve=ie.pieces[fe+1])==null?void 0:ve.xOfLeftCutIntersection)**2)||0,qe[1]=Math.sqrt(oe**2-xe**2),ee.yRange=qe;let ze=Gn(oe,xe,Le[1]);if(Me||(ze+=jn({slope:T,yIntercept:-c,x1:Le[0],x2:xe})),!ce){const Ve=Re(fe+1);ze-=jn({slope:nt.leftCutLineSlope,yIntercept:-c,x1:Ve,x2:Le[1]})}const Se=(wt=ie==null?void 0:ie.pieces[fe])==null?void 0:wt.xRange[1];!te&&Se>Le[0]&&(ze-=Gn(ie.layerRadius,(Bt=ie.pieces[fe])==null?void 0:Bt.xOfLeftCutIntersection,Se)),ee.area=ze;let tt=[];P.forEach(Ve=>{const at=O(Ve)*p;if(hs(at,qe[0],qe[1])){let Wt=Un({layerRadius:oe,cutY:at,cutX:xe,nextCutX:Le[1]});if(!Me){const vt=Math.max((at+c)/T,Le[0]);Wt+=jn({slope:T,yIntercept:-c,x1:vt,x2:xe})-(xe-vt)*at}if(!te&&at<Math.sqrt(ie.layerRadius**2-Le[0]**2)){const vt=Math.sqrt(ie.layerRadius**2-at**2);Wt-=Un({layerRadius:ie.layerRadius,cutY:at,cutX:Le[0],nextCutX:vt})}if(!ce&&at<Math.sqrt(oe**2-Le[1]**2)){const vt=(at+c)/nt.leftCutLineSlope;Wt-=jn({slope:nt.leftCutLineSlope,yIntercept:-c,x1:vt,x2:Le[1]})-(Le[1]-vt)*at}if(tt.length){const vt=tt[0];tt=[vt,Wt-vt,ze-Wt]}else tt=[Wt,ze-Wt]}}),ee.subPieces=tt})}),Z}get standardDeviation(){const a=this.cutType==="vertical"?oo(this.verticalAreas):lo(this.radialAreas),h=iu(a),p=ou(a);return+dn(".3f")(h/p*100)}}function ho(o){let a,h,p;return{c(){a=vi("line"),this.h()},l(g){a=bi(g,"line",{x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),Ye(a).forEach(pe),this.h()},h(){re(a,"x1",h=-o[0]/2),re(a,"y1",o[1]),re(a,"x2",p=o[0]/2),re(a,"y2",o[1]),re(a,"class","svelte-14x1u0r")},m(g,c){je(g,a,c)},p(g,[c]){c&1&&h!==(h=-g[0]/2)&&re(a,"x1",h),c&1&&p!==(p=g[0]/2)&&re(a,"x2",p)},i:ft,o:ft,d(g){g&&pe(a)}}}function fo(o,a,h){let{width:p}=a,{height:g}=a,{isBottom:c=!1}=a,P=c?g:0;return o.$$set=O=>{"width"in O&&h(0,p=O.width),"height"in O&&h(2,g=O.height),"isBottom"in O&&h(3,c=O.isBottom)},[p,P,g,c]}class cs extends Kt{constructor(a){super(),Qt(this,a,fo,ho,Xt,{width:0,height:2,isBottom:3})}}function co(o){let a;return{c(){a=vi("line"),this.h()},l(h){a=bi(h,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),Ye(a).forEach(pe),this.h()},h(){re(a,"x1","0"),re(a,"y1",0),re(a,"x2","0"),re(a,"y2",o[0])},m(h,p){je(h,a,p)},p(h,[p]){p&1&&re(a,"y2",h[0])},i:ft,o:ft,d(h){h&&pe(a)}}}function po(o,a,h){let{height:p}=a;return o.$$set=g=>{"height"in g&&h(0,p=g.height)},[p]}class go extends Kt{constructor(a){super(),Qt(this,a,po,co,Xt,{height:0})}}function ds(o,a,h){const p=o.slice();return p[4]=a[h],p}function ps(o){let a,h;return{c(){a=vi("circle"),this.h()},l(p){a=bi(p,"circle",{cx:!0,cy:!0,r:!0,class:!0}),Ye(a).forEach(pe),this.h()},h(){re(a,"cx","0"),re(a,"cy",o[0]),re(a,"r",h=o[4]),re(a,"class","svelte-4enqpx")},m(p,g){je(p,a,g)},p(p,g){g&1&&re(a,"cy",p[0]),g&2&&h!==(h=p[4])&&re(a,"r",h)},d(p){p&&pe(a)}}}function _o(o){let a,h=Pt(o[1]),p=[];for(let g=0;g<h.length;g+=1)p[g]=ps(ds(o,h,g));return{c(){a=vi("g");for(let g=0;g<p.length;g+=1)p[g].c();this.h()},l(g){a=bi(g,"g",{class:!0});var c=Ye(a);for(let P=0;P<p.length;P+=1)p[P].l(c);c.forEach(pe),this.h()},h(){re(a,"class","onion")},m(g,c){je(g,a,c);for(let P=0;P<p.length;P+=1)p[P]&&p[P].m(a,null)},p(g,[c]){if(c&3){h=Pt(g[1]);let P;for(P=0;P<h.length;P+=1){const O=ds(g,h,P);p[P]?p[P].p(O,c):(p[P]=ps(O),p[P].c(),p[P].m(a,null))}for(;P<p.length;P+=1)p[P].d(1);p.length=h.length}},i:ft,o:ft,d(g){g&&pe(a),_i(p,g)}}}function mo(o,a,h){let p,g,{height:c}=a;const P=hi("onionStore");return $t(o,P,O=>h(3,g=O)),o.$$set=O=>{"height"in O&&h(0,c=O.height)},o.$$.update=()=>{o.$$.dirty&8&&h(1,{layerRadii:p}=g,p)},[c,p,P,g]}class vo extends Kt{constructor(a){super(),Qt(this,a,mo,_o,Xt,{height:0})}}function gs(o,a,h){const p=o.slice();p[13]=a[h];const g=p[3](p[13])*p[10];p[14]=g;const c=p[2](p[14]);return p[15]=c,p}function _s(o,a,h){const p=o.slice();return p[13]=a[h],p}function bo(o){const a=o.slice(),h=a[6](a[13]+1);a[21]=h;const p=xr(a[10],a[21]);return a[22]=p[0],a[23]=p[1],a}function yo(o){const a=o.slice(),h=a[7](a[13]);return a[20]=h,a}function ms(o){let a,h,p,g;return{c(){a=vi("line"),this.h()},l(c){a=bi(c,"line",{x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),Ye(a).forEach(pe),this.h()},h(){re(a,"x1",h=o[22]*2),re(a,"y1",p=o[2](o[23]*2+o[5])),re(a,"x2","0"),re(a,"y2",g=o[2](-o[5])),re(a,"class","svelte-1j3y5u1")},m(c,P){je(c,a,P)},p(c,P){P&1600&&h!==(h=c[22]*2)&&re(a,"x1",h),P&1636&&p!==(p=c[2](c[23]*2+c[5]))&&re(a,"y1",p),P&36&&g!==(g=c[2](-c[5]))&&re(a,"y2",g)},d(c){c&&pe(a)}}}function vs(o){let a,h,p;return{c(){a=vi("line"),this.h()},l(g){a=bi(g,"line",{x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),Ye(a).forEach(pe),this.h()},h(){re(a,"x1",h=o[20]),re(a,"y1","0"),re(a,"x2",p=o[20]),re(a,"y2",o[1]),re(a,"class","svelte-1j3y5u1")},m(g,c){je(g,a,c)},p(g,c){c&640&&h!==(h=g[20])&&re(a,"x1",h),c&640&&p!==(p=g[20])&&re(a,"x2",p),c&2&&re(a,"y2",g[1])},d(g){g&&pe(a)}}}function bs(o){let a;function h(P,O){if(P[8]==="vertical")return vs;if(P[8]==="radial")return ms}function p(P,O){if(O===vs)return yo(P);if(O===ms)return bo(P)}let g=h(o),c=g&&g(p(o,g));return{c(){c&&c.c(),a=Tt()},l(P){c&&c.l(P),a=Tt()},m(P,O){c&&c.m(P,O),je(P,a,O)},p(P,O){g===(g=h(P))&&c?c.p(p(P,g),O):(c&&c.d(1),c=g&&g(p(P,g)),c&&(c.c(),c.m(a.parentNode,a)))},d(P){P&&pe(a),c&&c.d(P)}}}function ys(o){let a,h,p,g;return{c(){a=vi("line"),this.h()},l(c){a=bi(c,"line",{x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),Ye(a).forEach(pe),this.h()},h(){re(a,"x1","0"),re(a,"y1",h=o[15]),re(a,"x2",p=o[0]/2),re(a,"y2",g=o[15]),re(a,"class","svelte-1j3y5u1")},m(c,P){je(c,a,P)},p(c,P){P&1052&&h!==(h=c[15])&&re(a,"y1",h),P&1&&p!==(p=c[0]/2)&&re(a,"x2",p),P&1052&&g!==(g=c[15])&&re(a,"y2",g)},d(c){c&&pe(a)}}}function xo(o){let a,h,p=Pt(o[9]),g=[];for(let O=0;O<p.length;O+=1)g[O]=bs(_s(o,p,O));let c=Pt(o[4]),P=[];for(let O=0;O<c.length;O+=1)P[O]=ys(gs(o,c,O));return{c(){a=vi("g");for(let O=0;O<g.length;O+=1)g[O].c();h=Tt();for(let O=0;O<P.length;O+=1)P[O].c();this.h()},l(O){a=bi(O,"g",{class:!0});var B=Ye(a);for(let D=0;D<g.length;D+=1)g[D].l(B);h=Tt();for(let D=0;D<P.length;D+=1)P[D].l(B);B.forEach(pe),this.h()},h(){re(a,"class","cuts")},m(O,B){je(O,a,B);for(let D=0;D<g.length;D+=1)g[D]&&g[D].m(a,null);Ae(a,h);for(let D=0;D<P.length;D+=1)P[D]&&P[D].m(a,null)},p(O,[B]){if(B&2022){p=Pt(O[9]);let D;for(D=0;D<p.length;D+=1){const Z=_s(O,p,D);g[D]?g[D].p(Z,B):(g[D]=bs(Z),g[D].c(),g[D].m(a,h))}for(;D<g.length;D+=1)g[D].d(1);g.length=p.length}if(B&1053){c=Pt(O[4]);let D;for(D=0;D<c.length;D+=1){const Z=gs(O,c,D);P[D]?P[D].p(Z,B):(P[D]=ys(Z),P[D].c(),P[D].m(a,null))}for(;D<P.length;D+=1)P[D].d(1);P.length=c.length}},i:ft,o:ft,d(O){O&&pe(a),_i(g,O),_i(P,O)}}}function wo(o,a,h){let p,g,c,P,O,B,D,Z,K,{width:oe}=a,{height:F}=a,{yScale:be}=a;const te=hi("onionStore");return $t(o,te,ie=>h(12,K=ie)),o.$$set=ie=>{"width"in ie&&h(0,oe=ie.width),"height"in ie&&h(1,F=ie.height),"yScale"in ie&&h(2,be=ie.yScale)},o.$$.update=()=>{o.$$.dirty&4096&&h(10,{radius:p,cutNumbers:g,cutType:c,cutWidthScale:P,cutAngleScale:O,cutTargetDepth:B,horizontalCutNumbers:D,horizontalCutScale:Z}=K,p,(h(9,g),h(12,K)),(h(8,c),h(12,K)),(h(7,P),h(12,K)),(h(6,O),h(12,K)),(h(5,B),h(12,K)),(h(4,D),h(12,K)),(h(3,Z),h(12,K)))},[oe,F,be,Z,D,B,O,P,c,g,p,te,K]}class So extends Kt{constructor(a){super(),Qt(this,a,wo,xo,Xt,{width:0,height:1,yScale:2})}}function xs(o,a,h){const p=o.slice();return p[26]=a[h],p}function Co(o){let a,h,p;return{c(){a=vi("path"),this.h()},l(g){a=bi(g,"path",{d:!0,style:!0,class:!0}),Ye(a).forEach(pe),this.h()},h(){re(a,"d",h=o[5].pathData),re(a,"style",p=o[10]?`transform: translate(${-o[5].bounds.center.x+o[11](o[0])}px, ${-o[5].bounds.center.y+o[9]*.7}px)`:void 0),re(a,"class","svelte-42u8sx"),ii(a,"highlight",o[2]),ii(a,"primary",o[2]&&o[3]),ii(a,"secondary",o[2]&&o[4]),ii(a,"thin",o[4]&&o[8]==="radial"&&o[7]===0)},m(g,c){je(g,a,c)},p(g,c){c&32&&h!==(h=g[5].pathData)&&re(a,"d",h),c&3617&&p!==(p=g[10]?`transform: translate(${-g[5].bounds.center.x+g[11](g[0])}px, ${-g[5].bounds.center.y+g[9]*.7}px)`:void 0)&&re(a,"style",p),c&4&&ii(a,"highlight",g[2]),c&12&&ii(a,"primary",g[2]&&g[3]),c&20&&ii(a,"secondary",g[2]&&g[4]),c&400&&ii(a,"thin",g[4]&&g[8]==="radial"&&g[7]===0)},d(g){g&&pe(a)}}}function ko(o){let a,h=Pt(o[6]),p=[];for(let g=0;g<h.length;g+=1)p[g]=ws(xs(o,h,g));return{c(){for(let g=0;g<p.length;g+=1)p[g].c();a=Tt()},l(g){for(let c=0;c<p.length;c+=1)p[c].l(g);a=Tt()},m(g,c){for(let P=0;P<p.length;P+=1)p[P]&&p[P].m(g,c);je(g,a,c)},p(g,c){if(c&64){h=Pt(g[6]);let P;for(P=0;P<h.length;P+=1){const O=xs(g,h,P);p[P]?p[P].p(O,c):(p[P]=ws(O),p[P].c(),p[P].m(a.parentNode,a))}for(;P<p.length;P+=1)p[P].d(1);p.length=h.length}},d(g){g&&pe(a),_i(p,g)}}}function ws(o){let a,h;return{c(){a=vi("path"),this.h()},l(p){a=bi(p,"path",{d:!0,class:!0}),Ye(a).forEach(pe),this.h()},h(){re(a,"d",h=o[26].pathData),re(a,"class","subpiece svelte-42u8sx")},m(p,g){je(p,a,g)},p(p,g){g&64&&h!==(h=p[26].pathData)&&re(a,"d",h)},d(p){p&&pe(a)}}}function Io(o){let a;function h(c,P){return c[1].length?ko:Co}let p=h(o),g=p(o);return{c(){g.c(),a=Tt()},l(c){g.l(c),a=Tt()},m(c,P){g.m(c,P),je(c,a,P)},p(c,[P]){p===(p=h(c))&&g?g.p(c,P):(g.d(1),g=p(c),g&&(g.c(),g.m(a.parentNode,a)))},i:ft,o:ft,d(c){c&&pe(a),g.d(c)}}}function Po(o,a,h){let p,g,c,P,O,B,D,Z,K,oe,F,be,te,{area:ie}=a,{layerNum:ee}=a,{cutNum:fe}=a,{subPieces:le}=a,{highlight:Me=!1}=a,{primary:ce=!1}=a,{secondary:T=!1}=a;const xe=hi("onionStore");$t(o,xe,Se=>h(25,F=Se));const Le=hi("layerPathStore");$t(o,Le,Se=>h(24,oe=Se));const qe=hi("cutPathStore");$t(o,qe,Se=>h(23,K=Se));const nt=hi("horizontalCutPathStore");$t(o,nt,Se=>h(22,Z=Se));const Re=hi("explodeStore");$t(o,Re,Se=>h(10,be=Se));const ze=hi("explodeXScaleStore");return $t(o,ze,Se=>h(11,te=Se)),o.$$set=Se=>{"area"in Se&&h(0,ie=Se.area),"layerNum"in Se&&h(18,ee=Se.layerNum),"cutNum"in Se&&h(19,fe=Se.cutNum),"subPieces"in Se&&h(1,le=Se.subPieces),"highlight"in Se&&h(2,Me=Se.highlight),"primary"in Se&&h(3,ce=Se.primary),"secondary"in Se&&h(4,T=Se.secondary)},o.$$.update=()=>{o.$$.dirty&33554432&&h(9,{radius:p,cutType:g,cutTargetDepthPercentage:c}=F,p,(h(8,g),h(25,F)),(h(7,c),h(25,F))),o.$$.dirty&17039360&&h(21,P=oe[ee]),o.$$.dirty&8912896&&h(20,O=K[fe]),o.$$.dirty&3145728&&h(5,B=P.intersect(O)),o.$$.dirty&4194336&&h(6,D=Z.map(Se=>B.intersect(Se)))},[ie,le,Me,ce,T,B,D,c,g,p,be,te,xe,Le,qe,nt,Re,ze,ee,fe,O,P,Z,K,oe,F]}class ea extends Kt{constructor(a){super(),Qt(this,a,Po,Io,Xt,{area:0,layerNum:18,cutNum:19,subPieces:1,highlight:2,primary:3,secondary:4})}}function Ss(o,a,h){const p=o.slice();p[36]=a[h].xOfLeftCutIntersection,p[37]=a[h].xRange,p[38]=a[h].area,p[23]=a[h].yRange,p[24]=a[h].subPieces,p[26]=a[h].cutNum,p[21]=a[h].layerRadius,p[39]=a[h].layerNum,p[40]=a[h].numPieces,p[41]=a[h].isInnermostLayer,p[42]=a[h].isOutermostLayer,p[43]=a[h].pieceNum;const g=p[36];p[44]=g;const c=p[6][p[39]];p[31]=c;const P=p[31](p[44]);p[32]=P;const O=p[0](p[32]);p[45]=O;const B=p[7]!==0&&p[43]===p[40]-1;return p[29]=B,p}function Cs(o,a,h){const p=o.slice();p[21]=a[h].layerRadius,p[22]=a[h].pieceArea,p[23]=a[h].yRange,p[24]=a[h].subPieces,p[25]=a[h].cutX,p[26]=a[h].cutNum,p[27]=a[h].layerNumInColumn;const g=p[26]===0;p[28]=g;const c=p[27]===0;p[29]=c;const P=p[6].filter(function(...K){return o[17](p[25],...K)});p[30]=P;const O=p[30][p[27]]??p[30][0];p[31]=O;const B=p[31](p[25]);p[32]=B;const D=p[0](p[32]);return p[33]=D,p}function Ao(o){let a,h,p=Pt(o[2]),g=[];for(let P=0;P<p.length;P+=1)g[P]=ks(Ss(o,p,P));const c=P=>$e(g[P],1,1,()=>{g[P]=null});return{c(){for(let P=0;P<g.length;P+=1)g[P].c();a=Tt()},l(P){for(let O=0;O<g.length;O+=1)g[O].l(P);a=Tt()},m(P,O){for(let B=0;B<g.length;B+=1)g[B]&&g[B].m(P,O);je(P,a,O),h=!0},p(P,O){if(O[0]&134){p=Pt(P[2]);let B;for(B=0;B<p.length;B+=1){const D=Ss(P,p,B);g[B]?(g[B].p(D,O),Ue(g[B],1)):(g[B]=ks(D),g[B].c(),Ue(g[B],1),g[B].m(a.parentNode,a))}for(pi(),B=p.length;B<g.length;B+=1)c(B);gi()}},i(P){if(!h){for(let O=0;O<p.length;O+=1)Ue(g[O]);h=!0}},o(P){g=g.filter(Boolean);for(let O=0;O<g.length;O+=1)$e(g[O]);h=!1},d(P){P&&pe(a),_i(g,P)}}}function Eo(o){let a,h,p=Pt(o[3]),g=[];for(let P=0;P<p.length;P+=1)g[P]=Is(Cs(o,p,P));const c=P=>$e(g[P],1,1,()=>{g[P]=null});return{c(){for(let P=0;P<g.length;P+=1)g[P].c();a=Tt()},l(P){for(let O=0;O<g.length;O+=1)g[O].l(P);a=Tt()},m(P,O){for(let B=0;B<g.length;B+=1)g[B]&&g[B].m(P,O);je(P,a,O),h=!0},p(P,O){if(O[0]&42){p=Pt(P[3]);let B;for(B=0;B<p.length;B+=1){const D=Cs(P,p,B);g[B]?(g[B].p(D,O),Ue(g[B],1)):(g[B]=Is(D),g[B].c(),Ue(g[B],1),g[B].m(a.parentNode,a))}for(pi(),B=p.length;B<g.length;B+=1)c(B);gi()}},i(P){if(!h){for(let O=0;O<p.length;O+=1)Ue(g[O]);h=!0}},o(P){g=g.filter(Boolean);for(let O=0;O<g.length;O+=1)$e(g[O]);h=!1},d(P){P&&pe(a),_i(g,P)}}}function ks(o){let a,h,p;return a=new ea({props:{area:o[38],layerNum:o[39],cutNum:o[26],subPieces:o[24],highlight:o[1],primary:o[7]===0&&o[42]||o[29],secondary:o[7]===0&&o[41]}}),{c(){Ot(a.$$.fragment),h=_t()},l(g){Rt(a.$$.fragment,g),h=mt(g)},m(g,c){zt(a,g,c),je(g,h,c),p=!0},p(g,c){const P={};c[0]&4&&(P.area=g[38]),c[0]&4&&(P.layerNum=g[39]),c[0]&4&&(P.cutNum=g[26]),c[0]&4&&(P.subPieces=g[24]),c[0]&2&&(P.highlight=g[1]),c[0]&132&&(P.primary=g[7]===0&&g[42]||g[29]),c[0]&132&&(P.secondary=g[7]===0&&g[41]),a.$set(P)},i(g){p||(Ue(a.$$.fragment,g),p=!0)},o(g){$e(a.$$.fragment,g),p=!1},d(g){g&&pe(h),Vt(a,g)}}}function Is(o){let a,h;function p(...g){return o[16](o[25],...g)}return a=new ea({props:{area:o[22],layerNum:o[27]+o[5].findLastIndex(p)+1,cutNum:o[26],subPieces:o[24],highlight:o[1],primary:o[28],secondary:o[29]}}),{c(){Ot(a.$$.fragment)},l(g){Rt(a.$$.fragment,g)},m(g,c){zt(a,g,c),h=!0},p(g,c){o=g;const P={};c[0]&8&&(P.area=o[22]),c[0]&40&&(P.layerNum=o[27]+o[5].findLastIndex(p)+1),c[0]&8&&(P.cutNum=o[26]),c[0]&8&&(P.subPieces=o[24]),c[0]&2&&(P.highlight=o[1]),c[0]&8&&(P.primary=o[28]),c[0]&8&&(P.secondary=o[29]),a.$set(P)},i(g){h||(Ue(a.$$.fragment,g),h=!0)},o(g){$e(a.$$.fragment,g),h=!1},d(g){Vt(a,g)}}}function To(o){let a,h,p,g;const c=[Eo,Ao],P=[];function O(B,D){return B[4]==="vertical"?0:B[4]==="radial"?1:-1}return~(a=O(o))&&(h=P[a]=c[a](o)),{c(){h&&h.c(),p=Tt()},l(B){h&&h.l(B),p=Tt()},m(B,D){~a&&P[a].m(B,D),je(B,p,D),g=!0},p(B,D){let Z=a;a=O(B),a===Z?~a&&P[a].p(B,D):(h&&(pi(),$e(P[Z],1,1,()=>{P[Z]=null}),gi()),~a?(h=P[a],h?h.p(B,D):(h=P[a]=c[a](B),h.c()),Ue(h,1),h.m(p.parentNode,p)):h=null)},i(B){g||(Ue(h),g=!0)},o(B){$e(h),g=!1},d(B){B&&pe(p),~a&&P[a].d(B)}}}function No(o,a,h){let p,g,c,P,O,B,D,Z,K,oe,F,be,te,ie,{yScale:ee}=a,{highlightExtremes:fe}=a;const le=hi("onionStore");$t(o,le,xe=>h(15,ie=xe));const Me=rn();$t(o,Me,xe=>h(19,te=xe)),Oi("explodeXScaleStore",Me);const ce=(xe,Le)=>Le<=xe,T=(xe,Le,qe)=>O[qe]>xe;return o.$$set=xe=>{"yScale"in xe&&h(0,ee=xe.yScale),"highlightExtremes"in xe&&h(1,fe=xe.highlightExtremes)},o.$$.update=()=>{o.$$.dirty[0]&32768&&h(10,{radius:p,cutTargetDepthPercentage:g,cutType:c,layerArcs:P,layerRadii:O,numHorizontalCuts:B,verticalAreas:D,radialAreas:Z}=ie,p,(h(7,g),h(15,ie)),(h(4,c),h(15,ie)),(h(6,P),h(15,ie)),(h(5,O),h(15,ie)),(h(14,D),h(15,ie)),(h(13,Z),h(15,ie))),o.$$.dirty[0]&16384&&h(3,K=D.map(({cutX:xe,pieceColumn:Le},qe)=>Le.map((nt,Re)=>({...nt,cutX:xe,cutNum:qe,layerNumInColumn:Re}))).flat(2).sort((xe,Le)=>Le.pieceArea-xe.pieceArea)),o.$$.dirty[0]&8192&&h(2,oe=Z.map(({layerRadius:xe,pieces:Le},qe)=>Le.map((nt,Re)=>({...nt,layerRadius:xe,layerNum:qe,numPieces:Le.length,isInnermostLayer:qe===0,isOutermostLayer:qe===Z.length-1,pieceNum:Re}))).flat(2).sort((xe,Le)=>Le.area-xe.area)),o.$$.dirty[0]&28&&h(12,F=c==="vertical"?K.at(-1).pieceArea:oe.at(-1).area),o.$$.dirty[0]&28&&h(11,be=c==="vertical"?K[0].pieceArea:oe[0].area),o.$$.dirty[0]&7168&&nn(Me,te=Zi().domain([F,be]).range([-p,p]),te)},[ee,fe,oe,K,c,O,P,g,le,Me,p,be,F,Z,D,ie,ce,T]}class Mo extends Kt{constructor(a){super(),Qt(this,a,No,To,Xt,{yScale:0,highlightExtremes:1},null,[-1,-1])}}function Ps(o,a,h){const p=o.slice();return p[12]=a[h],p}function As(o){let a,h;return{c(){a=Be("div"),h=At(o[1]),this.h()},l(p){a=Fe(p,"DIV",{class:!0,id:!0});var g=Ye(a);h=Et(g,o[1]),g.forEach(pe),this.h()},h(){re(a,"class","legend svelte-13oh5yk"),re(a,"id","legend-"+o[6])},m(p,g){je(p,a,g),Ae(a,h)},p(p,g){g&2&&mi(h,p[1])},d(p){p&&pe(a)}}}function Es(o){let a,h,p,g,c=!1,P,O,B=(o[12].label||o[12].value)+"",D,Z,K,oe,F,be,te;return F=Ma(o[10][0]),{c(){a=Be("div"),h=Be("input"),P=_t(),O=Be("label"),D=At(B),oe=_t(),this.h()},l(ie){a=Fe(ie,"DIV",{class:!0});var ee=Ye(a);h=Fe(ee,"INPUT",{type:!0,id:!0,name:!0,class:!0}),P=mt(ee),O=Fe(ee,"LABEL",{class:!0,for:!0});var fe=Ye(O);D=Et(fe,B),fe.forEach(pe),oe=mt(ee),ee.forEach(pe),this.h()},h(){re(h,"type","radio"),re(h,"id",p=`${o[6]}-${o[12].slug}`),re(h,"name","name-"+o[6]),re(h,"class","sr-only svelte-13oh5yk"),h.__value=g=o[12].value,on(h,h.__value),h.disabled=o[3],re(O,"class",Z="option "+o[2]+" svelte-13oh5yk"),re(O,"for",K=`${o[6]}-${o[12].slug}`),re(a,"class","option svelte-13oh5yk"),F.p(h)},m(ie,ee){je(ie,a,ee),Ae(a,h),h.checked=h.__value===o[0],Ae(a,P),Ae(a,O),Ae(O,D),Ae(a,oe),be||(te=In(h,"change",o[9]),be=!0)},p(ie,ee){ee&32&&p!==(p=`${ie[6]}-${ie[12].slug}`)&&re(h,"id",p),ee&32&&g!==(g=ie[12].value)&&(h.__value=g,on(h,h.__value),c=!0),ee&8&&(h.disabled=ie[3]),(c||ee&33)&&(h.checked=h.__value===ie[0]),ee&32&&B!==(B=(ie[12].label||ie[12].value)+"")&&mi(D,B),ee&4&&Z!==(Z="option "+ie[2]+" svelte-13oh5yk")&&re(O,"class",Z),ee&32&&K!==(K=`${ie[6]}-${ie[12].slug}`)&&re(O,"for",K)},d(ie){ie&&pe(a),F.r(),be=!1,te()}}}function Lo(o){let a,h,p,g,c=o[1]&&As(o),P=Pt(o[5]),O=[];for(let B=0;B<P.length;B+=1)O[B]=Es(Ps(o,P,B));return{c(){a=Be("div"),h=Be("div"),c&&c.c(),p=_t(),g=Be("div");for(let B=0;B<O.length;B+=1)O[B].c();this.h()},l(B){a=Fe(B,"DIV",{class:!0});var D=Ye(a);h=Fe(D,"DIV",{id:!0,class:!0,role:!0,"aria-labelledby":!0});var Z=Ye(h);c&&c.l(Z),p=mt(Z),g=Fe(Z,"DIV",{class:!0});var K=Ye(g);for(let oe=0;oe<O.length;oe+=1)O[oe].l(K);K.forEach(pe),Z.forEach(pe),D.forEach(pe),this.h()},h(){re(g,"class","options svelte-13oh5yk"),re(h,"id",`group-${o[6]}`),re(h,"class","group svelte-13oh5yk"),re(h,"role","radiogroup"),re(h,"aria-labelledby",`label-${o[6]}`),ii(h,"is-top",o[4]),re(a,"class","button-set svelte-13oh5yk")},m(B,D){je(B,a,D),Ae(a,h),c&&c.m(h,null),Ae(h,p),Ae(h,g);for(let Z=0;Z<O.length;Z+=1)O[Z]&&O[Z].m(g,null)},p(B,[D]){if(B[1]?c?c.p(B,D):(c=As(B),c.c(),c.m(h,p)):c&&(c.d(1),c=null),D&109){P=Pt(B[5]);let Z;for(Z=0;Z<P.length;Z+=1){const K=Ps(B,P,Z);O[Z]?O[Z].p(K,D):(O[Z]=Es(K),O[Z].c(),O[Z].m(g,null))}for(;Z<O.length;Z+=1)O[Z].d(1);O.length=P.length}D&16&&ii(h,"is-top",B[4])},i:ft,o:ft,d(B){B&&pe(a),c&&c.d(),_i(O,B)}}}function Oo(o,a,h){let p,g,{options:c=[]}=a,{legend:P=""}=a,{legendPosition:O="top"}=a,{labelClass:B=""}=a,{disabled:D=!1}=a,{value:Z=c.length?c[0].value:""}=a;const K=`legend-${Math.floor(Math.random()*1e6)}`,oe=(te="")=>`${te}`.toLowerCase().replace(/\W/g,""),F=[[]];function be(){Z=this.__value,h(0,Z)}return o.$$set=te=>{"options"in te&&h(7,c=te.options),"legend"in te&&h(1,P=te.legend),"legendPosition"in te&&h(8,O=te.legendPosition),"labelClass"in te&&h(2,B=te.labelClass),"disabled"in te&&h(3,D=te.disabled),"value"in te&&h(0,Z=te.value)},o.$$.update=()=>{o.$$.dirty&128&&h(5,p=c.map(te=>({...te,val:te.value,slug:oe(te.value)}))),o.$$.dirty&256&&h(4,g=O==="top")},[Z,P,B,D,g,p,K,c,O,be,F]}class Ro extends Kt{constructor(a){super(),Qt(this,a,Oo,Lo,Xt,{options:7,legend:1,legendPosition:8,labelClass:2,disabled:3,value:0})}}function Ts(o,a,h){const p=o.slice();return p[10]=a[h],p}function Ns(o){let a,h=dn(`.${o[6]}f`)(o[10])+"",p;return{c(){a=Be("span"),p=At(h),this.h()},l(g){a=Fe(g,"SPAN",{class:!0});var c=Ye(a);p=Et(c,h),c.forEach(pe),this.h()},h(){re(a,"class","tick svelte-q7ecsm")},m(g,c){je(g,a,c),Ae(a,p)},p(g,c){c&96&&h!==(h=dn(`.${g[6]}f`)(g[10])+"")&&mi(p,h)},d(g){g&&pe(a)}}}function zo(o){let a,h,p,g,c,P,O=Pt(o[5]),B=[];for(let D=0;D<O.length;D+=1)B[D]=Ns(Ts(o,O,D));return{c(){a=Be("div"),h=Be("div");for(let D=0;D<B.length;D+=1)B[D].c();p=_t(),g=Be("input"),this.h()},l(D){a=Fe(D,"DIV",{class:!0});var Z=Ye(a);h=Fe(Z,"DIV",{class:!0});var K=Ye(h);for(let oe=0;oe<B.length;oe+=1)B[oe].l(K);K.forEach(pe),p=mt(Z),g=Fe(Z,"INPUT",{type:!0,"aria-label":!0,min:!0,max:!0,step:!0,class:!0}),Z.forEach(pe),this.h()},h(){re(h,"class","ticks svelte-q7ecsm"),re(g,"type","range"),re(g,"aria-label",o[4]),re(g,"min",o[1]),re(g,"max",o[2]),re(g,"step",o[3]),re(g,"class","svelte-q7ecsm"),re(a,"class","range svelte-q7ecsm")},m(D,Z){je(D,a,Z),Ae(a,h);for(let K=0;K<B.length;K+=1)B[K]&&B[K].m(h,null);Ae(a,p),Ae(a,g),on(g,o[0]),c||(P=[In(g,"change",o[8]),In(g,"input",o[8])],c=!0)},p(D,[Z]){if(Z&96){O=Pt(D[5]);let K;for(K=0;K<O.length;K+=1){const oe=Ts(D,O,K);B[K]?B[K].p(oe,Z):(B[K]=Ns(oe),B[K].c(),B[K].m(h,null))}for(;K<B.length;K+=1)B[K].d(1);B.length=O.length}Z&16&&re(g,"aria-label",D[4]),Z&2&&re(g,"min",D[1]),Z&4&&re(g,"max",D[2]),Z&8&&re(g,"step",D[3]),Z&1&&on(g,D[0])},i:ft,o:ft,d(D){D&&pe(a),_i(B,D),c=!1,La(P)}}}function Vo(o,a,h){let p,g,{min:c=0}=a,{max:P=100}=a,{step:O=1}=a,{showTicks:B=!1}=a,{value:D=c}=a,{label:Z=""}=a;const K=F=>Math.floor(F)===F?0:F.toString().split(".")[1].length||0;function oe(){D=wr(this.value),h(0,D)}return o.$$set=F=>{"min"in F&&h(1,c=F.min),"max"in F&&h(2,P=F.max),"step"in F&&h(3,O=F.step),"showTicks"in F&&h(7,B=F.showTicks),"value"in F&&h(0,D=F.value),"label"in F&&h(4,Z=F.label)},o.$$.update=()=>{o.$$.dirty&8&&h(6,p=K(O)),o.$$.dirty&142&&h(5,g=B?lu(c,P+O,O):[])},[D,c,P,O,Z,g,p,B,oe]}class tr extends Kt{constructor(a){super(),Qt(this,a,Vo,zo,Xt,{min:1,max:2,step:3,showTicks:7,value:0,label:4})}}function Ms(o){let a,h=o[2][0]+"",p,g,c,P=o[2][1]+"",O;return{c(){a=Be("span"),p=At(h),g=_t(),c=Be("span"),O=At(P),this.h()},l(B){a=Fe(B,"SPAN",{class:!0});var D=Ye(a);p=Et(D,h),D.forEach(pe),g=mt(B),c=Fe(B,"SPAN",{class:!0});var Z=Ye(c);O=Et(Z,P),Z.forEach(pe),this.h()},h(){re(a,"class","svelte-157h5as"),re(c,"class","svelte-157h5as")},m(B,D){je(B,a,D),Ae(a,p),je(B,g,D),je(B,c,D),Ae(c,O)},p(B,D){D&4&&h!==(h=B[2][0]+"")&&mi(p,h),D&4&&P!==(P=B[2][1]+"")&&mi(O,P)},d(B){B&&(pe(a),pe(g),pe(c))}}}function Bo(o){let a,h,p,g,c,P,O,B,D=o[1]==="inner"&&Ms(o);return{c(){a=Be("div"),h=Be("span"),p=At(o[0]),g=_t(),c=Be("button"),D&&D.c(),this.h()},l(Z){a=Fe(Z,"DIV",{class:!0});var K=Ye(a);h=Fe(K,"SPAN",{class:!0,id:!0});var oe=Ye(h);p=Et(oe,o[0]),oe.forEach(pe),g=mt(K),c=Fe(K,"BUTTON",{role:!0,"aria-checked":!0,"aria-labelledby":!0,class:!0});var F=Ye(c);D&&D.l(F),F.forEach(pe),K.forEach(pe),this.h()},h(){re(h,"class","label svelte-157h5as"),re(h,"id",o[4]),re(c,"role","switch"),re(c,"aria-checked",o[3]),re(c,"aria-labelledby",o[4]),re(c,"class","svelte-157h5as"),re(a,"class",P="toggle toggle--"+o[1]+" svelte-157h5as")},m(Z,K){je(Z,a,K),Ae(a,h),Ae(h,p),Ae(a,g),Ae(a,c),D&&D.m(c,null),O||(B=In(c,"click",o[5]),O=!0)},p(Z,[K]){K&1&&mi(p,Z[0]),Z[1]==="inner"?D?D.p(Z,K):(D=Ms(Z),D.c(),D.m(c,null)):D&&(D.d(1),D=null),K&8&&re(c,"aria-checked",Z[3]),K&2&&P!==(P="toggle toggle--"+Z[1]+" svelte-157h5as")&&re(a,"class",P)},i:ft,o:ft,d(Z){Z&&pe(a),D&&D.d(),O=!1,B()}}}function Fo(o,a,h){let{label:p}=a,{style:g="inner"}=a,{options:c=["on","off"]}=a,{value:P=c[0]}=a,O=P===c[0];const B=`toggle-${Math.floor(Math.random()*1e6)}`,D=Z=>{const oe=Z.target.getAttribute("aria-checked");h(3,O=oe!=="true"),h(6,P=O?c[0]:c[1])};return o.$$set=Z=>{"label"in Z&&h(0,p=Z.label),"style"in Z&&h(1,g=Z.style),"options"in Z&&h(2,c=Z.options),"value"in Z&&h(6,P=Z.value)},[p,g,c,O,B,D,P]}class Do extends Kt{constructor(a){super(),Qt(this,a,Fo,Bo,Xt,{label:0,style:1,options:2,value:6})}}function Ls(o){let a,h,p,g=o[10]&&Os(o),c=o[11]&&Rs(o);return{c(){a=Be("div"),g&&g.c(),h=_t(),c&&c.c(),this.h()},l(P){a=Fe(P,"DIV",{class:!0});var O=Ye(a);g&&g.l(O),h=mt(O),c&&c.l(O),O.forEach(pe),this.h()},h(){re(a,"class","controls top svelte-5avulp")},m(P,O){je(P,a,O),g&&g.m(a,null),Ae(a,h),c&&c.m(a,null),p=!0},p(P,O){P[10]?g?(g.p(P,O),O[0]&1024&&Ue(g,1)):(g=Os(P),g.c(),Ue(g,1),g.m(a,h)):g&&(pi(),$e(g,1,1,()=>{g=null}),gi()),P[11]?c?c.p(P,O):(c=Rs(P),c.c(),c.m(a,null)):c&&(c.d(1),c=null)},i(P){p||(Ue(g),p=!0)},o(P){$e(g),p=!1},d(P){P&&pe(a),g&&g.d(),c&&c.d()}}}function Os(o){let a,h,p;function g(P){o[26](P)}let c={label:"explode",style:"slider"};return o[15]!==void 0&&(c.value=o[15]),a=new Do({props:c}),ln.push(()=>fn(a,"value",g)),{c(){Ot(a.$$.fragment)},l(P){Rt(a.$$.fragment,P)},m(P,O){zt(a,P,O),p=!0},p(P,O){const B={};!h&&O[0]&32768&&(h=!0,B.value=P[15],hn(()=>h=!1)),a.$set(B)},i(P){p||(Ue(a.$$.fragment,P),p=!0)},o(P){$e(a.$$.fragment,P),p=!1},d(P){Vt(a,P)}}}function Rs(o){let a,h,p,g,c;return{c(){a=Be("label"),h=At(`standard deviation
					`),p=Be("input"),this.h()},l(P){a=Fe(P,"LABEL",{class:!0});var O=Ye(a);h=Et(O,`standard deviation
					`),p=Fe(O,"INPUT",{type:!0}),O.forEach(pe),this.h()},h(){re(p,"type","number"),p.readOnly=!0,re(a,"class","standard-deviation")},m(P,O){je(P,a,O),Ae(a,h),Ae(a,p),on(p,o[16].standardDeviation),g||(c=In(p,"input",o[27]),g=!0)},p(P,O){O[0]&65536&&wr(p.value)!==P[16].standardDeviation&&on(p,P[16].standardDeviation)},d(P){P&&pe(a),g=!1,c()}}}function zs(o){let a,h;return a=new So({props:{width:an,height:o[17],yScale:o[18]}}),{c(){Ot(a.$$.fragment)},l(p){Rt(a.$$.fragment,p)},m(p,g){zt(a,p,g),h=!0},p:ft,i(p){h||(Ue(a.$$.fragment,p),h=!0)},o(p){$e(a.$$.fragment,p),h=!1},d(p){Vt(a,p)}}}function Vs(o){let a,h,p,g,c,P,O,B,D,Z,K,oe=o[5]&&Bs(o);function F(ee){o[29](ee)}let be={min:1,max:10,label:"number of cuts"};o[13]!==void 0&&(be.value=o[13]),O=new tr({props:be}),ln.push(()=>fn(O,"value",F));let te=o[6]&&Fs(o),ie=o[8]&&Ds(o);return{c(){a=Be("div"),oe&&oe.c(),h=_t(),p=Be("p"),g=At("number of cuts: "),c=At(o[13]),P=_t(),Ot(O.$$.fragment),D=_t(),te&&te.c(),Z=_t(),ie&&ie.c(),this.h()},l(ee){a=Fe(ee,"DIV",{class:!0});var fe=Ye(a);oe&&oe.l(fe),h=mt(fe),p=Fe(fe,"P",{});var le=Ye(p);g=Et(le,"number of cuts: "),c=Et(le,o[13]),le.forEach(pe),P=mt(fe),Rt(O.$$.fragment,fe),D=mt(fe),te&&te.l(fe),Z=mt(fe),ie&&ie.l(fe),fe.forEach(pe),this.h()},h(){re(a,"class","controls bottom svelte-5avulp")},m(ee,fe){je(ee,a,fe),oe&&oe.m(a,null),Ae(a,h),Ae(a,p),Ae(p,g),Ae(p,c),Ae(a,P),zt(O,a,null),Ae(a,D),te&&te.m(a,null),Ae(a,Z),ie&&ie.m(a,null),K=!0},p(ee,fe){ee[5]?oe?(oe.p(ee,fe),fe[0]&32&&Ue(oe,1)):(oe=Bs(ee),oe.c(),Ue(oe,1),oe.m(a,h)):oe&&(pi(),$e(oe,1,1,()=>{oe=null}),gi()),(!K||fe[0]&8192)&&mi(c,ee[13]);const le={};!B&&fe[0]&8192&&(B=!0,le.value=ee[13],hn(()=>B=!1)),O.$set(le),ee[6]?te?(te.p(ee,fe),fe[0]&64&&Ue(te,1)):(te=Fs(ee),te.c(),Ue(te,1),te.m(a,Z)):te&&(pi(),$e(te,1,1,()=>{te=null}),gi()),ee[8]?ie?(ie.p(ee,fe),fe[0]&256&&Ue(ie,1)):(ie=Ds(ee),ie.c(),Ue(ie,1),ie.m(a,null)):ie&&(pi(),$e(ie,1,1,()=>{ie=null}),gi())},i(ee){K||(Ue(oe),Ue(O.$$.fragment,ee),Ue(te),Ue(ie),K=!0)},o(ee){$e(oe),$e(O.$$.fragment,ee),$e(te),$e(ie),K=!1},d(ee){ee&&pe(a),oe&&oe.d(),Vt(O),te&&te.d(),ie&&ie.d()}}}function Bs(o){let a,h,p,g,c,P,O;function B(Z){o[28](Z)}let D={min:7,max:13,label:"number of layers"};return o[12]!==void 0&&(D.value=o[12]),c=new tr({props:D}),ln.push(()=>fn(c,"value",B)),{c(){a=Be("p"),h=At("number of layers: "),p=At(o[12]),g=_t(),Ot(c.$$.fragment)},l(Z){a=Fe(Z,"P",{});var K=Ye(a);h=Et(K,"number of layers: "),p=Et(K,o[12]),K.forEach(pe),g=mt(Z),Rt(c.$$.fragment,Z)},m(Z,K){je(Z,a,K),Ae(a,h),Ae(a,p),je(Z,g,K),zt(c,Z,K),O=!0},p(Z,K){(!O||K[0]&4096)&&mi(p,Z[12]);const oe={};!P&&K[0]&4096&&(P=!0,oe.value=Z[12],hn(()=>P=!1)),c.$set(oe)},i(Z){O||(Ue(c.$$.fragment,Z),O=!0)},o(Z){$e(c.$$.fragment,Z),O=!1},d(Z){Z&&(pe(a),pe(g)),Vt(c,Z)}}}function Fs(o){let a,h,p,g,c,P,O=yr(-o[1])+"",B,D,Z,K,oe,F;function be(fe){o[30](fe)}let te={legend:"cut type",options:o[19]};o[0]!==void 0&&(te.value=o[0]),a=new Ro({props:te}),ln.push(()=>fn(a,"value",be));function ie(fe){o[31](fe)}let ee={min:0,max:1,step:.01,label:"cut target depth percentage"};return o[1]!==void 0&&(ee.value=o[1]),K=new tr({props:ee}),ln.push(()=>fn(K,"value",ie)),{c(){Ot(a.$$.fragment),p=_t(),g=Be("div"),c=Be("p"),P=At(`cut target height:
						`),B=At(O),D=At(" of outer radius"),Z=_t(),Ot(K.$$.fragment),this.h()},l(fe){Rt(a.$$.fragment,fe),p=mt(fe),g=Fe(fe,"DIV",{class:!0});var le=Ye(g);c=Fe(le,"P",{});var Me=Ye(c);P=Et(Me,`cut target height:
						`),B=Et(Me,O),D=Et(Me," of outer radius"),Me.forEach(pe),Z=mt(le),Rt(K.$$.fragment,le),le.forEach(pe),this.h()},h(){re(g,"class","svelte-5avulp"),ii(g,"hidden",!(o[0]==="radial"&&o[7]))},m(fe,le){zt(a,fe,le),je(fe,p,le),je(fe,g,le),Ae(g,c),Ae(c,P),Ae(c,B),Ae(c,D),Ae(g,Z),zt(K,g,null),F=!0},p(fe,le){const Me={};!h&&le[0]&1&&(h=!0,Me.value=fe[0],hn(()=>h=!1)),a.$set(Me),(!F||le[0]&2)&&O!==(O=yr(-fe[1])+"")&&mi(B,O);const ce={};!oe&&le[0]&2&&(oe=!0,ce.value=fe[1],hn(()=>oe=!1)),K.$set(ce),(!F||le[0]&129)&&ii(g,"hidden",!(fe[0]==="radial"&&fe[7]))},i(fe){F||(Ue(a.$$.fragment,fe),Ue(K.$$.fragment,fe),F=!0)},o(fe){$e(a.$$.fragment,fe),$e(K.$$.fragment,fe),F=!1},d(fe){fe&&(pe(p),pe(g)),Vt(a,fe),Vt(K)}}}function Ds(o){let a,h,p,g,c,P,O;function B(Z){o[32](Z)}let D={min:0,max:2,label:"horizontal cuts"};return o[14]!==void 0&&(D.value=o[14]),c=new tr({props:D}),ln.push(()=>fn(c,"value",B)),{c(){a=Be("p"),h=At("horizontal cuts: "),p=At(o[14]),g=_t(),Ot(c.$$.fragment)},l(Z){a=Fe(Z,"P",{});var K=Ye(a);h=Et(K,"horizontal cuts: "),p=Et(K,o[14]),K.forEach(pe),g=mt(Z),Rt(c.$$.fragment,Z)},m(Z,K){je(Z,a,K),Ae(a,h),Ae(a,p),je(Z,g,K),zt(c,Z,K),O=!0},p(Z,K){(!O||K[0]&16384)&&mi(p,Z[14]);const oe={};!P&&K[0]&16384&&(P=!0,oe.value=Z[14],hn(()=>P=!1)),c.$set(oe)},i(Z){O||(Ue(c.$$.fragment,Z),O=!0)},o(Z){$e(c.$$.fragment,Z),O=!1},d(Z){Z&&(pe(a),pe(g)),Vt(c,Z)}}}function qs(o){let a,h;return{c(){a=Be("figcaption"),h=At(o[9])},l(p){a=Fe(p,"FIGCAPTION",{});var g=Ye(a);h=Et(g,o[9]),g.forEach(pe)},m(p,g){je(p,a,g),Ae(a,h)},p(p,g){g[0]&512&&mi(h,p[9])},d(p){p&&pe(a)}}}function qo(o){let a,h,p,g,c,P,O,B,D,Z,K,oe,F=(o[10]||o[11])&&Ls(o);g=new cs({props:{width:an,height:o[17]}}),c=new cs({props:{width:an,height:o[17],isBottom:!0}}),P=new go({props:{height:o[17]}}),O=new vo({props:{height:o[17]}});let be=o[2]&&zs(o);D=new Mo({props:{yScale:o[18],highlightExtremes:o[3]}});let te=o[4]&&Vs(o),ie=o[9]&&qs(o);return{c(){a=Be("figure"),F&&F.c(),h=_t(),p=vi("svg"),Ot(g.$$.fragment),Ot(c.$$.fragment),Ot(P.$$.fragment),Ot(O.$$.fragment),be&&be.c(),B=Tt(),Ot(D.$$.fragment),Z=_t(),te&&te.c(),K=_t(),ie&&ie.c(),this.h()},l(ee){a=Fe(ee,"FIGURE",{class:!0});var fe=Ye(a);F&&F.l(fe),h=mt(fe),p=bi(fe,"svg",{viewBox:!0});var le=Ye(p);Rt(g.$$.fragment,le),Rt(c.$$.fragment,le),Rt(P.$$.fragment,le),Rt(O.$$.fragment,le),be&&be.l(le),B=Tt(),Rt(D.$$.fragment,le),le.forEach(pe),Z=mt(fe),te&&te.l(fe),K=mt(fe),ie&&ie.l(fe),fe.forEach(pe),this.h()},h(){re(p,"viewBox",-an/2+" 0 "+an+" "+o[17]),re(a,"class","svelte-5avulp"),ii(a,"explode",o[15]==="on")},m(ee,fe){je(ee,a,fe),F&&F.m(a,null),Ae(a,h),Ae(a,p),zt(g,p,null),zt(c,p,null),zt(P,p,null),zt(O,p,null),be&&be.m(p,null),Ae(p,B),zt(D,p,null),Ae(a,Z),te&&te.m(a,null),Ae(a,K),ie&&ie.m(a,null),oe=!0},p(ee,fe){ee[10]||ee[11]?F?(F.p(ee,fe),fe[0]&3072&&Ue(F,1)):(F=Ls(ee),F.c(),Ue(F,1),F.m(a,h)):F&&(pi(),$e(F,1,1,()=>{F=null}),gi()),ee[2]?be?(be.p(ee,fe),fe[0]&4&&Ue(be,1)):(be=zs(ee),be.c(),Ue(be,1),be.m(p,B)):be&&(pi(),$e(be,1,1,()=>{be=null}),gi());const le={};fe[0]&8&&(le.highlightExtremes=ee[3]),D.$set(le),ee[4]?te?(te.p(ee,fe),fe[0]&16&&Ue(te,1)):(te=Vs(ee),te.c(),Ue(te,1),te.m(a,K)):te&&(pi(),$e(te,1,1,()=>{te=null}),gi()),ee[9]?ie?ie.p(ee,fe):(ie=qs(ee),ie.c(),ie.m(a,null)):ie&&(ie.d(1),ie=null),(!oe||fe[0]&32768)&&ii(a,"explode",ee[15]==="on")},i(ee){oe||(Ue(F),Ue(g.$$.fragment,ee),Ue(c.$$.fragment,ee),Ue(P.$$.fragment,ee),Ue(O.$$.fragment,ee),Ue(be),Ue(D.$$.fragment,ee),Ue(te),oe=!0)},o(ee){$e(F),$e(g.$$.fragment,ee),$e(c.$$.fragment,ee),$e(P.$$.fragment,ee),$e(O.$$.fragment,ee),$e(be),$e(D.$$.fragment,ee),$e(te),oe=!1},d(ee){ee&&pe(a),F&&F.d(),Vt(g),Vt(c),Vt(P),Vt(O),be&&be.d(),Vt(D),te&&te.d(),ie&&ie.d()}}}const an=600;function Ho(o,a,h){let p,g,c,P,O,{showCuts:B=!0}=a,{highlightExtremes:D=!1}=a,{showControls:Z=!0}=a,{controlLayers:K=!1}=a,{controlCutType:oe=!1}=a,{controlRadialDepth:F=!1}=a,{controlHorizontalCuts:be=!1}=a,{caption:te=""}=a,{cutType:ie="vertical"}=a,{cutTargetDepthPercentage:ee=0}=a,{toggleExplode:fe=!1}=a,{showStandardDeviation:le=!1}=a;const Me=an/2,ce=Me*.8,T=Zi().domain([0,Me]).range([Me,0]),xe=[{value:"vertical"},{value:"radial"}];let Le=10,qe=10,nt=0,Re="off";Li.setup(new Li.Size(1,1)),Li.view.autoUpdate=!1;const ze=rn(new fs({radius:ce,numLayers:Le,numCuts:qe,cutType:ie,cutTargetDepthPercentage:ee,numHorizontalCuts:nt}));$t(o,ze,Oe=>h(16,g=Oe)),Oi("onionStore",ze);const Se=rn([]);$t(o,Se,Oe=>h(36,O=Oe)),Oi("layerPathStore",Se);const me=rn([]);$t(o,me,Oe=>h(35,P=Oe)),Oi("cutPathStore",me);const tt=rn([]);$t(o,tt,Oe=>h(34,c=Oe)),Oi("horizontalCutPathStore",tt);const ve=rn(Re==="on");$t(o,ve,Oe=>h(33,p=Oe)),Oi("explodeStore",ve);function wt(Oe){Re=Oe,h(15,Re)}function Bt(){g.standardDeviation=wr(this.value),ze.set(g)}function Ve(Oe){Le=Oe,h(12,Le)}function at(Oe){qe=Oe,h(13,qe)}function Wt(Oe){ie=Oe,h(0,ie)}function ei(Oe){ee=Oe,h(1,ee)}function vt(Oe){nt=Oe,h(14,nt)}return o.$$set=Oe=>{"showCuts"in Oe&&h(2,B=Oe.showCuts),"highlightExtremes"in Oe&&h(3,D=Oe.highlightExtremes),"showControls"in Oe&&h(4,Z=Oe.showControls),"controlLayers"in Oe&&h(5,K=Oe.controlLayers),"controlCutType"in Oe&&h(6,oe=Oe.controlCutType),"controlRadialDepth"in Oe&&h(7,F=Oe.controlRadialDepth),"controlHorizontalCuts"in Oe&&h(8,be=Oe.controlHorizontalCuts),"caption"in Oe&&h(9,te=Oe.caption),"cutType"in Oe&&h(0,ie=Oe.cutType),"cutTargetDepthPercentage"in Oe&&h(1,ee=Oe.cutTargetDepthPercentage),"toggleExplode"in Oe&&h(10,fe=Oe.toggleExplode),"showStandardDeviation"in Oe&&h(11,le=Oe.showStandardDeviation)},o.$$.update=()=>{o.$$.dirty[0]&28675&&nn(ze,g=new fs({radius:ce,numLayers:Le,numCuts:qe,cutType:ie,cutTargetDepthPercentage:ee,numHorizontalCuts:nt}),g),o.$$.dirty[0]&33619968&&nn(Se,O=g.layerRadii.map(Oe=>{const{layerThickness:ct}=g,Gt=Oe-ct,ti=[`M ${Oe} ${Me}`,`A ${Oe} ${Oe} 0 0 0 ${-Oe} ${Me}`,`H ${-Gt}`,`A ${Gt} ${Gt} 0 0 1 ${Gt} ${Me}`,"z"].join(" ");return new Li.Path(ti)}),O),o.$$.dirty[0]&33619969&&nn(me,P=g.cutNumbers.map((Oe,ct,Gt)=>{let ti;if(ie==="vertical"){const{cutThickness:oi}=g;ti=[`M ${g.cutWidthScale(Oe)} ${Me}`,"V 0",`h ${oi}`,`V ${Me}`,"z"].join(" ")}if(ie==="radial"){const oi=Gt.length-Oe,{cutTargetDepth:ot}=g,dt=g.cutAngleScale(oi),pt=g.cutAngleScale(oi-1),[Ki,wi]=xr(ce,dt),[Qi,Pi]=xr(ce,pt);ti=[`M 0 ${T(-ot)}`,`L ${Ki*2} ${T(wi*2+ot)}`,`L ${Qi*2} ${T(Pi*2+ot)}`,"z"].join(" ")}return new Li.Path(ti)}),P),o.$$.dirty[0]&33619968&&nn(tt,c=[...g.horizontalCutNumbers.length?[new Li.Path([`M 0 ${T(ce)}`,`V ${T(g.horizontalCutScale(g.horizontalCutNumbers.length-1)*ce)}`,`H ${ce}`,`V ${T(ce)}`,"z"].join(" "))]:[],...g.horizontalCutNumbers.map(Oe=>{const ct=g.horizontalCutScale(Oe)*ce,Gt=T(ct),ti=T(g.horizontalCutScale(Oe-1)*ce),oi=[`M 0 ${ti}`,`V ${Gt}`,`H ${ce}`,`V ${ti}`,"z"].join(" ");return new Li.Path(oi)})].reverse(),c),o.$$.dirty[0]&32768&&nn(ve,p=Re==="on",p)},[ie,ee,B,D,Z,K,oe,F,be,te,fe,le,Le,qe,nt,Re,g,Me,T,xe,ze,Se,me,tt,ve,Li,wt,Bt,Ve,at,Wt,ei,vt]}class Uo extends Kt{constructor(a){super(),Qt(this,a,Ho,qo,Xt,{showCuts:2,highlightExtremes:3,showControls:4,controlLayers:5,controlCutType:6,controlRadialDepth:7,controlHorizontalCuts:8,caption:9,cutType:0,cutTargetDepthPercentage:1,toggleExplode:10,showStandardDeviation:11},null,[-1,-1])}}function Hs(o,a,h){const p=o.slice();return p[1]=a[h].type,p[2]=a[h].value,p[4]=h,p}function jo(o){let a,h,p=o[2]+"";return{c(){a=Be("p"),h=new Zn(!1),this.h()},l(g){a=Fe(g,"P",{class:!0});var c=Ye(a);h=Xn(c,!1),c.forEach(pe),this.h()},h(){h.a=null,re(a,"class",Ws(o[1])+" svelte-rnb746")},m(g,c){je(g,a,c),h.m(p,a)},p:ft,i:ft,o:ft,d(g){g&&pe(a)}}}function Wo(o){let a,h;const p=[Gr(o[2])];let g={};for(let c=0;c<p.length;c+=1)g=Oa(g,p[c]);return a=new Uo({props:g}),{c(){Ot(a.$$.fragment)},l(c){Rt(a.$$.fragment,c)},m(c,P){zt(a,c,P),h=!0},p(c,P){const O=P&1?Va(p,[Ba(Gr(c[2]))]):{};a.$set(O)},i(c){h||(Ue(a.$$.fragment,c),h=!0)},o(c){$e(a.$$.fragment,c),h=!1},d(c){Vt(a,c)}}}function Us(o){let a,h,p,g;const c=[Wo,jo],P=[];function O(B,D){return B[1]==="Component"?0:1}return a=O(o),h=P[a]=c[a](o),{c(){h.c(),p=Tt()},l(B){h.l(B),p=Tt()},m(B,D){P[a].m(B,D),je(B,p,D),g=!0},p(B,D){h.p(B,D)},i(B){g||(Ue(h),g=!0)},o(B){$e(h),g=!1},d(B){B&&pe(p),P[a].d(B)}}}function Go(o){let a,h=o[0].hed+"",p,g,c,P,O,B,D=o[0].author1+"",Z,K,oe,F,be=o[0].author2+"",te,ie,ee,fe=Pt(o[0].story),le=[];for(let ce=0;ce<fe.length;ce+=1)le[ce]=Us(Hs(o,fe,ce));const Me=ce=>$e(le[ce],1,1,()=>{le[ce]=null});return{c(){a=Be("h1"),p=At(h),g=_t(),c=Be("div"),P=Be("span"),O=At("By "),B=new Zn(!1),Z=_t(),K=Be("span"),oe=At("With "),F=new Zn(!1),te=_t();for(let ce=0;ce<le.length;ce+=1)le[ce].c();ie=Tt(),this.h()},l(ce){a=Fe(ce,"H1",{});var T=Ye(a);p=Et(T,h),T.forEach(pe),g=mt(ce),c=Fe(ce,"DIV",{class:!0});var xe=Ye(c);P=Fe(xe,"SPAN",{});var Le=Ye(P);O=Et(Le,"By "),B=Xn(Le,!1),Le.forEach(pe),Z=mt(xe),K=Fe(xe,"SPAN",{});var qe=Ye(K);oe=Et(qe,"With "),F=Xn(qe,!1),qe.forEach(pe),xe.forEach(pe),te=mt(ce);for(let nt=0;nt<le.length;nt+=1)le[nt].l(ce);ie=Tt(),this.h()},h(){B.a=null,F.a=null,re(c,"class","authors svelte-rnb746")},m(ce,T){je(ce,a,T),Ae(a,p),je(ce,g,T),je(ce,c,T),Ae(c,P),Ae(P,O),B.m(D,P),Ae(c,Z),Ae(c,K),Ae(K,oe),F.m(be,K),je(ce,te,T);for(let xe=0;xe<le.length;xe+=1)le[xe]&&le[xe].m(ce,T);je(ce,ie,T),ee=!0},p(ce,[T]){if(T&1){fe=Pt(ce[0].story);let xe;for(xe=0;xe<fe.length;xe+=1){const Le=Hs(ce,fe,xe);le[xe]?(le[xe].p(Le,T),Ue(le[xe],1)):(le[xe]=Us(Le),le[xe].c(),Ue(le[xe],1),le[xe].m(ie.parentNode,ie))}for(pi(),xe=fe.length;xe<le.length;xe+=1)Me(xe);gi()}},i(ce){if(!ee){for(let T=0;T<fe.length;T+=1)Ue(le[T]);ee=!0}},o(ce){le=le.filter(Boolean);for(let T=0;T<le.length;T+=1)$e(le[T]);ee=!1},d(ce){ce&&(pe(a),pe(g),pe(c),pe(te),pe(ie)),_i(le,ce)}}}function Zo(o){return[hi("copy")]}class Xo extends Kt{constructor(a){super(),Qt(this,a,Zo,Go,Xt,{})}}function Ko(o){let a,h,p,g,c,P;return a=new ja({}),p=new Ka({}),c=new Xo({}),{c(){Ot(a.$$.fragment),h=_t(),Ot(p.$$.fragment),g=_t(),Ot(c.$$.fragment)},l(O){Rt(a.$$.fragment,O),h=mt(O),Rt(p.$$.fragment,O),g=mt(O),Rt(c.$$.fragment,O)},m(O,B){zt(a,O,B),je(O,h,B),zt(p,O,B),je(O,g,B),zt(c,O,B),P=!0},p:ft,i(O){P||(Ue(a.$$.fragment,O),Ue(p.$$.fragment,O),Ue(c.$$.fragment,O),P=!0)},o(O){$e(a.$$.fragment,O),$e(p.$$.fragment,O),$e(c.$$.fragment,O),P=!1},d(O){O&&(pe(h),pe(g)),Vt(a,O),Vt(p,O),Vt(c,O)}}}function Qo(o){const a=hi("copy");return console.log({copy:a}),[]}class Yo extends Kt{constructor(a){super(),Qt(this,a,Qo,Ko,Xt,{})}}const Jo=[{type:"text",value:"This is a story about onions and math."},{type:"small",value:"Not your taste? Try something else from <a href=https://pudding.cool>The Pudding</a>."},{type:"text",value:"Tens of millions of people are curious about how to properly dice an onion, <a href=https://www.youtube.com/results?search_query=how+to+dice+an+onion target=_blank rel=noreferrer>according to YouTube</a>."},{type:"text",value:"In 2021, renowned Chef / food journalist J. Kenji López-Alt <a href=https://www.instagram.com/p/CV6L30MBFy8/ target=_blank rel=noreferrer>broke out some math</a> to optimize a technique for getting uniform piece sizes."},{type:"us",value:"How much does uniformity matter?"},{type:"kenji",value:"<em>It matters*</em> far more for winning internet debates and solving interesting math problems than it does for cooking. For home cooks, having an onion dice that's a little off from perfect is not really an issue anyone should seriously worry about."},{type:"note",value:"*Emphasis our own"},{type:"text",value:"Good enough for us!"}],$o="The Mathematically Optimal Way to Dice an Onion",el="<a target=_blank rel=noreferrer href=https://pudding.cool/author/andrew-aquino>Andrew Aquino</a>",tl="<a target=_blank rel=noreferrer href=https://pudding.cool/author/russell-samora>Russell Samora</a>",il=[{type:"text",value:"This is an onion. It is also a series of concentric circles. What’s the best way to cut it? That is, how do we get the most uniform piece size?"},{type:"Component",value:{showControls:"false",showCuts:"false"}},{type:"text",value:"Let’s try a common approach - <mark>all vertical cuts</mark>."},{type:"text",value:"The pieces <strong class=primary>near the center line</strong> are fairly consistent in shape and size."},{type:"text",value:"But <strong class=secondary>along the bottom</strong> there are some noticeably larger pieces. When you dice an onion, you’re probably not imagining pieces like these."},{type:"Component",value:{showControls:"false",highlightExtremes:"true"}},{type:"text",value:"This inconsistency can be measured by calculating the <strong>standard deviation</strong> of our pieces’ areas. A higher value means a greater variation in piece size."},{type:"Component",value:{toggleExplode:"true",showStandardDeviation:"true",caption:"Adjust the slider to see how the standard deviation changes with the number of cuts."}},{type:"text",value:"Okay, let’s try a different technique - <mark>radial cuts</mark>."},{type:"text",value:"The piece size still isn’t very consistent - those <strong class=primary>near the outside</strong> are much larger than those <strong class=secondary>near the center</strong>."},{type:"Component",value:{showControls:"false",cutType:"radial",highlightExtremes:"true"}},{type:"text",value:"How does the standard deviation of pieces cut radially compare to those cut vertically?"},{type:"Component",value:{cutType:"radial",controlCutType:"true",toggleExplode:"true",showStandardDeviation:"true"}},{type:"text",value:"But we can improve the radial cut strategy. Kenji claims that the most uniform pieces can be produced by <strong>aiming at a point ~60% of the onion’s radius below the cutting surface.</strong>"},{type:"text",value:"The pieces now look more consistent, except for a few smaller ones <strong class=primary>along the bottom</strong>."},{type:"Component",value:{showControls:"false",cutType:"radial",cutTargetDepthPercentage:"0.6",highlightExtremes:"true",showStandardDeviation:"true"}},{type:"text",value:"Does the math confirm this as the superior technique? / Here is our math suggestion."},{type:"Component",value:{controlCutType:"true",cutType:"radial",controlRadialDepth:"true",cutTargetDepthPercentage:"0.96",toggleExplode:"true",showStandardDeviation:"true"}},{type:"text",value:"Brief discussion of our differing methods if applicable."},{type:"text",value:"But there are more ways to dice an onion. Another popular technique is to start with horizontal cuts before vertical. <strong>Explore all the possibilities below to see the results</strong>."},{type:"Component",value:{controlLayers:"true",controlCutType:"true",controlRadialDepth:"true",controlHorizontalCuts:"true",toggleExplode:"true"}}],js={intro:Jo,hed:$o,author1:el,author2:tl,story:il};function nl(){console.log("--- --- --- --- --- ---"),console.log("svelte-starter: 5.14.0"),console.log("build: 2024-04-26-15:04"),console.log("--- --- --- --- --- ---")}function rl(o){let a,h,p,g;return a=new Ha({props:{title:o[1],description:o[2],url:o[3],preloadFont:o[0],keywords:o[4]}}),p=new Yo({}),{c(){Ot(a.$$.fragment),h=_t(),Ot(p.$$.fragment)},l(c){Rt(a.$$.fragment,c),h=mt(c),Rt(p.$$.fragment,c)},m(c,P){zt(a,c,P),je(c,h,P),zt(p,c,P),g=!0},p:ft,i(c){g||(Ue(a.$$.fragment,c),Ue(p.$$.fragment,c),g=!0)},o(c){$e(a.$$.fragment,c),$e(p.$$.fragment,c),g=!1},d(c){c&&pe(h),Vt(a,c),Vt(p,c)}}}function sl(o,a,h){let{data:p}=a;nl();const g=["https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Regular.woff2","https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Bold.woff2","https://pudding.cool/assets/fonts/national/National2Web-Regular.woff2","https://pudding.cool/assets/fonts/national/National2Web-Bold.woff2"],{title:c,description:P,url:O,keywords:B}=js;return Oi("copy",js),Oi("data",p.data),o.$$set=D=>{"data"in D&&h(5,p=D.data)},[g,c,P,O,B,p]}class cl extends Kt{constructor(a){super(),Qt(this,a,sl,rl,Xt,{data:5})}}export{cl as component};
